{"ast":null,"code":"import _classCallCheck from\"/Users/charlotteweil1/Projets/Viz/gobiTraining/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/charlotteweil1/Projets/Viz/gobiTraining/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/charlotteweil1/Projets/Viz/gobiTraining/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/charlotteweil1/Projets/Viz/gobiTraining/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import Container from\"react-bootstrap/Container\";import Col from\"react-bootstrap/Col\";import Row from\"react-bootstrap/Row\";import Map from\"../components/Map\";import LeftPanel from\"../components/LeftPanel\";import SecondaryPanel from\"./SecondaryPanel\";var Dashboard=/*#__PURE__*/function(_React$Component){_inherits(Dashboard,_React$Component);var _super=_createSuper(Dashboard);function Dashboard(props){var _this;_classCallCheck(this,Dashboard);_this=_super.call(this,props);_this.updateState=function(state){_this.setState({state:state});};_this.updateSelectedDatasets=function(state){_this.setState({selectedDatasets:state});};_this.updateDatasets=function(newdata){_this.setState({datasets:newdata});};_this.updateChartdata=function(columns){var chart=_this.state.chart;chart.columns=columns;_this.setState({chart:chart});};_this.closeInfo=function(){var statPanel=_this.state.SecondaryPanel;statPanel.show=false;_this.setState({SecondaryPanel:statPanel});};var selectedDatasets=[];props.data.datasets.forEach(function(element){if(element.selected){selectedDatasets.push(element.id);}});_this.state={config:props.data.config,baseMap:props.data.baseMap,dataSections:props.data.dataSections,datasets:props.data.datasets,chart:props.data.chart,SecondaryPanel:{show:false,id:0},selectedDatasets:selectedDatasets};return _this;}// functions to give to child components so they can change the overall state\n_createClass(Dashboard,[{key:\"componentDidUpdate\",value:function componentDidUpdate(){}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"position-relative dashboard-container h-80\"},/*#__PURE__*/React.createElement(Container,{fluid:true,className:\"\"},/*#__PURE__*/React.createElement(Row,{className:\"p-0 h-80\"},/*#__PURE__*/React.createElement(Col,{sm:3,className:\" p-2 bg-black\"},/*#__PURE__*/React.createElement(LeftPanel,{config:this.state.config,sections:this.state.dataSections,datasets:this.state.datasets,chart:this.state.chart,SecondaryPanel:this.state.SecondaryPanel,updateState:this.updateState,updateDatasets:this.updateDatasets,updateSelectedDatasets:this.updateSelectedDatasets,selectedDatasets:this.state.selectedDatasets})),this.state.SecondaryPanel.show&&/*#__PURE__*/React.createElement(Col,{sm:3,className:\" p-0 hidden-md-down bg-black \",style:{zIndex:\"2\"}},/*#__PURE__*/React.createElement(SecondaryPanel,{item:this.state.dataSections[this.state.SecondaryPanel.id],charts:this.state.charts,closeInfo:this.closeInfo})),/*#__PURE__*/React.createElement(Col,{sm:9,className:\"p-0 fixing\"},/*#__PURE__*/React.createElement(Map,{dataSections:this.state.dataSections,datasets:this.state.datasets,baseMap:this.state.baseMap,selectedDatasets:this.state.selectedDatasets,updateChart:this.updateChartdata,chartIsLinked:this.state.config.chartIsLinkedTo})))));}}]);return Dashboard;}(React.Component);export default Dashboard;","map":{"version":3,"sources":["/Users/charlotteweil1/Projets/Viz/gobiTraining/src/components/Dashboard.js"],"names":["React","Container","Col","Row","Map","LeftPanel","SecondaryPanel","Dashboard","props","updateState","state","setState","updateSelectedDatasets","selectedDatasets","updateDatasets","newdata","datasets","updateChartdata","columns","chart","closeInfo","statPanel","show","data","forEach","element","selected","push","id","config","baseMap","dataSections","zIndex","charts","chartIsLinkedTo","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Container from \"react-bootstrap/Container\";\nimport Col from \"react-bootstrap/Col\";\nimport Row from \"react-bootstrap/Row\";\n\nimport Map from \"../components/Map\";\nimport LeftPanel from \"../components/LeftPanel\";\nimport SecondaryPanel from \"./SecondaryPanel\";\n\nclass Dashboard extends React.Component {\n  constructor(props) {\n    super(props);\n    let selectedDatasets = [];\n    props.data.datasets.forEach((element) => {\n      if (element.selected) {\n        selectedDatasets.push(element.id);\n      }\n    });\n\n    this.state = {\n      config: props.data.config,\n      baseMap: props.data.baseMap,\n      dataSections: props.data.dataSections,\n      datasets: props.data.datasets,\n      chart: props.data.chart,\n      SecondaryPanel: {\n        show: false,\n        id: 0,\n      },\n      selectedDatasets: selectedDatasets,\n    };\n  }\n\n  // functions to give to child components so they can change the overall state\n  updateState = (state) => {\n    this.setState({ state });\n  };\n\n  updateSelectedDatasets = (state) => {\n    this.setState({ selectedDatasets: state });\n  };\n\n  updateDatasets = (newdata) => {\n    this.setState({ datasets: newdata });\n  };\n\n  // used for linking shapeiles with charts\n  updateChartdata = (columns) => {\n    let chart = this.state.chart;\n    chart.columns = columns;\n    this.setState({ chart: chart });\n  };\n\n  closeInfo = () => {\n    let statPanel = this.state.SecondaryPanel;\n    statPanel.show = false;\n    this.setState({ SecondaryPanel: statPanel });\n  };\n  componentDidUpdate() {}\n\n  render() {\n    return (\n      <div className=\"position-relative dashboard-container h-80\">\n        <Container fluid={true} className=\"\">\n          <Row className=\"p-0 h-80\">\n            <Col sm={3} className=\" p-2 bg-black\">\n              <LeftPanel\n                config={this.state.config}\n                sections={this.state.dataSections}\n                datasets={this.state.datasets}\n                chart={this.state.chart}\n                SecondaryPanel={this.state.SecondaryPanel}\n                updateState={this.updateState}\n                updateDatasets={this.updateDatasets}\n                updateSelectedDatasets={this.updateSelectedDatasets}\n                selectedDatasets={this.state.selectedDatasets}\n              />\n            </Col>\n            {this.state.SecondaryPanel.show && (\n              <Col\n                sm={3}\n                className=\" p-0 hidden-md-down bg-black \"\n                style={{ zIndex: \"2\" }}\n              >\n                <SecondaryPanel\n                  item={this.state.dataSections[this.state.SecondaryPanel.id]}\n                  charts={this.state.charts}\n                  closeInfo={this.closeInfo}\n                />\n              </Col>\n            )}\n            <Col sm={9} className=\"p-0 fixing\">\n              <Map\n                dataSections={this.state.dataSections}\n                datasets={this.state.datasets}\n                baseMap={this.state.baseMap}\n                selectedDatasets={this.state.selectedDatasets}\n                updateChart={this.updateChartdata}\n                chartIsLinked={this.state.config.chartIsLinkedTo}\n              />\n            </Col>\n          </Row>\n        </Container>\n      </div>\n    );\n  }\n}\n\nexport default Dashboard;\n"]},"metadata":{},"sourceType":"module"}