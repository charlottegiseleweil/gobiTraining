{"ast":null,"code":"/**\n * @license\n *\n * chroma.js - JavaScript library for color conversions\n * \n * Copyright (c) 2011-2017, Gregor Aisch\n * All rights reserved.\n * \n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n * \n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * \n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n * \n * 3. The name Gregor Aisch may not be used to endorse or promote products\n *    derived from this software without specific prior written permission.\n * \n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,\n * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n */\n(function () {\n  var Color,\n      DEG2RAD,\n      LAB_CONSTANTS,\n      PI,\n      PITHIRD,\n      RAD2DEG,\n      TWOPI,\n      _average_lrgb,\n      _guess_formats,\n      _guess_formats_sorted,\n      _input,\n      _interpolators,\n      abs,\n      atan2,\n      bezier,\n      blend,\n      blend_f,\n      brewer,\n      burn,\n      chroma,\n      clip_rgb,\n      cmyk2rgb,\n      colors,\n      cos,\n      css2rgb,\n      darken,\n      dodge,\n      each,\n      floor,\n      hcg2rgb,\n      hex2rgb,\n      hsi2rgb,\n      hsl2css,\n      hsl2rgb,\n      hsv2rgb,\n      interpolate,\n      interpolate_hsx,\n      interpolate_lab,\n      interpolate_lrgb,\n      interpolate_num,\n      interpolate_rgb,\n      lab2lch,\n      lab2rgb,\n      lab_xyz,\n      lch2lab,\n      lch2rgb,\n      lighten,\n      limit,\n      log,\n      luminance_x,\n      m,\n      max,\n      multiply,\n      normal,\n      num2rgb,\n      overlay,\n      pow,\n      rgb2cmyk,\n      rgb2css,\n      rgb2hcg,\n      rgb2hex,\n      rgb2hsi,\n      rgb2hsl,\n      rgb2hsv,\n      rgb2lab,\n      rgb2lch,\n      rgb2luminance,\n      rgb2num,\n      rgb2temperature,\n      rgb2xyz,\n      rgb_xyz,\n      rnd,\n      root,\n      round,\n      screen,\n      sin,\n      sqrt,\n      temperature2rgb,\n      type,\n      unpack,\n      w3cx11,\n      xyz_lab,\n      xyz_rgb,\n      slice = [].slice;\n\n  type = function () {\n    /*\n    for browser-safe type checking+\n    ported from jQuery's $.type\n     */\n    var classToType, len, name, o, ref;\n    classToType = {};\n    ref = \"Boolean Number String Function Array Date RegExp Undefined Null\".split(\" \");\n\n    for (o = 0, len = ref.length; o < len; o++) {\n      name = ref[o];\n      classToType[\"[object \" + name + \"]\"] = name.toLowerCase();\n    }\n\n    return function (obj) {\n      var strType;\n      strType = Object.prototype.toString.call(obj);\n      return classToType[strType] || \"object\";\n    };\n  }();\n\n  limit = function (x, min, max) {\n    if (min == null) {\n      min = 0;\n    }\n\n    if (max == null) {\n      max = 1;\n    }\n\n    if (x < min) {\n      x = min;\n    }\n\n    if (x > max) {\n      x = max;\n    }\n\n    return x;\n  };\n\n  unpack = function (args) {\n    if (args.length >= 3) {\n      return Array.prototype.slice.call(args);\n    } else {\n      return args[0];\n    }\n  };\n\n  clip_rgb = function (rgb) {\n    var i, o;\n    rgb._clipped = false;\n    rgb._unclipped = rgb.slice(0);\n\n    for (i = o = 0; o < 3; i = ++o) {\n      if (i < 3) {\n        if (rgb[i] < 0 || rgb[i] > 255) {\n          rgb._clipped = true;\n        }\n\n        if (rgb[i] < 0) {\n          rgb[i] = 0;\n        }\n\n        if (rgb[i] > 255) {\n          rgb[i] = 255;\n        }\n      } else if (i === 3) {\n        if (rgb[i] < 0) {\n          rgb[i] = 0;\n        }\n\n        if (rgb[i] > 1) {\n          rgb[i] = 1;\n        }\n      }\n    }\n\n    if (!rgb._clipped) {\n      delete rgb._unclipped;\n    }\n\n    return rgb;\n  };\n\n  PI = Math.PI, round = Math.round, cos = Math.cos, floor = Math.floor, pow = Math.pow, log = Math.log, sin = Math.sin, sqrt = Math.sqrt, atan2 = Math.atan2, max = Math.max, abs = Math.abs;\n  TWOPI = PI * 2;\n  PITHIRD = PI / 3;\n  DEG2RAD = PI / 180;\n  RAD2DEG = 180 / PI;\n\n  chroma = function () {\n    if (arguments[0] instanceof Color) {\n      return arguments[0];\n    }\n\n    return function (func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor(),\n          result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    }(Color, arguments, function () {});\n  };\n\n  chroma[\"default\"] = chroma;\n  _interpolators = [];\n\n  if (typeof module !== \"undefined\" && module !== null && module.exports != null) {\n    module.exports = chroma;\n  }\n\n  if (typeof define === 'function' && define.amd) {\n    define([], function () {\n      return chroma;\n    });\n  } else {\n    root = typeof exports !== \"undefined\" && exports !== null ? exports : this;\n    root.chroma = chroma;\n  }\n\n  chroma.version = '1.4.1';\n  _input = {};\n  _guess_formats = [];\n  _guess_formats_sorted = false;\n\n  Color = function () {\n    function Color() {\n      var arg, args, chk, len, len1, me, mode, o, w;\n      me = this;\n      args = [];\n\n      for (o = 0, len = arguments.length; o < len; o++) {\n        arg = arguments[o];\n\n        if (arg != null) {\n          args.push(arg);\n        }\n      }\n\n      if (args.length > 1) {\n        mode = args[args.length - 1];\n      }\n\n      if (_input[mode] != null) {\n        me._rgb = clip_rgb(_input[mode](unpack(args.slice(0, -1))));\n      } else {\n        if (!_guess_formats_sorted) {\n          _guess_formats = _guess_formats.sort(function (a, b) {\n            return b.p - a.p;\n          });\n          _guess_formats_sorted = true;\n        }\n\n        for (w = 0, len1 = _guess_formats.length; w < len1; w++) {\n          chk = _guess_formats[w];\n          mode = chk.test.apply(chk, args);\n\n          if (mode) {\n            break;\n          }\n        }\n\n        if (mode) {\n          me._rgb = clip_rgb(_input[mode].apply(_input, args));\n        }\n      }\n\n      if (me._rgb == null) {\n        console.warn('unknown format: ' + args);\n      }\n\n      if (me._rgb == null) {\n        me._rgb = [0, 0, 0];\n      }\n\n      if (me._rgb.length === 3) {\n        me._rgb.push(1);\n      }\n    }\n\n    Color.prototype.toString = function () {\n      return this.hex();\n    };\n\n    return Color;\n  }();\n\n  chroma._input = _input;\n  /**\n  \tColorBrewer colors for chroma.js\n  \n  \tCopyright (c) 2002 Cynthia Brewer, Mark Harrower, and The \n  \tPennsylvania State University.\n  \n  \tLicensed under the Apache License, Version 2.0 (the \"License\"); \n  \tyou may not use this file except in compliance with the License.\n  \tYou may obtain a copy of the License at\t\n  \thttp://www.apache.org/licenses/LICENSE-2.0\n  \n  \tUnless required by applicable law or agreed to in writing, software distributed\n  \tunder the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n  \tCONDITIONS OF ANY KIND, either express or implied. See the License for the\n  \tspecific language governing permissions and limitations under the License.\n  \n      @preserve\n   */\n\n  chroma.brewer = brewer = {\n    OrRd: ['#fff7ec', '#fee8c8', '#fdd49e', '#fdbb84', '#fc8d59', '#ef6548', '#d7301f', '#b30000', '#7f0000'],\n    PuBu: ['#fff7fb', '#ece7f2', '#d0d1e6', '#a6bddb', '#74a9cf', '#3690c0', '#0570b0', '#045a8d', '#023858'],\n    BuPu: ['#f7fcfd', '#e0ecf4', '#bfd3e6', '#9ebcda', '#8c96c6', '#8c6bb1', '#88419d', '#810f7c', '#4d004b'],\n    Oranges: ['#fff5eb', '#fee6ce', '#fdd0a2', '#fdae6b', '#fd8d3c', '#f16913', '#d94801', '#a63603', '#7f2704'],\n    BuGn: ['#f7fcfd', '#e5f5f9', '#ccece6', '#99d8c9', '#66c2a4', '#41ae76', '#238b45', '#006d2c', '#00441b'],\n    YlOrBr: ['#ffffe5', '#fff7bc', '#fee391', '#fec44f', '#fe9929', '#ec7014', '#cc4c02', '#993404', '#662506'],\n    YlGn: ['#ffffe5', '#f7fcb9', '#d9f0a3', '#addd8e', '#78c679', '#41ab5d', '#238443', '#006837', '#004529'],\n    Reds: ['#fff5f0', '#fee0d2', '#fcbba1', '#fc9272', '#fb6a4a', '#ef3b2c', '#cb181d', '#a50f15', '#67000d'],\n    RdPu: ['#fff7f3', '#fde0dd', '#fcc5c0', '#fa9fb5', '#f768a1', '#dd3497', '#ae017e', '#7a0177', '#49006a'],\n    Greens: ['#f7fcf5', '#e5f5e0', '#c7e9c0', '#a1d99b', '#74c476', '#41ab5d', '#238b45', '#006d2c', '#00441b'],\n    YlGnBu: ['#ffffd9', '#edf8b1', '#c7e9b4', '#7fcdbb', '#41b6c4', '#1d91c0', '#225ea8', '#253494', '#081d58'],\n    Purples: ['#fcfbfd', '#efedf5', '#dadaeb', '#bcbddc', '#9e9ac8', '#807dba', '#6a51a3', '#54278f', '#3f007d'],\n    GnBu: ['#f7fcf0', '#e0f3db', '#ccebc5', '#a8ddb5', '#7bccc4', '#4eb3d3', '#2b8cbe', '#0868ac', '#084081'],\n    Greys: ['#ffffff', '#f0f0f0', '#d9d9d9', '#bdbdbd', '#969696', '#737373', '#525252', '#252525', '#000000'],\n    YlOrRd: ['#ffffcc', '#ffeda0', '#fed976', '#feb24c', '#fd8d3c', '#fc4e2a', '#e31a1c', '#bd0026', '#800026'],\n    PuRd: ['#f7f4f9', '#e7e1ef', '#d4b9da', '#c994c7', '#df65b0', '#e7298a', '#ce1256', '#980043', '#67001f'],\n    Blues: ['#f7fbff', '#deebf7', '#c6dbef', '#9ecae1', '#6baed6', '#4292c6', '#2171b5', '#08519c', '#08306b'],\n    PuBuGn: ['#fff7fb', '#ece2f0', '#d0d1e6', '#a6bddb', '#67a9cf', '#3690c0', '#02818a', '#016c59', '#014636'],\n    Viridis: ['#440154', '#482777', '#3f4a8a', '#31678e', '#26838f', '#1f9d8a', '#6cce5a', '#b6de2b', '#fee825'],\n    Spectral: ['#9e0142', '#d53e4f', '#f46d43', '#fdae61', '#fee08b', '#ffffbf', '#e6f598', '#abdda4', '#66c2a5', '#3288bd', '#5e4fa2'],\n    RdYlGn: ['#a50026', '#d73027', '#f46d43', '#fdae61', '#fee08b', '#ffffbf', '#d9ef8b', '#a6d96a', '#66bd63', '#1a9850', '#006837'],\n    RdBu: ['#67001f', '#b2182b', '#d6604d', '#f4a582', '#fddbc7', '#f7f7f7', '#d1e5f0', '#92c5de', '#4393c3', '#2166ac', '#053061'],\n    PiYG: ['#8e0152', '#c51b7d', '#de77ae', '#f1b6da', '#fde0ef', '#f7f7f7', '#e6f5d0', '#b8e186', '#7fbc41', '#4d9221', '#276419'],\n    PRGn: ['#40004b', '#762a83', '#9970ab', '#c2a5cf', '#e7d4e8', '#f7f7f7', '#d9f0d3', '#a6dba0', '#5aae61', '#1b7837', '#00441b'],\n    RdYlBu: ['#a50026', '#d73027', '#f46d43', '#fdae61', '#fee090', '#ffffbf', '#e0f3f8', '#abd9e9', '#74add1', '#4575b4', '#313695'],\n    BrBG: ['#543005', '#8c510a', '#bf812d', '#dfc27d', '#f6e8c3', '#f5f5f5', '#c7eae5', '#80cdc1', '#35978f', '#01665e', '#003c30'],\n    RdGy: ['#67001f', '#b2182b', '#d6604d', '#f4a582', '#fddbc7', '#ffffff', '#e0e0e0', '#bababa', '#878787', '#4d4d4d', '#1a1a1a'],\n    PuOr: ['#7f3b08', '#b35806', '#e08214', '#fdb863', '#fee0b6', '#f7f7f7', '#d8daeb', '#b2abd2', '#8073ac', '#542788', '#2d004b'],\n    Set2: ['#66c2a5', '#fc8d62', '#8da0cb', '#e78ac3', '#a6d854', '#ffd92f', '#e5c494', '#b3b3b3'],\n    Accent: ['#7fc97f', '#beaed4', '#fdc086', '#ffff99', '#386cb0', '#f0027f', '#bf5b17', '#666666'],\n    Set1: ['#e41a1c', '#377eb8', '#4daf4a', '#984ea3', '#ff7f00', '#ffff33', '#a65628', '#f781bf', '#999999'],\n    Set3: ['#8dd3c7', '#ffffb3', '#bebada', '#fb8072', '#80b1d3', '#fdb462', '#b3de69', '#fccde5', '#d9d9d9', '#bc80bd', '#ccebc5', '#ffed6f'],\n    Dark2: ['#1b9e77', '#d95f02', '#7570b3', '#e7298a', '#66a61e', '#e6ab02', '#a6761d', '#666666'],\n    Paired: ['#a6cee3', '#1f78b4', '#b2df8a', '#33a02c', '#fb9a99', '#e31a1c', '#fdbf6f', '#ff7f00', '#cab2d6', '#6a3d9a', '#ffff99', '#b15928'],\n    Pastel2: ['#b3e2cd', '#fdcdac', '#cbd5e8', '#f4cae4', '#e6f5c9', '#fff2ae', '#f1e2cc', '#cccccc'],\n    Pastel1: ['#fbb4ae', '#b3cde3', '#ccebc5', '#decbe4', '#fed9a6', '#ffffcc', '#e5d8bd', '#fddaec', '#f2f2f2']\n  };\n\n  (function () {\n    var key, results;\n    results = [];\n\n    for (key in brewer) {\n      results.push(brewer[key.toLowerCase()] = brewer[key]);\n    }\n\n    return results;\n  })();\n  /**\n  \tX11 color names\n  \n  \thttp://www.w3.org/TR/css3-color/#svg-color\n   */\n\n\n  w3cx11 = {\n    aliceblue: '#f0f8ff',\n    antiquewhite: '#faebd7',\n    aqua: '#00ffff',\n    aquamarine: '#7fffd4',\n    azure: '#f0ffff',\n    beige: '#f5f5dc',\n    bisque: '#ffe4c4',\n    black: '#000000',\n    blanchedalmond: '#ffebcd',\n    blue: '#0000ff',\n    blueviolet: '#8a2be2',\n    brown: '#a52a2a',\n    burlywood: '#deb887',\n    cadetblue: '#5f9ea0',\n    chartreuse: '#7fff00',\n    chocolate: '#d2691e',\n    coral: '#ff7f50',\n    cornflower: '#6495ed',\n    cornflowerblue: '#6495ed',\n    cornsilk: '#fff8dc',\n    crimson: '#dc143c',\n    cyan: '#00ffff',\n    darkblue: '#00008b',\n    darkcyan: '#008b8b',\n    darkgoldenrod: '#b8860b',\n    darkgray: '#a9a9a9',\n    darkgreen: '#006400',\n    darkgrey: '#a9a9a9',\n    darkkhaki: '#bdb76b',\n    darkmagenta: '#8b008b',\n    darkolivegreen: '#556b2f',\n    darkorange: '#ff8c00',\n    darkorchid: '#9932cc',\n    darkred: '#8b0000',\n    darksalmon: '#e9967a',\n    darkseagreen: '#8fbc8f',\n    darkslateblue: '#483d8b',\n    darkslategray: '#2f4f4f',\n    darkslategrey: '#2f4f4f',\n    darkturquoise: '#00ced1',\n    darkviolet: '#9400d3',\n    deeppink: '#ff1493',\n    deepskyblue: '#00bfff',\n    dimgray: '#696969',\n    dimgrey: '#696969',\n    dodgerblue: '#1e90ff',\n    firebrick: '#b22222',\n    floralwhite: '#fffaf0',\n    forestgreen: '#228b22',\n    fuchsia: '#ff00ff',\n    gainsboro: '#dcdcdc',\n    ghostwhite: '#f8f8ff',\n    gold: '#ffd700',\n    goldenrod: '#daa520',\n    gray: '#808080',\n    green: '#008000',\n    greenyellow: '#adff2f',\n    grey: '#808080',\n    honeydew: '#f0fff0',\n    hotpink: '#ff69b4',\n    indianred: '#cd5c5c',\n    indigo: '#4b0082',\n    ivory: '#fffff0',\n    khaki: '#f0e68c',\n    laserlemon: '#ffff54',\n    lavender: '#e6e6fa',\n    lavenderblush: '#fff0f5',\n    lawngreen: '#7cfc00',\n    lemonchiffon: '#fffacd',\n    lightblue: '#add8e6',\n    lightcoral: '#f08080',\n    lightcyan: '#e0ffff',\n    lightgoldenrod: '#fafad2',\n    lightgoldenrodyellow: '#fafad2',\n    lightgray: '#d3d3d3',\n    lightgreen: '#90ee90',\n    lightgrey: '#d3d3d3',\n    lightpink: '#ffb6c1',\n    lightsalmon: '#ffa07a',\n    lightseagreen: '#20b2aa',\n    lightskyblue: '#87cefa',\n    lightslategray: '#778899',\n    lightslategrey: '#778899',\n    lightsteelblue: '#b0c4de',\n    lightyellow: '#ffffe0',\n    lime: '#00ff00',\n    limegreen: '#32cd32',\n    linen: '#faf0e6',\n    magenta: '#ff00ff',\n    maroon: '#800000',\n    maroon2: '#7f0000',\n    maroon3: '#b03060',\n    mediumaquamarine: '#66cdaa',\n    mediumblue: '#0000cd',\n    mediumorchid: '#ba55d3',\n    mediumpurple: '#9370db',\n    mediumseagreen: '#3cb371',\n    mediumslateblue: '#7b68ee',\n    mediumspringgreen: '#00fa9a',\n    mediumturquoise: '#48d1cc',\n    mediumvioletred: '#c71585',\n    midnightblue: '#191970',\n    mintcream: '#f5fffa',\n    mistyrose: '#ffe4e1',\n    moccasin: '#ffe4b5',\n    navajowhite: '#ffdead',\n    navy: '#000080',\n    oldlace: '#fdf5e6',\n    olive: '#808000',\n    olivedrab: '#6b8e23',\n    orange: '#ffa500',\n    orangered: '#ff4500',\n    orchid: '#da70d6',\n    palegoldenrod: '#eee8aa',\n    palegreen: '#98fb98',\n    paleturquoise: '#afeeee',\n    palevioletred: '#db7093',\n    papayawhip: '#ffefd5',\n    peachpuff: '#ffdab9',\n    peru: '#cd853f',\n    pink: '#ffc0cb',\n    plum: '#dda0dd',\n    powderblue: '#b0e0e6',\n    purple: '#800080',\n    purple2: '#7f007f',\n    purple3: '#a020f0',\n    rebeccapurple: '#663399',\n    red: '#ff0000',\n    rosybrown: '#bc8f8f',\n    royalblue: '#4169e1',\n    saddlebrown: '#8b4513',\n    salmon: '#fa8072',\n    sandybrown: '#f4a460',\n    seagreen: '#2e8b57',\n    seashell: '#fff5ee',\n    sienna: '#a0522d',\n    silver: '#c0c0c0',\n    skyblue: '#87ceeb',\n    slateblue: '#6a5acd',\n    slategray: '#708090',\n    slategrey: '#708090',\n    snow: '#fffafa',\n    springgreen: '#00ff7f',\n    steelblue: '#4682b4',\n    tan: '#d2b48c',\n    teal: '#008080',\n    thistle: '#d8bfd8',\n    tomato: '#ff6347',\n    turquoise: '#40e0d0',\n    violet: '#ee82ee',\n    wheat: '#f5deb3',\n    white: '#ffffff',\n    whitesmoke: '#f5f5f5',\n    yellow: '#ffff00',\n    yellowgreen: '#9acd32'\n  };\n  chroma.colors = colors = w3cx11;\n\n  lab2rgb = function () {\n    var a, args, b, g, l, r, x, y, z;\n    args = unpack(arguments);\n    l = args[0], a = args[1], b = args[2];\n    y = (l + 16) / 116;\n    x = isNaN(a) ? y : y + a / 500;\n    z = isNaN(b) ? y : y - b / 200;\n    y = LAB_CONSTANTS.Yn * lab_xyz(y);\n    x = LAB_CONSTANTS.Xn * lab_xyz(x);\n    z = LAB_CONSTANTS.Zn * lab_xyz(z);\n    r = xyz_rgb(3.2404542 * x - 1.5371385 * y - 0.4985314 * z);\n    g = xyz_rgb(-0.9692660 * x + 1.8760108 * y + 0.0415560 * z);\n    b = xyz_rgb(0.0556434 * x - 0.2040259 * y + 1.0572252 * z);\n    return [r, g, b, args.length > 3 ? args[3] : 1];\n  };\n\n  xyz_rgb = function (r) {\n    return 255 * (r <= 0.00304 ? 12.92 * r : 1.055 * pow(r, 1 / 2.4) - 0.055);\n  };\n\n  lab_xyz = function (t) {\n    if (t > LAB_CONSTANTS.t1) {\n      return t * t * t;\n    } else {\n      return LAB_CONSTANTS.t2 * (t - LAB_CONSTANTS.t0);\n    }\n  };\n\n  LAB_CONSTANTS = {\n    Kn: 18,\n    Xn: 0.950470,\n    Yn: 1,\n    Zn: 1.088830,\n    t0: 0.137931034,\n    t1: 0.206896552,\n    t2: 0.12841855,\n    t3: 0.008856452\n  };\n\n  rgb2lab = function () {\n    var b, g, r, ref, ref1, x, y, z;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    ref1 = rgb2xyz(r, g, b), x = ref1[0], y = ref1[1], z = ref1[2];\n    return [116 * y - 16, 500 * (x - y), 200 * (y - z)];\n  };\n\n  rgb_xyz = function (r) {\n    if ((r /= 255) <= 0.04045) {\n      return r / 12.92;\n    } else {\n      return pow((r + 0.055) / 1.055, 2.4);\n    }\n  };\n\n  xyz_lab = function (t) {\n    if (t > LAB_CONSTANTS.t3) {\n      return pow(t, 1 / 3);\n    } else {\n      return t / LAB_CONSTANTS.t2 + LAB_CONSTANTS.t0;\n    }\n  };\n\n  rgb2xyz = function () {\n    var b, g, r, ref, x, y, z;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    r = rgb_xyz(r);\n    g = rgb_xyz(g);\n    b = rgb_xyz(b);\n    x = xyz_lab((0.4124564 * r + 0.3575761 * g + 0.1804375 * b) / LAB_CONSTANTS.Xn);\n    y = xyz_lab((0.2126729 * r + 0.7151522 * g + 0.0721750 * b) / LAB_CONSTANTS.Yn);\n    z = xyz_lab((0.0193339 * r + 0.1191920 * g + 0.9503041 * b) / LAB_CONSTANTS.Zn);\n    return [x, y, z];\n  };\n\n  chroma.lab = function () {\n    return function (func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor(),\n          result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    }(Color, slice.call(arguments).concat(['lab']), function () {});\n  };\n\n  _input.lab = lab2rgb;\n\n  Color.prototype.lab = function () {\n    return rgb2lab(this._rgb);\n  };\n\n  bezier = function (colors) {\n    var I, I0, I1, c, lab0, lab1, lab2, lab3, ref, ref1, ref2;\n\n    colors = function () {\n      var len, o, results;\n      results = [];\n\n      for (o = 0, len = colors.length; o < len; o++) {\n        c = colors[o];\n        results.push(chroma(c));\n      }\n\n      return results;\n    }();\n\n    if (colors.length === 2) {\n      ref = function () {\n        var len, o, results;\n        results = [];\n\n        for (o = 0, len = colors.length; o < len; o++) {\n          c = colors[o];\n          results.push(c.lab());\n        }\n\n        return results;\n      }(), lab0 = ref[0], lab1 = ref[1];\n\n      I = function (t) {\n        var i, lab;\n\n        lab = function () {\n          var o, results;\n          results = [];\n\n          for (i = o = 0; o <= 2; i = ++o) {\n            results.push(lab0[i] + t * (lab1[i] - lab0[i]));\n          }\n\n          return results;\n        }();\n\n        return chroma.lab.apply(chroma, lab);\n      };\n    } else if (colors.length === 3) {\n      ref1 = function () {\n        var len, o, results;\n        results = [];\n\n        for (o = 0, len = colors.length; o < len; o++) {\n          c = colors[o];\n          results.push(c.lab());\n        }\n\n        return results;\n      }(), lab0 = ref1[0], lab1 = ref1[1], lab2 = ref1[2];\n\n      I = function (t) {\n        var i, lab;\n\n        lab = function () {\n          var o, results;\n          results = [];\n\n          for (i = o = 0; o <= 2; i = ++o) {\n            results.push((1 - t) * (1 - t) * lab0[i] + 2 * (1 - t) * t * lab1[i] + t * t * lab2[i]);\n          }\n\n          return results;\n        }();\n\n        return chroma.lab.apply(chroma, lab);\n      };\n    } else if (colors.length === 4) {\n      ref2 = function () {\n        var len, o, results;\n        results = [];\n\n        for (o = 0, len = colors.length; o < len; o++) {\n          c = colors[o];\n          results.push(c.lab());\n        }\n\n        return results;\n      }(), lab0 = ref2[0], lab1 = ref2[1], lab2 = ref2[2], lab3 = ref2[3];\n\n      I = function (t) {\n        var i, lab;\n\n        lab = function () {\n          var o, results;\n          results = [];\n\n          for (i = o = 0; o <= 2; i = ++o) {\n            results.push((1 - t) * (1 - t) * (1 - t) * lab0[i] + 3 * (1 - t) * (1 - t) * t * lab1[i] + 3 * (1 - t) * t * t * lab2[i] + t * t * t * lab3[i]);\n          }\n\n          return results;\n        }();\n\n        return chroma.lab.apply(chroma, lab);\n      };\n    } else if (colors.length === 5) {\n      I0 = bezier(colors.slice(0, 3));\n      I1 = bezier(colors.slice(2, 5));\n\n      I = function (t) {\n        if (t < 0.5) {\n          return I0(t * 2);\n        } else {\n          return I1((t - 0.5) * 2);\n        }\n      };\n    }\n\n    return I;\n  };\n\n  chroma.bezier = function (colors) {\n    var f;\n    f = bezier(colors);\n\n    f.scale = function () {\n      return chroma.scale(f);\n    };\n\n    return f;\n  };\n\n  chroma.cubehelix = function (start, rotations, hue, gamma, lightness) {\n    var dh, dl, f;\n\n    if (start == null) {\n      start = 300;\n    }\n\n    if (rotations == null) {\n      rotations = -1.5;\n    }\n\n    if (hue == null) {\n      hue = 1;\n    }\n\n    if (gamma == null) {\n      gamma = 1;\n    }\n\n    if (lightness == null) {\n      lightness = [0, 1];\n    }\n\n    dh = 0;\n\n    if (type(lightness) === 'array') {\n      dl = lightness[1] - lightness[0];\n    } else {\n      dl = 0;\n      lightness = [lightness, lightness];\n    }\n\n    f = function (fract) {\n      var a, amp, b, cos_a, g, h, l, r, sin_a;\n      a = TWOPI * ((start + 120) / 360 + rotations * fract);\n      l = pow(lightness[0] + dl * fract, gamma);\n      h = dh !== 0 ? hue[0] + fract * dh : hue;\n      amp = h * l * (1 - l) / 2;\n      cos_a = cos(a);\n      sin_a = sin(a);\n      r = l + amp * (-0.14861 * cos_a + 1.78277 * sin_a);\n      g = l + amp * (-0.29227 * cos_a - 0.90649 * sin_a);\n      b = l + amp * (+1.97294 * cos_a);\n      return chroma(clip_rgb([r * 255, g * 255, b * 255, 1]));\n    };\n\n    f.start = function (s) {\n      if (s == null) {\n        return start;\n      }\n\n      start = s;\n      return f;\n    };\n\n    f.rotations = function (r) {\n      if (r == null) {\n        return rotations;\n      }\n\n      rotations = r;\n      return f;\n    };\n\n    f.gamma = function (g) {\n      if (g == null) {\n        return gamma;\n      }\n\n      gamma = g;\n      return f;\n    };\n\n    f.hue = function (h) {\n      if (h == null) {\n        return hue;\n      }\n\n      hue = h;\n\n      if (type(hue) === 'array') {\n        dh = hue[1] - hue[0];\n\n        if (dh === 0) {\n          hue = hue[1];\n        }\n      } else {\n        dh = 0;\n      }\n\n      return f;\n    };\n\n    f.lightness = function (h) {\n      if (h == null) {\n        return lightness;\n      }\n\n      if (type(h) === 'array') {\n        lightness = h;\n        dl = h[1] - h[0];\n      } else {\n        lightness = [h, h];\n        dl = 0;\n      }\n\n      return f;\n    };\n\n    f.scale = function () {\n      return chroma.scale(f);\n    };\n\n    f.hue(hue);\n    return f;\n  };\n\n  chroma.random = function () {\n    var code, digits, i, o;\n    digits = '0123456789abcdef';\n    code = '#';\n\n    for (i = o = 0; o < 6; i = ++o) {\n      code += digits.charAt(floor(Math.random() * 16));\n    }\n\n    return new Color(code);\n  };\n\n  _interpolators = [];\n\n  interpolate = function (col1, col2, f, m) {\n    var interpol, len, o, res;\n\n    if (f == null) {\n      f = 0.5;\n    }\n\n    if (m == null) {\n      m = 'rgb';\n    }\n    /*\n    interpolates between colors\n    f = 0 --> me\n    f = 1 --> col\n     */\n\n\n    if (type(col1) !== 'object') {\n      col1 = chroma(col1);\n    }\n\n    if (type(col2) !== 'object') {\n      col2 = chroma(col2);\n    }\n\n    for (o = 0, len = _interpolators.length; o < len; o++) {\n      interpol = _interpolators[o];\n\n      if (m === interpol[0]) {\n        res = interpol[1](col1, col2, f, m);\n        break;\n      }\n    }\n\n    if (res == null) {\n      throw \"color mode \" + m + \" is not supported\";\n    }\n\n    return res.alpha(col1.alpha() + f * (col2.alpha() - col1.alpha()));\n  };\n\n  chroma.interpolate = interpolate;\n\n  Color.prototype.interpolate = function (col2, f, m) {\n    return interpolate(this, col2, f, m);\n  };\n\n  chroma.mix = interpolate;\n  Color.prototype.mix = Color.prototype.interpolate;\n\n  _input.rgb = function () {\n    var k, ref, results, v;\n    ref = unpack(arguments);\n    results = [];\n\n    for (k in ref) {\n      v = ref[k];\n      results.push(v);\n    }\n\n    return results;\n  };\n\n  chroma.rgb = function () {\n    return function (func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor(),\n          result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    }(Color, slice.call(arguments).concat(['rgb']), function () {});\n  };\n\n  Color.prototype.rgb = function (round) {\n    if (round == null) {\n      round = true;\n    }\n\n    if (round) {\n      return this._rgb.map(Math.round).slice(0, 3);\n    } else {\n      return this._rgb.slice(0, 3);\n    }\n  };\n\n  Color.prototype.rgba = function (round) {\n    if (round == null) {\n      round = true;\n    }\n\n    if (!round) {\n      return this._rgb.slice(0);\n    }\n\n    return [Math.round(this._rgb[0]), Math.round(this._rgb[1]), Math.round(this._rgb[2]), this._rgb[3]];\n  };\n\n  _guess_formats.push({\n    p: 3,\n    test: function (n) {\n      var a;\n      a = unpack(arguments);\n\n      if (type(a) === 'array' && a.length === 3) {\n        return 'rgb';\n      }\n\n      if (a.length === 4 && type(a[3]) === \"number\" && a[3] >= 0 && a[3] <= 1) {\n        return 'rgb';\n      }\n    }\n  });\n\n  _input.lrgb = _input.rgb;\n\n  interpolate_lrgb = function (col1, col2, f, m) {\n    var xyz0, xyz1;\n    xyz0 = col1._rgb;\n    xyz1 = col2._rgb;\n    return new Color(sqrt(pow(xyz0[0], 2) * (1 - f) + pow(xyz1[0], 2) * f), sqrt(pow(xyz0[1], 2) * (1 - f) + pow(xyz1[1], 2) * f), sqrt(pow(xyz0[2], 2) * (1 - f) + pow(xyz1[2], 2) * f), m);\n  };\n\n  _average_lrgb = function (colors) {\n    var col, f, len, o, rgb, xyz;\n    f = 1 / colors.length;\n    xyz = [0, 0, 0, 0];\n\n    for (o = 0, len = colors.length; o < len; o++) {\n      col = colors[o];\n      rgb = col._rgb;\n      xyz[0] += pow(rgb[0], 2) * f;\n      xyz[1] += pow(rgb[1], 2) * f;\n      xyz[2] += pow(rgb[2], 2) * f;\n      xyz[3] += rgb[3] * f;\n    }\n\n    xyz[0] = sqrt(xyz[0]);\n    xyz[1] = sqrt(xyz[1]);\n    xyz[2] = sqrt(xyz[2]);\n\n    if (xyz[3] > 1) {\n      xyz[3] = 1;\n    }\n\n    return new Color(clip_rgb(xyz));\n  };\n\n  _interpolators.push(['lrgb', interpolate_lrgb]);\n\n  chroma.average = function (colors, mode) {\n    var A, alpha, c, cnt, dx, dy, first, i, l, len, o, xyz, xyz2;\n\n    if (mode == null) {\n      mode = 'rgb';\n    }\n\n    l = colors.length;\n    colors = colors.map(function (c) {\n      return chroma(c);\n    });\n    first = colors.splice(0, 1)[0];\n\n    if (mode === 'lrgb') {\n      return _average_lrgb(colors);\n    }\n\n    xyz = first.get(mode);\n    cnt = [];\n    dx = 0;\n    dy = 0;\n\n    for (i in xyz) {\n      xyz[i] = xyz[i] || 0;\n      cnt.push(isNaN(xyz[i]) ? 0 : 1);\n\n      if (mode.charAt(i) === 'h' && !isNaN(xyz[i])) {\n        A = xyz[i] / 180 * PI;\n        dx += cos(A);\n        dy += sin(A);\n      }\n    }\n\n    alpha = first.alpha();\n\n    for (o = 0, len = colors.length; o < len; o++) {\n      c = colors[o];\n      xyz2 = c.get(mode);\n      alpha += c.alpha();\n\n      for (i in xyz) {\n        if (!isNaN(xyz2[i])) {\n          cnt[i] += 1;\n\n          if (mode.charAt(i) === 'h') {\n            A = xyz2[i] / 180 * PI;\n            dx += cos(A);\n            dy += sin(A);\n          } else {\n            xyz[i] += xyz2[i];\n          }\n        }\n      }\n    }\n\n    for (i in xyz) {\n      if (mode.charAt(i) === 'h') {\n        A = atan2(dy / cnt[i], dx / cnt[i]) / PI * 180;\n\n        while (A < 0) {\n          A += 360;\n        }\n\n        while (A >= 360) {\n          A -= 360;\n        }\n\n        xyz[i] = A;\n      } else {\n        xyz[i] = xyz[i] / cnt[i];\n      }\n    }\n\n    return chroma(xyz, mode).alpha(alpha / l);\n  };\n\n  hex2rgb = function (hex) {\n    var a, b, g, r, rgb, u;\n\n    if (hex.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/)) {\n      if (hex.length === 4 || hex.length === 7) {\n        hex = hex.substr(1);\n      }\n\n      if (hex.length === 3) {\n        hex = hex.split(\"\");\n        hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];\n      }\n\n      u = parseInt(hex, 16);\n      r = u >> 16;\n      g = u >> 8 & 0xFF;\n      b = u & 0xFF;\n      return [r, g, b, 1];\n    }\n\n    if (hex.match(/^#?([A-Fa-f0-9]{8})$/)) {\n      if (hex.length === 9) {\n        hex = hex.substr(1);\n      }\n\n      u = parseInt(hex, 16);\n      r = u >> 24 & 0xFF;\n      g = u >> 16 & 0xFF;\n      b = u >> 8 & 0xFF;\n      a = round((u & 0xFF) / 0xFF * 100) / 100;\n      return [r, g, b, a];\n    }\n\n    if (_input.css != null && (rgb = _input.css(hex))) {\n      return rgb;\n    }\n\n    throw \"unknown color: \" + hex;\n  };\n\n  rgb2hex = function (channels, mode) {\n    var a, b, g, hxa, r, str, u;\n\n    if (mode == null) {\n      mode = 'auto';\n    }\n\n    r = channels[0], g = channels[1], b = channels[2], a = channels[3];\n\n    if (mode === 'auto') {\n      mode = a < 1 ? 'rgba' : 'rgb';\n    }\n\n    r = Math.round(r);\n    g = Math.round(g);\n    b = Math.round(b);\n    u = r << 16 | g << 8 | b;\n    str = \"000000\" + u.toString(16);\n    str = str.substr(str.length - 6);\n    hxa = '0' + round(a * 255).toString(16);\n    hxa = hxa.substr(hxa.length - 2);\n    return \"#\" + function () {\n      switch (mode.toLowerCase()) {\n        case 'rgba':\n          return str + hxa;\n\n        case 'argb':\n          return hxa + str;\n\n        default:\n          return str;\n      }\n    }();\n  };\n\n  _input.hex = function (h) {\n    return hex2rgb(h);\n  };\n\n  chroma.hex = function () {\n    return function (func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor(),\n          result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    }(Color, slice.call(arguments).concat(['hex']), function () {});\n  };\n\n  Color.prototype.hex = function (mode) {\n    if (mode == null) {\n      mode = 'auto';\n    }\n\n    return rgb2hex(this._rgb, mode);\n  };\n\n  _guess_formats.push({\n    p: 4,\n    test: function (n) {\n      if (arguments.length === 1 && type(n) === \"string\") {\n        return 'hex';\n      }\n    }\n  });\n\n  hsl2rgb = function () {\n    var args, b, c, g, h, i, l, o, r, ref, s, t1, t2, t3;\n    args = unpack(arguments);\n    h = args[0], s = args[1], l = args[2];\n\n    if (s === 0) {\n      r = g = b = l * 255;\n    } else {\n      t3 = [0, 0, 0];\n      c = [0, 0, 0];\n      t2 = l < 0.5 ? l * (1 + s) : l + s - l * s;\n      t1 = 2 * l - t2;\n      h /= 360;\n      t3[0] = h + 1 / 3;\n      t3[1] = h;\n      t3[2] = h - 1 / 3;\n\n      for (i = o = 0; o <= 2; i = ++o) {\n        if (t3[i] < 0) {\n          t3[i] += 1;\n        }\n\n        if (t3[i] > 1) {\n          t3[i] -= 1;\n        }\n\n        if (6 * t3[i] < 1) {\n          c[i] = t1 + (t2 - t1) * 6 * t3[i];\n        } else if (2 * t3[i] < 1) {\n          c[i] = t2;\n        } else if (3 * t3[i] < 2) {\n          c[i] = t1 + (t2 - t1) * (2 / 3 - t3[i]) * 6;\n        } else {\n          c[i] = t1;\n        }\n      }\n\n      ref = [round(c[0] * 255), round(c[1] * 255), round(c[2] * 255)], r = ref[0], g = ref[1], b = ref[2];\n    }\n\n    if (args.length > 3) {\n      return [r, g, b, args[3]];\n    } else {\n      return [r, g, b];\n    }\n  };\n\n  rgb2hsl = function (r, g, b) {\n    var h, l, min, ref, s;\n\n    if (r !== void 0 && r.length >= 3) {\n      ref = r, r = ref[0], g = ref[1], b = ref[2];\n    }\n\n    r /= 255;\n    g /= 255;\n    b /= 255;\n    min = Math.min(r, g, b);\n    max = Math.max(r, g, b);\n    l = (max + min) / 2;\n\n    if (max === min) {\n      s = 0;\n      h = Number.NaN;\n    } else {\n      s = l < 0.5 ? (max - min) / (max + min) : (max - min) / (2 - max - min);\n    }\n\n    if (r === max) {\n      h = (g - b) / (max - min);\n    } else if (g === max) {\n      h = 2 + (b - r) / (max - min);\n    } else if (b === max) {\n      h = 4 + (r - g) / (max - min);\n    }\n\n    h *= 60;\n\n    if (h < 0) {\n      h += 360;\n    }\n\n    return [h, s, l];\n  };\n\n  chroma.hsl = function () {\n    return function (func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor(),\n          result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    }(Color, slice.call(arguments).concat(['hsl']), function () {});\n  };\n\n  _input.hsl = hsl2rgb;\n\n  Color.prototype.hsl = function () {\n    return rgb2hsl(this._rgb);\n  };\n\n  hsv2rgb = function () {\n    var args, b, f, g, h, i, p, q, r, ref, ref1, ref2, ref3, ref4, ref5, s, t, v;\n    args = unpack(arguments);\n    h = args[0], s = args[1], v = args[2];\n    v *= 255;\n\n    if (s === 0) {\n      r = g = b = v;\n    } else {\n      if (h === 360) {\n        h = 0;\n      }\n\n      if (h > 360) {\n        h -= 360;\n      }\n\n      if (h < 0) {\n        h += 360;\n      }\n\n      h /= 60;\n      i = floor(h);\n      f = h - i;\n      p = v * (1 - s);\n      q = v * (1 - s * f);\n      t = v * (1 - s * (1 - f));\n\n      switch (i) {\n        case 0:\n          ref = [v, t, p], r = ref[0], g = ref[1], b = ref[2];\n          break;\n\n        case 1:\n          ref1 = [q, v, p], r = ref1[0], g = ref1[1], b = ref1[2];\n          break;\n\n        case 2:\n          ref2 = [p, v, t], r = ref2[0], g = ref2[1], b = ref2[2];\n          break;\n\n        case 3:\n          ref3 = [p, q, v], r = ref3[0], g = ref3[1], b = ref3[2];\n          break;\n\n        case 4:\n          ref4 = [t, p, v], r = ref4[0], g = ref4[1], b = ref4[2];\n          break;\n\n        case 5:\n          ref5 = [v, p, q], r = ref5[0], g = ref5[1], b = ref5[2];\n      }\n    }\n\n    return [r, g, b, args.length > 3 ? args[3] : 1];\n  };\n\n  rgb2hsv = function () {\n    var b, delta, g, h, min, r, ref, s, v;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    min = Math.min(r, g, b);\n    max = Math.max(r, g, b);\n    delta = max - min;\n    v = max / 255.0;\n\n    if (max === 0) {\n      h = Number.NaN;\n      s = 0;\n    } else {\n      s = delta / max;\n\n      if (r === max) {\n        h = (g - b) / delta;\n      }\n\n      if (g === max) {\n        h = 2 + (b - r) / delta;\n      }\n\n      if (b === max) {\n        h = 4 + (r - g) / delta;\n      }\n\n      h *= 60;\n\n      if (h < 0) {\n        h += 360;\n      }\n    }\n\n    return [h, s, v];\n  };\n\n  chroma.hsv = function () {\n    return function (func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor(),\n          result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    }(Color, slice.call(arguments).concat(['hsv']), function () {});\n  };\n\n  _input.hsv = hsv2rgb;\n\n  Color.prototype.hsv = function () {\n    return rgb2hsv(this._rgb);\n  };\n\n  num2rgb = function (num) {\n    var b, g, r;\n\n    if (type(num) === \"number\" && num >= 0 && num <= 0xFFFFFF) {\n      r = num >> 16;\n      g = num >> 8 & 0xFF;\n      b = num & 0xFF;\n      return [r, g, b, 1];\n    }\n\n    console.warn(\"unknown num color: \" + num);\n    return [0, 0, 0, 1];\n  };\n\n  rgb2num = function () {\n    var b, g, r, ref;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    return (r << 16) + (g << 8) + b;\n  };\n\n  chroma.num = function (num) {\n    return new Color(num, 'num');\n  };\n\n  Color.prototype.num = function (mode) {\n    if (mode == null) {\n      mode = 'rgb';\n    }\n\n    return rgb2num(this._rgb, mode);\n  };\n\n  _input.num = num2rgb;\n\n  _guess_formats.push({\n    p: 1,\n    test: function (n) {\n      if (arguments.length === 1 && type(n) === \"number\" && n >= 0 && n <= 0xFFFFFF) {\n        return 'num';\n      }\n    }\n  });\n\n  hcg2rgb = function () {\n    var _c, _g, args, b, c, f, g, h, i, p, q, r, ref, ref1, ref2, ref3, ref4, ref5, t, v;\n\n    args = unpack(arguments);\n    h = args[0], c = args[1], _g = args[2];\n    c = c / 100;\n    g = g / 100 * 255;\n    _c = c * 255;\n\n    if (c === 0) {\n      r = g = b = _g;\n    } else {\n      if (h === 360) {\n        h = 0;\n      }\n\n      if (h > 360) {\n        h -= 360;\n      }\n\n      if (h < 0) {\n        h += 360;\n      }\n\n      h /= 60;\n      i = floor(h);\n      f = h - i;\n      p = _g * (1 - c);\n      q = p + _c * (1 - f);\n      t = p + _c * f;\n      v = p + _c;\n\n      switch (i) {\n        case 0:\n          ref = [v, t, p], r = ref[0], g = ref[1], b = ref[2];\n          break;\n\n        case 1:\n          ref1 = [q, v, p], r = ref1[0], g = ref1[1], b = ref1[2];\n          break;\n\n        case 2:\n          ref2 = [p, v, t], r = ref2[0], g = ref2[1], b = ref2[2];\n          break;\n\n        case 3:\n          ref3 = [p, q, v], r = ref3[0], g = ref3[1], b = ref3[2];\n          break;\n\n        case 4:\n          ref4 = [t, p, v], r = ref4[0], g = ref4[1], b = ref4[2];\n          break;\n\n        case 5:\n          ref5 = [v, p, q], r = ref5[0], g = ref5[1], b = ref5[2];\n      }\n    }\n\n    return [r, g, b, args.length > 3 ? args[3] : 1];\n  };\n\n  rgb2hcg = function () {\n    var _g, b, c, delta, g, h, min, r, ref;\n\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    min = Math.min(r, g, b);\n    max = Math.max(r, g, b);\n    delta = max - min;\n    c = delta * 100 / 255;\n    _g = min / (255 - delta) * 100;\n\n    if (delta === 0) {\n      h = Number.NaN;\n    } else {\n      if (r === max) {\n        h = (g - b) / delta;\n      }\n\n      if (g === max) {\n        h = 2 + (b - r) / delta;\n      }\n\n      if (b === max) {\n        h = 4 + (r - g) / delta;\n      }\n\n      h *= 60;\n\n      if (h < 0) {\n        h += 360;\n      }\n    }\n\n    return [h, c, _g];\n  };\n\n  chroma.hcg = function () {\n    return function (func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor(),\n          result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    }(Color, slice.call(arguments).concat(['hcg']), function () {});\n  };\n\n  _input.hcg = hcg2rgb;\n\n  Color.prototype.hcg = function () {\n    return rgb2hcg(this._rgb);\n  };\n\n  css2rgb = function (css) {\n    var aa, ab, hsl, i, m, o, rgb, w;\n    css = css.toLowerCase();\n\n    if (chroma.colors != null && chroma.colors[css]) {\n      return hex2rgb(chroma.colors[css]);\n    }\n\n    if (m = css.match(/rgb\\(\\s*(\\-?\\d+),\\s*(\\-?\\d+)\\s*,\\s*(\\-?\\d+)\\s*\\)/)) {\n      rgb = m.slice(1, 4);\n\n      for (i = o = 0; o <= 2; i = ++o) {\n        rgb[i] = +rgb[i];\n      }\n\n      rgb[3] = 1;\n    } else if (m = css.match(/rgba\\(\\s*(\\-?\\d+),\\s*(\\-?\\d+)\\s*,\\s*(\\-?\\d+)\\s*,\\s*([01]|[01]?\\.\\d+)\\)/)) {\n      rgb = m.slice(1, 5);\n\n      for (i = w = 0; w <= 3; i = ++w) {\n        rgb[i] = +rgb[i];\n      }\n    } else if (m = css.match(/rgb\\(\\s*(\\-?\\d+(?:\\.\\d+)?)%,\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*,\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*\\)/)) {\n      rgb = m.slice(1, 4);\n\n      for (i = aa = 0; aa <= 2; i = ++aa) {\n        rgb[i] = round(rgb[i] * 2.55);\n      }\n\n      rgb[3] = 1;\n    } else if (m = css.match(/rgba\\(\\s*(\\-?\\d+(?:\\.\\d+)?)%,\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*,\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*,\\s*([01]|[01]?\\.\\d+)\\)/)) {\n      rgb = m.slice(1, 5);\n\n      for (i = ab = 0; ab <= 2; i = ++ab) {\n        rgb[i] = round(rgb[i] * 2.55);\n      }\n\n      rgb[3] = +rgb[3];\n    } else if (m = css.match(/hsl\\(\\s*(\\-?\\d+(?:\\.\\d+)?),\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*,\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*\\)/)) {\n      hsl = m.slice(1, 4);\n      hsl[1] *= 0.01;\n      hsl[2] *= 0.01;\n      rgb = hsl2rgb(hsl);\n      rgb[3] = 1;\n    } else if (m = css.match(/hsla\\(\\s*(\\-?\\d+(?:\\.\\d+)?),\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*,\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*,\\s*([01]|[01]?\\.\\d+)\\)/)) {\n      hsl = m.slice(1, 4);\n      hsl[1] *= 0.01;\n      hsl[2] *= 0.01;\n      rgb = hsl2rgb(hsl);\n      rgb[3] = +m[4];\n    }\n\n    return rgb;\n  };\n\n  rgb2css = function (rgba) {\n    var mode;\n    mode = rgba[3] < 1 ? 'rgba' : 'rgb';\n\n    if (mode === 'rgb') {\n      return mode + '(' + rgba.slice(0, 3).map(round).join(',') + ')';\n    } else if (mode === 'rgba') {\n      return mode + '(' + rgba.slice(0, 3).map(round).join(',') + ',' + rgba[3] + ')';\n    } else {}\n  };\n\n  rnd = function (a) {\n    return round(a * 100) / 100;\n  };\n\n  hsl2css = function (hsl, alpha) {\n    var mode;\n    mode = alpha < 1 ? 'hsla' : 'hsl';\n    hsl[0] = rnd(hsl[0] || 0);\n    hsl[1] = rnd(hsl[1] * 100) + '%';\n    hsl[2] = rnd(hsl[2] * 100) + '%';\n\n    if (mode === 'hsla') {\n      hsl[3] = alpha;\n    }\n\n    return mode + '(' + hsl.join(',') + ')';\n  };\n\n  _input.css = function (h) {\n    return css2rgb(h);\n  };\n\n  chroma.css = function () {\n    return function (func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor(),\n          result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    }(Color, slice.call(arguments).concat(['css']), function () {});\n  };\n\n  Color.prototype.css = function (mode) {\n    if (mode == null) {\n      mode = 'rgb';\n    }\n\n    if (mode.slice(0, 3) === 'rgb') {\n      return rgb2css(this._rgb);\n    } else if (mode.slice(0, 3) === 'hsl') {\n      return hsl2css(this.hsl(), this.alpha());\n    }\n  };\n\n  _input.named = function (name) {\n    return hex2rgb(w3cx11[name]);\n  };\n\n  _guess_formats.push({\n    p: 5,\n    test: function (n) {\n      if (arguments.length === 1 && w3cx11[n] != null) {\n        return 'named';\n      }\n    }\n  });\n\n  Color.prototype.name = function (n) {\n    var h, k;\n\n    if (arguments.length) {\n      if (w3cx11[n]) {\n        this._rgb = hex2rgb(w3cx11[n]);\n      }\n\n      this._rgb[3] = 1;\n      this;\n    }\n\n    h = this.hex('rgb');\n\n    for (k in w3cx11) {\n      if (h === w3cx11[k]) {\n        return k;\n      }\n    }\n\n    return h;\n  };\n\n  lch2lab = function () {\n    /*\n    Convert from a qualitative parameter h and a quantitative parameter l to a 24-bit pixel.\n    These formulas were invented by David Dalrymple to obtain maximum contrast without going\n    out of gamut if the parameters are in the range 0-1.\n    \n    A saturation multiplier was added by Gregor Aisch\n     */\n    var c, h, l, ref;\n    ref = unpack(arguments), l = ref[0], c = ref[1], h = ref[2];\n    h = h * DEG2RAD;\n    return [l, cos(h) * c, sin(h) * c];\n  };\n\n  lch2rgb = function () {\n    var L, a, args, b, c, g, h, l, r, ref, ref1;\n    args = unpack(arguments);\n    l = args[0], c = args[1], h = args[2];\n    ref = lch2lab(l, c, h), L = ref[0], a = ref[1], b = ref[2];\n    ref1 = lab2rgb(L, a, b), r = ref1[0], g = ref1[1], b = ref1[2];\n    return [r, g, b, args.length > 3 ? args[3] : 1];\n  };\n\n  lab2lch = function () {\n    var a, b, c, h, l, ref;\n    ref = unpack(arguments), l = ref[0], a = ref[1], b = ref[2];\n    c = sqrt(a * a + b * b);\n    h = (atan2(b, a) * RAD2DEG + 360) % 360;\n\n    if (round(c * 10000) === 0) {\n      h = Number.NaN;\n    }\n\n    return [l, c, h];\n  };\n\n  rgb2lch = function () {\n    var a, b, g, l, r, ref, ref1;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    ref1 = rgb2lab(r, g, b), l = ref1[0], a = ref1[1], b = ref1[2];\n    return lab2lch(l, a, b);\n  };\n\n  chroma.lch = function () {\n    var args;\n    args = unpack(arguments);\n    return new Color(args, 'lch');\n  };\n\n  chroma.hcl = function () {\n    var args;\n    args = unpack(arguments);\n    return new Color(args, 'hcl');\n  };\n\n  _input.lch = lch2rgb;\n\n  _input.hcl = function () {\n    var c, h, l, ref;\n    ref = unpack(arguments), h = ref[0], c = ref[1], l = ref[2];\n    return lch2rgb([l, c, h]);\n  };\n\n  Color.prototype.lch = function () {\n    return rgb2lch(this._rgb);\n  };\n\n  Color.prototype.hcl = function () {\n    return rgb2lch(this._rgb).reverse();\n  };\n\n  rgb2cmyk = function (mode) {\n    var b, c, f, g, k, m, r, ref, y;\n\n    if (mode == null) {\n      mode = 'rgb';\n    }\n\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    r = r / 255;\n    g = g / 255;\n    b = b / 255;\n    k = 1 - Math.max(r, Math.max(g, b));\n    f = k < 1 ? 1 / (1 - k) : 0;\n    c = (1 - r - k) * f;\n    m = (1 - g - k) * f;\n    y = (1 - b - k) * f;\n    return [c, m, y, k];\n  };\n\n  cmyk2rgb = function () {\n    var alpha, args, b, c, g, k, m, r, y;\n    args = unpack(arguments);\n    c = args[0], m = args[1], y = args[2], k = args[3];\n    alpha = args.length > 4 ? args[4] : 1;\n\n    if (k === 1) {\n      return [0, 0, 0, alpha];\n    }\n\n    r = c >= 1 ? 0 : 255 * (1 - c) * (1 - k);\n    g = m >= 1 ? 0 : 255 * (1 - m) * (1 - k);\n    b = y >= 1 ? 0 : 255 * (1 - y) * (1 - k);\n    return [r, g, b, alpha];\n  };\n\n  _input.cmyk = function () {\n    return cmyk2rgb(unpack(arguments));\n  };\n\n  chroma.cmyk = function () {\n    return function (func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor(),\n          result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    }(Color, slice.call(arguments).concat(['cmyk']), function () {});\n  };\n\n  Color.prototype.cmyk = function () {\n    return rgb2cmyk(this._rgb);\n  };\n\n  _input.gl = function () {\n    var i, k, o, rgb, v;\n\n    rgb = function () {\n      var ref, results;\n      ref = unpack(arguments);\n      results = [];\n\n      for (k in ref) {\n        v = ref[k];\n        results.push(v);\n      }\n\n      return results;\n    }.apply(this, arguments);\n\n    for (i = o = 0; o <= 2; i = ++o) {\n      rgb[i] *= 255;\n    }\n\n    return rgb;\n  };\n\n  chroma.gl = function () {\n    return function (func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor(),\n          result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    }(Color, slice.call(arguments).concat(['gl']), function () {});\n  };\n\n  Color.prototype.gl = function () {\n    var rgb;\n    rgb = this._rgb;\n    return [rgb[0] / 255, rgb[1] / 255, rgb[2] / 255, rgb[3]];\n  };\n\n  rgb2luminance = function (r, g, b) {\n    var ref;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    r = luminance_x(r);\n    g = luminance_x(g);\n    b = luminance_x(b);\n    return 0.2126 * r + 0.7152 * g + 0.0722 * b;\n  };\n\n  luminance_x = function (x) {\n    x /= 255;\n\n    if (x <= 0.03928) {\n      return x / 12.92;\n    } else {\n      return pow((x + 0.055) / 1.055, 2.4);\n    }\n  };\n\n  interpolate_rgb = function (col1, col2, f, m) {\n    var xyz0, xyz1;\n    xyz0 = col1._rgb;\n    xyz1 = col2._rgb;\n    return new Color(xyz0[0] + f * (xyz1[0] - xyz0[0]), xyz0[1] + f * (xyz1[1] - xyz0[1]), xyz0[2] + f * (xyz1[2] - xyz0[2]), m);\n  };\n\n  _interpolators.push(['rgb', interpolate_rgb]);\n\n  Color.prototype.luminance = function (lum, mode) {\n    var cur_lum, eps, max_iter, rgba, test;\n\n    if (mode == null) {\n      mode = 'rgb';\n    }\n\n    if (!arguments.length) {\n      return rgb2luminance(this._rgb);\n    }\n\n    rgba = this._rgb;\n\n    if (lum === 0) {\n      rgba = [0, 0, 0, this._rgb[3]];\n    } else if (lum === 1) {\n      rgba = [255, 255, 255, this[3]];\n    } else {\n      cur_lum = rgb2luminance(this._rgb);\n      eps = 1e-7;\n      max_iter = 20;\n\n      test = function (l, h) {\n        var lm, m;\n        m = l.interpolate(h, 0.5, mode);\n        lm = m.luminance();\n\n        if (Math.abs(lum - lm) < eps || !max_iter--) {\n          return m;\n        }\n\n        if (lm > lum) {\n          return test(l, m);\n        }\n\n        return test(m, h);\n      };\n\n      if (cur_lum > lum) {\n        rgba = test(chroma('black'), this).rgba();\n      } else {\n        rgba = test(this, chroma('white')).rgba();\n      }\n    }\n\n    return chroma(rgba).alpha(this.alpha());\n  };\n\n  temperature2rgb = function (kelvin) {\n    var b, g, r, temp;\n    temp = kelvin / 100;\n\n    if (temp < 66) {\n      r = 255;\n      g = -155.25485562709179 - 0.44596950469579133 * (g = temp - 2) + 104.49216199393888 * log(g);\n      b = temp < 20 ? 0 : -254.76935184120902 + 0.8274096064007395 * (b = temp - 10) + 115.67994401066147 * log(b);\n    } else {\n      r = 351.97690566805693 + 0.114206453784165 * (r = temp - 55) - 40.25366309332127 * log(r);\n      g = 325.4494125711974 + 0.07943456536662342 * (g = temp - 50) - 28.0852963507957 * log(g);\n      b = 255;\n    }\n\n    return [r, g, b];\n  };\n\n  rgb2temperature = function () {\n    var b, eps, g, maxTemp, minTemp, r, ref, rgb, temp;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    minTemp = 1000;\n    maxTemp = 40000;\n    eps = 0.4;\n\n    while (maxTemp - minTemp > eps) {\n      temp = (maxTemp + minTemp) * 0.5;\n      rgb = temperature2rgb(temp);\n\n      if (rgb[2] / rgb[0] >= b / r) {\n        maxTemp = temp;\n      } else {\n        minTemp = temp;\n      }\n    }\n\n    return round(temp);\n  };\n\n  chroma.temperature = chroma.kelvin = function () {\n    return function (func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor(),\n          result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    }(Color, slice.call(arguments).concat(['temperature']), function () {});\n  };\n\n  _input.temperature = _input.kelvin = _input.K = temperature2rgb;\n\n  Color.prototype.temperature = function () {\n    return rgb2temperature(this._rgb);\n  };\n\n  Color.prototype.kelvin = Color.prototype.temperature;\n\n  chroma.contrast = function (a, b) {\n    var l1, l2, ref, ref1;\n\n    if ((ref = type(a)) === 'string' || ref === 'number') {\n      a = new Color(a);\n    }\n\n    if ((ref1 = type(b)) === 'string' || ref1 === 'number') {\n      b = new Color(b);\n    }\n\n    l1 = a.luminance();\n    l2 = b.luminance();\n\n    if (l1 > l2) {\n      return (l1 + 0.05) / (l2 + 0.05);\n    } else {\n      return (l2 + 0.05) / (l1 + 0.05);\n    }\n  };\n\n  chroma.distance = function (a, b, mode) {\n    var d, i, l1, l2, ref, ref1, sum_sq;\n\n    if (mode == null) {\n      mode = 'lab';\n    }\n\n    if ((ref = type(a)) === 'string' || ref === 'number') {\n      a = new Color(a);\n    }\n\n    if ((ref1 = type(b)) === 'string' || ref1 === 'number') {\n      b = new Color(b);\n    }\n\n    l1 = a.get(mode);\n    l2 = b.get(mode);\n    sum_sq = 0;\n\n    for (i in l1) {\n      d = (l1[i] || 0) - (l2[i] || 0);\n      sum_sq += d * d;\n    }\n\n    return Math.sqrt(sum_sq);\n  };\n\n  chroma.deltaE = function (a, b, L, C) {\n    var L1, L2, a1, a2, b1, b2, c1, c2, c4, dH2, delA, delB, delC, delL, f, h1, ref, ref1, ref2, ref3, sc, sh, sl, t, v1, v2, v3;\n\n    if (L == null) {\n      L = 1;\n    }\n\n    if (C == null) {\n      C = 1;\n    }\n\n    if ((ref = type(a)) === 'string' || ref === 'number') {\n      a = new Color(a);\n    }\n\n    if ((ref1 = type(b)) === 'string' || ref1 === 'number') {\n      b = new Color(b);\n    }\n\n    ref2 = a.lab(), L1 = ref2[0], a1 = ref2[1], b1 = ref2[2];\n    ref3 = b.lab(), L2 = ref3[0], a2 = ref3[1], b2 = ref3[2];\n    c1 = sqrt(a1 * a1 + b1 * b1);\n    c2 = sqrt(a2 * a2 + b2 * b2);\n    sl = L1 < 16.0 ? 0.511 : 0.040975 * L1 / (1.0 + 0.01765 * L1);\n    sc = 0.0638 * c1 / (1.0 + 0.0131 * c1) + 0.638;\n    h1 = c1 < 0.000001 ? 0.0 : atan2(b1, a1) * 180.0 / PI;\n\n    while (h1 < 0) {\n      h1 += 360;\n    }\n\n    while (h1 >= 360) {\n      h1 -= 360;\n    }\n\n    t = h1 >= 164.0 && h1 <= 345.0 ? 0.56 + abs(0.2 * cos(PI * (h1 + 168.0) / 180.0)) : 0.36 + abs(0.4 * cos(PI * (h1 + 35.0) / 180.0));\n    c4 = c1 * c1 * c1 * c1;\n    f = sqrt(c4 / (c4 + 1900.0));\n    sh = sc * (f * t + 1.0 - f);\n    delL = L1 - L2;\n    delC = c1 - c2;\n    delA = a1 - a2;\n    delB = b1 - b2;\n    dH2 = delA * delA + delB * delB - delC * delC;\n    v1 = delL / (L * sl);\n    v2 = delC / (C * sc);\n    v3 = sh;\n    return sqrt(v1 * v1 + v2 * v2 + dH2 / (v3 * v3));\n  };\n\n  Color.prototype.get = function (modechan) {\n    var channel, i, me, mode, ref, src;\n    me = this;\n    ref = modechan.split('.'), mode = ref[0], channel = ref[1];\n    src = me[mode]();\n\n    if (channel) {\n      i = mode.indexOf(channel);\n\n      if (i > -1) {\n        return src[i];\n      } else {\n        return console.warn('unknown channel ' + channel + ' in mode ' + mode);\n      }\n    } else {\n      return src;\n    }\n  };\n\n  Color.prototype.set = function (modechan, value) {\n    var channel, i, me, mode, ref, src;\n    me = this;\n    ref = modechan.split('.'), mode = ref[0], channel = ref[1];\n\n    if (channel) {\n      src = me[mode]();\n      i = mode.indexOf(channel);\n\n      if (i > -1) {\n        if (type(value) === 'string') {\n          switch (value.charAt(0)) {\n            case '+':\n              src[i] += +value;\n              break;\n\n            case '-':\n              src[i] += +value;\n              break;\n\n            case '*':\n              src[i] *= +value.substr(1);\n              break;\n\n            case '/':\n              src[i] /= +value.substr(1);\n              break;\n\n            default:\n              src[i] = +value;\n          }\n        } else {\n          src[i] = value;\n        }\n      } else {\n        console.warn('unknown channel ' + channel + ' in mode ' + mode);\n      }\n    } else {\n      src = value;\n    }\n\n    return chroma(src, mode).alpha(me.alpha());\n  };\n\n  Color.prototype.clipped = function () {\n    return this._rgb._clipped || false;\n  };\n\n  Color.prototype.alpha = function (a) {\n    if (arguments.length) {\n      return chroma.rgb([this._rgb[0], this._rgb[1], this._rgb[2], a]);\n    }\n\n    return this._rgb[3];\n  };\n\n  Color.prototype.darken = function (amount) {\n    var lab, me;\n\n    if (amount == null) {\n      amount = 1;\n    }\n\n    me = this;\n    lab = me.lab();\n    lab[0] -= LAB_CONSTANTS.Kn * amount;\n    return chroma.lab(lab).alpha(me.alpha());\n  };\n\n  Color.prototype.brighten = function (amount) {\n    if (amount == null) {\n      amount = 1;\n    }\n\n    return this.darken(-amount);\n  };\n\n  Color.prototype.darker = Color.prototype.darken;\n  Color.prototype.brighter = Color.prototype.brighten;\n\n  Color.prototype.saturate = function (amount) {\n    var lch, me;\n\n    if (amount == null) {\n      amount = 1;\n    }\n\n    me = this;\n    lch = me.lch();\n    lch[1] += amount * LAB_CONSTANTS.Kn;\n\n    if (lch[1] < 0) {\n      lch[1] = 0;\n    }\n\n    return chroma.lch(lch).alpha(me.alpha());\n  };\n\n  Color.prototype.desaturate = function (amount) {\n    if (amount == null) {\n      amount = 1;\n    }\n\n    return this.saturate(-amount);\n  };\n\n  Color.prototype.premultiply = function () {\n    var a, rgb;\n    rgb = this.rgb();\n    a = this.alpha();\n    return chroma(rgb[0] * a, rgb[1] * a, rgb[2] * a, a);\n  };\n\n  blend = function (bottom, top, mode) {\n    if (!blend[mode]) {\n      throw 'unknown blend mode ' + mode;\n    }\n\n    return blend[mode](bottom, top);\n  };\n\n  blend_f = function (f) {\n    return function (bottom, top) {\n      var c0, c1;\n      c0 = chroma(top).rgb();\n      c1 = chroma(bottom).rgb();\n      return chroma(f(c0, c1), 'rgb');\n    };\n  };\n\n  each = function (f) {\n    return function (c0, c1) {\n      var i, o, out;\n      out = [];\n\n      for (i = o = 0; o <= 3; i = ++o) {\n        out[i] = f(c0[i], c1[i]);\n      }\n\n      return out;\n    };\n  };\n\n  normal = function (a, b) {\n    return a;\n  };\n\n  multiply = function (a, b) {\n    return a * b / 255;\n  };\n\n  darken = function (a, b) {\n    if (a > b) {\n      return b;\n    } else {\n      return a;\n    }\n  };\n\n  lighten = function (a, b) {\n    if (a > b) {\n      return a;\n    } else {\n      return b;\n    }\n  };\n\n  screen = function (a, b) {\n    return 255 * (1 - (1 - a / 255) * (1 - b / 255));\n  };\n\n  overlay = function (a, b) {\n    if (b < 128) {\n      return 2 * a * b / 255;\n    } else {\n      return 255 * (1 - 2 * (1 - a / 255) * (1 - b / 255));\n    }\n  };\n\n  burn = function (a, b) {\n    return 255 * (1 - (1 - b / 255) / (a / 255));\n  };\n\n  dodge = function (a, b) {\n    if (a === 255) {\n      return 255;\n    }\n\n    a = 255 * (b / 255) / (1 - a / 255);\n\n    if (a > 255) {\n      return 255;\n    } else {\n      return a;\n    }\n  };\n\n  blend.normal = blend_f(each(normal));\n  blend.multiply = blend_f(each(multiply));\n  blend.screen = blend_f(each(screen));\n  blend.overlay = blend_f(each(overlay));\n  blend.darken = blend_f(each(darken));\n  blend.lighten = blend_f(each(lighten));\n  blend.dodge = blend_f(each(dodge));\n  blend.burn = blend_f(each(burn));\n  chroma.blend = blend;\n\n  chroma.analyze = function (data) {\n    var len, o, r, val;\n    r = {\n      min: Number.MAX_VALUE,\n      max: Number.MAX_VALUE * -1,\n      sum: 0,\n      values: [],\n      count: 0\n    };\n\n    for (o = 0, len = data.length; o < len; o++) {\n      val = data[o];\n\n      if (val != null && !isNaN(val)) {\n        r.values.push(val);\n        r.sum += val;\n\n        if (val < r.min) {\n          r.min = val;\n        }\n\n        if (val > r.max) {\n          r.max = val;\n        }\n\n        r.count += 1;\n      }\n    }\n\n    r.domain = [r.min, r.max];\n\n    r.limits = function (mode, num) {\n      return chroma.limits(r, mode, num);\n    };\n\n    return r;\n  };\n\n  chroma.scale = function (colors, positions) {\n    var _classes, _colorCache, _colors, _correctLightness, _domain, _fixed, _gamma, _max, _min, _mode, _nacol, _out, _padding, _pos, _spread, _useCache, classifyValue, f, getClass, getColor, resetCache, setColors, tmap;\n\n    _mode = 'rgb';\n    _nacol = chroma('#ccc');\n    _spread = 0;\n    _fixed = false;\n    _domain = [0, 1];\n    _pos = [];\n    _padding = [0, 0];\n    _classes = false;\n    _colors = [];\n    _out = false;\n    _min = 0;\n    _max = 1;\n    _correctLightness = false;\n    _colorCache = {};\n    _useCache = true;\n    _gamma = 1;\n\n    setColors = function (colors) {\n      var c, col, o, ref, ref1, w;\n\n      if (colors == null) {\n        colors = ['#fff', '#000'];\n      }\n\n      if (colors != null && type(colors) === 'string' && chroma.brewer != null) {\n        colors = chroma.brewer[colors] || chroma.brewer[colors.toLowerCase()] || colors;\n      }\n\n      if (type(colors) === 'array') {\n        if (colors.length === 1) {\n          colors = [colors[0], colors[0]];\n        }\n\n        colors = colors.slice(0);\n\n        for (c = o = 0, ref = colors.length - 1; 0 <= ref ? o <= ref : o >= ref; c = 0 <= ref ? ++o : --o) {\n          col = colors[c];\n\n          if (type(col) === \"string\") {\n            colors[c] = chroma(col);\n          }\n        }\n\n        _pos.length = 0;\n\n        for (c = w = 0, ref1 = colors.length - 1; 0 <= ref1 ? w <= ref1 : w >= ref1; c = 0 <= ref1 ? ++w : --w) {\n          _pos.push(c / (colors.length - 1));\n        }\n      }\n\n      resetCache();\n      return _colors = colors;\n    };\n\n    getClass = function (value) {\n      var i, n;\n\n      if (_classes != null) {\n        n = _classes.length - 1;\n        i = 0;\n\n        while (i < n && value >= _classes[i]) {\n          i++;\n        }\n\n        return i - 1;\n      }\n\n      return 0;\n    };\n\n    tmap = function (t) {\n      return t;\n    };\n\n    classifyValue = function (value) {\n      var i, maxc, minc, n, val;\n      val = value;\n\n      if (_classes.length > 2) {\n        n = _classes.length - 1;\n        i = getClass(value);\n        minc = _classes[0] + (_classes[1] - _classes[0]) * (0 + _spread * 0.5);\n        maxc = _classes[n - 1] + (_classes[n] - _classes[n - 1]) * (1 - _spread * 0.5);\n        val = _min + (_classes[i] + (_classes[i + 1] - _classes[i]) * 0.5 - minc) / (maxc - minc) * (_max - _min);\n      }\n\n      return val;\n    };\n\n    getColor = function (val, bypassMap) {\n      var c, col, i, k, o, p, ref, t;\n\n      if (bypassMap == null) {\n        bypassMap = false;\n      }\n\n      if (isNaN(val) || val === null) {\n        return _nacol;\n      }\n\n      if (!bypassMap) {\n        if (_classes && _classes.length > 2) {\n          c = getClass(val);\n          t = c / (_classes.length - 2);\n        } else if (_max !== _min) {\n          t = (val - _min) / (_max - _min);\n        } else {\n          t = 1;\n        }\n      } else {\n        t = val;\n      }\n\n      if (!bypassMap) {\n        t = tmap(t);\n      }\n\n      if (_gamma !== 1) {\n        t = pow(t, _gamma);\n      }\n\n      t = _padding[0] + t * (1 - _padding[0] - _padding[1]);\n      t = Math.min(1, Math.max(0, t));\n      k = Math.floor(t * 10000);\n\n      if (_useCache && _colorCache[k]) {\n        col = _colorCache[k];\n      } else {\n        if (type(_colors) === 'array') {\n          for (i = o = 0, ref = _pos.length - 1; 0 <= ref ? o <= ref : o >= ref; i = 0 <= ref ? ++o : --o) {\n            p = _pos[i];\n\n            if (t <= p) {\n              col = _colors[i];\n              break;\n            }\n\n            if (t >= p && i === _pos.length - 1) {\n              col = _colors[i];\n              break;\n            }\n\n            if (t > p && t < _pos[i + 1]) {\n              t = (t - p) / (_pos[i + 1] - p);\n              col = chroma.interpolate(_colors[i], _colors[i + 1], t, _mode);\n              break;\n            }\n          }\n        } else if (type(_colors) === 'function') {\n          col = _colors(t);\n        }\n\n        if (_useCache) {\n          _colorCache[k] = col;\n        }\n      }\n\n      return col;\n    };\n\n    resetCache = function () {\n      return _colorCache = {};\n    };\n\n    setColors(colors);\n\n    f = function (v) {\n      var c;\n      c = chroma(getColor(v));\n\n      if (_out && c[_out]) {\n        return c[_out]();\n      } else {\n        return c;\n      }\n    };\n\n    f.classes = function (classes) {\n      var d;\n\n      if (classes != null) {\n        if (type(classes) === 'array') {\n          _classes = classes;\n          _domain = [classes[0], classes[classes.length - 1]];\n        } else {\n          d = chroma.analyze(_domain);\n\n          if (classes === 0) {\n            _classes = [d.min, d.max];\n          } else {\n            _classes = chroma.limits(d, 'e', classes);\n          }\n        }\n\n        return f;\n      }\n\n      return _classes;\n    };\n\n    f.domain = function (domain) {\n      var c, d, k, len, o, ref, w;\n\n      if (!arguments.length) {\n        return _domain;\n      }\n\n      _min = domain[0];\n      _max = domain[domain.length - 1];\n      _pos = [];\n      k = _colors.length;\n\n      if (domain.length === k && _min !== _max) {\n        for (o = 0, len = domain.length; o < len; o++) {\n          d = domain[o];\n\n          _pos.push((d - _min) / (_max - _min));\n        }\n      } else {\n        for (c = w = 0, ref = k - 1; 0 <= ref ? w <= ref : w >= ref; c = 0 <= ref ? ++w : --w) {\n          _pos.push(c / (k - 1));\n        }\n      }\n\n      _domain = [_min, _max];\n      return f;\n    };\n\n    f.mode = function (_m) {\n      if (!arguments.length) {\n        return _mode;\n      }\n\n      _mode = _m;\n      resetCache();\n      return f;\n    };\n\n    f.range = function (colors, _pos) {\n      setColors(colors, _pos);\n      return f;\n    };\n\n    f.out = function (_o) {\n      _out = _o;\n      return f;\n    };\n\n    f.spread = function (val) {\n      if (!arguments.length) {\n        return _spread;\n      }\n\n      _spread = val;\n      return f;\n    };\n\n    f.correctLightness = function (v) {\n      if (v == null) {\n        v = true;\n      }\n\n      _correctLightness = v;\n      resetCache();\n\n      if (_correctLightness) {\n        tmap = function (t) {\n          var L0, L1, L_actual, L_diff, L_ideal, max_iter, pol, t0, t1;\n          L0 = getColor(0, true).lab()[0];\n          L1 = getColor(1, true).lab()[0];\n          pol = L0 > L1;\n          L_actual = getColor(t, true).lab()[0];\n          L_ideal = L0 + (L1 - L0) * t;\n          L_diff = L_actual - L_ideal;\n          t0 = 0;\n          t1 = 1;\n          max_iter = 20;\n\n          while (Math.abs(L_diff) > 1e-2 && max_iter-- > 0) {\n            (function () {\n              if (pol) {\n                L_diff *= -1;\n              }\n\n              if (L_diff < 0) {\n                t0 = t;\n                t += (t1 - t) * 0.5;\n              } else {\n                t1 = t;\n                t += (t0 - t) * 0.5;\n              }\n\n              L_actual = getColor(t, true).lab()[0];\n              return L_diff = L_actual - L_ideal;\n            })();\n          }\n\n          return t;\n        };\n      } else {\n        tmap = function (t) {\n          return t;\n        };\n      }\n\n      return f;\n    };\n\n    f.padding = function (p) {\n      if (p != null) {\n        if (type(p) === 'number') {\n          p = [p, p];\n        }\n\n        _padding = p;\n        return f;\n      } else {\n        return _padding;\n      }\n    };\n\n    f.colors = function (numColors, out) {\n      var dd, dm, i, o, ref, result, results, samples, w;\n\n      if (arguments.length < 2) {\n        out = 'hex';\n      }\n\n      result = [];\n\n      if (arguments.length === 0) {\n        result = _colors.slice(0);\n      } else if (numColors === 1) {\n        result = [f(0.5)];\n      } else if (numColors > 1) {\n        dm = _domain[0];\n        dd = _domain[1] - dm;\n\n        result = function () {\n          results = [];\n\n          for (var o = 0; 0 <= numColors ? o < numColors : o > numColors; 0 <= numColors ? o++ : o--) {\n            results.push(o);\n          }\n\n          return results;\n        }.apply(this).map(function (i) {\n          return f(dm + i / (numColors - 1) * dd);\n        });\n      } else {\n        colors = [];\n        samples = [];\n\n        if (_classes && _classes.length > 2) {\n          for (i = w = 1, ref = _classes.length; 1 <= ref ? w < ref : w > ref; i = 1 <= ref ? ++w : --w) {\n            samples.push((_classes[i - 1] + _classes[i]) * 0.5);\n          }\n        } else {\n          samples = _domain;\n        }\n\n        result = samples.map(function (v) {\n          return f(v);\n        });\n      }\n\n      if (chroma[out]) {\n        result = result.map(function (c) {\n          return c[out]();\n        });\n      }\n\n      return result;\n    };\n\n    f.cache = function (c) {\n      if (c != null) {\n        _useCache = c;\n        return f;\n      } else {\n        return _useCache;\n      }\n    };\n\n    f.gamma = function (g) {\n      if (g != null) {\n        _gamma = g;\n        return f;\n      } else {\n        return _gamma;\n      }\n    };\n\n    f.nodata = function (d) {\n      if (d != null) {\n        _nacol = chroma(d);\n        return f;\n      } else {\n        return _nacol;\n      }\n    };\n\n    return f;\n  };\n\n  if (chroma.scales == null) {\n    chroma.scales = {};\n  }\n\n  chroma.scales.cool = function () {\n    return chroma.scale([chroma.hsl(180, 1, .9), chroma.hsl(250, .7, .4)]);\n  };\n\n  chroma.scales.hot = function () {\n    return chroma.scale(['#000', '#f00', '#ff0', '#fff'], [0, .25, .75, 1]).mode('rgb');\n  };\n\n  chroma.analyze = function (data, key, filter) {\n    var add, k, len, o, r, val, visit;\n    r = {\n      min: Number.MAX_VALUE,\n      max: Number.MAX_VALUE * -1,\n      sum: 0,\n      values: [],\n      count: 0\n    };\n\n    if (filter == null) {\n      filter = function () {\n        return true;\n      };\n    }\n\n    add = function (val) {\n      if (val != null && !isNaN(val)) {\n        r.values.push(val);\n        r.sum += val;\n\n        if (val < r.min) {\n          r.min = val;\n        }\n\n        if (val > r.max) {\n          r.max = val;\n        }\n\n        r.count += 1;\n      }\n    };\n\n    visit = function (val, k) {\n      if (filter(val, k)) {\n        if (key != null && type(key) === 'function') {\n          return add(key(val));\n        } else if (key != null && type(key) === 'string' || type(key) === 'number') {\n          return add(val[key]);\n        } else {\n          return add(val);\n        }\n      }\n    };\n\n    if (type(data) === 'array') {\n      for (o = 0, len = data.length; o < len; o++) {\n        val = data[o];\n        visit(val);\n      }\n    } else {\n      for (k in data) {\n        val = data[k];\n        visit(val, k);\n      }\n    }\n\n    r.domain = [r.min, r.max];\n\n    r.limits = function (mode, num) {\n      return chroma.limits(r, mode, num);\n    };\n\n    return r;\n  };\n\n  chroma.limits = function (data, mode, num) {\n    var aa, ab, ac, ad, ae, af, ag, ah, ai, aj, ak, al, am, assignments, best, centroids, cluster, clusterSizes, dist, i, j, kClusters, limits, max_log, min, min_log, mindist, n, nb_iters, newCentroids, o, p, pb, pr, ref, ref1, ref10, ref11, ref12, ref13, ref14, ref2, ref3, ref4, ref5, ref6, ref7, ref8, ref9, repeat, sum, tmpKMeansBreaks, v, value, values, w;\n\n    if (mode == null) {\n      mode = 'equal';\n    }\n\n    if (num == null) {\n      num = 7;\n    }\n\n    if (type(data) === 'array') {\n      data = chroma.analyze(data);\n    }\n\n    min = data.min;\n    max = data.max;\n    sum = data.sum;\n    values = data.values.sort(function (a, b) {\n      return a - b;\n    });\n\n    if (num === 1) {\n      return [min, max];\n    }\n\n    limits = [];\n\n    if (mode.substr(0, 1) === 'c') {\n      limits.push(min);\n      limits.push(max);\n    }\n\n    if (mode.substr(0, 1) === 'e') {\n      limits.push(min);\n\n      for (i = o = 1, ref = num - 1; 1 <= ref ? o <= ref : o >= ref; i = 1 <= ref ? ++o : --o) {\n        limits.push(min + i / num * (max - min));\n      }\n\n      limits.push(max);\n    } else if (mode.substr(0, 1) === 'l') {\n      if (min <= 0) {\n        throw 'Logarithmic scales are only possible for values > 0';\n      }\n\n      min_log = Math.LOG10E * log(min);\n      max_log = Math.LOG10E * log(max);\n      limits.push(min);\n\n      for (i = w = 1, ref1 = num - 1; 1 <= ref1 ? w <= ref1 : w >= ref1; i = 1 <= ref1 ? ++w : --w) {\n        limits.push(pow(10, min_log + i / num * (max_log - min_log)));\n      }\n\n      limits.push(max);\n    } else if (mode.substr(0, 1) === 'q') {\n      limits.push(min);\n\n      for (i = aa = 1, ref2 = num - 1; 1 <= ref2 ? aa <= ref2 : aa >= ref2; i = 1 <= ref2 ? ++aa : --aa) {\n        p = (values.length - 1) * i / num;\n        pb = floor(p);\n\n        if (pb === p) {\n          limits.push(values[pb]);\n        } else {\n          pr = p - pb;\n          limits.push(values[pb] * (1 - pr) + values[pb + 1] * pr);\n        }\n      }\n\n      limits.push(max);\n    } else if (mode.substr(0, 1) === 'k') {\n      /*\n      implementation based on\n      http://code.google.com/p/figue/source/browse/trunk/figue.js#336\n      simplified for 1-d input values\n       */\n      n = values.length;\n      assignments = new Array(n);\n      clusterSizes = new Array(num);\n      repeat = true;\n      nb_iters = 0;\n      centroids = null;\n      centroids = [];\n      centroids.push(min);\n\n      for (i = ab = 1, ref3 = num - 1; 1 <= ref3 ? ab <= ref3 : ab >= ref3; i = 1 <= ref3 ? ++ab : --ab) {\n        centroids.push(min + i / num * (max - min));\n      }\n\n      centroids.push(max);\n\n      while (repeat) {\n        for (j = ac = 0, ref4 = num - 1; 0 <= ref4 ? ac <= ref4 : ac >= ref4; j = 0 <= ref4 ? ++ac : --ac) {\n          clusterSizes[j] = 0;\n        }\n\n        for (i = ad = 0, ref5 = n - 1; 0 <= ref5 ? ad <= ref5 : ad >= ref5; i = 0 <= ref5 ? ++ad : --ad) {\n          value = values[i];\n          mindist = Number.MAX_VALUE;\n\n          for (j = ae = 0, ref6 = num - 1; 0 <= ref6 ? ae <= ref6 : ae >= ref6; j = 0 <= ref6 ? ++ae : --ae) {\n            dist = abs(centroids[j] - value);\n\n            if (dist < mindist) {\n              mindist = dist;\n              best = j;\n            }\n          }\n\n          clusterSizes[best]++;\n          assignments[i] = best;\n        }\n\n        newCentroids = new Array(num);\n\n        for (j = af = 0, ref7 = num - 1; 0 <= ref7 ? af <= ref7 : af >= ref7; j = 0 <= ref7 ? ++af : --af) {\n          newCentroids[j] = null;\n        }\n\n        for (i = ag = 0, ref8 = n - 1; 0 <= ref8 ? ag <= ref8 : ag >= ref8; i = 0 <= ref8 ? ++ag : --ag) {\n          cluster = assignments[i];\n\n          if (newCentroids[cluster] === null) {\n            newCentroids[cluster] = values[i];\n          } else {\n            newCentroids[cluster] += values[i];\n          }\n        }\n\n        for (j = ah = 0, ref9 = num - 1; 0 <= ref9 ? ah <= ref9 : ah >= ref9; j = 0 <= ref9 ? ++ah : --ah) {\n          newCentroids[j] *= 1 / clusterSizes[j];\n        }\n\n        repeat = false;\n\n        for (j = ai = 0, ref10 = num - 1; 0 <= ref10 ? ai <= ref10 : ai >= ref10; j = 0 <= ref10 ? ++ai : --ai) {\n          if (newCentroids[j] !== centroids[i]) {\n            repeat = true;\n            break;\n          }\n        }\n\n        centroids = newCentroids;\n        nb_iters++;\n\n        if (nb_iters > 200) {\n          repeat = false;\n        }\n      }\n\n      kClusters = {};\n\n      for (j = aj = 0, ref11 = num - 1; 0 <= ref11 ? aj <= ref11 : aj >= ref11; j = 0 <= ref11 ? ++aj : --aj) {\n        kClusters[j] = [];\n      }\n\n      for (i = ak = 0, ref12 = n - 1; 0 <= ref12 ? ak <= ref12 : ak >= ref12; i = 0 <= ref12 ? ++ak : --ak) {\n        cluster = assignments[i];\n        kClusters[cluster].push(values[i]);\n      }\n\n      tmpKMeansBreaks = [];\n\n      for (j = al = 0, ref13 = num - 1; 0 <= ref13 ? al <= ref13 : al >= ref13; j = 0 <= ref13 ? ++al : --al) {\n        tmpKMeansBreaks.push(kClusters[j][0]);\n        tmpKMeansBreaks.push(kClusters[j][kClusters[j].length - 1]);\n      }\n\n      tmpKMeansBreaks = tmpKMeansBreaks.sort(function (a, b) {\n        return a - b;\n      });\n      limits.push(tmpKMeansBreaks[0]);\n\n      for (i = am = 1, ref14 = tmpKMeansBreaks.length - 1; am <= ref14; i = am += 2) {\n        v = tmpKMeansBreaks[i];\n\n        if (!isNaN(v) && limits.indexOf(v) === -1) {\n          limits.push(v);\n        }\n      }\n    }\n\n    return limits;\n  };\n\n  hsi2rgb = function (h, s, i) {\n    /*\n    borrowed from here:\n    http://hummer.stanford.edu/museinfo/doc/examples/humdrum/keyscape2/hsi2rgb.cpp\n     */\n    var args, b, g, r;\n    args = unpack(arguments);\n    h = args[0], s = args[1], i = args[2];\n\n    if (isNaN(h)) {\n      h = 0;\n    }\n\n    h /= 360;\n\n    if (h < 1 / 3) {\n      b = (1 - s) / 3;\n      r = (1 + s * cos(TWOPI * h) / cos(PITHIRD - TWOPI * h)) / 3;\n      g = 1 - (b + r);\n    } else if (h < 2 / 3) {\n      h -= 1 / 3;\n      r = (1 - s) / 3;\n      g = (1 + s * cos(TWOPI * h) / cos(PITHIRD - TWOPI * h)) / 3;\n      b = 1 - (r + g);\n    } else {\n      h -= 2 / 3;\n      g = (1 - s) / 3;\n      b = (1 + s * cos(TWOPI * h) / cos(PITHIRD - TWOPI * h)) / 3;\n      r = 1 - (g + b);\n    }\n\n    r = limit(i * r * 3);\n    g = limit(i * g * 3);\n    b = limit(i * b * 3);\n    return [r * 255, g * 255, b * 255, args.length > 3 ? args[3] : 1];\n  };\n\n  rgb2hsi = function () {\n    /*\n    borrowed from here:\n    http://hummer.stanford.edu/museinfo/doc/examples/humdrum/keyscape2/rgb2hsi.cpp\n     */\n    var b, g, h, i, min, r, ref, s;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    TWOPI = Math.PI * 2;\n    r /= 255;\n    g /= 255;\n    b /= 255;\n    min = Math.min(r, g, b);\n    i = (r + g + b) / 3;\n    s = 1 - min / i;\n\n    if (s === 0) {\n      h = 0;\n    } else {\n      h = (r - g + (r - b)) / 2;\n      h /= Math.sqrt((r - g) * (r - g) + (r - b) * (g - b));\n      h = Math.acos(h);\n\n      if (b > g) {\n        h = TWOPI - h;\n      }\n\n      h /= TWOPI;\n    }\n\n    return [h * 360, s, i];\n  };\n\n  chroma.hsi = function () {\n    return function (func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor(),\n          result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    }(Color, slice.call(arguments).concat(['hsi']), function () {});\n  };\n\n  _input.hsi = hsi2rgb;\n\n  Color.prototype.hsi = function () {\n    return rgb2hsi(this._rgb);\n  };\n\n  interpolate_hsx = function (col1, col2, f, m) {\n    var dh, hue, hue0, hue1, lbv, lbv0, lbv1, res, sat, sat0, sat1, xyz0, xyz1;\n\n    if (m === 'hsl') {\n      xyz0 = col1.hsl();\n      xyz1 = col2.hsl();\n    } else if (m === 'hsv') {\n      xyz0 = col1.hsv();\n      xyz1 = col2.hsv();\n    } else if (m === 'hcg') {\n      xyz0 = col1.hcg();\n      xyz1 = col2.hcg();\n    } else if (m === 'hsi') {\n      xyz0 = col1.hsi();\n      xyz1 = col2.hsi();\n    } else if (m === 'lch' || m === 'hcl') {\n      m = 'hcl';\n      xyz0 = col1.hcl();\n      xyz1 = col2.hcl();\n    }\n\n    if (m.substr(0, 1) === 'h') {\n      hue0 = xyz0[0], sat0 = xyz0[1], lbv0 = xyz0[2];\n      hue1 = xyz1[0], sat1 = xyz1[1], lbv1 = xyz1[2];\n    }\n\n    if (!isNaN(hue0) && !isNaN(hue1)) {\n      if (hue1 > hue0 && hue1 - hue0 > 180) {\n        dh = hue1 - (hue0 + 360);\n      } else if (hue1 < hue0 && hue0 - hue1 > 180) {\n        dh = hue1 + 360 - hue0;\n      } else {\n        dh = hue1 - hue0;\n      }\n\n      hue = hue0 + f * dh;\n    } else if (!isNaN(hue0)) {\n      hue = hue0;\n\n      if ((lbv1 === 1 || lbv1 === 0) && m !== 'hsv') {\n        sat = sat0;\n      }\n    } else if (!isNaN(hue1)) {\n      hue = hue1;\n\n      if ((lbv0 === 1 || lbv0 === 0) && m !== 'hsv') {\n        sat = sat1;\n      }\n    } else {\n      hue = Number.NaN;\n    }\n\n    if (sat == null) {\n      sat = sat0 + f * (sat1 - sat0);\n    }\n\n    lbv = lbv0 + f * (lbv1 - lbv0);\n    return res = chroma[m](hue, sat, lbv);\n  };\n\n  _interpolators = _interpolators.concat(function () {\n    var len, o, ref, results;\n    ref = ['hsv', 'hsl', 'hsi', 'hcl', 'lch', 'hcg'];\n    results = [];\n\n    for (o = 0, len = ref.length; o < len; o++) {\n      m = ref[o];\n      results.push([m, interpolate_hsx]);\n    }\n\n    return results;\n  }());\n\n  interpolate_num = function (col1, col2, f, m) {\n    var n1, n2;\n    n1 = col1.num();\n    n2 = col2.num();\n    return chroma.num(n1 + (n2 - n1) * f, 'num');\n  };\n\n  _interpolators.push(['num', interpolate_num]);\n\n  interpolate_lab = function (col1, col2, f, m) {\n    var res, xyz0, xyz1;\n    xyz0 = col1.lab();\n    xyz1 = col2.lab();\n    return res = new Color(xyz0[0] + f * (xyz1[0] - xyz0[0]), xyz0[1] + f * (xyz1[1] - xyz0[1]), xyz0[2] + f * (xyz1[2] - xyz0[2]), m);\n  };\n\n  _interpolators.push(['lab', interpolate_lab]);\n}).call(this);","map":{"version":3,"sources":["/Users/charlotteweil1/Projets/Viz/gobiTraining/node_modules/chroma-js/chroma.js"],"names":["Color","DEG2RAD","LAB_CONSTANTS","PI","PITHIRD","RAD2DEG","TWOPI","_average_lrgb","_guess_formats","_guess_formats_sorted","_input","_interpolators","abs","atan2","bezier","blend","blend_f","brewer","burn","chroma","clip_rgb","cmyk2rgb","colors","cos","css2rgb","darken","dodge","each","floor","hcg2rgb","hex2rgb","hsi2rgb","hsl2css","hsl2rgb","hsv2rgb","interpolate","interpolate_hsx","interpolate_lab","interpolate_lrgb","interpolate_num","interpolate_rgb","lab2lch","lab2rgb","lab_xyz","lch2lab","lch2rgb","lighten","limit","log","luminance_x","m","max","multiply","normal","num2rgb","overlay","pow","rgb2cmyk","rgb2css","rgb2hcg","rgb2hex","rgb2hsi","rgb2hsl","rgb2hsv","rgb2lab","rgb2lch","rgb2luminance","rgb2num","rgb2temperature","rgb2xyz","rgb_xyz","rnd","root","round","screen","sin","sqrt","temperature2rgb","type","unpack","w3cx11","xyz_lab","xyz_rgb","slice","classToType","len","name","o","ref","split","length","toLowerCase","obj","strType","Object","prototype","toString","call","x","min","args","Array","rgb","i","_clipped","_unclipped","Math","arguments","func","ctor","child","result","apply","module","exports","define","amd","version","arg","chk","len1","me","mode","w","push","_rgb","sort","a","b","p","test","console","warn","hex","OrRd","PuBu","BuPu","Oranges","BuGn","YlOrBr","YlGn","Reds","RdPu","Greens","YlGnBu","Purples","GnBu","Greys","YlOrRd","PuRd","Blues","PuBuGn","Viridis","Spectral","RdYlGn","RdBu","PiYG","PRGn","RdYlBu","BrBG","RdGy","PuOr","Set2","Accent","Set1","Set3","Dark2","Paired","Pastel2","Pastel1","key","results","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflower","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","laserlemon","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrod","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","maroon2","maroon3","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","purple2","purple3","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","g","l","r","y","z","isNaN","Yn","Xn","Zn","t","t1","t2","t0","Kn","t3","ref1","lab","concat","I","I0","I1","c","lab0","lab1","lab2","lab3","ref2","f","scale","cubehelix","start","rotations","hue","gamma","lightness","dh","dl","fract","amp","cos_a","h","sin_a","s","random","code","digits","charAt","col1","col2","interpol","res","alpha","mix","k","v","map","rgba","n","lrgb","xyz0","xyz1","col","xyz","average","A","cnt","dx","dy","first","xyz2","splice","get","u","match","substr","parseInt","css","channels","hxa","str","Number","NaN","hsl","q","ref3","ref4","ref5","delta","hsv","num","_c","_g","hcg","aa","ab","join","named","L","lch","hcl","reverse","cmyk","gl","luminance","lum","cur_lum","eps","max_iter","lm","kelvin","temp","maxTemp","minTemp","temperature","K","contrast","l1","l2","distance","d","sum_sq","deltaE","C","L1","L2","a1","a2","b1","b2","c1","c2","c4","dH2","delA","delB","delC","delL","h1","sc","sh","sl","v1","v2","v3","modechan","channel","src","indexOf","set","value","clipped","amount","brighten","darker","brighter","saturate","desaturate","premultiply","bottom","top","c0","out","analyze","data","val","MAX_VALUE","sum","values","count","domain","limits","positions","_classes","_colorCache","_colors","_correctLightness","_domain","_fixed","_gamma","_max","_min","_mode","_nacol","_out","_padding","_pos","_spread","_useCache","classifyValue","getClass","getColor","resetCache","setColors","tmap","maxc","minc","bypassMap","classes","_m","range","_o","spread","correctLightness","L0","L_actual","L_diff","L_ideal","pol","padding","numColors","dd","dm","samples","cache","nodata","scales","cool","hot","filter","add","visit","ac","ad","ae","af","ag","ah","ai","aj","ak","al","am","assignments","best","centroids","cluster","clusterSizes","dist","j","kClusters","max_log","min_log","mindist","nb_iters","newCentroids","pb","pr","ref10","ref11","ref12","ref13","ref14","ref6","ref7","ref8","ref9","repeat","tmpKMeansBreaks","LOG10E","acos","hsi","hue0","hue1","lbv","lbv0","lbv1","sat","sat0","sat1","n1","n2"],"mappings":"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","sourcesContent":["\n/**\n * @license\n *\n * chroma.js - JavaScript library for color conversions\n * \n * Copyright (c) 2011-2017, Gregor Aisch\n * All rights reserved.\n * \n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n * \n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * \n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n * \n * 3. The name Gregor Aisch may not be used to endorse or promote products\n *    derived from this software without specific prior written permission.\n * \n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,\n * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n */\n\n(function() {\n  var Color, DEG2RAD, LAB_CONSTANTS, PI, PITHIRD, RAD2DEG, TWOPI, _average_lrgb, _guess_formats, _guess_formats_sorted, _input, _interpolators, abs, atan2, bezier, blend, blend_f, brewer, burn, chroma, clip_rgb, cmyk2rgb, colors, cos, css2rgb, darken, dodge, each, floor, hcg2rgb, hex2rgb, hsi2rgb, hsl2css, hsl2rgb, hsv2rgb, interpolate, interpolate_hsx, interpolate_lab, interpolate_lrgb, interpolate_num, interpolate_rgb, lab2lch, lab2rgb, lab_xyz, lch2lab, lch2rgb, lighten, limit, log, luminance_x, m, max, multiply, normal, num2rgb, overlay, pow, rgb2cmyk, rgb2css, rgb2hcg, rgb2hex, rgb2hsi, rgb2hsl, rgb2hsv, rgb2lab, rgb2lch, rgb2luminance, rgb2num, rgb2temperature, rgb2xyz, rgb_xyz, rnd, root, round, screen, sin, sqrt, temperature2rgb, type, unpack, w3cx11, xyz_lab, xyz_rgb,\n    slice = [].slice;\n\n  type = (function() {\n\n    /*\n    for browser-safe type checking+\n    ported from jQuery's $.type\n     */\n    var classToType, len, name, o, ref;\n    classToType = {};\n    ref = \"Boolean Number String Function Array Date RegExp Undefined Null\".split(\" \");\n    for (o = 0, len = ref.length; o < len; o++) {\n      name = ref[o];\n      classToType[\"[object \" + name + \"]\"] = name.toLowerCase();\n    }\n    return function(obj) {\n      var strType;\n      strType = Object.prototype.toString.call(obj);\n      return classToType[strType] || \"object\";\n    };\n  })();\n\n  limit = function(x, min, max) {\n    if (min == null) {\n      min = 0;\n    }\n    if (max == null) {\n      max = 1;\n    }\n    if (x < min) {\n      x = min;\n    }\n    if (x > max) {\n      x = max;\n    }\n    return x;\n  };\n\n  unpack = function(args) {\n    if (args.length >= 3) {\n      return Array.prototype.slice.call(args);\n    } else {\n      return args[0];\n    }\n  };\n\n  clip_rgb = function(rgb) {\n    var i, o;\n    rgb._clipped = false;\n    rgb._unclipped = rgb.slice(0);\n    for (i = o = 0; o < 3; i = ++o) {\n      if (i < 3) {\n        if (rgb[i] < 0 || rgb[i] > 255) {\n          rgb._clipped = true;\n        }\n        if (rgb[i] < 0) {\n          rgb[i] = 0;\n        }\n        if (rgb[i] > 255) {\n          rgb[i] = 255;\n        }\n      } else if (i === 3) {\n        if (rgb[i] < 0) {\n          rgb[i] = 0;\n        }\n        if (rgb[i] > 1) {\n          rgb[i] = 1;\n        }\n      }\n    }\n    if (!rgb._clipped) {\n      delete rgb._unclipped;\n    }\n    return rgb;\n  };\n\n  PI = Math.PI, round = Math.round, cos = Math.cos, floor = Math.floor, pow = Math.pow, log = Math.log, sin = Math.sin, sqrt = Math.sqrt, atan2 = Math.atan2, max = Math.max, abs = Math.abs;\n\n  TWOPI = PI * 2;\n\n  PITHIRD = PI / 3;\n\n  DEG2RAD = PI / 180;\n\n  RAD2DEG = 180 / PI;\n\n  chroma = function() {\n    if (arguments[0] instanceof Color) {\n      return arguments[0];\n    }\n    return (function(func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor, result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    })(Color, arguments, function(){});\n  };\n\n  chroma[\"default\"] = chroma;\n\n  _interpolators = [];\n\n  if ((typeof module !== \"undefined\" && module !== null) && (module.exports != null)) {\n    module.exports = chroma;\n  }\n\n  if (typeof define === 'function' && define.amd) {\n    define([], function() {\n      return chroma;\n    });\n  } else {\n    root = typeof exports !== \"undefined\" && exports !== null ? exports : this;\n    root.chroma = chroma;\n  }\n\n  chroma.version = '1.4.1';\n\n  _input = {};\n\n  _guess_formats = [];\n\n  _guess_formats_sorted = false;\n\n  Color = (function() {\n    function Color() {\n      var arg, args, chk, len, len1, me, mode, o, w;\n      me = this;\n      args = [];\n      for (o = 0, len = arguments.length; o < len; o++) {\n        arg = arguments[o];\n        if (arg != null) {\n          args.push(arg);\n        }\n      }\n      if (args.length > 1) {\n        mode = args[args.length - 1];\n      }\n      if (_input[mode] != null) {\n        me._rgb = clip_rgb(_input[mode](unpack(args.slice(0, -1))));\n      } else {\n        if (!_guess_formats_sorted) {\n          _guess_formats = _guess_formats.sort(function(a, b) {\n            return b.p - a.p;\n          });\n          _guess_formats_sorted = true;\n        }\n        for (w = 0, len1 = _guess_formats.length; w < len1; w++) {\n          chk = _guess_formats[w];\n          mode = chk.test.apply(chk, args);\n          if (mode) {\n            break;\n          }\n        }\n        if (mode) {\n          me._rgb = clip_rgb(_input[mode].apply(_input, args));\n        }\n      }\n      if (me._rgb == null) {\n        console.warn('unknown format: ' + args);\n      }\n      if (me._rgb == null) {\n        me._rgb = [0, 0, 0];\n      }\n      if (me._rgb.length === 3) {\n        me._rgb.push(1);\n      }\n    }\n\n    Color.prototype.toString = function() {\n      return this.hex();\n    };\n\n    return Color;\n\n  })();\n\n  chroma._input = _input;\n\n\n  /**\n  \tColorBrewer colors for chroma.js\n  \n  \tCopyright (c) 2002 Cynthia Brewer, Mark Harrower, and The \n  \tPennsylvania State University.\n  \n  \tLicensed under the Apache License, Version 2.0 (the \"License\"); \n  \tyou may not use this file except in compliance with the License.\n  \tYou may obtain a copy of the License at\t\n  \thttp://www.apache.org/licenses/LICENSE-2.0\n  \n  \tUnless required by applicable law or agreed to in writing, software distributed\n  \tunder the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n  \tCONDITIONS OF ANY KIND, either express or implied. See the License for the\n  \tspecific language governing permissions and limitations under the License.\n  \n      @preserve\n   */\n\n  chroma.brewer = brewer = {\n    OrRd: ['#fff7ec', '#fee8c8', '#fdd49e', '#fdbb84', '#fc8d59', '#ef6548', '#d7301f', '#b30000', '#7f0000'],\n    PuBu: ['#fff7fb', '#ece7f2', '#d0d1e6', '#a6bddb', '#74a9cf', '#3690c0', '#0570b0', '#045a8d', '#023858'],\n    BuPu: ['#f7fcfd', '#e0ecf4', '#bfd3e6', '#9ebcda', '#8c96c6', '#8c6bb1', '#88419d', '#810f7c', '#4d004b'],\n    Oranges: ['#fff5eb', '#fee6ce', '#fdd0a2', '#fdae6b', '#fd8d3c', '#f16913', '#d94801', '#a63603', '#7f2704'],\n    BuGn: ['#f7fcfd', '#e5f5f9', '#ccece6', '#99d8c9', '#66c2a4', '#41ae76', '#238b45', '#006d2c', '#00441b'],\n    YlOrBr: ['#ffffe5', '#fff7bc', '#fee391', '#fec44f', '#fe9929', '#ec7014', '#cc4c02', '#993404', '#662506'],\n    YlGn: ['#ffffe5', '#f7fcb9', '#d9f0a3', '#addd8e', '#78c679', '#41ab5d', '#238443', '#006837', '#004529'],\n    Reds: ['#fff5f0', '#fee0d2', '#fcbba1', '#fc9272', '#fb6a4a', '#ef3b2c', '#cb181d', '#a50f15', '#67000d'],\n    RdPu: ['#fff7f3', '#fde0dd', '#fcc5c0', '#fa9fb5', '#f768a1', '#dd3497', '#ae017e', '#7a0177', '#49006a'],\n    Greens: ['#f7fcf5', '#e5f5e0', '#c7e9c0', '#a1d99b', '#74c476', '#41ab5d', '#238b45', '#006d2c', '#00441b'],\n    YlGnBu: ['#ffffd9', '#edf8b1', '#c7e9b4', '#7fcdbb', '#41b6c4', '#1d91c0', '#225ea8', '#253494', '#081d58'],\n    Purples: ['#fcfbfd', '#efedf5', '#dadaeb', '#bcbddc', '#9e9ac8', '#807dba', '#6a51a3', '#54278f', '#3f007d'],\n    GnBu: ['#f7fcf0', '#e0f3db', '#ccebc5', '#a8ddb5', '#7bccc4', '#4eb3d3', '#2b8cbe', '#0868ac', '#084081'],\n    Greys: ['#ffffff', '#f0f0f0', '#d9d9d9', '#bdbdbd', '#969696', '#737373', '#525252', '#252525', '#000000'],\n    YlOrRd: ['#ffffcc', '#ffeda0', '#fed976', '#feb24c', '#fd8d3c', '#fc4e2a', '#e31a1c', '#bd0026', '#800026'],\n    PuRd: ['#f7f4f9', '#e7e1ef', '#d4b9da', '#c994c7', '#df65b0', '#e7298a', '#ce1256', '#980043', '#67001f'],\n    Blues: ['#f7fbff', '#deebf7', '#c6dbef', '#9ecae1', '#6baed6', '#4292c6', '#2171b5', '#08519c', '#08306b'],\n    PuBuGn: ['#fff7fb', '#ece2f0', '#d0d1e6', '#a6bddb', '#67a9cf', '#3690c0', '#02818a', '#016c59', '#014636'],\n    Viridis: ['#440154', '#482777', '#3f4a8a', '#31678e', '#26838f', '#1f9d8a', '#6cce5a', '#b6de2b', '#fee825'],\n    Spectral: ['#9e0142', '#d53e4f', '#f46d43', '#fdae61', '#fee08b', '#ffffbf', '#e6f598', '#abdda4', '#66c2a5', '#3288bd', '#5e4fa2'],\n    RdYlGn: ['#a50026', '#d73027', '#f46d43', '#fdae61', '#fee08b', '#ffffbf', '#d9ef8b', '#a6d96a', '#66bd63', '#1a9850', '#006837'],\n    RdBu: ['#67001f', '#b2182b', '#d6604d', '#f4a582', '#fddbc7', '#f7f7f7', '#d1e5f0', '#92c5de', '#4393c3', '#2166ac', '#053061'],\n    PiYG: ['#8e0152', '#c51b7d', '#de77ae', '#f1b6da', '#fde0ef', '#f7f7f7', '#e6f5d0', '#b8e186', '#7fbc41', '#4d9221', '#276419'],\n    PRGn: ['#40004b', '#762a83', '#9970ab', '#c2a5cf', '#e7d4e8', '#f7f7f7', '#d9f0d3', '#a6dba0', '#5aae61', '#1b7837', '#00441b'],\n    RdYlBu: ['#a50026', '#d73027', '#f46d43', '#fdae61', '#fee090', '#ffffbf', '#e0f3f8', '#abd9e9', '#74add1', '#4575b4', '#313695'],\n    BrBG: ['#543005', '#8c510a', '#bf812d', '#dfc27d', '#f6e8c3', '#f5f5f5', '#c7eae5', '#80cdc1', '#35978f', '#01665e', '#003c30'],\n    RdGy: ['#67001f', '#b2182b', '#d6604d', '#f4a582', '#fddbc7', '#ffffff', '#e0e0e0', '#bababa', '#878787', '#4d4d4d', '#1a1a1a'],\n    PuOr: ['#7f3b08', '#b35806', '#e08214', '#fdb863', '#fee0b6', '#f7f7f7', '#d8daeb', '#b2abd2', '#8073ac', '#542788', '#2d004b'],\n    Set2: ['#66c2a5', '#fc8d62', '#8da0cb', '#e78ac3', '#a6d854', '#ffd92f', '#e5c494', '#b3b3b3'],\n    Accent: ['#7fc97f', '#beaed4', '#fdc086', '#ffff99', '#386cb0', '#f0027f', '#bf5b17', '#666666'],\n    Set1: ['#e41a1c', '#377eb8', '#4daf4a', '#984ea3', '#ff7f00', '#ffff33', '#a65628', '#f781bf', '#999999'],\n    Set3: ['#8dd3c7', '#ffffb3', '#bebada', '#fb8072', '#80b1d3', '#fdb462', '#b3de69', '#fccde5', '#d9d9d9', '#bc80bd', '#ccebc5', '#ffed6f'],\n    Dark2: ['#1b9e77', '#d95f02', '#7570b3', '#e7298a', '#66a61e', '#e6ab02', '#a6761d', '#666666'],\n    Paired: ['#a6cee3', '#1f78b4', '#b2df8a', '#33a02c', '#fb9a99', '#e31a1c', '#fdbf6f', '#ff7f00', '#cab2d6', '#6a3d9a', '#ffff99', '#b15928'],\n    Pastel2: ['#b3e2cd', '#fdcdac', '#cbd5e8', '#f4cae4', '#e6f5c9', '#fff2ae', '#f1e2cc', '#cccccc'],\n    Pastel1: ['#fbb4ae', '#b3cde3', '#ccebc5', '#decbe4', '#fed9a6', '#ffffcc', '#e5d8bd', '#fddaec', '#f2f2f2']\n  };\n\n  (function() {\n    var key, results;\n    results = [];\n    for (key in brewer) {\n      results.push(brewer[key.toLowerCase()] = brewer[key]);\n    }\n    return results;\n  })();\n\n\n  /**\n  \tX11 color names\n  \n  \thttp://www.w3.org/TR/css3-color/#svg-color\n   */\n\n  w3cx11 = {\n    aliceblue: '#f0f8ff',\n    antiquewhite: '#faebd7',\n    aqua: '#00ffff',\n    aquamarine: '#7fffd4',\n    azure: '#f0ffff',\n    beige: '#f5f5dc',\n    bisque: '#ffe4c4',\n    black: '#000000',\n    blanchedalmond: '#ffebcd',\n    blue: '#0000ff',\n    blueviolet: '#8a2be2',\n    brown: '#a52a2a',\n    burlywood: '#deb887',\n    cadetblue: '#5f9ea0',\n    chartreuse: '#7fff00',\n    chocolate: '#d2691e',\n    coral: '#ff7f50',\n    cornflower: '#6495ed',\n    cornflowerblue: '#6495ed',\n    cornsilk: '#fff8dc',\n    crimson: '#dc143c',\n    cyan: '#00ffff',\n    darkblue: '#00008b',\n    darkcyan: '#008b8b',\n    darkgoldenrod: '#b8860b',\n    darkgray: '#a9a9a9',\n    darkgreen: '#006400',\n    darkgrey: '#a9a9a9',\n    darkkhaki: '#bdb76b',\n    darkmagenta: '#8b008b',\n    darkolivegreen: '#556b2f',\n    darkorange: '#ff8c00',\n    darkorchid: '#9932cc',\n    darkred: '#8b0000',\n    darksalmon: '#e9967a',\n    darkseagreen: '#8fbc8f',\n    darkslateblue: '#483d8b',\n    darkslategray: '#2f4f4f',\n    darkslategrey: '#2f4f4f',\n    darkturquoise: '#00ced1',\n    darkviolet: '#9400d3',\n    deeppink: '#ff1493',\n    deepskyblue: '#00bfff',\n    dimgray: '#696969',\n    dimgrey: '#696969',\n    dodgerblue: '#1e90ff',\n    firebrick: '#b22222',\n    floralwhite: '#fffaf0',\n    forestgreen: '#228b22',\n    fuchsia: '#ff00ff',\n    gainsboro: '#dcdcdc',\n    ghostwhite: '#f8f8ff',\n    gold: '#ffd700',\n    goldenrod: '#daa520',\n    gray: '#808080',\n    green: '#008000',\n    greenyellow: '#adff2f',\n    grey: '#808080',\n    honeydew: '#f0fff0',\n    hotpink: '#ff69b4',\n    indianred: '#cd5c5c',\n    indigo: '#4b0082',\n    ivory: '#fffff0',\n    khaki: '#f0e68c',\n    laserlemon: '#ffff54',\n    lavender: '#e6e6fa',\n    lavenderblush: '#fff0f5',\n    lawngreen: '#7cfc00',\n    lemonchiffon: '#fffacd',\n    lightblue: '#add8e6',\n    lightcoral: '#f08080',\n    lightcyan: '#e0ffff',\n    lightgoldenrod: '#fafad2',\n    lightgoldenrodyellow: '#fafad2',\n    lightgray: '#d3d3d3',\n    lightgreen: '#90ee90',\n    lightgrey: '#d3d3d3',\n    lightpink: '#ffb6c1',\n    lightsalmon: '#ffa07a',\n    lightseagreen: '#20b2aa',\n    lightskyblue: '#87cefa',\n    lightslategray: '#778899',\n    lightslategrey: '#778899',\n    lightsteelblue: '#b0c4de',\n    lightyellow: '#ffffe0',\n    lime: '#00ff00',\n    limegreen: '#32cd32',\n    linen: '#faf0e6',\n    magenta: '#ff00ff',\n    maroon: '#800000',\n    maroon2: '#7f0000',\n    maroon3: '#b03060',\n    mediumaquamarine: '#66cdaa',\n    mediumblue: '#0000cd',\n    mediumorchid: '#ba55d3',\n    mediumpurple: '#9370db',\n    mediumseagreen: '#3cb371',\n    mediumslateblue: '#7b68ee',\n    mediumspringgreen: '#00fa9a',\n    mediumturquoise: '#48d1cc',\n    mediumvioletred: '#c71585',\n    midnightblue: '#191970',\n    mintcream: '#f5fffa',\n    mistyrose: '#ffe4e1',\n    moccasin: '#ffe4b5',\n    navajowhite: '#ffdead',\n    navy: '#000080',\n    oldlace: '#fdf5e6',\n    olive: '#808000',\n    olivedrab: '#6b8e23',\n    orange: '#ffa500',\n    orangered: '#ff4500',\n    orchid: '#da70d6',\n    palegoldenrod: '#eee8aa',\n    palegreen: '#98fb98',\n    paleturquoise: '#afeeee',\n    palevioletred: '#db7093',\n    papayawhip: '#ffefd5',\n    peachpuff: '#ffdab9',\n    peru: '#cd853f',\n    pink: '#ffc0cb',\n    plum: '#dda0dd',\n    powderblue: '#b0e0e6',\n    purple: '#800080',\n    purple2: '#7f007f',\n    purple3: '#a020f0',\n    rebeccapurple: '#663399',\n    red: '#ff0000',\n    rosybrown: '#bc8f8f',\n    royalblue: '#4169e1',\n    saddlebrown: '#8b4513',\n    salmon: '#fa8072',\n    sandybrown: '#f4a460',\n    seagreen: '#2e8b57',\n    seashell: '#fff5ee',\n    sienna: '#a0522d',\n    silver: '#c0c0c0',\n    skyblue: '#87ceeb',\n    slateblue: '#6a5acd',\n    slategray: '#708090',\n    slategrey: '#708090',\n    snow: '#fffafa',\n    springgreen: '#00ff7f',\n    steelblue: '#4682b4',\n    tan: '#d2b48c',\n    teal: '#008080',\n    thistle: '#d8bfd8',\n    tomato: '#ff6347',\n    turquoise: '#40e0d0',\n    violet: '#ee82ee',\n    wheat: '#f5deb3',\n    white: '#ffffff',\n    whitesmoke: '#f5f5f5',\n    yellow: '#ffff00',\n    yellowgreen: '#9acd32'\n  };\n\n  chroma.colors = colors = w3cx11;\n\n  lab2rgb = function() {\n    var a, args, b, g, l, r, x, y, z;\n    args = unpack(arguments);\n    l = args[0], a = args[1], b = args[2];\n    y = (l + 16) / 116;\n    x = isNaN(a) ? y : y + a / 500;\n    z = isNaN(b) ? y : y - b / 200;\n    y = LAB_CONSTANTS.Yn * lab_xyz(y);\n    x = LAB_CONSTANTS.Xn * lab_xyz(x);\n    z = LAB_CONSTANTS.Zn * lab_xyz(z);\n    r = xyz_rgb(3.2404542 * x - 1.5371385 * y - 0.4985314 * z);\n    g = xyz_rgb(-0.9692660 * x + 1.8760108 * y + 0.0415560 * z);\n    b = xyz_rgb(0.0556434 * x - 0.2040259 * y + 1.0572252 * z);\n    return [r, g, b, args.length > 3 ? args[3] : 1];\n  };\n\n  xyz_rgb = function(r) {\n    return 255 * (r <= 0.00304 ? 12.92 * r : 1.055 * pow(r, 1 / 2.4) - 0.055);\n  };\n\n  lab_xyz = function(t) {\n    if (t > LAB_CONSTANTS.t1) {\n      return t * t * t;\n    } else {\n      return LAB_CONSTANTS.t2 * (t - LAB_CONSTANTS.t0);\n    }\n  };\n\n  LAB_CONSTANTS = {\n    Kn: 18,\n    Xn: 0.950470,\n    Yn: 1,\n    Zn: 1.088830,\n    t0: 0.137931034,\n    t1: 0.206896552,\n    t2: 0.12841855,\n    t3: 0.008856452\n  };\n\n  rgb2lab = function() {\n    var b, g, r, ref, ref1, x, y, z;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    ref1 = rgb2xyz(r, g, b), x = ref1[0], y = ref1[1], z = ref1[2];\n    return [116 * y - 16, 500 * (x - y), 200 * (y - z)];\n  };\n\n  rgb_xyz = function(r) {\n    if ((r /= 255) <= 0.04045) {\n      return r / 12.92;\n    } else {\n      return pow((r + 0.055) / 1.055, 2.4);\n    }\n  };\n\n  xyz_lab = function(t) {\n    if (t > LAB_CONSTANTS.t3) {\n      return pow(t, 1 / 3);\n    } else {\n      return t / LAB_CONSTANTS.t2 + LAB_CONSTANTS.t0;\n    }\n  };\n\n  rgb2xyz = function() {\n    var b, g, r, ref, x, y, z;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    r = rgb_xyz(r);\n    g = rgb_xyz(g);\n    b = rgb_xyz(b);\n    x = xyz_lab((0.4124564 * r + 0.3575761 * g + 0.1804375 * b) / LAB_CONSTANTS.Xn);\n    y = xyz_lab((0.2126729 * r + 0.7151522 * g + 0.0721750 * b) / LAB_CONSTANTS.Yn);\n    z = xyz_lab((0.0193339 * r + 0.1191920 * g + 0.9503041 * b) / LAB_CONSTANTS.Zn);\n    return [x, y, z];\n  };\n\n  chroma.lab = function() {\n    return (function(func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor, result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    })(Color, slice.call(arguments).concat(['lab']), function(){});\n  };\n\n  _input.lab = lab2rgb;\n\n  Color.prototype.lab = function() {\n    return rgb2lab(this._rgb);\n  };\n\n  bezier = function(colors) {\n    var I, I0, I1, c, lab0, lab1, lab2, lab3, ref, ref1, ref2;\n    colors = (function() {\n      var len, o, results;\n      results = [];\n      for (o = 0, len = colors.length; o < len; o++) {\n        c = colors[o];\n        results.push(chroma(c));\n      }\n      return results;\n    })();\n    if (colors.length === 2) {\n      ref = (function() {\n        var len, o, results;\n        results = [];\n        for (o = 0, len = colors.length; o < len; o++) {\n          c = colors[o];\n          results.push(c.lab());\n        }\n        return results;\n      })(), lab0 = ref[0], lab1 = ref[1];\n      I = function(t) {\n        var i, lab;\n        lab = (function() {\n          var o, results;\n          results = [];\n          for (i = o = 0; o <= 2; i = ++o) {\n            results.push(lab0[i] + t * (lab1[i] - lab0[i]));\n          }\n          return results;\n        })();\n        return chroma.lab.apply(chroma, lab);\n      };\n    } else if (colors.length === 3) {\n      ref1 = (function() {\n        var len, o, results;\n        results = [];\n        for (o = 0, len = colors.length; o < len; o++) {\n          c = colors[o];\n          results.push(c.lab());\n        }\n        return results;\n      })(), lab0 = ref1[0], lab1 = ref1[1], lab2 = ref1[2];\n      I = function(t) {\n        var i, lab;\n        lab = (function() {\n          var o, results;\n          results = [];\n          for (i = o = 0; o <= 2; i = ++o) {\n            results.push((1 - t) * (1 - t) * lab0[i] + 2 * (1 - t) * t * lab1[i] + t * t * lab2[i]);\n          }\n          return results;\n        })();\n        return chroma.lab.apply(chroma, lab);\n      };\n    } else if (colors.length === 4) {\n      ref2 = (function() {\n        var len, o, results;\n        results = [];\n        for (o = 0, len = colors.length; o < len; o++) {\n          c = colors[o];\n          results.push(c.lab());\n        }\n        return results;\n      })(), lab0 = ref2[0], lab1 = ref2[1], lab2 = ref2[2], lab3 = ref2[3];\n      I = function(t) {\n        var i, lab;\n        lab = (function() {\n          var o, results;\n          results = [];\n          for (i = o = 0; o <= 2; i = ++o) {\n            results.push((1 - t) * (1 - t) * (1 - t) * lab0[i] + 3 * (1 - t) * (1 - t) * t * lab1[i] + 3 * (1 - t) * t * t * lab2[i] + t * t * t * lab3[i]);\n          }\n          return results;\n        })();\n        return chroma.lab.apply(chroma, lab);\n      };\n    } else if (colors.length === 5) {\n      I0 = bezier(colors.slice(0, 3));\n      I1 = bezier(colors.slice(2, 5));\n      I = function(t) {\n        if (t < 0.5) {\n          return I0(t * 2);\n        } else {\n          return I1((t - 0.5) * 2);\n        }\n      };\n    }\n    return I;\n  };\n\n  chroma.bezier = function(colors) {\n    var f;\n    f = bezier(colors);\n    f.scale = function() {\n      return chroma.scale(f);\n    };\n    return f;\n  };\n\n  chroma.cubehelix = function(start, rotations, hue, gamma, lightness) {\n    var dh, dl, f;\n    if (start == null) {\n      start = 300;\n    }\n    if (rotations == null) {\n      rotations = -1.5;\n    }\n    if (hue == null) {\n      hue = 1;\n    }\n    if (gamma == null) {\n      gamma = 1;\n    }\n    if (lightness == null) {\n      lightness = [0, 1];\n    }\n    dh = 0;\n    if (type(lightness) === 'array') {\n      dl = lightness[1] - lightness[0];\n    } else {\n      dl = 0;\n      lightness = [lightness, lightness];\n    }\n    f = function(fract) {\n      var a, amp, b, cos_a, g, h, l, r, sin_a;\n      a = TWOPI * ((start + 120) / 360 + rotations * fract);\n      l = pow(lightness[0] + dl * fract, gamma);\n      h = dh !== 0 ? hue[0] + fract * dh : hue;\n      amp = h * l * (1 - l) / 2;\n      cos_a = cos(a);\n      sin_a = sin(a);\n      r = l + amp * (-0.14861 * cos_a + 1.78277 * sin_a);\n      g = l + amp * (-0.29227 * cos_a - 0.90649 * sin_a);\n      b = l + amp * (+1.97294 * cos_a);\n      return chroma(clip_rgb([r * 255, g * 255, b * 255, 1]));\n    };\n    f.start = function(s) {\n      if (s == null) {\n        return start;\n      }\n      start = s;\n      return f;\n    };\n    f.rotations = function(r) {\n      if (r == null) {\n        return rotations;\n      }\n      rotations = r;\n      return f;\n    };\n    f.gamma = function(g) {\n      if (g == null) {\n        return gamma;\n      }\n      gamma = g;\n      return f;\n    };\n    f.hue = function(h) {\n      if (h == null) {\n        return hue;\n      }\n      hue = h;\n      if (type(hue) === 'array') {\n        dh = hue[1] - hue[0];\n        if (dh === 0) {\n          hue = hue[1];\n        }\n      } else {\n        dh = 0;\n      }\n      return f;\n    };\n    f.lightness = function(h) {\n      if (h == null) {\n        return lightness;\n      }\n      if (type(h) === 'array') {\n        lightness = h;\n        dl = h[1] - h[0];\n      } else {\n        lightness = [h, h];\n        dl = 0;\n      }\n      return f;\n    };\n    f.scale = function() {\n      return chroma.scale(f);\n    };\n    f.hue(hue);\n    return f;\n  };\n\n  chroma.random = function() {\n    var code, digits, i, o;\n    digits = '0123456789abcdef';\n    code = '#';\n    for (i = o = 0; o < 6; i = ++o) {\n      code += digits.charAt(floor(Math.random() * 16));\n    }\n    return new Color(code);\n  };\n\n  _interpolators = [];\n\n  interpolate = function(col1, col2, f, m) {\n    var interpol, len, o, res;\n    if (f == null) {\n      f = 0.5;\n    }\n    if (m == null) {\n      m = 'rgb';\n    }\n\n    /*\n    interpolates between colors\n    f = 0 --> me\n    f = 1 --> col\n     */\n    if (type(col1) !== 'object') {\n      col1 = chroma(col1);\n    }\n    if (type(col2) !== 'object') {\n      col2 = chroma(col2);\n    }\n    for (o = 0, len = _interpolators.length; o < len; o++) {\n      interpol = _interpolators[o];\n      if (m === interpol[0]) {\n        res = interpol[1](col1, col2, f, m);\n        break;\n      }\n    }\n    if (res == null) {\n      throw \"color mode \" + m + \" is not supported\";\n    }\n    return res.alpha(col1.alpha() + f * (col2.alpha() - col1.alpha()));\n  };\n\n  chroma.interpolate = interpolate;\n\n  Color.prototype.interpolate = function(col2, f, m) {\n    return interpolate(this, col2, f, m);\n  };\n\n  chroma.mix = interpolate;\n\n  Color.prototype.mix = Color.prototype.interpolate;\n\n  _input.rgb = function() {\n    var k, ref, results, v;\n    ref = unpack(arguments);\n    results = [];\n    for (k in ref) {\n      v = ref[k];\n      results.push(v);\n    }\n    return results;\n  };\n\n  chroma.rgb = function() {\n    return (function(func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor, result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    })(Color, slice.call(arguments).concat(['rgb']), function(){});\n  };\n\n  Color.prototype.rgb = function(round) {\n    if (round == null) {\n      round = true;\n    }\n    if (round) {\n      return this._rgb.map(Math.round).slice(0, 3);\n    } else {\n      return this._rgb.slice(0, 3);\n    }\n  };\n\n  Color.prototype.rgba = function(round) {\n    if (round == null) {\n      round = true;\n    }\n    if (!round) {\n      return this._rgb.slice(0);\n    }\n    return [Math.round(this._rgb[0]), Math.round(this._rgb[1]), Math.round(this._rgb[2]), this._rgb[3]];\n  };\n\n  _guess_formats.push({\n    p: 3,\n    test: function(n) {\n      var a;\n      a = unpack(arguments);\n      if (type(a) === 'array' && a.length === 3) {\n        return 'rgb';\n      }\n      if (a.length === 4 && type(a[3]) === \"number\" && a[3] >= 0 && a[3] <= 1) {\n        return 'rgb';\n      }\n    }\n  });\n\n  _input.lrgb = _input.rgb;\n\n  interpolate_lrgb = function(col1, col2, f, m) {\n    var xyz0, xyz1;\n    xyz0 = col1._rgb;\n    xyz1 = col2._rgb;\n    return new Color(sqrt(pow(xyz0[0], 2) * (1 - f) + pow(xyz1[0], 2) * f), sqrt(pow(xyz0[1], 2) * (1 - f) + pow(xyz1[1], 2) * f), sqrt(pow(xyz0[2], 2) * (1 - f) + pow(xyz1[2], 2) * f), m);\n  };\n\n  _average_lrgb = function(colors) {\n    var col, f, len, o, rgb, xyz;\n    f = 1 / colors.length;\n    xyz = [0, 0, 0, 0];\n    for (o = 0, len = colors.length; o < len; o++) {\n      col = colors[o];\n      rgb = col._rgb;\n      xyz[0] += pow(rgb[0], 2) * f;\n      xyz[1] += pow(rgb[1], 2) * f;\n      xyz[2] += pow(rgb[2], 2) * f;\n      xyz[3] += rgb[3] * f;\n    }\n    xyz[0] = sqrt(xyz[0]);\n    xyz[1] = sqrt(xyz[1]);\n    xyz[2] = sqrt(xyz[2]);\n    if (xyz[3] > 1) {\n      xyz[3] = 1;\n    }\n    return new Color(clip_rgb(xyz));\n  };\n\n  _interpolators.push(['lrgb', interpolate_lrgb]);\n\n  chroma.average = function(colors, mode) {\n    var A, alpha, c, cnt, dx, dy, first, i, l, len, o, xyz, xyz2;\n    if (mode == null) {\n      mode = 'rgb';\n    }\n    l = colors.length;\n    colors = colors.map(function(c) {\n      return chroma(c);\n    });\n    first = colors.splice(0, 1)[0];\n    if (mode === 'lrgb') {\n      return _average_lrgb(colors);\n    }\n    xyz = first.get(mode);\n    cnt = [];\n    dx = 0;\n    dy = 0;\n    for (i in xyz) {\n      xyz[i] = xyz[i] || 0;\n      cnt.push(isNaN(xyz[i]) ? 0 : 1);\n      if (mode.charAt(i) === 'h' && !isNaN(xyz[i])) {\n        A = xyz[i] / 180 * PI;\n        dx += cos(A);\n        dy += sin(A);\n      }\n    }\n    alpha = first.alpha();\n    for (o = 0, len = colors.length; o < len; o++) {\n      c = colors[o];\n      xyz2 = c.get(mode);\n      alpha += c.alpha();\n      for (i in xyz) {\n        if (!isNaN(xyz2[i])) {\n          cnt[i] += 1;\n          if (mode.charAt(i) === 'h') {\n            A = xyz2[i] / 180 * PI;\n            dx += cos(A);\n            dy += sin(A);\n          } else {\n            xyz[i] += xyz2[i];\n          }\n        }\n      }\n    }\n    for (i in xyz) {\n      if (mode.charAt(i) === 'h') {\n        A = atan2(dy / cnt[i], dx / cnt[i]) / PI * 180;\n        while (A < 0) {\n          A += 360;\n        }\n        while (A >= 360) {\n          A -= 360;\n        }\n        xyz[i] = A;\n      } else {\n        xyz[i] = xyz[i] / cnt[i];\n      }\n    }\n    return chroma(xyz, mode).alpha(alpha / l);\n  };\n\n  hex2rgb = function(hex) {\n    var a, b, g, r, rgb, u;\n    if (hex.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/)) {\n      if (hex.length === 4 || hex.length === 7) {\n        hex = hex.substr(1);\n      }\n      if (hex.length === 3) {\n        hex = hex.split(\"\");\n        hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];\n      }\n      u = parseInt(hex, 16);\n      r = u >> 16;\n      g = u >> 8 & 0xFF;\n      b = u & 0xFF;\n      return [r, g, b, 1];\n    }\n    if (hex.match(/^#?([A-Fa-f0-9]{8})$/)) {\n      if (hex.length === 9) {\n        hex = hex.substr(1);\n      }\n      u = parseInt(hex, 16);\n      r = u >> 24 & 0xFF;\n      g = u >> 16 & 0xFF;\n      b = u >> 8 & 0xFF;\n      a = round((u & 0xFF) / 0xFF * 100) / 100;\n      return [r, g, b, a];\n    }\n    if ((_input.css != null) && (rgb = _input.css(hex))) {\n      return rgb;\n    }\n    throw \"unknown color: \" + hex;\n  };\n\n  rgb2hex = function(channels, mode) {\n    var a, b, g, hxa, r, str, u;\n    if (mode == null) {\n      mode = 'auto';\n    }\n    r = channels[0], g = channels[1], b = channels[2], a = channels[3];\n    if (mode === 'auto') {\n      mode = a < 1 ? 'rgba' : 'rgb';\n    }\n    r = Math.round(r);\n    g = Math.round(g);\n    b = Math.round(b);\n    u = r << 16 | g << 8 | b;\n    str = \"000000\" + u.toString(16);\n    str = str.substr(str.length - 6);\n    hxa = '0' + round(a * 255).toString(16);\n    hxa = hxa.substr(hxa.length - 2);\n    return \"#\" + (function() {\n      switch (mode.toLowerCase()) {\n        case 'rgba':\n          return str + hxa;\n        case 'argb':\n          return hxa + str;\n        default:\n          return str;\n      }\n    })();\n  };\n\n  _input.hex = function(h) {\n    return hex2rgb(h);\n  };\n\n  chroma.hex = function() {\n    return (function(func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor, result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    })(Color, slice.call(arguments).concat(['hex']), function(){});\n  };\n\n  Color.prototype.hex = function(mode) {\n    if (mode == null) {\n      mode = 'auto';\n    }\n    return rgb2hex(this._rgb, mode);\n  };\n\n  _guess_formats.push({\n    p: 4,\n    test: function(n) {\n      if (arguments.length === 1 && type(n) === \"string\") {\n        return 'hex';\n      }\n    }\n  });\n\n  hsl2rgb = function() {\n    var args, b, c, g, h, i, l, o, r, ref, s, t1, t2, t3;\n    args = unpack(arguments);\n    h = args[0], s = args[1], l = args[2];\n    if (s === 0) {\n      r = g = b = l * 255;\n    } else {\n      t3 = [0, 0, 0];\n      c = [0, 0, 0];\n      t2 = l < 0.5 ? l * (1 + s) : l + s - l * s;\n      t1 = 2 * l - t2;\n      h /= 360;\n      t3[0] = h + 1 / 3;\n      t3[1] = h;\n      t3[2] = h - 1 / 3;\n      for (i = o = 0; o <= 2; i = ++o) {\n        if (t3[i] < 0) {\n          t3[i] += 1;\n        }\n        if (t3[i] > 1) {\n          t3[i] -= 1;\n        }\n        if (6 * t3[i] < 1) {\n          c[i] = t1 + (t2 - t1) * 6 * t3[i];\n        } else if (2 * t3[i] < 1) {\n          c[i] = t2;\n        } else if (3 * t3[i] < 2) {\n          c[i] = t1 + (t2 - t1) * ((2 / 3) - t3[i]) * 6;\n        } else {\n          c[i] = t1;\n        }\n      }\n      ref = [round(c[0] * 255), round(c[1] * 255), round(c[2] * 255)], r = ref[0], g = ref[1], b = ref[2];\n    }\n    if (args.length > 3) {\n      return [r, g, b, args[3]];\n    } else {\n      return [r, g, b];\n    }\n  };\n\n  rgb2hsl = function(r, g, b) {\n    var h, l, min, ref, s;\n    if (r !== void 0 && r.length >= 3) {\n      ref = r, r = ref[0], g = ref[1], b = ref[2];\n    }\n    r /= 255;\n    g /= 255;\n    b /= 255;\n    min = Math.min(r, g, b);\n    max = Math.max(r, g, b);\n    l = (max + min) / 2;\n    if (max === min) {\n      s = 0;\n      h = Number.NaN;\n    } else {\n      s = l < 0.5 ? (max - min) / (max + min) : (max - min) / (2 - max - min);\n    }\n    if (r === max) {\n      h = (g - b) / (max - min);\n    } else if (g === max) {\n      h = 2 + (b - r) / (max - min);\n    } else if (b === max) {\n      h = 4 + (r - g) / (max - min);\n    }\n    h *= 60;\n    if (h < 0) {\n      h += 360;\n    }\n    return [h, s, l];\n  };\n\n  chroma.hsl = function() {\n    return (function(func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor, result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    })(Color, slice.call(arguments).concat(['hsl']), function(){});\n  };\n\n  _input.hsl = hsl2rgb;\n\n  Color.prototype.hsl = function() {\n    return rgb2hsl(this._rgb);\n  };\n\n  hsv2rgb = function() {\n    var args, b, f, g, h, i, p, q, r, ref, ref1, ref2, ref3, ref4, ref5, s, t, v;\n    args = unpack(arguments);\n    h = args[0], s = args[1], v = args[2];\n    v *= 255;\n    if (s === 0) {\n      r = g = b = v;\n    } else {\n      if (h === 360) {\n        h = 0;\n      }\n      if (h > 360) {\n        h -= 360;\n      }\n      if (h < 0) {\n        h += 360;\n      }\n      h /= 60;\n      i = floor(h);\n      f = h - i;\n      p = v * (1 - s);\n      q = v * (1 - s * f);\n      t = v * (1 - s * (1 - f));\n      switch (i) {\n        case 0:\n          ref = [v, t, p], r = ref[0], g = ref[1], b = ref[2];\n          break;\n        case 1:\n          ref1 = [q, v, p], r = ref1[0], g = ref1[1], b = ref1[2];\n          break;\n        case 2:\n          ref2 = [p, v, t], r = ref2[0], g = ref2[1], b = ref2[2];\n          break;\n        case 3:\n          ref3 = [p, q, v], r = ref3[0], g = ref3[1], b = ref3[2];\n          break;\n        case 4:\n          ref4 = [t, p, v], r = ref4[0], g = ref4[1], b = ref4[2];\n          break;\n        case 5:\n          ref5 = [v, p, q], r = ref5[0], g = ref5[1], b = ref5[2];\n      }\n    }\n    return [r, g, b, args.length > 3 ? args[3] : 1];\n  };\n\n  rgb2hsv = function() {\n    var b, delta, g, h, min, r, ref, s, v;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    min = Math.min(r, g, b);\n    max = Math.max(r, g, b);\n    delta = max - min;\n    v = max / 255.0;\n    if (max === 0) {\n      h = Number.NaN;\n      s = 0;\n    } else {\n      s = delta / max;\n      if (r === max) {\n        h = (g - b) / delta;\n      }\n      if (g === max) {\n        h = 2 + (b - r) / delta;\n      }\n      if (b === max) {\n        h = 4 + (r - g) / delta;\n      }\n      h *= 60;\n      if (h < 0) {\n        h += 360;\n      }\n    }\n    return [h, s, v];\n  };\n\n  chroma.hsv = function() {\n    return (function(func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor, result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    })(Color, slice.call(arguments).concat(['hsv']), function(){});\n  };\n\n  _input.hsv = hsv2rgb;\n\n  Color.prototype.hsv = function() {\n    return rgb2hsv(this._rgb);\n  };\n\n  num2rgb = function(num) {\n    var b, g, r;\n    if (type(num) === \"number\" && num >= 0 && num <= 0xFFFFFF) {\n      r = num >> 16;\n      g = (num >> 8) & 0xFF;\n      b = num & 0xFF;\n      return [r, g, b, 1];\n    }\n    console.warn(\"unknown num color: \" + num);\n    return [0, 0, 0, 1];\n  };\n\n  rgb2num = function() {\n    var b, g, r, ref;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    return (r << 16) + (g << 8) + b;\n  };\n\n  chroma.num = function(num) {\n    return new Color(num, 'num');\n  };\n\n  Color.prototype.num = function(mode) {\n    if (mode == null) {\n      mode = 'rgb';\n    }\n    return rgb2num(this._rgb, mode);\n  };\n\n  _input.num = num2rgb;\n\n  _guess_formats.push({\n    p: 1,\n    test: function(n) {\n      if (arguments.length === 1 && type(n) === \"number\" && n >= 0 && n <= 0xFFFFFF) {\n        return 'num';\n      }\n    }\n  });\n\n  hcg2rgb = function() {\n    var _c, _g, args, b, c, f, g, h, i, p, q, r, ref, ref1, ref2, ref3, ref4, ref5, t, v;\n    args = unpack(arguments);\n    h = args[0], c = args[1], _g = args[2];\n    c = c / 100;\n    g = g / 100 * 255;\n    _c = c * 255;\n    if (c === 0) {\n      r = g = b = _g;\n    } else {\n      if (h === 360) {\n        h = 0;\n      }\n      if (h > 360) {\n        h -= 360;\n      }\n      if (h < 0) {\n        h += 360;\n      }\n      h /= 60;\n      i = floor(h);\n      f = h - i;\n      p = _g * (1 - c);\n      q = p + _c * (1 - f);\n      t = p + _c * f;\n      v = p + _c;\n      switch (i) {\n        case 0:\n          ref = [v, t, p], r = ref[0], g = ref[1], b = ref[2];\n          break;\n        case 1:\n          ref1 = [q, v, p], r = ref1[0], g = ref1[1], b = ref1[2];\n          break;\n        case 2:\n          ref2 = [p, v, t], r = ref2[0], g = ref2[1], b = ref2[2];\n          break;\n        case 3:\n          ref3 = [p, q, v], r = ref3[0], g = ref3[1], b = ref3[2];\n          break;\n        case 4:\n          ref4 = [t, p, v], r = ref4[0], g = ref4[1], b = ref4[2];\n          break;\n        case 5:\n          ref5 = [v, p, q], r = ref5[0], g = ref5[1], b = ref5[2];\n      }\n    }\n    return [r, g, b, args.length > 3 ? args[3] : 1];\n  };\n\n  rgb2hcg = function() {\n    var _g, b, c, delta, g, h, min, r, ref;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    min = Math.min(r, g, b);\n    max = Math.max(r, g, b);\n    delta = max - min;\n    c = delta * 100 / 255;\n    _g = min / (255 - delta) * 100;\n    if (delta === 0) {\n      h = Number.NaN;\n    } else {\n      if (r === max) {\n        h = (g - b) / delta;\n      }\n      if (g === max) {\n        h = 2 + (b - r) / delta;\n      }\n      if (b === max) {\n        h = 4 + (r - g) / delta;\n      }\n      h *= 60;\n      if (h < 0) {\n        h += 360;\n      }\n    }\n    return [h, c, _g];\n  };\n\n  chroma.hcg = function() {\n    return (function(func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor, result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    })(Color, slice.call(arguments).concat(['hcg']), function(){});\n  };\n\n  _input.hcg = hcg2rgb;\n\n  Color.prototype.hcg = function() {\n    return rgb2hcg(this._rgb);\n  };\n\n  css2rgb = function(css) {\n    var aa, ab, hsl, i, m, o, rgb, w;\n    css = css.toLowerCase();\n    if ((chroma.colors != null) && chroma.colors[css]) {\n      return hex2rgb(chroma.colors[css]);\n    }\n    if (m = css.match(/rgb\\(\\s*(\\-?\\d+),\\s*(\\-?\\d+)\\s*,\\s*(\\-?\\d+)\\s*\\)/)) {\n      rgb = m.slice(1, 4);\n      for (i = o = 0; o <= 2; i = ++o) {\n        rgb[i] = +rgb[i];\n      }\n      rgb[3] = 1;\n    } else if (m = css.match(/rgba\\(\\s*(\\-?\\d+),\\s*(\\-?\\d+)\\s*,\\s*(\\-?\\d+)\\s*,\\s*([01]|[01]?\\.\\d+)\\)/)) {\n      rgb = m.slice(1, 5);\n      for (i = w = 0; w <= 3; i = ++w) {\n        rgb[i] = +rgb[i];\n      }\n    } else if (m = css.match(/rgb\\(\\s*(\\-?\\d+(?:\\.\\d+)?)%,\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*,\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*\\)/)) {\n      rgb = m.slice(1, 4);\n      for (i = aa = 0; aa <= 2; i = ++aa) {\n        rgb[i] = round(rgb[i] * 2.55);\n      }\n      rgb[3] = 1;\n    } else if (m = css.match(/rgba\\(\\s*(\\-?\\d+(?:\\.\\d+)?)%,\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*,\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*,\\s*([01]|[01]?\\.\\d+)\\)/)) {\n      rgb = m.slice(1, 5);\n      for (i = ab = 0; ab <= 2; i = ++ab) {\n        rgb[i] = round(rgb[i] * 2.55);\n      }\n      rgb[3] = +rgb[3];\n    } else if (m = css.match(/hsl\\(\\s*(\\-?\\d+(?:\\.\\d+)?),\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*,\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*\\)/)) {\n      hsl = m.slice(1, 4);\n      hsl[1] *= 0.01;\n      hsl[2] *= 0.01;\n      rgb = hsl2rgb(hsl);\n      rgb[3] = 1;\n    } else if (m = css.match(/hsla\\(\\s*(\\-?\\d+(?:\\.\\d+)?),\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*,\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*,\\s*([01]|[01]?\\.\\d+)\\)/)) {\n      hsl = m.slice(1, 4);\n      hsl[1] *= 0.01;\n      hsl[2] *= 0.01;\n      rgb = hsl2rgb(hsl);\n      rgb[3] = +m[4];\n    }\n    return rgb;\n  };\n\n  rgb2css = function(rgba) {\n    var mode;\n    mode = rgba[3] < 1 ? 'rgba' : 'rgb';\n    if (mode === 'rgb') {\n      return mode + '(' + rgba.slice(0, 3).map(round).join(',') + ')';\n    } else if (mode === 'rgba') {\n      return mode + '(' + rgba.slice(0, 3).map(round).join(',') + ',' + rgba[3] + ')';\n    } else {\n\n    }\n  };\n\n  rnd = function(a) {\n    return round(a * 100) / 100;\n  };\n\n  hsl2css = function(hsl, alpha) {\n    var mode;\n    mode = alpha < 1 ? 'hsla' : 'hsl';\n    hsl[0] = rnd(hsl[0] || 0);\n    hsl[1] = rnd(hsl[1] * 100) + '%';\n    hsl[2] = rnd(hsl[2] * 100) + '%';\n    if (mode === 'hsla') {\n      hsl[3] = alpha;\n    }\n    return mode + '(' + hsl.join(',') + ')';\n  };\n\n  _input.css = function(h) {\n    return css2rgb(h);\n  };\n\n  chroma.css = function() {\n    return (function(func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor, result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    })(Color, slice.call(arguments).concat(['css']), function(){});\n  };\n\n  Color.prototype.css = function(mode) {\n    if (mode == null) {\n      mode = 'rgb';\n    }\n    if (mode.slice(0, 3) === 'rgb') {\n      return rgb2css(this._rgb);\n    } else if (mode.slice(0, 3) === 'hsl') {\n      return hsl2css(this.hsl(), this.alpha());\n    }\n  };\n\n  _input.named = function(name) {\n    return hex2rgb(w3cx11[name]);\n  };\n\n  _guess_formats.push({\n    p: 5,\n    test: function(n) {\n      if (arguments.length === 1 && (w3cx11[n] != null)) {\n        return 'named';\n      }\n    }\n  });\n\n  Color.prototype.name = function(n) {\n    var h, k;\n    if (arguments.length) {\n      if (w3cx11[n]) {\n        this._rgb = hex2rgb(w3cx11[n]);\n      }\n      this._rgb[3] = 1;\n      this;\n    }\n    h = this.hex('rgb');\n    for (k in w3cx11) {\n      if (h === w3cx11[k]) {\n        return k;\n      }\n    }\n    return h;\n  };\n\n  lch2lab = function() {\n\n    /*\n    Convert from a qualitative parameter h and a quantitative parameter l to a 24-bit pixel.\n    These formulas were invented by David Dalrymple to obtain maximum contrast without going\n    out of gamut if the parameters are in the range 0-1.\n    \n    A saturation multiplier was added by Gregor Aisch\n     */\n    var c, h, l, ref;\n    ref = unpack(arguments), l = ref[0], c = ref[1], h = ref[2];\n    h = h * DEG2RAD;\n    return [l, cos(h) * c, sin(h) * c];\n  };\n\n  lch2rgb = function() {\n    var L, a, args, b, c, g, h, l, r, ref, ref1;\n    args = unpack(arguments);\n    l = args[0], c = args[1], h = args[2];\n    ref = lch2lab(l, c, h), L = ref[0], a = ref[1], b = ref[2];\n    ref1 = lab2rgb(L, a, b), r = ref1[0], g = ref1[1], b = ref1[2];\n    return [r, g, b, args.length > 3 ? args[3] : 1];\n  };\n\n  lab2lch = function() {\n    var a, b, c, h, l, ref;\n    ref = unpack(arguments), l = ref[0], a = ref[1], b = ref[2];\n    c = sqrt(a * a + b * b);\n    h = (atan2(b, a) * RAD2DEG + 360) % 360;\n    if (round(c * 10000) === 0) {\n      h = Number.NaN;\n    }\n    return [l, c, h];\n  };\n\n  rgb2lch = function() {\n    var a, b, g, l, r, ref, ref1;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    ref1 = rgb2lab(r, g, b), l = ref1[0], a = ref1[1], b = ref1[2];\n    return lab2lch(l, a, b);\n  };\n\n  chroma.lch = function() {\n    var args;\n    args = unpack(arguments);\n    return new Color(args, 'lch');\n  };\n\n  chroma.hcl = function() {\n    var args;\n    args = unpack(arguments);\n    return new Color(args, 'hcl');\n  };\n\n  _input.lch = lch2rgb;\n\n  _input.hcl = function() {\n    var c, h, l, ref;\n    ref = unpack(arguments), h = ref[0], c = ref[1], l = ref[2];\n    return lch2rgb([l, c, h]);\n  };\n\n  Color.prototype.lch = function() {\n    return rgb2lch(this._rgb);\n  };\n\n  Color.prototype.hcl = function() {\n    return rgb2lch(this._rgb).reverse();\n  };\n\n  rgb2cmyk = function(mode) {\n    var b, c, f, g, k, m, r, ref, y;\n    if (mode == null) {\n      mode = 'rgb';\n    }\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    r = r / 255;\n    g = g / 255;\n    b = b / 255;\n    k = 1 - Math.max(r, Math.max(g, b));\n    f = k < 1 ? 1 / (1 - k) : 0;\n    c = (1 - r - k) * f;\n    m = (1 - g - k) * f;\n    y = (1 - b - k) * f;\n    return [c, m, y, k];\n  };\n\n  cmyk2rgb = function() {\n    var alpha, args, b, c, g, k, m, r, y;\n    args = unpack(arguments);\n    c = args[0], m = args[1], y = args[2], k = args[3];\n    alpha = args.length > 4 ? args[4] : 1;\n    if (k === 1) {\n      return [0, 0, 0, alpha];\n    }\n    r = c >= 1 ? 0 : 255 * (1 - c) * (1 - k);\n    g = m >= 1 ? 0 : 255 * (1 - m) * (1 - k);\n    b = y >= 1 ? 0 : 255 * (1 - y) * (1 - k);\n    return [r, g, b, alpha];\n  };\n\n  _input.cmyk = function() {\n    return cmyk2rgb(unpack(arguments));\n  };\n\n  chroma.cmyk = function() {\n    return (function(func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor, result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    })(Color, slice.call(arguments).concat(['cmyk']), function(){});\n  };\n\n  Color.prototype.cmyk = function() {\n    return rgb2cmyk(this._rgb);\n  };\n\n  _input.gl = function() {\n    var i, k, o, rgb, v;\n    rgb = (function() {\n      var ref, results;\n      ref = unpack(arguments);\n      results = [];\n      for (k in ref) {\n        v = ref[k];\n        results.push(v);\n      }\n      return results;\n    }).apply(this, arguments);\n    for (i = o = 0; o <= 2; i = ++o) {\n      rgb[i] *= 255;\n    }\n    return rgb;\n  };\n\n  chroma.gl = function() {\n    return (function(func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor, result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    })(Color, slice.call(arguments).concat(['gl']), function(){});\n  };\n\n  Color.prototype.gl = function() {\n    var rgb;\n    rgb = this._rgb;\n    return [rgb[0] / 255, rgb[1] / 255, rgb[2] / 255, rgb[3]];\n  };\n\n  rgb2luminance = function(r, g, b) {\n    var ref;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    r = luminance_x(r);\n    g = luminance_x(g);\n    b = luminance_x(b);\n    return 0.2126 * r + 0.7152 * g + 0.0722 * b;\n  };\n\n  luminance_x = function(x) {\n    x /= 255;\n    if (x <= 0.03928) {\n      return x / 12.92;\n    } else {\n      return pow((x + 0.055) / 1.055, 2.4);\n    }\n  };\n\n  interpolate_rgb = function(col1, col2, f, m) {\n    var xyz0, xyz1;\n    xyz0 = col1._rgb;\n    xyz1 = col2._rgb;\n    return new Color(xyz0[0] + f * (xyz1[0] - xyz0[0]), xyz0[1] + f * (xyz1[1] - xyz0[1]), xyz0[2] + f * (xyz1[2] - xyz0[2]), m);\n  };\n\n  _interpolators.push(['rgb', interpolate_rgb]);\n\n  Color.prototype.luminance = function(lum, mode) {\n    var cur_lum, eps, max_iter, rgba, test;\n    if (mode == null) {\n      mode = 'rgb';\n    }\n    if (!arguments.length) {\n      return rgb2luminance(this._rgb);\n    }\n    rgba = this._rgb;\n    if (lum === 0) {\n      rgba = [0, 0, 0, this._rgb[3]];\n    } else if (lum === 1) {\n      rgba = [255, 255, 255, this[3]];\n    } else {\n      cur_lum = rgb2luminance(this._rgb);\n      eps = 1e-7;\n      max_iter = 20;\n      test = function(l, h) {\n        var lm, m;\n        m = l.interpolate(h, 0.5, mode);\n        lm = m.luminance();\n        if (Math.abs(lum - lm) < eps || !max_iter--) {\n          return m;\n        }\n        if (lm > lum) {\n          return test(l, m);\n        }\n        return test(m, h);\n      };\n      if (cur_lum > lum) {\n        rgba = test(chroma('black'), this).rgba();\n      } else {\n        rgba = test(this, chroma('white')).rgba();\n      }\n    }\n    return chroma(rgba).alpha(this.alpha());\n  };\n\n  temperature2rgb = function(kelvin) {\n    var b, g, r, temp;\n    temp = kelvin / 100;\n    if (temp < 66) {\n      r = 255;\n      g = -155.25485562709179 - 0.44596950469579133 * (g = temp - 2) + 104.49216199393888 * log(g);\n      b = temp < 20 ? 0 : -254.76935184120902 + 0.8274096064007395 * (b = temp - 10) + 115.67994401066147 * log(b);\n    } else {\n      r = 351.97690566805693 + 0.114206453784165 * (r = temp - 55) - 40.25366309332127 * log(r);\n      g = 325.4494125711974 + 0.07943456536662342 * (g = temp - 50) - 28.0852963507957 * log(g);\n      b = 255;\n    }\n    return [r, g, b];\n  };\n\n  rgb2temperature = function() {\n    var b, eps, g, maxTemp, minTemp, r, ref, rgb, temp;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    minTemp = 1000;\n    maxTemp = 40000;\n    eps = 0.4;\n    while (maxTemp - minTemp > eps) {\n      temp = (maxTemp + minTemp) * 0.5;\n      rgb = temperature2rgb(temp);\n      if ((rgb[2] / rgb[0]) >= (b / r)) {\n        maxTemp = temp;\n      } else {\n        minTemp = temp;\n      }\n    }\n    return round(temp);\n  };\n\n  chroma.temperature = chroma.kelvin = function() {\n    return (function(func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor, result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    })(Color, slice.call(arguments).concat(['temperature']), function(){});\n  };\n\n  _input.temperature = _input.kelvin = _input.K = temperature2rgb;\n\n  Color.prototype.temperature = function() {\n    return rgb2temperature(this._rgb);\n  };\n\n  Color.prototype.kelvin = Color.prototype.temperature;\n\n  chroma.contrast = function(a, b) {\n    var l1, l2, ref, ref1;\n    if ((ref = type(a)) === 'string' || ref === 'number') {\n      a = new Color(a);\n    }\n    if ((ref1 = type(b)) === 'string' || ref1 === 'number') {\n      b = new Color(b);\n    }\n    l1 = a.luminance();\n    l2 = b.luminance();\n    if (l1 > l2) {\n      return (l1 + 0.05) / (l2 + 0.05);\n    } else {\n      return (l2 + 0.05) / (l1 + 0.05);\n    }\n  };\n\n  chroma.distance = function(a, b, mode) {\n    var d, i, l1, l2, ref, ref1, sum_sq;\n    if (mode == null) {\n      mode = 'lab';\n    }\n    if ((ref = type(a)) === 'string' || ref === 'number') {\n      a = new Color(a);\n    }\n    if ((ref1 = type(b)) === 'string' || ref1 === 'number') {\n      b = new Color(b);\n    }\n    l1 = a.get(mode);\n    l2 = b.get(mode);\n    sum_sq = 0;\n    for (i in l1) {\n      d = (l1[i] || 0) - (l2[i] || 0);\n      sum_sq += d * d;\n    }\n    return Math.sqrt(sum_sq);\n  };\n\n  chroma.deltaE = function(a, b, L, C) {\n    var L1, L2, a1, a2, b1, b2, c1, c2, c4, dH2, delA, delB, delC, delL, f, h1, ref, ref1, ref2, ref3, sc, sh, sl, t, v1, v2, v3;\n    if (L == null) {\n      L = 1;\n    }\n    if (C == null) {\n      C = 1;\n    }\n    if ((ref = type(a)) === 'string' || ref === 'number') {\n      a = new Color(a);\n    }\n    if ((ref1 = type(b)) === 'string' || ref1 === 'number') {\n      b = new Color(b);\n    }\n    ref2 = a.lab(), L1 = ref2[0], a1 = ref2[1], b1 = ref2[2];\n    ref3 = b.lab(), L2 = ref3[0], a2 = ref3[1], b2 = ref3[2];\n    c1 = sqrt(a1 * a1 + b1 * b1);\n    c2 = sqrt(a2 * a2 + b2 * b2);\n    sl = L1 < 16.0 ? 0.511 : (0.040975 * L1) / (1.0 + 0.01765 * L1);\n    sc = (0.0638 * c1) / (1.0 + 0.0131 * c1) + 0.638;\n    h1 = c1 < 0.000001 ? 0.0 : (atan2(b1, a1) * 180.0) / PI;\n    while (h1 < 0) {\n      h1 += 360;\n    }\n    while (h1 >= 360) {\n      h1 -= 360;\n    }\n    t = (h1 >= 164.0) && (h1 <= 345.0) ? 0.56 + abs(0.2 * cos((PI * (h1 + 168.0)) / 180.0)) : 0.36 + abs(0.4 * cos((PI * (h1 + 35.0)) / 180.0));\n    c4 = c1 * c1 * c1 * c1;\n    f = sqrt(c4 / (c4 + 1900.0));\n    sh = sc * (f * t + 1.0 - f);\n    delL = L1 - L2;\n    delC = c1 - c2;\n    delA = a1 - a2;\n    delB = b1 - b2;\n    dH2 = delA * delA + delB * delB - delC * delC;\n    v1 = delL / (L * sl);\n    v2 = delC / (C * sc);\n    v3 = sh;\n    return sqrt(v1 * v1 + v2 * v2 + (dH2 / (v3 * v3)));\n  };\n\n  Color.prototype.get = function(modechan) {\n    var channel, i, me, mode, ref, src;\n    me = this;\n    ref = modechan.split('.'), mode = ref[0], channel = ref[1];\n    src = me[mode]();\n    if (channel) {\n      i = mode.indexOf(channel);\n      if (i > -1) {\n        return src[i];\n      } else {\n        return console.warn('unknown channel ' + channel + ' in mode ' + mode);\n      }\n    } else {\n      return src;\n    }\n  };\n\n  Color.prototype.set = function(modechan, value) {\n    var channel, i, me, mode, ref, src;\n    me = this;\n    ref = modechan.split('.'), mode = ref[0], channel = ref[1];\n    if (channel) {\n      src = me[mode]();\n      i = mode.indexOf(channel);\n      if (i > -1) {\n        if (type(value) === 'string') {\n          switch (value.charAt(0)) {\n            case '+':\n              src[i] += +value;\n              break;\n            case '-':\n              src[i] += +value;\n              break;\n            case '*':\n              src[i] *= +(value.substr(1));\n              break;\n            case '/':\n              src[i] /= +(value.substr(1));\n              break;\n            default:\n              src[i] = +value;\n          }\n        } else {\n          src[i] = value;\n        }\n      } else {\n        console.warn('unknown channel ' + channel + ' in mode ' + mode);\n      }\n    } else {\n      src = value;\n    }\n    return chroma(src, mode).alpha(me.alpha());\n  };\n\n  Color.prototype.clipped = function() {\n    return this._rgb._clipped || false;\n  };\n\n  Color.prototype.alpha = function(a) {\n    if (arguments.length) {\n      return chroma.rgb([this._rgb[0], this._rgb[1], this._rgb[2], a]);\n    }\n    return this._rgb[3];\n  };\n\n  Color.prototype.darken = function(amount) {\n    var lab, me;\n    if (amount == null) {\n      amount = 1;\n    }\n    me = this;\n    lab = me.lab();\n    lab[0] -= LAB_CONSTANTS.Kn * amount;\n    return chroma.lab(lab).alpha(me.alpha());\n  };\n\n  Color.prototype.brighten = function(amount) {\n    if (amount == null) {\n      amount = 1;\n    }\n    return this.darken(-amount);\n  };\n\n  Color.prototype.darker = Color.prototype.darken;\n\n  Color.prototype.brighter = Color.prototype.brighten;\n\n  Color.prototype.saturate = function(amount) {\n    var lch, me;\n    if (amount == null) {\n      amount = 1;\n    }\n    me = this;\n    lch = me.lch();\n    lch[1] += amount * LAB_CONSTANTS.Kn;\n    if (lch[1] < 0) {\n      lch[1] = 0;\n    }\n    return chroma.lch(lch).alpha(me.alpha());\n  };\n\n  Color.prototype.desaturate = function(amount) {\n    if (amount == null) {\n      amount = 1;\n    }\n    return this.saturate(-amount);\n  };\n\n  Color.prototype.premultiply = function() {\n    var a, rgb;\n    rgb = this.rgb();\n    a = this.alpha();\n    return chroma(rgb[0] * a, rgb[1] * a, rgb[2] * a, a);\n  };\n\n  blend = function(bottom, top, mode) {\n    if (!blend[mode]) {\n      throw 'unknown blend mode ' + mode;\n    }\n    return blend[mode](bottom, top);\n  };\n\n  blend_f = function(f) {\n    return function(bottom, top) {\n      var c0, c1;\n      c0 = chroma(top).rgb();\n      c1 = chroma(bottom).rgb();\n      return chroma(f(c0, c1), 'rgb');\n    };\n  };\n\n  each = function(f) {\n    return function(c0, c1) {\n      var i, o, out;\n      out = [];\n      for (i = o = 0; o <= 3; i = ++o) {\n        out[i] = f(c0[i], c1[i]);\n      }\n      return out;\n    };\n  };\n\n  normal = function(a, b) {\n    return a;\n  };\n\n  multiply = function(a, b) {\n    return a * b / 255;\n  };\n\n  darken = function(a, b) {\n    if (a > b) {\n      return b;\n    } else {\n      return a;\n    }\n  };\n\n  lighten = function(a, b) {\n    if (a > b) {\n      return a;\n    } else {\n      return b;\n    }\n  };\n\n  screen = function(a, b) {\n    return 255 * (1 - (1 - a / 255) * (1 - b / 255));\n  };\n\n  overlay = function(a, b) {\n    if (b < 128) {\n      return 2 * a * b / 255;\n    } else {\n      return 255 * (1 - 2 * (1 - a / 255) * (1 - b / 255));\n    }\n  };\n\n  burn = function(a, b) {\n    return 255 * (1 - (1 - b / 255) / (a / 255));\n  };\n\n  dodge = function(a, b) {\n    if (a === 255) {\n      return 255;\n    }\n    a = 255 * (b / 255) / (1 - a / 255);\n    if (a > 255) {\n      return 255;\n    } else {\n      return a;\n    }\n  };\n\n  blend.normal = blend_f(each(normal));\n\n  blend.multiply = blend_f(each(multiply));\n\n  blend.screen = blend_f(each(screen));\n\n  blend.overlay = blend_f(each(overlay));\n\n  blend.darken = blend_f(each(darken));\n\n  blend.lighten = blend_f(each(lighten));\n\n  blend.dodge = blend_f(each(dodge));\n\n  blend.burn = blend_f(each(burn));\n\n  chroma.blend = blend;\n\n  chroma.analyze = function(data) {\n    var len, o, r, val;\n    r = {\n      min: Number.MAX_VALUE,\n      max: Number.MAX_VALUE * -1,\n      sum: 0,\n      values: [],\n      count: 0\n    };\n    for (o = 0, len = data.length; o < len; o++) {\n      val = data[o];\n      if ((val != null) && !isNaN(val)) {\n        r.values.push(val);\n        r.sum += val;\n        if (val < r.min) {\n          r.min = val;\n        }\n        if (val > r.max) {\n          r.max = val;\n        }\n        r.count += 1;\n      }\n    }\n    r.domain = [r.min, r.max];\n    r.limits = function(mode, num) {\n      return chroma.limits(r, mode, num);\n    };\n    return r;\n  };\n\n  chroma.scale = function(colors, positions) {\n    var _classes, _colorCache, _colors, _correctLightness, _domain, _fixed, _gamma, _max, _min, _mode, _nacol, _out, _padding, _pos, _spread, _useCache, classifyValue, f, getClass, getColor, resetCache, setColors, tmap;\n    _mode = 'rgb';\n    _nacol = chroma('#ccc');\n    _spread = 0;\n    _fixed = false;\n    _domain = [0, 1];\n    _pos = [];\n    _padding = [0, 0];\n    _classes = false;\n    _colors = [];\n    _out = false;\n    _min = 0;\n    _max = 1;\n    _correctLightness = false;\n    _colorCache = {};\n    _useCache = true;\n    _gamma = 1;\n    setColors = function(colors) {\n      var c, col, o, ref, ref1, w;\n      if (colors == null) {\n        colors = ['#fff', '#000'];\n      }\n      if ((colors != null) && type(colors) === 'string' && (chroma.brewer != null)) {\n        colors = chroma.brewer[colors] || chroma.brewer[colors.toLowerCase()] || colors;\n      }\n      if (type(colors) === 'array') {\n        if (colors.length === 1) {\n          colors = [colors[0], colors[0]];\n        }\n        colors = colors.slice(0);\n        for (c = o = 0, ref = colors.length - 1; 0 <= ref ? o <= ref : o >= ref; c = 0 <= ref ? ++o : --o) {\n          col = colors[c];\n          if (type(col) === \"string\") {\n            colors[c] = chroma(col);\n          }\n        }\n        _pos.length = 0;\n        for (c = w = 0, ref1 = colors.length - 1; 0 <= ref1 ? w <= ref1 : w >= ref1; c = 0 <= ref1 ? ++w : --w) {\n          _pos.push(c / (colors.length - 1));\n        }\n      }\n      resetCache();\n      return _colors = colors;\n    };\n    getClass = function(value) {\n      var i, n;\n      if (_classes != null) {\n        n = _classes.length - 1;\n        i = 0;\n        while (i < n && value >= _classes[i]) {\n          i++;\n        }\n        return i - 1;\n      }\n      return 0;\n    };\n    tmap = function(t) {\n      return t;\n    };\n    classifyValue = function(value) {\n      var i, maxc, minc, n, val;\n      val = value;\n      if (_classes.length > 2) {\n        n = _classes.length - 1;\n        i = getClass(value);\n        minc = _classes[0] + (_classes[1] - _classes[0]) * (0 + _spread * 0.5);\n        maxc = _classes[n - 1] + (_classes[n] - _classes[n - 1]) * (1 - _spread * 0.5);\n        val = _min + ((_classes[i] + (_classes[i + 1] - _classes[i]) * 0.5 - minc) / (maxc - minc)) * (_max - _min);\n      }\n      return val;\n    };\n    getColor = function(val, bypassMap) {\n      var c, col, i, k, o, p, ref, t;\n      if (bypassMap == null) {\n        bypassMap = false;\n      }\n      if (isNaN(val) || val === null) {\n        return _nacol;\n      }\n      if (!bypassMap) {\n        if (_classes && _classes.length > 2) {\n          c = getClass(val);\n          t = c / (_classes.length - 2);\n        } else if (_max !== _min) {\n          t = (val - _min) / (_max - _min);\n        } else {\n          t = 1;\n        }\n      } else {\n        t = val;\n      }\n      if (!bypassMap) {\n        t = tmap(t);\n      }\n      if (_gamma !== 1) {\n        t = pow(t, _gamma);\n      }\n      t = _padding[0] + (t * (1 - _padding[0] - _padding[1]));\n      t = Math.min(1, Math.max(0, t));\n      k = Math.floor(t * 10000);\n      if (_useCache && _colorCache[k]) {\n        col = _colorCache[k];\n      } else {\n        if (type(_colors) === 'array') {\n          for (i = o = 0, ref = _pos.length - 1; 0 <= ref ? o <= ref : o >= ref; i = 0 <= ref ? ++o : --o) {\n            p = _pos[i];\n            if (t <= p) {\n              col = _colors[i];\n              break;\n            }\n            if (t >= p && i === _pos.length - 1) {\n              col = _colors[i];\n              break;\n            }\n            if (t > p && t < _pos[i + 1]) {\n              t = (t - p) / (_pos[i + 1] - p);\n              col = chroma.interpolate(_colors[i], _colors[i + 1], t, _mode);\n              break;\n            }\n          }\n        } else if (type(_colors) === 'function') {\n          col = _colors(t);\n        }\n        if (_useCache) {\n          _colorCache[k] = col;\n        }\n      }\n      return col;\n    };\n    resetCache = function() {\n      return _colorCache = {};\n    };\n    setColors(colors);\n    f = function(v) {\n      var c;\n      c = chroma(getColor(v));\n      if (_out && c[_out]) {\n        return c[_out]();\n      } else {\n        return c;\n      }\n    };\n    f.classes = function(classes) {\n      var d;\n      if (classes != null) {\n        if (type(classes) === 'array') {\n          _classes = classes;\n          _domain = [classes[0], classes[classes.length - 1]];\n        } else {\n          d = chroma.analyze(_domain);\n          if (classes === 0) {\n            _classes = [d.min, d.max];\n          } else {\n            _classes = chroma.limits(d, 'e', classes);\n          }\n        }\n        return f;\n      }\n      return _classes;\n    };\n    f.domain = function(domain) {\n      var c, d, k, len, o, ref, w;\n      if (!arguments.length) {\n        return _domain;\n      }\n      _min = domain[0];\n      _max = domain[domain.length - 1];\n      _pos = [];\n      k = _colors.length;\n      if (domain.length === k && _min !== _max) {\n        for (o = 0, len = domain.length; o < len; o++) {\n          d = domain[o];\n          _pos.push((d - _min) / (_max - _min));\n        }\n      } else {\n        for (c = w = 0, ref = k - 1; 0 <= ref ? w <= ref : w >= ref; c = 0 <= ref ? ++w : --w) {\n          _pos.push(c / (k - 1));\n        }\n      }\n      _domain = [_min, _max];\n      return f;\n    };\n    f.mode = function(_m) {\n      if (!arguments.length) {\n        return _mode;\n      }\n      _mode = _m;\n      resetCache();\n      return f;\n    };\n    f.range = function(colors, _pos) {\n      setColors(colors, _pos);\n      return f;\n    };\n    f.out = function(_o) {\n      _out = _o;\n      return f;\n    };\n    f.spread = function(val) {\n      if (!arguments.length) {\n        return _spread;\n      }\n      _spread = val;\n      return f;\n    };\n    f.correctLightness = function(v) {\n      if (v == null) {\n        v = true;\n      }\n      _correctLightness = v;\n      resetCache();\n      if (_correctLightness) {\n        tmap = function(t) {\n          var L0, L1, L_actual, L_diff, L_ideal, max_iter, pol, t0, t1;\n          L0 = getColor(0, true).lab()[0];\n          L1 = getColor(1, true).lab()[0];\n          pol = L0 > L1;\n          L_actual = getColor(t, true).lab()[0];\n          L_ideal = L0 + (L1 - L0) * t;\n          L_diff = L_actual - L_ideal;\n          t0 = 0;\n          t1 = 1;\n          max_iter = 20;\n          while (Math.abs(L_diff) > 1e-2 && max_iter-- > 0) {\n            (function() {\n              if (pol) {\n                L_diff *= -1;\n              }\n              if (L_diff < 0) {\n                t0 = t;\n                t += (t1 - t) * 0.5;\n              } else {\n                t1 = t;\n                t += (t0 - t) * 0.5;\n              }\n              L_actual = getColor(t, true).lab()[0];\n              return L_diff = L_actual - L_ideal;\n            })();\n          }\n          return t;\n        };\n      } else {\n        tmap = function(t) {\n          return t;\n        };\n      }\n      return f;\n    };\n    f.padding = function(p) {\n      if (p != null) {\n        if (type(p) === 'number') {\n          p = [p, p];\n        }\n        _padding = p;\n        return f;\n      } else {\n        return _padding;\n      }\n    };\n    f.colors = function(numColors, out) {\n      var dd, dm, i, o, ref, result, results, samples, w;\n      if (arguments.length < 2) {\n        out = 'hex';\n      }\n      result = [];\n      if (arguments.length === 0) {\n        result = _colors.slice(0);\n      } else if (numColors === 1) {\n        result = [f(0.5)];\n      } else if (numColors > 1) {\n        dm = _domain[0];\n        dd = _domain[1] - dm;\n        result = (function() {\n          results = [];\n          for (var o = 0; 0 <= numColors ? o < numColors : o > numColors; 0 <= numColors ? o++ : o--){ results.push(o); }\n          return results;\n        }).apply(this).map(function(i) {\n          return f(dm + i / (numColors - 1) * dd);\n        });\n      } else {\n        colors = [];\n        samples = [];\n        if (_classes && _classes.length > 2) {\n          for (i = w = 1, ref = _classes.length; 1 <= ref ? w < ref : w > ref; i = 1 <= ref ? ++w : --w) {\n            samples.push((_classes[i - 1] + _classes[i]) * 0.5);\n          }\n        } else {\n          samples = _domain;\n        }\n        result = samples.map(function(v) {\n          return f(v);\n        });\n      }\n      if (chroma[out]) {\n        result = result.map(function(c) {\n          return c[out]();\n        });\n      }\n      return result;\n    };\n    f.cache = function(c) {\n      if (c != null) {\n        _useCache = c;\n        return f;\n      } else {\n        return _useCache;\n      }\n    };\n    f.gamma = function(g) {\n      if (g != null) {\n        _gamma = g;\n        return f;\n      } else {\n        return _gamma;\n      }\n    };\n    f.nodata = function(d) {\n      if (d != null) {\n        _nacol = chroma(d);\n        return f;\n      } else {\n        return _nacol;\n      }\n    };\n    return f;\n  };\n\n  if (chroma.scales == null) {\n    chroma.scales = {};\n  }\n\n  chroma.scales.cool = function() {\n    return chroma.scale([chroma.hsl(180, 1, .9), chroma.hsl(250, .7, .4)]);\n  };\n\n  chroma.scales.hot = function() {\n    return chroma.scale(['#000', '#f00', '#ff0', '#fff'], [0, .25, .75, 1]).mode('rgb');\n  };\n\n  chroma.analyze = function(data, key, filter) {\n    var add, k, len, o, r, val, visit;\n    r = {\n      min: Number.MAX_VALUE,\n      max: Number.MAX_VALUE * -1,\n      sum: 0,\n      values: [],\n      count: 0\n    };\n    if (filter == null) {\n      filter = function() {\n        return true;\n      };\n    }\n    add = function(val) {\n      if ((val != null) && !isNaN(val)) {\n        r.values.push(val);\n        r.sum += val;\n        if (val < r.min) {\n          r.min = val;\n        }\n        if (val > r.max) {\n          r.max = val;\n        }\n        r.count += 1;\n      }\n    };\n    visit = function(val, k) {\n      if (filter(val, k)) {\n        if ((key != null) && type(key) === 'function') {\n          return add(key(val));\n        } else if ((key != null) && type(key) === 'string' || type(key) === 'number') {\n          return add(val[key]);\n        } else {\n          return add(val);\n        }\n      }\n    };\n    if (type(data) === 'array') {\n      for (o = 0, len = data.length; o < len; o++) {\n        val = data[o];\n        visit(val);\n      }\n    } else {\n      for (k in data) {\n        val = data[k];\n        visit(val, k);\n      }\n    }\n    r.domain = [r.min, r.max];\n    r.limits = function(mode, num) {\n      return chroma.limits(r, mode, num);\n    };\n    return r;\n  };\n\n  chroma.limits = function(data, mode, num) {\n    var aa, ab, ac, ad, ae, af, ag, ah, ai, aj, ak, al, am, assignments, best, centroids, cluster, clusterSizes, dist, i, j, kClusters, limits, max_log, min, min_log, mindist, n, nb_iters, newCentroids, o, p, pb, pr, ref, ref1, ref10, ref11, ref12, ref13, ref14, ref2, ref3, ref4, ref5, ref6, ref7, ref8, ref9, repeat, sum, tmpKMeansBreaks, v, value, values, w;\n    if (mode == null) {\n      mode = 'equal';\n    }\n    if (num == null) {\n      num = 7;\n    }\n    if (type(data) === 'array') {\n      data = chroma.analyze(data);\n    }\n    min = data.min;\n    max = data.max;\n    sum = data.sum;\n    values = data.values.sort(function(a, b) {\n      return a - b;\n    });\n    if (num === 1) {\n      return [min, max];\n    }\n    limits = [];\n    if (mode.substr(0, 1) === 'c') {\n      limits.push(min);\n      limits.push(max);\n    }\n    if (mode.substr(0, 1) === 'e') {\n      limits.push(min);\n      for (i = o = 1, ref = num - 1; 1 <= ref ? o <= ref : o >= ref; i = 1 <= ref ? ++o : --o) {\n        limits.push(min + (i / num) * (max - min));\n      }\n      limits.push(max);\n    } else if (mode.substr(0, 1) === 'l') {\n      if (min <= 0) {\n        throw 'Logarithmic scales are only possible for values > 0';\n      }\n      min_log = Math.LOG10E * log(min);\n      max_log = Math.LOG10E * log(max);\n      limits.push(min);\n      for (i = w = 1, ref1 = num - 1; 1 <= ref1 ? w <= ref1 : w >= ref1; i = 1 <= ref1 ? ++w : --w) {\n        limits.push(pow(10, min_log + (i / num) * (max_log - min_log)));\n      }\n      limits.push(max);\n    } else if (mode.substr(0, 1) === 'q') {\n      limits.push(min);\n      for (i = aa = 1, ref2 = num - 1; 1 <= ref2 ? aa <= ref2 : aa >= ref2; i = 1 <= ref2 ? ++aa : --aa) {\n        p = (values.length - 1) * i / num;\n        pb = floor(p);\n        if (pb === p) {\n          limits.push(values[pb]);\n        } else {\n          pr = p - pb;\n          limits.push(values[pb] * (1 - pr) + values[pb + 1] * pr);\n        }\n      }\n      limits.push(max);\n    } else if (mode.substr(0, 1) === 'k') {\n\n      /*\n      implementation based on\n      http://code.google.com/p/figue/source/browse/trunk/figue.js#336\n      simplified for 1-d input values\n       */\n      n = values.length;\n      assignments = new Array(n);\n      clusterSizes = new Array(num);\n      repeat = true;\n      nb_iters = 0;\n      centroids = null;\n      centroids = [];\n      centroids.push(min);\n      for (i = ab = 1, ref3 = num - 1; 1 <= ref3 ? ab <= ref3 : ab >= ref3; i = 1 <= ref3 ? ++ab : --ab) {\n        centroids.push(min + (i / num) * (max - min));\n      }\n      centroids.push(max);\n      while (repeat) {\n        for (j = ac = 0, ref4 = num - 1; 0 <= ref4 ? ac <= ref4 : ac >= ref4; j = 0 <= ref4 ? ++ac : --ac) {\n          clusterSizes[j] = 0;\n        }\n        for (i = ad = 0, ref5 = n - 1; 0 <= ref5 ? ad <= ref5 : ad >= ref5; i = 0 <= ref5 ? ++ad : --ad) {\n          value = values[i];\n          mindist = Number.MAX_VALUE;\n          for (j = ae = 0, ref6 = num - 1; 0 <= ref6 ? ae <= ref6 : ae >= ref6; j = 0 <= ref6 ? ++ae : --ae) {\n            dist = abs(centroids[j] - value);\n            if (dist < mindist) {\n              mindist = dist;\n              best = j;\n            }\n          }\n          clusterSizes[best]++;\n          assignments[i] = best;\n        }\n        newCentroids = new Array(num);\n        for (j = af = 0, ref7 = num - 1; 0 <= ref7 ? af <= ref7 : af >= ref7; j = 0 <= ref7 ? ++af : --af) {\n          newCentroids[j] = null;\n        }\n        for (i = ag = 0, ref8 = n - 1; 0 <= ref8 ? ag <= ref8 : ag >= ref8; i = 0 <= ref8 ? ++ag : --ag) {\n          cluster = assignments[i];\n          if (newCentroids[cluster] === null) {\n            newCentroids[cluster] = values[i];\n          } else {\n            newCentroids[cluster] += values[i];\n          }\n        }\n        for (j = ah = 0, ref9 = num - 1; 0 <= ref9 ? ah <= ref9 : ah >= ref9; j = 0 <= ref9 ? ++ah : --ah) {\n          newCentroids[j] *= 1 / clusterSizes[j];\n        }\n        repeat = false;\n        for (j = ai = 0, ref10 = num - 1; 0 <= ref10 ? ai <= ref10 : ai >= ref10; j = 0 <= ref10 ? ++ai : --ai) {\n          if (newCentroids[j] !== centroids[i]) {\n            repeat = true;\n            break;\n          }\n        }\n        centroids = newCentroids;\n        nb_iters++;\n        if (nb_iters > 200) {\n          repeat = false;\n        }\n      }\n      kClusters = {};\n      for (j = aj = 0, ref11 = num - 1; 0 <= ref11 ? aj <= ref11 : aj >= ref11; j = 0 <= ref11 ? ++aj : --aj) {\n        kClusters[j] = [];\n      }\n      for (i = ak = 0, ref12 = n - 1; 0 <= ref12 ? ak <= ref12 : ak >= ref12; i = 0 <= ref12 ? ++ak : --ak) {\n        cluster = assignments[i];\n        kClusters[cluster].push(values[i]);\n      }\n      tmpKMeansBreaks = [];\n      for (j = al = 0, ref13 = num - 1; 0 <= ref13 ? al <= ref13 : al >= ref13; j = 0 <= ref13 ? ++al : --al) {\n        tmpKMeansBreaks.push(kClusters[j][0]);\n        tmpKMeansBreaks.push(kClusters[j][kClusters[j].length - 1]);\n      }\n      tmpKMeansBreaks = tmpKMeansBreaks.sort(function(a, b) {\n        return a - b;\n      });\n      limits.push(tmpKMeansBreaks[0]);\n      for (i = am = 1, ref14 = tmpKMeansBreaks.length - 1; am <= ref14; i = am += 2) {\n        v = tmpKMeansBreaks[i];\n        if (!isNaN(v) && limits.indexOf(v) === -1) {\n          limits.push(v);\n        }\n      }\n    }\n    return limits;\n  };\n\n  hsi2rgb = function(h, s, i) {\n\n    /*\n    borrowed from here:\n    http://hummer.stanford.edu/museinfo/doc/examples/humdrum/keyscape2/hsi2rgb.cpp\n     */\n    var args, b, g, r;\n    args = unpack(arguments);\n    h = args[0], s = args[1], i = args[2];\n    if (isNaN(h)) {\n      h = 0;\n    }\n    h /= 360;\n    if (h < 1 / 3) {\n      b = (1 - s) / 3;\n      r = (1 + s * cos(TWOPI * h) / cos(PITHIRD - TWOPI * h)) / 3;\n      g = 1 - (b + r);\n    } else if (h < 2 / 3) {\n      h -= 1 / 3;\n      r = (1 - s) / 3;\n      g = (1 + s * cos(TWOPI * h) / cos(PITHIRD - TWOPI * h)) / 3;\n      b = 1 - (r + g);\n    } else {\n      h -= 2 / 3;\n      g = (1 - s) / 3;\n      b = (1 + s * cos(TWOPI * h) / cos(PITHIRD - TWOPI * h)) / 3;\n      r = 1 - (g + b);\n    }\n    r = limit(i * r * 3);\n    g = limit(i * g * 3);\n    b = limit(i * b * 3);\n    return [r * 255, g * 255, b * 255, args.length > 3 ? args[3] : 1];\n  };\n\n  rgb2hsi = function() {\n\n    /*\n    borrowed from here:\n    http://hummer.stanford.edu/museinfo/doc/examples/humdrum/keyscape2/rgb2hsi.cpp\n     */\n    var b, g, h, i, min, r, ref, s;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    TWOPI = Math.PI * 2;\n    r /= 255;\n    g /= 255;\n    b /= 255;\n    min = Math.min(r, g, b);\n    i = (r + g + b) / 3;\n    s = 1 - min / i;\n    if (s === 0) {\n      h = 0;\n    } else {\n      h = ((r - g) + (r - b)) / 2;\n      h /= Math.sqrt((r - g) * (r - g) + (r - b) * (g - b));\n      h = Math.acos(h);\n      if (b > g) {\n        h = TWOPI - h;\n      }\n      h /= TWOPI;\n    }\n    return [h * 360, s, i];\n  };\n\n  chroma.hsi = function() {\n    return (function(func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor, result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    })(Color, slice.call(arguments).concat(['hsi']), function(){});\n  };\n\n  _input.hsi = hsi2rgb;\n\n  Color.prototype.hsi = function() {\n    return rgb2hsi(this._rgb);\n  };\n\n  interpolate_hsx = function(col1, col2, f, m) {\n    var dh, hue, hue0, hue1, lbv, lbv0, lbv1, res, sat, sat0, sat1, xyz0, xyz1;\n    if (m === 'hsl') {\n      xyz0 = col1.hsl();\n      xyz1 = col2.hsl();\n    } else if (m === 'hsv') {\n      xyz0 = col1.hsv();\n      xyz1 = col2.hsv();\n    } else if (m === 'hcg') {\n      xyz0 = col1.hcg();\n      xyz1 = col2.hcg();\n    } else if (m === 'hsi') {\n      xyz0 = col1.hsi();\n      xyz1 = col2.hsi();\n    } else if (m === 'lch' || m === 'hcl') {\n      m = 'hcl';\n      xyz0 = col1.hcl();\n      xyz1 = col2.hcl();\n    }\n    if (m.substr(0, 1) === 'h') {\n      hue0 = xyz0[0], sat0 = xyz0[1], lbv0 = xyz0[2];\n      hue1 = xyz1[0], sat1 = xyz1[1], lbv1 = xyz1[2];\n    }\n    if (!isNaN(hue0) && !isNaN(hue1)) {\n      if (hue1 > hue0 && hue1 - hue0 > 180) {\n        dh = hue1 - (hue0 + 360);\n      } else if (hue1 < hue0 && hue0 - hue1 > 180) {\n        dh = hue1 + 360 - hue0;\n      } else {\n        dh = hue1 - hue0;\n      }\n      hue = hue0 + f * dh;\n    } else if (!isNaN(hue0)) {\n      hue = hue0;\n      if ((lbv1 === 1 || lbv1 === 0) && m !== 'hsv') {\n        sat = sat0;\n      }\n    } else if (!isNaN(hue1)) {\n      hue = hue1;\n      if ((lbv0 === 1 || lbv0 === 0) && m !== 'hsv') {\n        sat = sat1;\n      }\n    } else {\n      hue = Number.NaN;\n    }\n    if (sat == null) {\n      sat = sat0 + f * (sat1 - sat0);\n    }\n    lbv = lbv0 + f * (lbv1 - lbv0);\n    return res = chroma[m](hue, sat, lbv);\n  };\n\n  _interpolators = _interpolators.concat((function() {\n    var len, o, ref, results;\n    ref = ['hsv', 'hsl', 'hsi', 'hcl', 'lch', 'hcg'];\n    results = [];\n    for (o = 0, len = ref.length; o < len; o++) {\n      m = ref[o];\n      results.push([m, interpolate_hsx]);\n    }\n    return results;\n  })());\n\n  interpolate_num = function(col1, col2, f, m) {\n    var n1, n2;\n    n1 = col1.num();\n    n2 = col2.num();\n    return chroma.num(n1 + (n2 - n1) * f, 'num');\n  };\n\n  _interpolators.push(['num', interpolate_num]);\n\n  interpolate_lab = function(col1, col2, f, m) {\n    var res, xyz0, xyz1;\n    xyz0 = col1.lab();\n    xyz1 = col2.lab();\n    return res = new Color(xyz0[0] + f * (xyz1[0] - xyz0[0]), xyz0[1] + f * (xyz1[1] - xyz0[1]), xyz0[2] + f * (xyz1[2] - xyz0[2]), m);\n  };\n\n  _interpolators.push(['lab', interpolate_lab]);\n\n}).call(this);\n"]},"metadata":{},"sourceType":"script"}