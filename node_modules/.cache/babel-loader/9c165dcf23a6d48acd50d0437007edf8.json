{"ast":null,"code":"/* @license C3.js v0.7.18 | (c) C3 Team and other contributors | http://c3js.org/ */\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() : typeof define === 'function' && define.amd ? define(factory) : (global = global || self, global.c3 = factory());\n})(this, function () {\n  'use strict';\n\n  function _typeof(obj) {\n    \"@babel/helpers - typeof\";\n\n    if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n      _typeof = function _typeof(obj) {\n        return typeof obj;\n      };\n    } else {\n      _typeof = function _typeof(obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n    }\n\n    return _typeof(obj);\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  function _toConsumableArray(arr) {\n    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n  }\n\n  function _arrayWithoutHoles(arr) {\n    if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n  }\n\n  function _iterableToArray(iter) {\n    if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n  }\n\n  function _unsupportedIterableToArray(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(o);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n  }\n\n  function _arrayLikeToArray(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n\n    for (var i = 0, arr2 = new Array(len); i < len; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n\n  function _nonIterableSpread() {\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  function ChartInternal(api) {\n    var $$ = this; // Note: This part will be replaced by rollup-plugin-modify\n    // When bundling esm output. Beware of changing this line.\n    // TODO: Maybe we should check that the modification by rollup-plugin-modify\n    // is valid during unit tests.\n\n    $$.d3 = window.d3 ? window.d3 : typeof require !== 'undefined' ? require('d3') : undefined;\n    $$.api = api;\n    $$.config = $$.getDefaultConfig();\n    $$.data = {};\n    $$.cache = {};\n    $$.axes = {};\n  }\n  /**\n   * The Chart class\n   *\n   * The methods of this class is the public APIs of the chart object.\n   */\n\n\n  function Chart(config) {\n    this.internal = new ChartInternal(this);\n    this.internal.loadConfig(config);\n    this.internal.beforeInit(config);\n    this.internal.init();\n    this.internal.afterInit(config) // bind \"this\" to nested API\n    ;\n\n    (function bindThis(fn, target, argThis) {\n      Object.keys(fn).forEach(function (key) {\n        target[key] = fn[key].bind(argThis);\n\n        if (Object.keys(fn[key]).length > 0) {\n          bindThis(fn[key], target[key], argThis);\n        }\n      });\n    })(Chart.prototype, this, this);\n  }\n\n  var asHalfPixel = function asHalfPixel(n) {\n    return Math.ceil(n) + 0.5;\n  };\n\n  var ceil10 = function ceil10(v) {\n    return Math.ceil(v / 10) * 10;\n  };\n\n  var diffDomain = function diffDomain(d) {\n    return d[1] - d[0];\n  };\n\n  var getOption = function getOption(options, key, defaultValue) {\n    return isDefined(options[key]) ? options[key] : defaultValue;\n  };\n\n  var getPathBox = function getPathBox(path) {\n    var box = getBBox(path),\n        items = [path.pathSegList.getItem(0), path.pathSegList.getItem(1)],\n        minX = items[0].x,\n        minY = Math.min(items[0].y, items[1].y);\n    return {\n      x: minX,\n      y: minY,\n      width: box.width,\n      height: box.height\n    };\n  };\n\n  var getBBox = function getBBox(element) {\n    try {\n      return element.getBBox();\n    } catch (ignore) {\n      // Firefox will throw an exception if getBBox() is called whereas the\n      // element is rendered with display:none\n      // See https://github.com/c3js/c3/issues/2692\n      // The previous code was using `getBoundingClientRect` which was returning\n      // everything at 0 in this case so let's reproduce this behavior here.\n      return {\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0\n      };\n    }\n  };\n\n  var hasValue = function hasValue(dict, value) {\n    var found = false;\n    Object.keys(dict).forEach(function (key) {\n      if (dict[key] === value) {\n        found = true;\n      }\n    });\n    return found;\n  };\n\n  var isArray = function isArray(o) {\n    return Array.isArray(o);\n  };\n\n  var isDefined = function isDefined(v) {\n    return typeof v !== 'undefined';\n  };\n\n  var isEmpty = function isEmpty(o) {\n    return typeof o === 'undefined' || o === null || isString(o) && o.length === 0 || _typeof(o) === 'object' && Object.keys(o).length === 0;\n  };\n\n  var isFunction = function isFunction(o) {\n    return typeof o === 'function';\n  };\n\n  var isNumber = function isNumber(o) {\n    return typeof o === 'number';\n  };\n\n  var isString = function isString(o) {\n    return typeof o === 'string';\n  };\n\n  var isUndefined = function isUndefined(v) {\n    return typeof v === 'undefined';\n  };\n\n  var isValue = function isValue(v) {\n    return v || v === 0;\n  };\n\n  var notEmpty = function notEmpty(o) {\n    return !isEmpty(o);\n  };\n\n  var sanitise = function sanitise(str) {\n    return typeof str === 'string' ? str.replace(/</g, '&lt;').replace(/>/g, '&gt;') : str;\n  };\n\n  var flattenArray = function flattenArray(arr) {\n    var _ref;\n\n    return Array.isArray(arr) ? (_ref = []).concat.apply(_ref, _toConsumableArray(arr)) : [];\n  };\n  /**\n   * Returns whether the point is within the given box.\n   *\n   * @param {Array} point An [x,y] coordinate\n   * @param {Object} box An object with {x, y, width, height} keys\n   * @param {Number} sensitivity An offset to ease check on very small boxes\n   */\n\n\n  var isWithinBox = function isWithinBox(point, box) {\n    var sensitivity = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    var xStart = box.x - sensitivity;\n    var xEnd = box.x + box.width + sensitivity;\n    var yStart = box.y + box.height + sensitivity;\n    var yEnd = box.y - sensitivity;\n    return xStart < point[0] && point[0] < xEnd && yEnd < point[1] && point[1] < yStart;\n  };\n  /**\n   * Returns Internet Explorer version number (or false if no Internet Explorer used).\n   *\n   * @param string agent Optional parameter to specify user agent\n   */\n\n\n  var getIEVersion = function getIEVersion(agent) {\n    // https://stackoverflow.com/questions/19999388/check-if-user-is-using-ie\n    if (typeof agent === 'undefined') {\n      agent = window.navigator.userAgent;\n    }\n\n    var pos = agent.indexOf('MSIE '); // up to IE10\n\n    if (pos > 0) {\n      return parseInt(agent.substring(pos + 5, agent.indexOf('.', pos)), 10);\n    }\n\n    pos = agent.indexOf('Trident/'); // IE11\n\n    if (pos > 0) {\n      pos = agent.indexOf('rv:');\n      return parseInt(agent.substring(pos + 3, agent.indexOf('.', pos)), 10);\n    }\n\n    return false;\n  };\n  /**\n   * Returns whether the used browser is Internet Explorer.\n   *\n   * @param {Number} version Optional parameter to specify IE version\n   */\n\n\n  var isIE = function isIE(version) {\n    var ver = getIEVersion();\n\n    if (typeof version === 'undefined') {\n      return !!ver;\n    }\n\n    return version === ver;\n  };\n\n  function AxisInternal(component, params) {\n    var internal = this;\n    internal.component = component;\n    internal.params = params || {};\n    internal.d3 = component.d3;\n    internal.scale = internal.d3.scaleLinear();\n    internal.range;\n    internal.orient = 'bottom';\n    internal.innerTickSize = 6;\n    internal.outerTickSize = this.params.withOuterTick ? 6 : 0;\n    internal.tickPadding = 3;\n    internal.tickValues = null;\n    internal.tickFormat;\n    internal.tickArguments;\n    internal.tickOffset = 0;\n    internal.tickCulling = true;\n    internal.tickCentered;\n    internal.tickTextCharSize;\n    internal.tickTextRotate = internal.params.tickTextRotate;\n    internal.tickLength;\n    internal.axis = internal.generateAxis();\n  }\n\n  AxisInternal.prototype.axisX = function (selection, x, tickOffset) {\n    selection.attr('transform', function (d) {\n      return 'translate(' + Math.ceil(x(d) + tickOffset) + ', 0)';\n    });\n  };\n\n  AxisInternal.prototype.axisY = function (selection, y) {\n    selection.attr('transform', function (d) {\n      return 'translate(0,' + Math.ceil(y(d)) + ')';\n    });\n  };\n\n  AxisInternal.prototype.scaleExtent = function (domain) {\n    var start = domain[0],\n        stop = domain[domain.length - 1];\n    return start < stop ? [start, stop] : [stop, start];\n  };\n\n  AxisInternal.prototype.generateTicks = function (scale) {\n    var internal = this;\n    var i,\n        domain,\n        ticks = [];\n\n    if (scale.ticks) {\n      return scale.ticks.apply(scale, internal.tickArguments);\n    }\n\n    domain = scale.domain();\n\n    for (i = Math.ceil(domain[0]); i < domain[1]; i++) {\n      ticks.push(i);\n    }\n\n    if (ticks.length > 0 && ticks[0] > 0) {\n      ticks.unshift(ticks[0] - (ticks[1] - ticks[0]));\n    }\n\n    return ticks;\n  };\n\n  AxisInternal.prototype.copyScale = function () {\n    var internal = this;\n    var newScale = internal.scale.copy(),\n        domain;\n\n    if (internal.params.isCategory) {\n      domain = internal.scale.domain();\n      newScale.domain([domain[0], domain[1] - 1]);\n    }\n\n    return newScale;\n  };\n\n  AxisInternal.prototype.textFormatted = function (v) {\n    var internal = this,\n        formatted = internal.tickFormat ? internal.tickFormat(v) : v;\n    return typeof formatted !== 'undefined' ? formatted : '';\n  };\n\n  AxisInternal.prototype.updateRange = function () {\n    var internal = this;\n    internal.range = internal.scale.rangeExtent ? internal.scale.rangeExtent() : internal.scaleExtent(internal.scale.range());\n    return internal.range;\n  };\n\n  AxisInternal.prototype.updateTickTextCharSize = function (tick) {\n    var internal = this;\n\n    if (internal.tickTextCharSize) {\n      return internal.tickTextCharSize;\n    }\n\n    var size = {\n      h: 11.5,\n      w: 5.5\n    };\n    tick.select('text').text(function (d) {\n      return internal.textFormatted(d);\n    }).each(function (d) {\n      var box = getBBox(this),\n          text = internal.textFormatted(d),\n          h = box.height,\n          w = text ? box.width / text.length : undefined;\n\n      if (h && w) {\n        size.h = h;\n        size.w = w;\n      }\n    }).text('');\n    internal.tickTextCharSize = size;\n    return size;\n  };\n\n  AxisInternal.prototype.isVertical = function () {\n    return this.orient === 'left' || this.orient === 'right';\n  };\n\n  AxisInternal.prototype.tspanData = function (d, i, scale) {\n    var internal = this;\n    var splitted = internal.params.tickMultiline ? internal.splitTickText(d, scale) : [].concat(internal.textFormatted(d));\n\n    if (internal.params.tickMultiline && internal.params.tickMultilineMax > 0) {\n      splitted = internal.ellipsify(splitted, internal.params.tickMultilineMax);\n    }\n\n    return splitted.map(function (s) {\n      return {\n        index: i,\n        splitted: s,\n        length: splitted.length\n      };\n    });\n  };\n\n  AxisInternal.prototype.splitTickText = function (d, scale) {\n    var internal = this,\n        tickText = internal.textFormatted(d),\n        maxWidth = internal.params.tickWidth,\n        subtext,\n        spaceIndex,\n        textWidth,\n        splitted = [];\n\n    if (Object.prototype.toString.call(tickText) === '[object Array]') {\n      return tickText;\n    }\n\n    if (!maxWidth || maxWidth <= 0) {\n      maxWidth = internal.isVertical() ? 95 : internal.params.isCategory ? Math.ceil(scale(1) - scale(0)) - 12 : 110;\n    }\n\n    function split(splitted, text) {\n      spaceIndex = undefined;\n\n      for (var i = 1; i < text.length; i++) {\n        if (text.charAt(i) === ' ') {\n          spaceIndex = i;\n        }\n\n        subtext = text.substr(0, i + 1);\n        textWidth = internal.tickTextCharSize.w * subtext.length; // if text width gets over tick width, split by space index or crrent index\n\n        if (maxWidth < textWidth) {\n          return split(splitted.concat(text.substr(0, spaceIndex ? spaceIndex : i)), text.slice(spaceIndex ? spaceIndex + 1 : i));\n        }\n      }\n\n      return splitted.concat(text);\n    }\n\n    return split(splitted, tickText + '');\n  };\n\n  AxisInternal.prototype.ellipsify = function (splitted, max) {\n    if (splitted.length <= max) {\n      return splitted;\n    }\n\n    var ellipsified = splitted.slice(0, max);\n    var remaining = 3;\n\n    for (var i = max - 1; i >= 0; i--) {\n      var available = ellipsified[i].length;\n      ellipsified[i] = ellipsified[i].substr(0, available - remaining).padEnd(available, '.');\n      remaining -= available;\n\n      if (remaining <= 0) {\n        break;\n      }\n    }\n\n    return ellipsified;\n  };\n\n  AxisInternal.prototype.updateTickLength = function () {\n    var internal = this;\n    internal.tickLength = Math.max(internal.innerTickSize, 0) + internal.tickPadding;\n  };\n\n  AxisInternal.prototype.lineY2 = function (d) {\n    var internal = this,\n        tickPosition = internal.scale(d) + (internal.tickCentered ? 0 : internal.tickOffset);\n    return internal.range[0] < tickPosition && tickPosition < internal.range[1] ? internal.innerTickSize : 0;\n  };\n\n  AxisInternal.prototype.textY = function () {\n    var internal = this,\n        rotate = internal.tickTextRotate;\n    return rotate ? 11.5 - 2.5 * (rotate / 15) * (rotate > 0 ? 1 : -1) : internal.tickLength;\n  };\n\n  AxisInternal.prototype.textTransform = function () {\n    var internal = this,\n        rotate = internal.tickTextRotate;\n    return rotate ? 'rotate(' + rotate + ')' : '';\n  };\n\n  AxisInternal.prototype.textTextAnchor = function () {\n    var internal = this,\n        rotate = internal.tickTextRotate;\n    return rotate ? rotate > 0 ? 'start' : 'end' : 'middle';\n  };\n\n  AxisInternal.prototype.tspanDx = function () {\n    var internal = this,\n        rotate = internal.tickTextRotate;\n    return rotate ? 8 * Math.sin(Math.PI * (rotate / 180)) : 0;\n  };\n\n  AxisInternal.prototype.tspanDy = function (d, i) {\n    var internal = this,\n        dy = internal.tickTextCharSize.h;\n\n    if (i === 0) {\n      if (internal.isVertical()) {\n        dy = -((d.length - 1) * (internal.tickTextCharSize.h / 2) - 3);\n      } else {\n        dy = '.71em';\n      }\n    }\n\n    return dy;\n  };\n\n  AxisInternal.prototype.generateAxis = function () {\n    var internal = this,\n        d3 = internal.d3,\n        params = internal.params;\n\n    function axis(g, transition) {\n      var self;\n      g.each(function () {\n        var g = axis.g = d3.select(this);\n        var scale0 = this.__chart__ || internal.scale,\n            scale1 = this.__chart__ = internal.copyScale();\n        var ticksValues = internal.tickValues ? internal.tickValues : internal.generateTicks(scale1),\n            ticks = g.selectAll('.tick').data(ticksValues, scale1),\n            tickEnter = ticks.enter().insert('g', '.domain').attr('class', 'tick').style('opacity', 1e-6),\n            // MEMO: No exit transition. The reason is this transition affects max tick width calculation because old tick will be included in the ticks.\n        tickExit = ticks.exit().remove(),\n            tickUpdate = ticks.merge(tickEnter),\n            tickTransform,\n            tickX,\n            tickY;\n\n        if (params.isCategory) {\n          internal.tickOffset = Math.ceil((scale1(1) - scale1(0)) / 2);\n          tickX = internal.tickCentered ? 0 : internal.tickOffset;\n          tickY = internal.tickCentered ? internal.tickOffset : 0;\n        } else {\n          internal.tickOffset = tickX = 0;\n        }\n\n        internal.updateRange();\n        internal.updateTickLength();\n        internal.updateTickTextCharSize(g.select('.tick'));\n        var lineUpdate = tickUpdate.select('line').merge(tickEnter.append('line')),\n            textUpdate = tickUpdate.select('text').merge(tickEnter.append('text'));\n        var tspans = tickUpdate.selectAll('text').selectAll('tspan').data(function (d, i) {\n          return internal.tspanData(d, i, scale1);\n        }),\n            tspanEnter = tspans.enter().append('tspan'),\n            tspanUpdate = tspanEnter.merge(tspans).text(function (d) {\n          return d.splitted;\n        });\n        tspans.exit().remove();\n        var path = g.selectAll('.domain').data([0]),\n            pathUpdate = path.enter().append('path').merge(path).attr('class', 'domain'); // TODO: each attr should be one function and change its behavior by internal.orient, probably\n\n        switch (internal.orient) {\n          case 'bottom':\n            {\n              tickTransform = internal.axisX;\n              lineUpdate.attr('x1', tickX).attr('x2', tickX).attr('y2', function (d, i) {\n                return internal.lineY2(d, i);\n              });\n              textUpdate.attr('x', 0).attr('y', function (d, i) {\n                return internal.textY(d, i);\n              }).attr('transform', function (d, i) {\n                return internal.textTransform(d, i);\n              }).style('text-anchor', function (d, i) {\n                return internal.textTextAnchor(d, i);\n              });\n              tspanUpdate.attr('x', 0).attr('dy', function (d, i) {\n                return internal.tspanDy(d, i);\n              }).attr('dx', function (d, i) {\n                return internal.tspanDx(d, i);\n              });\n              pathUpdate.attr('d', 'M' + internal.range[0] + ',' + internal.outerTickSize + 'V0H' + internal.range[1] + 'V' + internal.outerTickSize);\n              break;\n            }\n\n          case 'top':\n            {\n              // TODO: rotated tick text\n              tickTransform = internal.axisX;\n              lineUpdate.attr('x1', tickX).attr('x2', tickX).attr('y2', function (d, i) {\n                return -1 * internal.lineY2(d, i);\n              });\n              textUpdate.attr('x', 0).attr('y', function (d, i) {\n                return -1 * internal.textY(d, i) - (params.isCategory ? 2 : internal.tickLength - 2);\n              }).attr('transform', function (d, i) {\n                return internal.textTransform(d, i);\n              }).style('text-anchor', function (d, i) {\n                return internal.textTextAnchor(d, i);\n              });\n              tspanUpdate.attr('x', 0).attr('dy', function (d, i) {\n                return internal.tspanDy(d, i);\n              }).attr('dx', function (d, i) {\n                return internal.tspanDx(d, i);\n              });\n              pathUpdate.attr('d', 'M' + internal.range[0] + ',' + -internal.outerTickSize + 'V0H' + internal.range[1] + 'V' + -internal.outerTickSize);\n              break;\n            }\n\n          case 'left':\n            {\n              tickTransform = internal.axisY;\n              lineUpdate.attr('x2', -internal.innerTickSize).attr('y1', tickY).attr('y2', tickY);\n              textUpdate.attr('x', -internal.tickLength).attr('y', internal.tickOffset).style('text-anchor', 'end');\n              tspanUpdate.attr('x', -internal.tickLength).attr('dy', function (d, i) {\n                return internal.tspanDy(d, i);\n              });\n              pathUpdate.attr('d', 'M' + -internal.outerTickSize + ',' + internal.range[0] + 'H0V' + internal.range[1] + 'H' + -internal.outerTickSize);\n              break;\n            }\n\n          case 'right':\n            {\n              tickTransform = internal.axisY;\n              lineUpdate.attr('x2', internal.innerTickSize).attr('y1', tickY).attr('y2', tickY);\n              textUpdate.attr('x', internal.tickLength).attr('y', internal.tickOffset).style('text-anchor', 'start');\n              tspanUpdate.attr('x', internal.tickLength).attr('dy', function (d, i) {\n                return internal.tspanDy(d, i);\n              });\n              pathUpdate.attr('d', 'M' + internal.outerTickSize + ',' + internal.range[0] + 'H0V' + internal.range[1] + 'H' + internal.outerTickSize);\n              break;\n            }\n        }\n\n        if (scale1.rangeBand) {\n          var x = scale1,\n              dx = x.rangeBand() / 2;\n\n          scale0 = scale1 = function scale1(d) {\n            return x(d) + dx;\n          };\n        } else if (scale0.rangeBand) {\n          scale0 = scale1;\n        } else {\n          tickExit.call(tickTransform, scale1, internal.tickOffset);\n        }\n\n        tickEnter.call(tickTransform, scale0, internal.tickOffset);\n        self = (transition ? tickUpdate.transition(transition) : tickUpdate).style('opacity', 1).call(tickTransform, scale1, internal.tickOffset);\n      });\n      return self;\n    }\n\n    axis.scale = function (x) {\n      if (!arguments.length) {\n        return internal.scale;\n      }\n\n      internal.scale = x;\n      return axis;\n    };\n\n    axis.orient = function (x) {\n      if (!arguments.length) {\n        return internal.orient;\n      }\n\n      internal.orient = x in {\n        top: 1,\n        right: 1,\n        bottom: 1,\n        left: 1\n      } ? x + '' : 'bottom';\n      return axis;\n    };\n\n    axis.tickFormat = function (format) {\n      if (!arguments.length) {\n        return internal.tickFormat;\n      }\n\n      internal.tickFormat = format;\n      return axis;\n    };\n\n    axis.tickCentered = function (isCentered) {\n      if (!arguments.length) {\n        return internal.tickCentered;\n      }\n\n      internal.tickCentered = isCentered;\n      return axis;\n    };\n\n    axis.tickOffset = function () {\n      return internal.tickOffset;\n    };\n\n    axis.tickInterval = function () {\n      var interval, length;\n\n      if (params.isCategory) {\n        interval = internal.tickOffset * 2;\n      } else {\n        length = axis.g.select('path.domain').node().getTotalLength() - internal.outerTickSize * 2;\n        interval = length / axis.g.selectAll('line').size();\n      }\n\n      return interval === Infinity ? 0 : interval;\n    };\n\n    axis.ticks = function () {\n      if (!arguments.length) {\n        return internal.tickArguments;\n      }\n\n      internal.tickArguments = arguments;\n      return axis;\n    };\n\n    axis.tickCulling = function (culling) {\n      if (!arguments.length) {\n        return internal.tickCulling;\n      }\n\n      internal.tickCulling = culling;\n      return axis;\n    };\n\n    axis.tickValues = function (x) {\n      if (typeof x === 'function') {\n        internal.tickValues = function () {\n          return x(internal.scale.domain());\n        };\n      } else {\n        if (!arguments.length) {\n          return internal.tickValues;\n        }\n\n        internal.tickValues = x;\n      }\n\n      return axis;\n    };\n\n    return axis;\n  };\n\n  var CLASS = {\n    target: 'c3-target',\n    chart: 'c3-chart',\n    chartLine: 'c3-chart-line',\n    chartLines: 'c3-chart-lines',\n    chartBar: 'c3-chart-bar',\n    chartBars: 'c3-chart-bars',\n    chartText: 'c3-chart-text',\n    chartTexts: 'c3-chart-texts',\n    chartArc: 'c3-chart-arc',\n    chartArcs: 'c3-chart-arcs',\n    chartArcsTitle: 'c3-chart-arcs-title',\n    chartArcsBackground: 'c3-chart-arcs-background',\n    chartArcsGaugeUnit: 'c3-chart-arcs-gauge-unit',\n    chartArcsGaugeMax: 'c3-chart-arcs-gauge-max',\n    chartArcsGaugeMin: 'c3-chart-arcs-gauge-min',\n    selectedCircle: 'c3-selected-circle',\n    selectedCircles: 'c3-selected-circles',\n    eventRect: 'c3-event-rect',\n    eventRects: 'c3-event-rects',\n    eventRectsSingle: 'c3-event-rects-single',\n    eventRectsMultiple: 'c3-event-rects-multiple',\n    zoomRect: 'c3-zoom-rect',\n    brush: 'c3-brush',\n    dragZoom: 'c3-drag-zoom',\n    focused: 'c3-focused',\n    defocused: 'c3-defocused',\n    region: 'c3-region',\n    regions: 'c3-regions',\n    title: 'c3-title',\n    tooltipContainer: 'c3-tooltip-container',\n    tooltip: 'c3-tooltip',\n    tooltipName: 'c3-tooltip-name',\n    shape: 'c3-shape',\n    shapes: 'c3-shapes',\n    line: 'c3-line',\n    lines: 'c3-lines',\n    bar: 'c3-bar',\n    bars: 'c3-bars',\n    circle: 'c3-circle',\n    circles: 'c3-circles',\n    arc: 'c3-arc',\n    arcLabelLine: 'c3-arc-label-line',\n    arcs: 'c3-arcs',\n    area: 'c3-area',\n    areas: 'c3-areas',\n    empty: 'c3-empty',\n    text: 'c3-text',\n    texts: 'c3-texts',\n    gaugeValue: 'c3-gauge-value',\n    grid: 'c3-grid',\n    gridLines: 'c3-grid-lines',\n    xgrid: 'c3-xgrid',\n    xgrids: 'c3-xgrids',\n    xgridLine: 'c3-xgrid-line',\n    xgridLines: 'c3-xgrid-lines',\n    xgridFocus: 'c3-xgrid-focus',\n    ygrid: 'c3-ygrid',\n    ygrids: 'c3-ygrids',\n    ygridLine: 'c3-ygrid-line',\n    ygridLines: 'c3-ygrid-lines',\n    colorScale: 'c3-colorscale',\n    stanfordElements: 'c3-stanford-elements',\n    stanfordLine: 'c3-stanford-line',\n    stanfordLines: 'c3-stanford-lines',\n    stanfordRegion: 'c3-stanford-region',\n    stanfordRegions: 'c3-stanford-regions',\n    stanfordText: 'c3-stanford-text',\n    stanfordTexts: 'c3-stanford-texts',\n    axis: 'c3-axis',\n    axisX: 'c3-axis-x',\n    axisXLabel: 'c3-axis-x-label',\n    axisY: 'c3-axis-y',\n    axisYLabel: 'c3-axis-y-label',\n    axisY2: 'c3-axis-y2',\n    axisY2Label: 'c3-axis-y2-label',\n    legendBackground: 'c3-legend-background',\n    legendItem: 'c3-legend-item',\n    legendItemEvent: 'c3-legend-item-event',\n    legendItemTile: 'c3-legend-item-tile',\n    legendItemHidden: 'c3-legend-item-hidden',\n    legendItemFocused: 'c3-legend-item-focused',\n    dragarea: 'c3-dragarea',\n    EXPANDED: '_expanded_',\n    SELECTED: '_selected_',\n    INCLUDED: '_included_'\n  };\n\n  var Axis = function Axis(owner) {\n    _classCallCheck(this, Axis);\n\n    this.owner = owner;\n    this.d3 = owner.d3;\n    this.internal = AxisInternal;\n  };\n\n  Axis.prototype.init = function init() {\n    var $$ = this.owner,\n        config = $$.config,\n        main = $$.main;\n    $$.axes.x = main.append('g').attr('class', CLASS.axis + ' ' + CLASS.axisX).attr('clip-path', config.axis_x_inner ? '' : $$.clipPathForXAxis).attr('transform', $$.getTranslate('x')).style('visibility', config.axis_x_show ? 'visible' : 'hidden');\n    $$.axes.x.append('text').attr('class', CLASS.axisXLabel).attr('transform', config.axis_rotated ? 'rotate(-90)' : '').style('text-anchor', this.textAnchorForXAxisLabel.bind(this));\n    $$.axes.y = main.append('g').attr('class', CLASS.axis + ' ' + CLASS.axisY).attr('clip-path', config.axis_y_inner ? '' : $$.clipPathForYAxis).attr('transform', $$.getTranslate('y')).style('visibility', config.axis_y_show ? 'visible' : 'hidden');\n    $$.axes.y.append('text').attr('class', CLASS.axisYLabel).attr('transform', config.axis_rotated ? '' : 'rotate(-90)').style('text-anchor', this.textAnchorForYAxisLabel.bind(this));\n    $$.axes.y2 = main.append('g').attr('class', CLASS.axis + ' ' + CLASS.axisY2) // clip-path?\n    .attr('transform', $$.getTranslate('y2')).style('visibility', config.axis_y2_show ? 'visible' : 'hidden');\n    $$.axes.y2.append('text').attr('class', CLASS.axisY2Label).attr('transform', config.axis_rotated ? '' : 'rotate(-90)').style('text-anchor', this.textAnchorForY2AxisLabel.bind(this));\n  };\n\n  Axis.prototype.getXAxis = function getXAxis(scale, orient, tickFormat, tickValues, withOuterTick, withoutTransition, withoutRotateTickText) {\n    var $$ = this.owner,\n        config = $$.config,\n        axisParams = {\n      isCategory: $$.isCategorized(),\n      withOuterTick: withOuterTick,\n      tickMultiline: config.axis_x_tick_multiline,\n      tickMultilineMax: config.axis_x_tick_multiline ? Number(config.axis_x_tick_multilineMax) : 0,\n      tickWidth: config.axis_x_tick_width,\n      tickTextRotate: withoutRotateTickText ? 0 : config.axis_x_tick_rotate,\n      withoutTransition: withoutTransition\n    },\n        axis = new this.internal(this, axisParams).axis.scale(scale).orient(orient);\n\n    if ($$.isTimeSeries() && tickValues && typeof tickValues !== 'function') {\n      tickValues = tickValues.map(function (v) {\n        return $$.parseDate(v);\n      });\n    } // Set tick\n\n\n    axis.tickFormat(tickFormat).tickValues(tickValues);\n\n    if ($$.isCategorized()) {\n      axis.tickCentered(config.axis_x_tick_centered);\n\n      if (isEmpty(config.axis_x_tick_culling)) {\n        config.axis_x_tick_culling = false;\n      }\n    }\n\n    return axis;\n  };\n\n  Axis.prototype.updateXAxisTickValues = function updateXAxisTickValues(targets, axis) {\n    var $$ = this.owner,\n        config = $$.config,\n        tickValues;\n\n    if (config.axis_x_tick_fit || config.axis_x_tick_count) {\n      tickValues = this.generateTickValues($$.mapTargetsToUniqueXs(targets), config.axis_x_tick_count, $$.isTimeSeries());\n    }\n\n    if (axis) {\n      axis.tickValues(tickValues);\n    } else {\n      $$.xAxis.tickValues(tickValues);\n      $$.subXAxis.tickValues(tickValues);\n    }\n\n    return tickValues;\n  };\n\n  Axis.prototype.getYAxis = function getYAxis(axisId, scale, orient, tickValues, withOuterTick, withoutTransition, withoutRotateTickText) {\n    var $$ = this.owner;\n    var config = $$.config;\n    var tickFormat = config[\"axis_\".concat(axisId, \"_tick_format\")];\n\n    if (!tickFormat && $$.isAxisNormalized(axisId)) {\n      tickFormat = function tickFormat(x) {\n        return \"\".concat(x, \"%\");\n      };\n    }\n\n    var axis = new this.internal(this, {\n      withOuterTick: withOuterTick,\n      withoutTransition: withoutTransition,\n      tickTextRotate: withoutRotateTickText ? 0 : config.axis_y_tick_rotate\n    }).axis.scale(scale).orient(orient);\n\n    if (tickFormat) {\n      axis.tickFormat(tickFormat);\n    }\n\n    if ($$.isTimeSeriesY()) {\n      axis.ticks(config.axis_y_tick_time_type, config.axis_y_tick_time_interval);\n    } else {\n      axis.tickValues(tickValues);\n    }\n\n    return axis;\n  };\n\n  Axis.prototype.getId = function getId(id) {\n    var config = this.owner.config;\n    return id in config.data_axes ? config.data_axes[id] : 'y';\n  };\n\n  Axis.prototype.getXAxisTickFormat = function getXAxisTickFormat() {\n    // #2251 previously set any negative values to a whole number,\n    // however both should be truncated according to the users format specification\n    var $$ = this.owner,\n        config = $$.config;\n    var format = $$.isTimeSeries() ? $$.defaultAxisTimeFormat : $$.isCategorized() ? $$.categoryName : function (v) {\n      return v;\n    };\n\n    if (config.axis_x_tick_format) {\n      if (isFunction(config.axis_x_tick_format)) {\n        format = config.axis_x_tick_format;\n      } else if ($$.isTimeSeries()) {\n        format = function format(date) {\n          return date ? $$.axisTimeFormat(config.axis_x_tick_format)(date) : '';\n        };\n      }\n    }\n\n    return isFunction(format) ? function (v) {\n      return format.call($$, v);\n    } : format;\n  };\n\n  Axis.prototype.getTickValues = function getTickValues(tickValues, axis) {\n    return tickValues ? tickValues : axis ? axis.tickValues() : undefined;\n  };\n\n  Axis.prototype.getXAxisTickValues = function getXAxisTickValues() {\n    return this.getTickValues(this.owner.config.axis_x_tick_values, this.owner.xAxis);\n  };\n\n  Axis.prototype.getYAxisTickValues = function getYAxisTickValues() {\n    return this.getTickValues(this.owner.config.axis_y_tick_values, this.owner.yAxis);\n  };\n\n  Axis.prototype.getY2AxisTickValues = function getY2AxisTickValues() {\n    return this.getTickValues(this.owner.config.axis_y2_tick_values, this.owner.y2Axis);\n  };\n\n  Axis.prototype.getLabelOptionByAxisId = function getLabelOptionByAxisId(axisId) {\n    var $$ = this.owner,\n        config = $$.config,\n        option;\n\n    if (axisId === 'y') {\n      option = config.axis_y_label;\n    } else if (axisId === 'y2') {\n      option = config.axis_y2_label;\n    } else if (axisId === 'x') {\n      option = config.axis_x_label;\n    }\n\n    return option;\n  };\n\n  Axis.prototype.getLabelText = function getLabelText(axisId) {\n    var option = this.getLabelOptionByAxisId(axisId);\n    return isString(option) ? option : option ? option.text : null;\n  };\n\n  Axis.prototype.setLabelText = function setLabelText(axisId, text) {\n    var $$ = this.owner,\n        config = $$.config,\n        option = this.getLabelOptionByAxisId(axisId);\n\n    if (isString(option)) {\n      if (axisId === 'y') {\n        config.axis_y_label = text;\n      } else if (axisId === 'y2') {\n        config.axis_y2_label = text;\n      } else if (axisId === 'x') {\n        config.axis_x_label = text;\n      }\n    } else if (option) {\n      option.text = text;\n    }\n  };\n\n  Axis.prototype.getLabelPosition = function getLabelPosition(axisId, defaultPosition) {\n    var option = this.getLabelOptionByAxisId(axisId),\n        position = option && _typeof(option) === 'object' && option.position ? option.position : defaultPosition;\n    return {\n      isInner: position.indexOf('inner') >= 0,\n      isOuter: position.indexOf('outer') >= 0,\n      isLeft: position.indexOf('left') >= 0,\n      isCenter: position.indexOf('center') >= 0,\n      isRight: position.indexOf('right') >= 0,\n      isTop: position.indexOf('top') >= 0,\n      isMiddle: position.indexOf('middle') >= 0,\n      isBottom: position.indexOf('bottom') >= 0\n    };\n  };\n\n  Axis.prototype.getXAxisLabelPosition = function getXAxisLabelPosition() {\n    return this.getLabelPosition('x', this.owner.config.axis_rotated ? 'inner-top' : 'inner-right');\n  };\n\n  Axis.prototype.getYAxisLabelPosition = function getYAxisLabelPosition() {\n    return this.getLabelPosition('y', this.owner.config.axis_rotated ? 'inner-right' : 'inner-top');\n  };\n\n  Axis.prototype.getY2AxisLabelPosition = function getY2AxisLabelPosition() {\n    return this.getLabelPosition('y2', this.owner.config.axis_rotated ? 'inner-right' : 'inner-top');\n  };\n\n  Axis.prototype.getLabelPositionById = function getLabelPositionById(id) {\n    return id === 'y2' ? this.getY2AxisLabelPosition() : id === 'y' ? this.getYAxisLabelPosition() : this.getXAxisLabelPosition();\n  };\n\n  Axis.prototype.textForXAxisLabel = function textForXAxisLabel() {\n    return this.getLabelText('x');\n  };\n\n  Axis.prototype.textForYAxisLabel = function textForYAxisLabel() {\n    return this.getLabelText('y');\n  };\n\n  Axis.prototype.textForY2AxisLabel = function textForY2AxisLabel() {\n    return this.getLabelText('y2');\n  };\n\n  Axis.prototype.xForAxisLabel = function xForAxisLabel(forHorizontal, position) {\n    var $$ = this.owner;\n\n    if (forHorizontal) {\n      return position.isLeft ? 0 : position.isCenter ? $$.width / 2 : $$.width;\n    } else {\n      return position.isBottom ? -$$.height : position.isMiddle ? -$$.height / 2 : 0;\n    }\n  };\n\n  Axis.prototype.dxForAxisLabel = function dxForAxisLabel(forHorizontal, position) {\n    if (forHorizontal) {\n      return position.isLeft ? '0.5em' : position.isRight ? '-0.5em' : '0';\n    } else {\n      return position.isTop ? '-0.5em' : position.isBottom ? '0.5em' : '0';\n    }\n  };\n\n  Axis.prototype.textAnchorForAxisLabel = function textAnchorForAxisLabel(forHorizontal, position) {\n    if (forHorizontal) {\n      return position.isLeft ? 'start' : position.isCenter ? 'middle' : 'end';\n    } else {\n      return position.isBottom ? 'start' : position.isMiddle ? 'middle' : 'end';\n    }\n  };\n\n  Axis.prototype.xForXAxisLabel = function xForXAxisLabel() {\n    return this.xForAxisLabel(!this.owner.config.axis_rotated, this.getXAxisLabelPosition());\n  };\n\n  Axis.prototype.xForYAxisLabel = function xForYAxisLabel() {\n    return this.xForAxisLabel(this.owner.config.axis_rotated, this.getYAxisLabelPosition());\n  };\n\n  Axis.prototype.xForY2AxisLabel = function xForY2AxisLabel() {\n    return this.xForAxisLabel(this.owner.config.axis_rotated, this.getY2AxisLabelPosition());\n  };\n\n  Axis.prototype.dxForXAxisLabel = function dxForXAxisLabel() {\n    return this.dxForAxisLabel(!this.owner.config.axis_rotated, this.getXAxisLabelPosition());\n  };\n\n  Axis.prototype.dxForYAxisLabel = function dxForYAxisLabel() {\n    return this.dxForAxisLabel(this.owner.config.axis_rotated, this.getYAxisLabelPosition());\n  };\n\n  Axis.prototype.dxForY2AxisLabel = function dxForY2AxisLabel() {\n    return this.dxForAxisLabel(this.owner.config.axis_rotated, this.getY2AxisLabelPosition());\n  };\n\n  Axis.prototype.dyForXAxisLabel = function dyForXAxisLabel() {\n    var $$ = this.owner,\n        config = $$.config,\n        position = this.getXAxisLabelPosition();\n\n    if (config.axis_rotated) {\n      return position.isInner ? '1.2em' : -25 - ($$.config.axis_x_inner ? 0 : this.getMaxTickWidth('x'));\n    } else {\n      return position.isInner ? '-0.5em' : $$.getHorizontalAxisHeight('x') - 10;\n    }\n  };\n\n  Axis.prototype.dyForYAxisLabel = function dyForYAxisLabel() {\n    var $$ = this.owner,\n        position = this.getYAxisLabelPosition();\n\n    if ($$.config.axis_rotated) {\n      return position.isInner ? '-0.5em' : '3em';\n    } else {\n      return position.isInner ? '1.2em' : -10 - ($$.config.axis_y_inner ? 0 : this.getMaxTickWidth('y') + 10);\n    }\n  };\n\n  Axis.prototype.dyForY2AxisLabel = function dyForY2AxisLabel() {\n    var $$ = this.owner,\n        position = this.getY2AxisLabelPosition();\n\n    if ($$.config.axis_rotated) {\n      return position.isInner ? '1.2em' : '-2.2em';\n    } else {\n      return position.isInner ? '-0.5em' : 15 + ($$.config.axis_y2_inner ? 0 : this.getMaxTickWidth('y2') + 15);\n    }\n  };\n\n  Axis.prototype.textAnchorForXAxisLabel = function textAnchorForXAxisLabel() {\n    var $$ = this.owner;\n    return this.textAnchorForAxisLabel(!$$.config.axis_rotated, this.getXAxisLabelPosition());\n  };\n\n  Axis.prototype.textAnchorForYAxisLabel = function textAnchorForYAxisLabel() {\n    var $$ = this.owner;\n    return this.textAnchorForAxisLabel($$.config.axis_rotated, this.getYAxisLabelPosition());\n  };\n\n  Axis.prototype.textAnchorForY2AxisLabel = function textAnchorForY2AxisLabel() {\n    var $$ = this.owner;\n    return this.textAnchorForAxisLabel($$.config.axis_rotated, this.getY2AxisLabelPosition());\n  };\n\n  Axis.prototype.getMaxTickWidth = function getMaxTickWidth(id, withoutRecompute) {\n    var $$ = this.owner,\n        maxWidth = 0,\n        targetsToShow,\n        scale,\n        axis,\n        dummy,\n        svg;\n\n    if (withoutRecompute && $$.currentMaxTickWidths[id]) {\n      return $$.currentMaxTickWidths[id];\n    }\n\n    if ($$.svg) {\n      targetsToShow = $$.filterTargetsToShow($$.data.targets);\n\n      if (id === 'y') {\n        scale = $$.y.copy().domain($$.getYDomain(targetsToShow, 'y'));\n        axis = this.getYAxis(id, scale, $$.yOrient, $$.yAxisTickValues, false, true, true);\n      } else if (id === 'y2') {\n        scale = $$.y2.copy().domain($$.getYDomain(targetsToShow, 'y2'));\n        axis = this.getYAxis(id, scale, $$.y2Orient, $$.y2AxisTickValues, false, true, true);\n      } else {\n        scale = $$.x.copy().domain($$.getXDomain(targetsToShow));\n        axis = this.getXAxis(scale, $$.xOrient, $$.xAxisTickFormat, $$.xAxisTickValues, false, true, true);\n        this.updateXAxisTickValues(targetsToShow, axis);\n      }\n\n      dummy = $$.d3.select('body').append('div').classed('c3', true);\n      svg = dummy.append('svg').style('visibility', 'hidden').style('position', 'fixed').style('top', 0).style('left', 0), svg.append('g').call(axis).each(function () {\n        $$.d3.select(this).selectAll('text').each(function () {\n          var box = getBBox(this);\n\n          if (maxWidth < box.width) {\n            maxWidth = box.width;\n          }\n        });\n        dummy.remove();\n      });\n    }\n\n    $$.currentMaxTickWidths[id] = maxWidth <= 0 ? $$.currentMaxTickWidths[id] : maxWidth;\n    return $$.currentMaxTickWidths[id];\n  };\n\n  Axis.prototype.updateLabels = function updateLabels(withTransition) {\n    var $$ = this.owner;\n    var axisXLabel = $$.main.select('.' + CLASS.axisX + ' .' + CLASS.axisXLabel),\n        axisYLabel = $$.main.select('.' + CLASS.axisY + ' .' + CLASS.axisYLabel),\n        axisY2Label = $$.main.select('.' + CLASS.axisY2 + ' .' + CLASS.axisY2Label);\n    (withTransition ? axisXLabel.transition() : axisXLabel).attr('x', this.xForXAxisLabel.bind(this)).attr('dx', this.dxForXAxisLabel.bind(this)).attr('dy', this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this));\n    (withTransition ? axisYLabel.transition() : axisYLabel).attr('x', this.xForYAxisLabel.bind(this)).attr('dx', this.dxForYAxisLabel.bind(this)).attr('dy', this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this));\n    (withTransition ? axisY2Label.transition() : axisY2Label).attr('x', this.xForY2AxisLabel.bind(this)).attr('dx', this.dxForY2AxisLabel.bind(this)).attr('dy', this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this));\n  };\n\n  Axis.prototype.getPadding = function getPadding(padding, key, defaultValue, domainLength) {\n    var p = typeof padding === 'number' ? padding : padding[key];\n\n    if (!isValue(p)) {\n      return defaultValue;\n    }\n\n    if (padding.unit === 'ratio') {\n      return padding[key] * domainLength;\n    } // assume padding is pixels if unit is not specified\n\n\n    return this.convertPixelsToAxisPadding(p, domainLength);\n  };\n\n  Axis.prototype.convertPixelsToAxisPadding = function convertPixelsToAxisPadding(pixels, domainLength) {\n    var $$ = this.owner,\n        length = $$.config.axis_rotated ? $$.width : $$.height;\n    return domainLength * (pixels / length);\n  };\n\n  Axis.prototype.generateTickValues = function generateTickValues(values, tickCount, forTimeSeries) {\n    var tickValues = values,\n        targetCount,\n        start,\n        end,\n        count,\n        interval,\n        i,\n        tickValue;\n\n    if (tickCount) {\n      targetCount = isFunction(tickCount) ? tickCount() : tickCount; // compute ticks according to tickCount\n\n      if (targetCount === 1) {\n        tickValues = [values[0]];\n      } else if (targetCount === 2) {\n        tickValues = [values[0], values[values.length - 1]];\n      } else if (targetCount > 2) {\n        count = targetCount - 2;\n        start = values[0];\n        end = values[values.length - 1];\n        interval = (end - start) / (count + 1); // re-construct unique values\n\n        tickValues = [start];\n\n        for (i = 0; i < count; i++) {\n          tickValue = +start + interval * (i + 1);\n          tickValues.push(forTimeSeries ? new Date(tickValue) : tickValue);\n        }\n\n        tickValues.push(end);\n      }\n    }\n\n    if (!forTimeSeries) {\n      tickValues = tickValues.sort(function (a, b) {\n        return a - b;\n      });\n    }\n\n    return tickValues;\n  };\n\n  Axis.prototype.generateTransitions = function generateTransitions(duration) {\n    var $$ = this.owner,\n        axes = $$.axes;\n    return {\n      axisX: duration ? axes.x.transition().duration(duration) : axes.x,\n      axisY: duration ? axes.y.transition().duration(duration) : axes.y,\n      axisY2: duration ? axes.y2.transition().duration(duration) : axes.y2,\n      axisSubX: duration ? axes.subx.transition().duration(duration) : axes.subx\n    };\n  };\n\n  Axis.prototype.redraw = function redraw(duration, isHidden) {\n    var $$ = this.owner,\n        transition = duration ? $$.d3.transition().duration(duration) : null;\n    $$.axes.x.style('opacity', isHidden ? 0 : 1).call($$.xAxis, transition);\n    $$.axes.y.style('opacity', isHidden ? 0 : 1).call($$.yAxis, transition);\n    $$.axes.y2.style('opacity', isHidden ? 0 : 1).call($$.y2Axis, transition);\n    $$.axes.subx.style('opacity', isHidden ? 0 : 1).call($$.subXAxis, transition);\n  };\n\n  var c3 = {\n    version: '0.7.18',\n    chart: {\n      fn: Chart.prototype,\n      internal: {\n        fn: ChartInternal.prototype,\n        axis: {\n          fn: Axis.prototype,\n          internal: {\n            fn: AxisInternal.prototype\n          }\n        }\n      }\n    },\n    generate: function generate(config) {\n      return new Chart(config);\n    }\n  };\n\n  ChartInternal.prototype.beforeInit = function () {// can do something\n  };\n\n  ChartInternal.prototype.afterInit = function () {// can do something\n  };\n\n  ChartInternal.prototype.init = function () {\n    var $$ = this,\n        config = $$.config;\n    $$.initParams();\n\n    if (config.data_url) {\n      $$.convertUrlToData(config.data_url, config.data_mimeType, config.data_headers, config.data_keys, $$.initWithData);\n    } else if (config.data_json) {\n      $$.initWithData($$.convertJsonToData(config.data_json, config.data_keys));\n    } else if (config.data_rows) {\n      $$.initWithData($$.convertRowsToData(config.data_rows));\n    } else if (config.data_columns) {\n      $$.initWithData($$.convertColumnsToData(config.data_columns));\n    } else {\n      throw Error('url or json or rows or columns is required.');\n    }\n  };\n\n  ChartInternal.prototype.initParams = function () {\n    var $$ = this,\n        d3 = $$.d3,\n        config = $$.config; // MEMO: clipId needs to be unique because it conflicts when multiple charts exist\n\n    $$.clipId = 'c3-' + new Date().valueOf() + '-clip';\n    $$.clipIdForXAxis = $$.clipId + '-xaxis';\n    $$.clipIdForYAxis = $$.clipId + '-yaxis';\n    $$.clipIdForGrid = $$.clipId + '-grid';\n    $$.clipIdForSubchart = $$.clipId + '-subchart';\n    $$.clipPath = $$.getClipPath($$.clipId);\n    $$.clipPathForXAxis = $$.getClipPath($$.clipIdForXAxis);\n    $$.clipPathForYAxis = $$.getClipPath($$.clipIdForYAxis);\n    $$.clipPathForGrid = $$.getClipPath($$.clipIdForGrid);\n    $$.clipPathForSubchart = $$.getClipPath($$.clipIdForSubchart);\n    $$.dragStart = null;\n    $$.dragging = false;\n    $$.flowing = false;\n    $$.cancelClick = false;\n    $$.mouseover = undefined;\n    $$.transiting = false;\n    $$.color = $$.generateColor();\n    $$.levelColor = $$.generateLevelColor();\n    $$.dataTimeParse = (config.data_xLocaltime ? d3.timeParse : d3.utcParse)($$.config.data_xFormat);\n    $$.axisTimeFormat = config.axis_x_localtime ? d3.timeFormat : d3.utcFormat;\n\n    $$.defaultAxisTimeFormat = function (date) {\n      if (date.getMilliseconds()) {\n        return d3.timeFormat('.%L')(date);\n      }\n\n      if (date.getSeconds()) {\n        return d3.timeFormat(':%S')(date);\n      }\n\n      if (date.getMinutes()) {\n        return d3.timeFormat('%I:%M')(date);\n      }\n\n      if (date.getHours()) {\n        return d3.timeFormat('%I %p')(date);\n      }\n\n      if (date.getDay() && date.getDate() !== 1) {\n        return d3.timeFormat('%-m/%-d')(date);\n      }\n\n      if (date.getDate() !== 1) {\n        return d3.timeFormat('%-m/%-d')(date);\n      }\n\n      if (date.getMonth()) {\n        return d3.timeFormat('%-m/%-d')(date);\n      }\n\n      return d3.timeFormat('%Y/%-m/%-d')(date);\n    };\n\n    $$.hiddenTargetIds = [];\n    $$.hiddenLegendIds = [];\n    $$.focusedTargetIds = [];\n    $$.defocusedTargetIds = [];\n    $$.xOrient = config.axis_rotated ? config.axis_x_inner ? 'right' : 'left' : config.axis_x_inner ? 'top' : 'bottom';\n    $$.yOrient = config.axis_rotated ? config.axis_y_inner ? 'top' : 'bottom' : config.axis_y_inner ? 'right' : 'left';\n    $$.y2Orient = config.axis_rotated ? config.axis_y2_inner ? 'bottom' : 'top' : config.axis_y2_inner ? 'left' : 'right';\n    $$.subXOrient = config.axis_rotated ? 'left' : 'bottom';\n    $$.isLegendRight = config.legend_position === 'right';\n    $$.isLegendInset = config.legend_position === 'inset';\n    $$.isLegendTop = config.legend_inset_anchor === 'top-left' || config.legend_inset_anchor === 'top-right';\n    $$.isLegendLeft = config.legend_inset_anchor === 'top-left' || config.legend_inset_anchor === 'bottom-left';\n    $$.legendStep = 0;\n    $$.legendItemWidth = 0;\n    $$.legendItemHeight = 0;\n    $$.currentMaxTickWidths = {\n      x: 0,\n      y: 0,\n      y2: 0\n    };\n    $$.rotated_padding_left = 30;\n    $$.rotated_padding_right = config.axis_rotated && !config.axis_x_show ? 0 : 30;\n    $$.rotated_padding_top = 5;\n    $$.withoutFadeIn = {};\n    $$.intervalForObserveInserted = undefined;\n    $$.axes.subx = d3.selectAll([]); // needs when excluding subchart.js\n  };\n\n  ChartInternal.prototype.initChartElements = function () {\n    if (this.initBar) {\n      this.initBar();\n    }\n\n    if (this.initLine) {\n      this.initLine();\n    }\n\n    if (this.initArc) {\n      this.initArc();\n    }\n\n    if (this.initGauge) {\n      this.initGauge();\n    }\n\n    if (this.initText) {\n      this.initText();\n    }\n  };\n\n  ChartInternal.prototype.initWithData = function (data) {\n    var $$ = this,\n        d3 = $$.d3,\n        config = $$.config;\n    var defs,\n        main,\n        binding = true;\n    $$.axis = new Axis($$);\n\n    if (!config.bindto) {\n      $$.selectChart = d3.selectAll([]);\n    } else if (typeof config.bindto.node === 'function') {\n      $$.selectChart = config.bindto;\n    } else {\n      $$.selectChart = d3.select(config.bindto);\n    }\n\n    if ($$.selectChart.empty()) {\n      $$.selectChart = d3.select(document.createElement('div')).style('opacity', 0);\n      $$.observeInserted($$.selectChart);\n      binding = false;\n    }\n\n    $$.selectChart.html('').classed('c3', true); // Init data as targets\n\n    $$.data.xs = {};\n    $$.data.targets = $$.convertDataToTargets(data);\n\n    if (config.data_filter) {\n      $$.data.targets = $$.data.targets.filter(config.data_filter);\n    } // Set targets to hide if needed\n\n\n    if (config.data_hide) {\n      $$.addHiddenTargetIds(config.data_hide === true ? $$.mapToIds($$.data.targets) : config.data_hide);\n    }\n\n    if (config.legend_hide) {\n      $$.addHiddenLegendIds(config.legend_hide === true ? $$.mapToIds($$.data.targets) : config.legend_hide);\n    }\n\n    if ($$.isStanfordGraphType()) {\n      $$.initStanfordData();\n    } // Init sizes and scales\n\n\n    $$.updateSizes();\n    $$.updateScales(); // Set domains for each scale\n\n    $$.x.domain(d3.extent($$.getXDomain($$.data.targets)));\n    $$.y.domain($$.getYDomain($$.data.targets, 'y'));\n    $$.y2.domain($$.getYDomain($$.data.targets, 'y2'));\n    $$.subX.domain($$.x.domain());\n    $$.subY.domain($$.y.domain());\n    $$.subY2.domain($$.y2.domain()); // Save original x domain for zoom update\n\n    $$.orgXDomain = $$.x.domain();\n    /*-- Basic Elements --*/\n    // Define svgs\n\n    $$.svg = $$.selectChart.append('svg').style('overflow', 'hidden').on('mouseenter', function () {\n      return config.onmouseover.call($$);\n    }).on('mouseleave', function () {\n      return config.onmouseout.call($$);\n    });\n\n    if ($$.config.svg_classname) {\n      $$.svg.attr('class', $$.config.svg_classname);\n    } // Define defs\n\n\n    defs = $$.svg.append('defs');\n    $$.clipChart = $$.appendClip(defs, $$.clipId);\n    $$.clipXAxis = $$.appendClip(defs, $$.clipIdForXAxis);\n    $$.clipYAxis = $$.appendClip(defs, $$.clipIdForYAxis);\n    $$.clipGrid = $$.appendClip(defs, $$.clipIdForGrid);\n    $$.clipSubchart = $$.appendClip(defs, $$.clipIdForSubchart);\n    $$.updateSvgSize(); // Define regions\n\n    main = $$.main = $$.svg.append('g').attr('transform', $$.getTranslate('main'));\n\n    if ($$.initPie) {\n      $$.initPie();\n    }\n\n    if ($$.initDragZoom) {\n      $$.initDragZoom();\n    }\n\n    if (config.subchart_show && $$.initSubchart) {\n      $$.initSubchart();\n    }\n\n    if ($$.initTooltip) {\n      $$.initTooltip();\n    }\n\n    if ($$.initLegend) {\n      $$.initLegend();\n    }\n\n    if ($$.initTitle) {\n      $$.initTitle();\n    }\n\n    if ($$.initZoom) {\n      $$.initZoom();\n    }\n\n    if ($$.isStanfordGraphType()) {\n      $$.drawColorScale();\n    } // Update selection based on size and scale\n    // TODO: currently this must be called after initLegend because of update of sizes, but it should be done in initSubchart.\n\n\n    if (config.subchart_show && $$.initSubchartBrush) {\n      $$.initSubchartBrush();\n    }\n    /*-- Main Region --*/\n    // text when empty\n\n\n    main.append('text').attr('class', CLASS.text + ' ' + CLASS.empty).attr('text-anchor', 'middle') // horizontal centering of text at x position in all browsers.\n    .attr('dominant-baseline', 'middle'); // vertical centering of text at y position in all browsers, except IE.\n    // Regions\n\n    $$.initRegion(); // Grids\n\n    $$.initGrid(); // Define g for chart area\n\n    main.append('g').attr('clip-path', $$.clipPath).attr('class', CLASS.chart); // Grid lines\n\n    if (config.grid_lines_front) {\n      $$.initGridLines();\n    }\n\n    $$.initStanfordElements(); // Cover whole with rects for events\n\n    $$.initEventRect(); // Define g for chart\n\n    $$.initChartElements(); // Add Axis\n\n    $$.axis.init(); // Set targets\n\n    $$.updateTargets($$.data.targets); // Set default extent if defined\n\n    if (config.axis_x_selection) {\n      $$.brush.selectionAsValue($$.getDefaultSelection());\n    } // Draw with targets\n\n\n    if (binding) {\n      $$.updateDimension();\n      $$.config.oninit.call($$);\n      $$.redraw({\n        withTransition: false,\n        withTransform: true,\n        withUpdateXDomain: true,\n        withUpdateOrgXDomain: true,\n        withTransitionForAxis: false\n      });\n    } // Bind to resize event\n\n\n    $$.bindResize(); // Bind to window focus event\n\n    $$.bindWindowFocus(); // export element of the chart\n\n    $$.api.element = $$.selectChart.node();\n  };\n\n  ChartInternal.prototype.smoothLines = function (el, type) {\n    var $$ = this;\n\n    if (type === 'grid') {\n      el.each(function () {\n        var g = $$.d3.select(this),\n            x1 = g.attr('x1'),\n            x2 = g.attr('x2'),\n            y1 = g.attr('y1'),\n            y2 = g.attr('y2');\n        g.attr({\n          x1: Math.ceil(x1),\n          x2: Math.ceil(x2),\n          y1: Math.ceil(y1),\n          y2: Math.ceil(y2)\n        });\n      });\n    }\n  };\n\n  ChartInternal.prototype.updateSizes = function () {\n    var $$ = this,\n        config = $$.config;\n    var legendHeight = $$.legend ? $$.getLegendHeight() : 0,\n        legendWidth = $$.legend ? $$.getLegendWidth() : 0,\n        legendHeightForBottom = $$.isLegendRight || $$.isLegendInset ? 0 : legendHeight,\n        hasArc = $$.hasArcType(),\n        xAxisHeight = config.axis_rotated || hasArc ? 0 : $$.getHorizontalAxisHeight('x'),\n        subchartHeight = config.subchart_show && !hasArc ? config.subchart_size_height + xAxisHeight : 0;\n    $$.currentWidth = $$.getCurrentWidth();\n    $$.currentHeight = $$.getCurrentHeight(); // for main\n\n    $$.margin = config.axis_rotated ? {\n      top: $$.getHorizontalAxisHeight('y2') + $$.getCurrentPaddingTop(),\n      right: hasArc ? 0 : $$.getCurrentPaddingRight(),\n      bottom: $$.getHorizontalAxisHeight('y') + legendHeightForBottom + $$.getCurrentPaddingBottom(),\n      left: subchartHeight + (hasArc ? 0 : $$.getCurrentPaddingLeft())\n    } : {\n      top: 4 + $$.getCurrentPaddingTop(),\n      // for top tick text\n      right: hasArc ? 0 : $$.getCurrentPaddingRight(),\n      bottom: xAxisHeight + subchartHeight + legendHeightForBottom + $$.getCurrentPaddingBottom(),\n      left: hasArc ? 0 : $$.getCurrentPaddingLeft()\n    }; // for subchart\n\n    $$.margin2 = config.axis_rotated ? {\n      top: $$.margin.top,\n      right: NaN,\n      bottom: 20 + legendHeightForBottom,\n      left: $$.rotated_padding_left\n    } : {\n      top: $$.currentHeight - subchartHeight - legendHeightForBottom,\n      right: NaN,\n      bottom: xAxisHeight + legendHeightForBottom,\n      left: $$.margin.left\n    }; // for legend\n\n    $$.margin3 = {\n      top: 0,\n      right: NaN,\n      bottom: 0,\n      left: 0\n    };\n\n    if ($$.updateSizeForLegend) {\n      $$.updateSizeForLegend(legendHeight, legendWidth);\n    }\n\n    $$.width = $$.currentWidth - $$.margin.left - $$.margin.right;\n    $$.height = $$.currentHeight - $$.margin.top - $$.margin.bottom;\n\n    if ($$.width < 0) {\n      $$.width = 0;\n    }\n\n    if ($$.height < 0) {\n      $$.height = 0;\n    }\n\n    $$.width2 = config.axis_rotated ? $$.margin.left - $$.rotated_padding_left - $$.rotated_padding_right : $$.width;\n    $$.height2 = config.axis_rotated ? $$.height : $$.currentHeight - $$.margin2.top - $$.margin2.bottom;\n\n    if ($$.width2 < 0) {\n      $$.width2 = 0;\n    }\n\n    if ($$.height2 < 0) {\n      $$.height2 = 0;\n    } // for arc\n\n\n    $$.arcWidth = $$.width - ($$.isLegendRight ? legendWidth + 10 : 0);\n    $$.arcHeight = $$.height - ($$.isLegendRight ? 0 : 10);\n\n    if ($$.hasType('gauge') && !config.gauge_fullCircle) {\n      $$.arcHeight += $$.height - $$.getGaugeLabelHeight();\n    }\n\n    if ($$.updateRadius) {\n      $$.updateRadius();\n    }\n\n    if ($$.isLegendRight && hasArc) {\n      $$.margin3.left = $$.arcWidth / 2 + $$.radiusExpanded * 1.1;\n    }\n  };\n\n  ChartInternal.prototype.updateTargets = function (targets) {\n    var $$ = this,\n        config = $$.config;\n    /*-- Main --*/\n    //-- Text --//\n\n    $$.updateTargetsForText(targets); //-- Bar --//\n\n    $$.updateTargetsForBar(targets); //-- Line --//\n\n    $$.updateTargetsForLine(targets); //-- Arc --//\n\n    if ($$.hasArcType() && $$.updateTargetsForArc) {\n      $$.updateTargetsForArc(targets);\n    }\n    /*-- Sub --*/\n\n\n    if (config.subchart_show && $$.updateTargetsForSubchart) {\n      $$.updateTargetsForSubchart(targets);\n    } // Fade-in each chart\n\n\n    $$.showTargets();\n  };\n\n  ChartInternal.prototype.showTargets = function () {\n    var $$ = this;\n    $$.svg.selectAll('.' + CLASS.target).filter(function (d) {\n      return $$.isTargetToShow(d.id);\n    }).transition().duration($$.config.transition_duration).style('opacity', 1);\n  };\n\n  ChartInternal.prototype.redraw = function (options, transitions) {\n    var $$ = this,\n        main = $$.main,\n        d3 = $$.d3,\n        config = $$.config;\n    var areaIndices = $$.getShapeIndices($$.isAreaType),\n        barIndices = $$.getShapeIndices($$.isBarType),\n        lineIndices = $$.getShapeIndices($$.isLineType);\n    var withY, withSubchart, withTransition, withTransitionForExit, withTransitionForAxis, withTransform, withUpdateXDomain, withUpdateOrgXDomain, withTrimXDomain, withLegend, withEventRect, withDimension, withUpdateXAxis;\n    var hideAxis = $$.hasArcType();\n    var drawArea, drawBar, drawLine, xForText, yForText;\n    var duration, durationForExit, durationForAxis;\n    var transitionsToWait, waitForDraw, flow, transition;\n    var targetsToShow = $$.filterTargetsToShow($$.data.targets),\n        tickValues,\n        i,\n        intervalForCulling,\n        xDomainForZoom;\n    var xv = $$.xv.bind($$),\n        cx,\n        cy;\n    options = options || {};\n    withY = getOption(options, 'withY', true);\n    withSubchart = getOption(options, 'withSubchart', true);\n    withTransition = getOption(options, 'withTransition', true);\n    withTransform = getOption(options, 'withTransform', false);\n    withUpdateXDomain = getOption(options, 'withUpdateXDomain', false);\n    withUpdateOrgXDomain = getOption(options, 'withUpdateOrgXDomain', false);\n    withTrimXDomain = getOption(options, 'withTrimXDomain', true);\n    withUpdateXAxis = getOption(options, 'withUpdateXAxis', withUpdateXDomain);\n    withLegend = getOption(options, 'withLegend', false);\n    withEventRect = getOption(options, 'withEventRect', true);\n    withDimension = getOption(options, 'withDimension', true);\n    withTransitionForExit = getOption(options, 'withTransitionForExit', withTransition);\n    withTransitionForAxis = getOption(options, 'withTransitionForAxis', withTransition);\n    duration = withTransition ? config.transition_duration : 0;\n    durationForExit = withTransitionForExit ? duration : 0;\n    durationForAxis = withTransitionForAxis ? duration : 0;\n    transitions = transitions || $$.axis.generateTransitions(durationForAxis); // update legend and transform each g\n\n    if (withLegend && config.legend_show) {\n      $$.updateLegend($$.mapToIds($$.data.targets), options, transitions);\n    } else if (withDimension) {\n      // need to update dimension (e.g. axis.y.tick.values) because y tick values should change\n      // no need to update axis in it because they will be updated in redraw()\n      $$.updateDimension(true);\n    } // MEMO: needed for grids calculation\n\n\n    if ($$.isCategorized() && targetsToShow.length === 0) {\n      $$.x.domain([0, $$.axes.x.selectAll('.tick').size()]);\n    }\n\n    if (targetsToShow.length) {\n      $$.updateXDomain(targetsToShow, withUpdateXDomain, withUpdateOrgXDomain, withTrimXDomain);\n\n      if (!config.axis_x_tick_values) {\n        tickValues = $$.axis.updateXAxisTickValues(targetsToShow);\n      }\n    } else {\n      $$.xAxis.tickValues([]);\n      $$.subXAxis.tickValues([]);\n    }\n\n    if (config.zoom_rescale && !options.flow) {\n      xDomainForZoom = $$.x.orgDomain();\n    }\n\n    $$.y.domain($$.getYDomain(targetsToShow, 'y', xDomainForZoom));\n    $$.y2.domain($$.getYDomain(targetsToShow, 'y2', xDomainForZoom));\n\n    if (!config.axis_y_tick_values && config.axis_y_tick_count) {\n      $$.yAxis.tickValues($$.axis.generateTickValues($$.y.domain(), config.axis_y_tick_count));\n    }\n\n    if (!config.axis_y2_tick_values && config.axis_y2_tick_count) {\n      $$.y2Axis.tickValues($$.axis.generateTickValues($$.y2.domain(), config.axis_y2_tick_count));\n    } // axes\n\n\n    $$.axis.redraw(durationForAxis, hideAxis); // Update axis label\n\n    $$.axis.updateLabels(withTransition); // show/hide if manual culling needed\n\n    if ((withUpdateXDomain || withUpdateXAxis) && targetsToShow.length) {\n      if (config.axis_x_tick_culling && tickValues) {\n        for (i = 1; i < tickValues.length; i++) {\n          if (tickValues.length / i < config.axis_x_tick_culling_max) {\n            intervalForCulling = i;\n            break;\n          }\n        }\n\n        $$.svg.selectAll('.' + CLASS.axisX + ' .tick text').each(function (e) {\n          var index = tickValues.indexOf(e);\n\n          if (index >= 0) {\n            d3.select(this).style('display', index % intervalForCulling ? 'none' : 'block');\n          }\n        });\n      } else {\n        $$.svg.selectAll('.' + CLASS.axisX + ' .tick text').style('display', 'block');\n      }\n    } // setup drawer - MEMO: these must be called after axis updated\n\n\n    drawArea = $$.generateDrawArea ? $$.generateDrawArea(areaIndices, false) : undefined;\n    drawBar = $$.generateDrawBar ? $$.generateDrawBar(barIndices) : undefined;\n    drawLine = $$.generateDrawLine ? $$.generateDrawLine(lineIndices, false) : undefined;\n    xForText = $$.generateXYForText(areaIndices, barIndices, lineIndices, true);\n    yForText = $$.generateXYForText(areaIndices, barIndices, lineIndices, false); // update circleY based on updated parameters\n\n    $$.updateCircleY(); // generate circle x/y functions depending on updated params\n\n    cx = ($$.config.axis_rotated ? $$.circleY : $$.circleX).bind($$);\n    cy = ($$.config.axis_rotated ? $$.circleX : $$.circleY).bind($$); // Update sub domain\n\n    if (withY) {\n      $$.subY.domain($$.getYDomain(targetsToShow, 'y'));\n      $$.subY2.domain($$.getYDomain(targetsToShow, 'y2'));\n    } // xgrid focus\n\n\n    $$.updateXgridFocus(); // Data empty label positioning and text.\n\n    main.select('text.' + CLASS.text + '.' + CLASS.empty).attr('x', $$.width / 2).attr('y', $$.height / 2).text(config.data_empty_label_text).transition().style('opacity', targetsToShow.length ? 0 : 1); // event rect\n\n    if (withEventRect) {\n      $$.redrawEventRect();\n    } // grid\n\n\n    $$.updateGrid(duration);\n    $$.updateStanfordElements(duration); // rect for regions\n\n    $$.updateRegion(duration); // bars\n\n    $$.updateBar(durationForExit); // lines, areas and circles\n\n    $$.updateLine(durationForExit);\n    $$.updateArea(durationForExit);\n    $$.updateCircle(cx, cy); // text\n\n    if ($$.hasDataLabel()) {\n      $$.updateText(xForText, yForText, durationForExit);\n    } // title\n\n\n    if ($$.redrawTitle) {\n      $$.redrawTitle();\n    } // arc\n\n\n    if ($$.redrawArc) {\n      $$.redrawArc(duration, durationForExit, withTransform);\n    } // subchart\n\n\n    if (config.subchart_show && $$.redrawSubchart) {\n      $$.redrawSubchart(withSubchart, transitions, duration, durationForExit, areaIndices, barIndices, lineIndices);\n    }\n\n    if ($$.isStanfordGraphType()) {\n      $$.drawColorScale();\n    } // circles for select\n\n\n    main.selectAll('.' + CLASS.selectedCircles).filter($$.isBarType.bind($$)).selectAll('circle').remove();\n\n    if (options.flow) {\n      flow = $$.generateFlow({\n        targets: targetsToShow,\n        flow: options.flow,\n        duration: options.flow.duration,\n        drawBar: drawBar,\n        drawLine: drawLine,\n        drawArea: drawArea,\n        cx: cx,\n        cy: cy,\n        xv: xv,\n        xForText: xForText,\n        yForText: yForText\n      });\n    }\n\n    if (duration && $$.isTabVisible()) {\n      // Only use transition if tab visible. See #938.\n      // transition should be derived from one transition\n      transition = d3.transition().duration(duration);\n      transitionsToWait = [];\n      [$$.redrawBar(drawBar, true, transition), $$.redrawLine(drawLine, true, transition), $$.redrawArea(drawArea, true, transition), $$.redrawCircle(cx, cy, true, transition), $$.redrawText(xForText, yForText, options.flow, true, transition), $$.redrawRegion(true, transition), $$.redrawGrid(true, transition)].forEach(function (transitions) {\n        transitions.forEach(function (transition) {\n          transitionsToWait.push(transition);\n        });\n      }); // Wait for end of transitions to call flow and onrendered callback\n\n      waitForDraw = $$.generateWait();\n      transitionsToWait.forEach(function (t) {\n        waitForDraw.add(t);\n      });\n      waitForDraw(function () {\n        if (flow) {\n          flow();\n        }\n\n        if (config.onrendered) {\n          config.onrendered.call($$);\n        }\n      });\n    } else {\n      $$.redrawBar(drawBar);\n      $$.redrawLine(drawLine);\n      $$.redrawArea(drawArea);\n      $$.redrawCircle(cx, cy);\n      $$.redrawText(xForText, yForText, options.flow);\n      $$.redrawRegion();\n      $$.redrawGrid();\n\n      if (flow) {\n        flow();\n      }\n\n      if (config.onrendered) {\n        config.onrendered.call($$);\n      }\n    } // update fadein condition\n\n\n    $$.mapToIds($$.data.targets).forEach(function (id) {\n      $$.withoutFadeIn[id] = true;\n    });\n  };\n\n  ChartInternal.prototype.updateAndRedraw = function (options) {\n    var $$ = this,\n        config = $$.config,\n        transitions;\n    options = options || {}; // same with redraw\n\n    options.withTransition = getOption(options, 'withTransition', true);\n    options.withTransform = getOption(options, 'withTransform', false);\n    options.withLegend = getOption(options, 'withLegend', false); // NOT same with redraw\n\n    options.withUpdateXDomain = getOption(options, 'withUpdateXDomain', true);\n    options.withUpdateOrgXDomain = getOption(options, 'withUpdateOrgXDomain', true);\n    options.withTransitionForExit = false;\n    options.withTransitionForTransform = getOption(options, 'withTransitionForTransform', options.withTransition); // MEMO: this needs to be called before updateLegend and it means this ALWAYS needs to be called)\n\n    $$.updateSizes(); // MEMO: called in updateLegend in redraw if withLegend\n\n    if (!(options.withLegend && config.legend_show)) {\n      transitions = $$.axis.generateTransitions(options.withTransitionForAxis ? config.transition_duration : 0); // Update scales\n\n      $$.updateScales();\n      $$.updateSvgSize(); // Update g positions\n\n      $$.transformAll(options.withTransitionForTransform, transitions);\n    } // Draw with new sizes & scales\n\n\n    $$.redraw(options, transitions);\n  };\n\n  ChartInternal.prototype.redrawWithoutRescale = function () {\n    this.redraw({\n      withY: false,\n      withSubchart: false,\n      withEventRect: false,\n      withTransitionForAxis: false\n    });\n  };\n\n  ChartInternal.prototype.isTimeSeries = function () {\n    return this.config.axis_x_type === 'timeseries';\n  };\n\n  ChartInternal.prototype.isCategorized = function () {\n    return this.config.axis_x_type.indexOf('categor') >= 0;\n  };\n\n  ChartInternal.prototype.isCustomX = function () {\n    var $$ = this,\n        config = $$.config;\n    return !$$.isTimeSeries() && (config.data_x || notEmpty(config.data_xs));\n  };\n\n  ChartInternal.prototype.isTimeSeriesY = function () {\n    return this.config.axis_y_type === 'timeseries';\n  };\n\n  ChartInternal.prototype.getTranslate = function (target) {\n    var $$ = this,\n        config = $$.config,\n        x,\n        y;\n\n    if (target === 'main') {\n      x = asHalfPixel($$.margin.left);\n      y = asHalfPixel($$.margin.top);\n    } else if (target === 'context') {\n      x = asHalfPixel($$.margin2.left);\n      y = asHalfPixel($$.margin2.top);\n    } else if (target === 'legend') {\n      x = $$.margin3.left;\n      y = $$.margin3.top;\n    } else if (target === 'x') {\n      x = 0;\n      y = config.axis_rotated ? 0 : $$.height;\n    } else if (target === 'y') {\n      x = 0;\n      y = config.axis_rotated ? $$.height : 0;\n    } else if (target === 'y2') {\n      x = config.axis_rotated ? 0 : $$.width;\n      y = config.axis_rotated ? 1 : 0;\n    } else if (target === 'subx') {\n      x = 0;\n      y = config.axis_rotated ? 0 : $$.height2;\n    } else if (target === 'arc') {\n      x = $$.arcWidth / 2;\n      y = $$.arcHeight / 2 - ($$.hasType('gauge') ? 6 : 0); // to prevent wrong display of min and max label\n    }\n\n    return 'translate(' + x + ',' + y + ')';\n  };\n\n  ChartInternal.prototype.initialOpacity = function (d) {\n    return d.value !== null && this.withoutFadeIn[d.id] ? 1 : 0;\n  };\n\n  ChartInternal.prototype.initialOpacityForCircle = function (d) {\n    return d.value !== null && this.withoutFadeIn[d.id] ? this.opacityForCircle(d) : 0;\n  };\n\n  ChartInternal.prototype.opacityForCircle = function (d) {\n    var isPointShouldBeShown = isFunction(this.config.point_show) ? this.config.point_show(d) : this.config.point_show;\n    var opacity = isPointShouldBeShown || this.isStanfordType(d) ? 1 : 0;\n    return isValue(d.value) ? this.isScatterType(d) ? 0.5 : opacity : 0;\n  };\n\n  ChartInternal.prototype.opacityForText = function () {\n    return this.hasDataLabel() ? 1 : 0;\n  };\n\n  ChartInternal.prototype.xx = function (d) {\n    return d ? this.x(d.x) : null;\n  };\n\n  ChartInternal.prototype.xvCustom = function (d, xyValue) {\n    var $$ = this,\n        value = xyValue ? d[xyValue] : d.value;\n\n    if ($$.isTimeSeries()) {\n      value = $$.parseDate(d.value);\n    } else if ($$.isCategorized() && typeof d.value === 'string') {\n      value = $$.config.axis_x_categories.indexOf(d.value);\n    }\n\n    return Math.ceil($$.x(value));\n  };\n\n  ChartInternal.prototype.yvCustom = function (d, xyValue) {\n    var $$ = this,\n        yScale = d.axis && d.axis === 'y2' ? $$.y2 : $$.y,\n        value = xyValue ? d[xyValue] : d.value;\n    return Math.ceil(yScale(value));\n  };\n\n  ChartInternal.prototype.xv = function (d) {\n    var $$ = this,\n        value = d.value;\n\n    if ($$.isTimeSeries()) {\n      value = $$.parseDate(d.value);\n    } else if ($$.isCategorized() && typeof d.value === 'string') {\n      value = $$.config.axis_x_categories.indexOf(d.value);\n    }\n\n    return Math.ceil($$.x(value));\n  };\n\n  ChartInternal.prototype.yv = function (d) {\n    var $$ = this,\n        yScale = d.axis && d.axis === 'y2' ? $$.y2 : $$.y;\n    return Math.ceil(yScale(d.value));\n  };\n\n  ChartInternal.prototype.subxx = function (d) {\n    return d ? this.subX(d.x) : null;\n  };\n\n  ChartInternal.prototype.transformMain = function (withTransition, transitions) {\n    var $$ = this,\n        xAxis,\n        yAxis,\n        y2Axis;\n\n    if (transitions && transitions.axisX) {\n      xAxis = transitions.axisX;\n    } else {\n      xAxis = $$.main.select('.' + CLASS.axisX);\n\n      if (withTransition) {\n        xAxis = xAxis.transition();\n      }\n    }\n\n    if (transitions && transitions.axisY) {\n      yAxis = transitions.axisY;\n    } else {\n      yAxis = $$.main.select('.' + CLASS.axisY);\n\n      if (withTransition) {\n        yAxis = yAxis.transition();\n      }\n    }\n\n    if (transitions && transitions.axisY2) {\n      y2Axis = transitions.axisY2;\n    } else {\n      y2Axis = $$.main.select('.' + CLASS.axisY2);\n\n      if (withTransition) {\n        y2Axis = y2Axis.transition();\n      }\n    }\n\n    (withTransition ? $$.main.transition() : $$.main).attr('transform', $$.getTranslate('main'));\n    xAxis.attr('transform', $$.getTranslate('x'));\n    yAxis.attr('transform', $$.getTranslate('y'));\n    y2Axis.attr('transform', $$.getTranslate('y2'));\n    $$.main.select('.' + CLASS.chartArcs).attr('transform', $$.getTranslate('arc'));\n  };\n\n  ChartInternal.prototype.transformAll = function (withTransition, transitions) {\n    var $$ = this;\n    $$.transformMain(withTransition, transitions);\n\n    if ($$.config.subchart_show) {\n      $$.transformContext(withTransition, transitions);\n    }\n\n    if ($$.legend) {\n      $$.transformLegend(withTransition);\n    }\n  };\n\n  ChartInternal.prototype.updateSvgSize = function () {\n    var $$ = this,\n        brush = $$.svg.select(\".\".concat(CLASS.brush, \" .overlay\"));\n    $$.svg.attr('width', $$.currentWidth).attr('height', $$.currentHeight);\n    $$.svg.selectAll(['#' + $$.clipId, '#' + $$.clipIdForGrid]).select('rect').attr('width', $$.width).attr('height', $$.height);\n    $$.svg.select('#' + $$.clipIdForXAxis).select('rect').attr('x', $$.getXAxisClipX.bind($$)).attr('y', $$.getXAxisClipY.bind($$)).attr('width', $$.getXAxisClipWidth.bind($$)).attr('height', $$.getXAxisClipHeight.bind($$));\n    $$.svg.select('#' + $$.clipIdForYAxis).select('rect').attr('x', $$.getYAxisClipX.bind($$)).attr('y', $$.getYAxisClipY.bind($$)).attr('width', $$.getYAxisClipWidth.bind($$)).attr('height', $$.getYAxisClipHeight.bind($$));\n    $$.svg.select('#' + $$.clipIdForSubchart).select('rect').attr('width', $$.width).attr('height', brush.size() && brush.attr('height') || 0); // MEMO: parent div's height will be bigger than svg when <!DOCTYPE html>\n\n    $$.selectChart.style('max-height', $$.currentHeight + 'px');\n  };\n\n  ChartInternal.prototype.updateDimension = function (withoutAxis) {\n    var $$ = this;\n\n    if (!withoutAxis) {\n      if ($$.config.axis_rotated) {\n        $$.axes.x.call($$.xAxis);\n        $$.axes.subx.call($$.subXAxis);\n      } else {\n        $$.axes.y.call($$.yAxis);\n        $$.axes.y2.call($$.y2Axis);\n      }\n    }\n\n    $$.updateSizes();\n    $$.updateScales();\n    $$.updateSvgSize();\n    $$.transformAll(false);\n  };\n\n  ChartInternal.prototype.observeInserted = function (selection) {\n    var $$ = this,\n        observer;\n\n    if (typeof MutationObserver === 'undefined') {\n      window.console.error('MutationObserver not defined.');\n      return;\n    }\n\n    observer = new MutationObserver(function (mutations) {\n      mutations.forEach(function (mutation) {\n        if (mutation.type === 'childList' && mutation.previousSibling) {\n          observer.disconnect(); // need to wait for completion of load because size calculation requires the actual sizes determined after that completion\n\n          $$.intervalForObserveInserted = window.setInterval(function () {\n            // parentNode will NOT be null when completed\n            if (selection.node().parentNode) {\n              window.clearInterval($$.intervalForObserveInserted);\n              $$.updateDimension();\n\n              if ($$.brush) {\n                $$.brush.update();\n              }\n\n              $$.config.oninit.call($$);\n              $$.redraw({\n                withTransform: true,\n                withUpdateXDomain: true,\n                withUpdateOrgXDomain: true,\n                withTransition: false,\n                withTransitionForTransform: false,\n                withLegend: true\n              });\n              selection.transition().style('opacity', 1);\n            }\n          }, 10);\n        }\n      });\n    });\n    observer.observe(selection.node(), {\n      attributes: true,\n      childList: true,\n      characterData: true\n    });\n  };\n  /**\n   * Binds handlers to the window resize event.\n   */\n\n\n  ChartInternal.prototype.bindResize = function () {\n    var $$ = this,\n        config = $$.config;\n    $$.resizeFunction = $$.generateResize(); // need to call .remove\n\n    $$.resizeFunction.add(function () {\n      config.onresize.call($$);\n    });\n\n    if (config.resize_auto) {\n      $$.resizeFunction.add(function () {\n        if ($$.resizeTimeout !== undefined) {\n          window.clearTimeout($$.resizeTimeout);\n        }\n\n        $$.resizeTimeout = window.setTimeout(function () {\n          delete $$.resizeTimeout;\n          $$.updateAndRedraw({\n            withUpdateXDomain: false,\n            withUpdateOrgXDomain: false,\n            withTransition: false,\n            withTransitionForTransform: false,\n            withLegend: true\n          });\n\n          if ($$.brush) {\n            $$.brush.update();\n          }\n        }, 100);\n      });\n    }\n\n    $$.resizeFunction.add(function () {\n      config.onresized.call($$);\n    });\n\n    $$.resizeIfElementDisplayed = function () {\n      // if element not displayed skip it\n      if ($$.api == null || !$$.api.element.offsetParent) {\n        return;\n      }\n\n      $$.resizeFunction();\n    };\n\n    if (window.attachEvent) {\n      window.attachEvent('onresize', $$.resizeIfElementDisplayed);\n    } else if (window.addEventListener) {\n      window.addEventListener('resize', $$.resizeIfElementDisplayed, false);\n    } else {\n      // fallback to this, if this is a very old browser\n      var wrapper = window.onresize;\n\n      if (!wrapper) {\n        // create a wrapper that will call all charts\n        wrapper = $$.generateResize();\n      } else if (!wrapper.add || !wrapper.remove) {\n        // there is already a handler registered, make sure we call it too\n        wrapper = $$.generateResize();\n        wrapper.add(window.onresize);\n      } // add this graph to the wrapper, we will be removed if the user calls destroy\n\n\n      wrapper.add($$.resizeFunction);\n\n      window.onresize = function () {\n        // if element not displayed skip it\n        if (!$$.api.element.offsetParent) {\n          return;\n        }\n\n        wrapper();\n      };\n    }\n  };\n  /**\n   * Binds handlers to the window focus event.\n   */\n\n\n  ChartInternal.prototype.bindWindowFocus = function () {\n    var _this = this;\n\n    if (this.windowFocusHandler) {\n      // The handler is already set\n      return;\n    }\n\n    this.windowFocusHandler = function () {\n      _this.redraw();\n    };\n\n    window.addEventListener('focus', this.windowFocusHandler);\n  };\n  /**\n   * Unbinds from the window focus event.\n   */\n\n\n  ChartInternal.prototype.unbindWindowFocus = function () {\n    window.removeEventListener('focus', this.windowFocusHandler);\n    delete this.windowFocusHandler;\n  };\n\n  ChartInternal.prototype.generateResize = function () {\n    var resizeFunctions = [];\n\n    function callResizeFunctions() {\n      resizeFunctions.forEach(function (f) {\n        f();\n      });\n    }\n\n    callResizeFunctions.add = function (f) {\n      resizeFunctions.push(f);\n    };\n\n    callResizeFunctions.remove = function (f) {\n      for (var i = 0; i < resizeFunctions.length; i++) {\n        if (resizeFunctions[i] === f) {\n          resizeFunctions.splice(i, 1);\n          break;\n        }\n      }\n    };\n\n    return callResizeFunctions;\n  };\n\n  ChartInternal.prototype.endall = function (transition, callback) {\n    var n = 0;\n    transition.each(function () {\n      ++n;\n    }).on('end', function () {\n      if (! --n) {\n        callback.apply(this, arguments);\n      }\n    });\n  };\n\n  ChartInternal.prototype.generateWait = function () {\n    var $$ = this;\n\n    var transitionsToWait = [],\n        f = function f(callback) {\n      var timer = setInterval(function () {\n        if (!$$.isTabVisible()) {\n          return;\n        }\n\n        var done = 0;\n        transitionsToWait.forEach(function (t) {\n          if (t.empty()) {\n            done += 1;\n            return;\n          }\n\n          try {\n            t.transition();\n          } catch (e) {\n            done += 1;\n          }\n        });\n\n        if (done === transitionsToWait.length) {\n          clearInterval(timer);\n\n          if (callback) {\n            callback();\n          }\n        }\n      }, 50);\n    };\n\n    f.add = function (transition) {\n      transitionsToWait.push(transition);\n    };\n\n    return f;\n  };\n\n  ChartInternal.prototype.parseDate = function (date) {\n    var $$ = this,\n        parsedDate;\n\n    if (date instanceof Date) {\n      parsedDate = date;\n    } else if (typeof date === 'string') {\n      parsedDate = $$.dataTimeParse(date);\n    } else if (_typeof(date) === 'object') {\n      parsedDate = new Date(+date);\n    } else if (typeof date === 'number' && !isNaN(date)) {\n      parsedDate = new Date(+date);\n    }\n\n    if (!parsedDate || isNaN(+parsedDate)) {\n      window.console.error(\"Failed to parse x '\" + date + \"' to Date object\");\n    }\n\n    return parsedDate;\n  };\n\n  ChartInternal.prototype.isTabVisible = function () {\n    return !document.hidden;\n  };\n\n  ChartInternal.prototype.getPathBox = getPathBox;\n  ChartInternal.prototype.CLASS = CLASS;\n  /* jshint ignore:start */\n\n  (function () {\n    if (!('SVGPathSeg' in window)) {\n      // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-InterfaceSVGPathSeg\n      window.SVGPathSeg = function (type, typeAsLetter, owningPathSegList) {\n        this.pathSegType = type;\n        this.pathSegTypeAsLetter = typeAsLetter;\n        this._owningPathSegList = owningPathSegList;\n      };\n\n      window.SVGPathSeg.prototype.classname = 'SVGPathSeg';\n      window.SVGPathSeg.PATHSEG_UNKNOWN = 0;\n      window.SVGPathSeg.PATHSEG_CLOSEPATH = 1;\n      window.SVGPathSeg.PATHSEG_MOVETO_ABS = 2;\n      window.SVGPathSeg.PATHSEG_MOVETO_REL = 3;\n      window.SVGPathSeg.PATHSEG_LINETO_ABS = 4;\n      window.SVGPathSeg.PATHSEG_LINETO_REL = 5;\n      window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS = 6;\n      window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL = 7;\n      window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS = 8;\n      window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL = 9;\n      window.SVGPathSeg.PATHSEG_ARC_ABS = 10;\n      window.SVGPathSeg.PATHSEG_ARC_REL = 11;\n      window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS = 12;\n      window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL = 13;\n      window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS = 14;\n      window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL = 15;\n      window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS = 16;\n      window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL = 17;\n      window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS = 18;\n      window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL = 19; // Notify owning PathSegList on any changes so they can be synchronized back to the path element.\n\n      window.SVGPathSeg.prototype._segmentChanged = function () {\n        if (this._owningPathSegList) this._owningPathSegList.segmentChanged(this);\n      };\n\n      window.SVGPathSegClosePath = function (owningPathSegList) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CLOSEPATH, 'z', owningPathSegList);\n      };\n\n      window.SVGPathSegClosePath.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegClosePath.prototype.toString = function () {\n        return '[object SVGPathSegClosePath]';\n      };\n\n      window.SVGPathSegClosePath.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter;\n      };\n\n      window.SVGPathSegClosePath.prototype.clone = function () {\n        return new window.SVGPathSegClosePath(undefined);\n      };\n\n      window.SVGPathSegMovetoAbs = function (owningPathSegList, x, y) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_MOVETO_ABS, 'M', owningPathSegList);\n        this._x = x;\n        this._y = y;\n      };\n\n      window.SVGPathSegMovetoAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegMovetoAbs.prototype.toString = function () {\n        return '[object SVGPathSegMovetoAbs]';\n      };\n\n      window.SVGPathSegMovetoAbs.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x + ' ' + this._y;\n      };\n\n      window.SVGPathSegMovetoAbs.prototype.clone = function () {\n        return new window.SVGPathSegMovetoAbs(undefined, this._x, this._y);\n      };\n\n      Object.defineProperty(window.SVGPathSegMovetoAbs.prototype, 'x', {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegMovetoAbs.prototype, 'y', {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegMovetoRel = function (owningPathSegList, x, y) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_MOVETO_REL, 'm', owningPathSegList);\n        this._x = x;\n        this._y = y;\n      };\n\n      window.SVGPathSegMovetoRel.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegMovetoRel.prototype.toString = function () {\n        return '[object SVGPathSegMovetoRel]';\n      };\n\n      window.SVGPathSegMovetoRel.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x + ' ' + this._y;\n      };\n\n      window.SVGPathSegMovetoRel.prototype.clone = function () {\n        return new window.SVGPathSegMovetoRel(undefined, this._x, this._y);\n      };\n\n      Object.defineProperty(window.SVGPathSegMovetoRel.prototype, 'x', {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegMovetoRel.prototype, 'y', {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegLinetoAbs = function (owningPathSegList, x, y) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_ABS, 'L', owningPathSegList);\n        this._x = x;\n        this._y = y;\n      };\n\n      window.SVGPathSegLinetoAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegLinetoAbs.prototype.toString = function () {\n        return '[object SVGPathSegLinetoAbs]';\n      };\n\n      window.SVGPathSegLinetoAbs.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x + ' ' + this._y;\n      };\n\n      window.SVGPathSegLinetoAbs.prototype.clone = function () {\n        return new window.SVGPathSegLinetoAbs(undefined, this._x, this._y);\n      };\n\n      Object.defineProperty(window.SVGPathSegLinetoAbs.prototype, 'x', {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegLinetoAbs.prototype, 'y', {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegLinetoRel = function (owningPathSegList, x, y) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_REL, 'l', owningPathSegList);\n        this._x = x;\n        this._y = y;\n      };\n\n      window.SVGPathSegLinetoRel.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegLinetoRel.prototype.toString = function () {\n        return '[object SVGPathSegLinetoRel]';\n      };\n\n      window.SVGPathSegLinetoRel.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x + ' ' + this._y;\n      };\n\n      window.SVGPathSegLinetoRel.prototype.clone = function () {\n        return new window.SVGPathSegLinetoRel(undefined, this._x, this._y);\n      };\n\n      Object.defineProperty(window.SVGPathSegLinetoRel.prototype, 'x', {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegLinetoRel.prototype, 'y', {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegCurvetoCubicAbs = function (owningPathSegList, x, y, x1, y1, x2, y2) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS, 'C', owningPathSegList);\n        this._x = x;\n        this._y = y;\n        this._x1 = x1;\n        this._y1 = y1;\n        this._x2 = x2;\n        this._y2 = y2;\n      };\n\n      window.SVGPathSegCurvetoCubicAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegCurvetoCubicAbs.prototype.toString = function () {\n        return '[object SVGPathSegCurvetoCubicAbs]';\n      };\n\n      window.SVGPathSegCurvetoCubicAbs.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x1 + ' ' + this._y1 + ' ' + this._x2 + ' ' + this._y2 + ' ' + this._x + ' ' + this._y;\n      };\n\n      window.SVGPathSegCurvetoCubicAbs.prototype.clone = function () {\n        return new window.SVGPathSegCurvetoCubicAbs(undefined, this._x, this._y, this._x1, this._y1, this._x2, this._y2);\n      };\n\n      Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, 'x', {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, 'y', {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, 'x1', {\n        get: function get() {\n          return this._x1;\n        },\n        set: function set(x1) {\n          this._x1 = x1;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, 'y1', {\n        get: function get() {\n          return this._y1;\n        },\n        set: function set(y1) {\n          this._y1 = y1;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, 'x2', {\n        get: function get() {\n          return this._x2;\n        },\n        set: function set(x2) {\n          this._x2 = x2;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, 'y2', {\n        get: function get() {\n          return this._y2;\n        },\n        set: function set(y2) {\n          this._y2 = y2;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegCurvetoCubicRel = function (owningPathSegList, x, y, x1, y1, x2, y2) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL, 'c', owningPathSegList);\n        this._x = x;\n        this._y = y;\n        this._x1 = x1;\n        this._y1 = y1;\n        this._x2 = x2;\n        this._y2 = y2;\n      };\n\n      window.SVGPathSegCurvetoCubicRel.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegCurvetoCubicRel.prototype.toString = function () {\n        return '[object SVGPathSegCurvetoCubicRel]';\n      };\n\n      window.SVGPathSegCurvetoCubicRel.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x1 + ' ' + this._y1 + ' ' + this._x2 + ' ' + this._y2 + ' ' + this._x + ' ' + this._y;\n      };\n\n      window.SVGPathSegCurvetoCubicRel.prototype.clone = function () {\n        return new window.SVGPathSegCurvetoCubicRel(undefined, this._x, this._y, this._x1, this._y1, this._x2, this._y2);\n      };\n\n      Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, 'x', {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, 'y', {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, 'x1', {\n        get: function get() {\n          return this._x1;\n        },\n        set: function set(x1) {\n          this._x1 = x1;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, 'y1', {\n        get: function get() {\n          return this._y1;\n        },\n        set: function set(y1) {\n          this._y1 = y1;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, 'x2', {\n        get: function get() {\n          return this._x2;\n        },\n        set: function set(x2) {\n          this._x2 = x2;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, 'y2', {\n        get: function get() {\n          return this._y2;\n        },\n        set: function set(y2) {\n          this._y2 = y2;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegCurvetoQuadraticAbs = function (owningPathSegList, x, y, x1, y1) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS, 'Q', owningPathSegList);\n        this._x = x;\n        this._y = y;\n        this._x1 = x1;\n        this._y1 = y1;\n      };\n\n      window.SVGPathSegCurvetoQuadraticAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegCurvetoQuadraticAbs.prototype.toString = function () {\n        return '[object SVGPathSegCurvetoQuadraticAbs]';\n      };\n\n      window.SVGPathSegCurvetoQuadraticAbs.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x1 + ' ' + this._y1 + ' ' + this._x + ' ' + this._y;\n      };\n\n      window.SVGPathSegCurvetoQuadraticAbs.prototype.clone = function () {\n        return new window.SVGPathSegCurvetoQuadraticAbs(undefined, this._x, this._y, this._x1, this._y1);\n      };\n\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype, 'x', {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype, 'y', {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype, 'x1', {\n        get: function get() {\n          return this._x1;\n        },\n        set: function set(x1) {\n          this._x1 = x1;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype, 'y1', {\n        get: function get() {\n          return this._y1;\n        },\n        set: function set(y1) {\n          this._y1 = y1;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegCurvetoQuadraticRel = function (owningPathSegList, x, y, x1, y1) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL, 'q', owningPathSegList);\n        this._x = x;\n        this._y = y;\n        this._x1 = x1;\n        this._y1 = y1;\n      };\n\n      window.SVGPathSegCurvetoQuadraticRel.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegCurvetoQuadraticRel.prototype.toString = function () {\n        return '[object SVGPathSegCurvetoQuadraticRel]';\n      };\n\n      window.SVGPathSegCurvetoQuadraticRel.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x1 + ' ' + this._y1 + ' ' + this._x + ' ' + this._y;\n      };\n\n      window.SVGPathSegCurvetoQuadraticRel.prototype.clone = function () {\n        return new window.SVGPathSegCurvetoQuadraticRel(undefined, this._x, this._y, this._x1, this._y1);\n      };\n\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype, 'x', {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype, 'y', {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype, 'x1', {\n        get: function get() {\n          return this._x1;\n        },\n        set: function set(x1) {\n          this._x1 = x1;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype, 'y1', {\n        get: function get() {\n          return this._y1;\n        },\n        set: function set(y1) {\n          this._y1 = y1;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegArcAbs = function (owningPathSegList, x, y, r1, r2, angle, largeArcFlag, sweepFlag) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_ARC_ABS, 'A', owningPathSegList);\n        this._x = x;\n        this._y = y;\n        this._r1 = r1;\n        this._r2 = r2;\n        this._angle = angle;\n        this._largeArcFlag = largeArcFlag;\n        this._sweepFlag = sweepFlag;\n      };\n\n      window.SVGPathSegArcAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegArcAbs.prototype.toString = function () {\n        return '[object SVGPathSegArcAbs]';\n      };\n\n      window.SVGPathSegArcAbs.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._r1 + ' ' + this._r2 + ' ' + this._angle + ' ' + (this._largeArcFlag ? '1' : '0') + ' ' + (this._sweepFlag ? '1' : '0') + ' ' + this._x + ' ' + this._y;\n      };\n\n      window.SVGPathSegArcAbs.prototype.clone = function () {\n        return new window.SVGPathSegArcAbs(undefined, this._x, this._y, this._r1, this._r2, this._angle, this._largeArcFlag, this._sweepFlag);\n      };\n\n      Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'x', {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'y', {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'r1', {\n        get: function get() {\n          return this._r1;\n        },\n        set: function set(r1) {\n          this._r1 = r1;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'r2', {\n        get: function get() {\n          return this._r2;\n        },\n        set: function set(r2) {\n          this._r2 = r2;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'angle', {\n        get: function get() {\n          return this._angle;\n        },\n        set: function set(angle) {\n          this._angle = angle;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'largeArcFlag', {\n        get: function get() {\n          return this._largeArcFlag;\n        },\n        set: function set(largeArcFlag) {\n          this._largeArcFlag = largeArcFlag;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'sweepFlag', {\n        get: function get() {\n          return this._sweepFlag;\n        },\n        set: function set(sweepFlag) {\n          this._sweepFlag = sweepFlag;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegArcRel = function (owningPathSegList, x, y, r1, r2, angle, largeArcFlag, sweepFlag) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_ARC_REL, 'a', owningPathSegList);\n        this._x = x;\n        this._y = y;\n        this._r1 = r1;\n        this._r2 = r2;\n        this._angle = angle;\n        this._largeArcFlag = largeArcFlag;\n        this._sweepFlag = sweepFlag;\n      };\n\n      window.SVGPathSegArcRel.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegArcRel.prototype.toString = function () {\n        return '[object SVGPathSegArcRel]';\n      };\n\n      window.SVGPathSegArcRel.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._r1 + ' ' + this._r2 + ' ' + this._angle + ' ' + (this._largeArcFlag ? '1' : '0') + ' ' + (this._sweepFlag ? '1' : '0') + ' ' + this._x + ' ' + this._y;\n      };\n\n      window.SVGPathSegArcRel.prototype.clone = function () {\n        return new window.SVGPathSegArcRel(undefined, this._x, this._y, this._r1, this._r2, this._angle, this._largeArcFlag, this._sweepFlag);\n      };\n\n      Object.defineProperty(window.SVGPathSegArcRel.prototype, 'x', {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcRel.prototype, 'y', {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcRel.prototype, 'r1', {\n        get: function get() {\n          return this._r1;\n        },\n        set: function set(r1) {\n          this._r1 = r1;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcRel.prototype, 'r2', {\n        get: function get() {\n          return this._r2;\n        },\n        set: function set(r2) {\n          this._r2 = r2;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcRel.prototype, 'angle', {\n        get: function get() {\n          return this._angle;\n        },\n        set: function set(angle) {\n          this._angle = angle;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcRel.prototype, 'largeArcFlag', {\n        get: function get() {\n          return this._largeArcFlag;\n        },\n        set: function set(largeArcFlag) {\n          this._largeArcFlag = largeArcFlag;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcRel.prototype, 'sweepFlag', {\n        get: function get() {\n          return this._sweepFlag;\n        },\n        set: function set(sweepFlag) {\n          this._sweepFlag = sweepFlag;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegLinetoHorizontalAbs = function (owningPathSegList, x) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS, 'H', owningPathSegList);\n        this._x = x;\n      };\n\n      window.SVGPathSegLinetoHorizontalAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegLinetoHorizontalAbs.prototype.toString = function () {\n        return '[object SVGPathSegLinetoHorizontalAbs]';\n      };\n\n      window.SVGPathSegLinetoHorizontalAbs.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x;\n      };\n\n      window.SVGPathSegLinetoHorizontalAbs.prototype.clone = function () {\n        return new window.SVGPathSegLinetoHorizontalAbs(undefined, this._x);\n      };\n\n      Object.defineProperty(window.SVGPathSegLinetoHorizontalAbs.prototype, 'x', {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegLinetoHorizontalRel = function (owningPathSegList, x) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL, 'h', owningPathSegList);\n        this._x = x;\n      };\n\n      window.SVGPathSegLinetoHorizontalRel.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegLinetoHorizontalRel.prototype.toString = function () {\n        return '[object SVGPathSegLinetoHorizontalRel]';\n      };\n\n      window.SVGPathSegLinetoHorizontalRel.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x;\n      };\n\n      window.SVGPathSegLinetoHorizontalRel.prototype.clone = function () {\n        return new window.SVGPathSegLinetoHorizontalRel(undefined, this._x);\n      };\n\n      Object.defineProperty(window.SVGPathSegLinetoHorizontalRel.prototype, 'x', {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegLinetoVerticalAbs = function (owningPathSegList, y) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS, 'V', owningPathSegList);\n        this._y = y;\n      };\n\n      window.SVGPathSegLinetoVerticalAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegLinetoVerticalAbs.prototype.toString = function () {\n        return '[object SVGPathSegLinetoVerticalAbs]';\n      };\n\n      window.SVGPathSegLinetoVerticalAbs.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._y;\n      };\n\n      window.SVGPathSegLinetoVerticalAbs.prototype.clone = function () {\n        return new window.SVGPathSegLinetoVerticalAbs(undefined, this._y);\n      };\n\n      Object.defineProperty(window.SVGPathSegLinetoVerticalAbs.prototype, 'y', {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegLinetoVerticalRel = function (owningPathSegList, y) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL, 'v', owningPathSegList);\n        this._y = y;\n      };\n\n      window.SVGPathSegLinetoVerticalRel.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegLinetoVerticalRel.prototype.toString = function () {\n        return '[object SVGPathSegLinetoVerticalRel]';\n      };\n\n      window.SVGPathSegLinetoVerticalRel.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._y;\n      };\n\n      window.SVGPathSegLinetoVerticalRel.prototype.clone = function () {\n        return new window.SVGPathSegLinetoVerticalRel(undefined, this._y);\n      };\n\n      Object.defineProperty(window.SVGPathSegLinetoVerticalRel.prototype, 'y', {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegCurvetoCubicSmoothAbs = function (owningPathSegList, x, y, x2, y2) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS, 'S', owningPathSegList);\n        this._x = x;\n        this._y = y;\n        this._x2 = x2;\n        this._y2 = y2;\n      };\n\n      window.SVGPathSegCurvetoCubicSmoothAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegCurvetoCubicSmoothAbs.prototype.toString = function () {\n        return '[object SVGPathSegCurvetoCubicSmoothAbs]';\n      };\n\n      window.SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x2 + ' ' + this._y2 + ' ' + this._x + ' ' + this._y;\n      };\n\n      window.SVGPathSegCurvetoCubicSmoothAbs.prototype.clone = function () {\n        return new window.SVGPathSegCurvetoCubicSmoothAbs(undefined, this._x, this._y, this._x2, this._y2);\n      };\n\n      Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype, 'x', {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype, 'y', {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype, 'x2', {\n        get: function get() {\n          return this._x2;\n        },\n        set: function set(x2) {\n          this._x2 = x2;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype, 'y2', {\n        get: function get() {\n          return this._y2;\n        },\n        set: function set(y2) {\n          this._y2 = y2;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegCurvetoCubicSmoothRel = function (owningPathSegList, x, y, x2, y2) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL, 's', owningPathSegList);\n        this._x = x;\n        this._y = y;\n        this._x2 = x2;\n        this._y2 = y2;\n      };\n\n      window.SVGPathSegCurvetoCubicSmoothRel.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegCurvetoCubicSmoothRel.prototype.toString = function () {\n        return '[object SVGPathSegCurvetoCubicSmoothRel]';\n      };\n\n      window.SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x2 + ' ' + this._y2 + ' ' + this._x + ' ' + this._y;\n      };\n\n      window.SVGPathSegCurvetoCubicSmoothRel.prototype.clone = function () {\n        return new window.SVGPathSegCurvetoCubicSmoothRel(undefined, this._x, this._y, this._x2, this._y2);\n      };\n\n      Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype, 'x', {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype, 'y', {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype, 'x2', {\n        get: function get() {\n          return this._x2;\n        },\n        set: function set(x2) {\n          this._x2 = x2;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype, 'y2', {\n        get: function get() {\n          return this._y2;\n        },\n        set: function set(y2) {\n          this._y2 = y2;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegCurvetoQuadraticSmoothAbs = function (owningPathSegList, x, y) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS, 'T', owningPathSegList);\n        this._x = x;\n        this._y = y;\n      };\n\n      window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString = function () {\n        return '[object SVGPathSegCurvetoQuadraticSmoothAbs]';\n      };\n\n      window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x + ' ' + this._y;\n      };\n\n      window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone = function () {\n        return new window.SVGPathSegCurvetoQuadraticSmoothAbs(undefined, this._x, this._y);\n      };\n\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype, 'x', {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype, 'y', {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegCurvetoQuadraticSmoothRel = function (owningPathSegList, x, y) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL, 't', owningPathSegList);\n        this._x = x;\n        this._y = y;\n      };\n\n      window.SVGPathSegCurvetoQuadraticSmoothRel.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString = function () {\n        return '[object SVGPathSegCurvetoQuadraticSmoothRel]';\n      };\n\n      window.SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x + ' ' + this._y;\n      };\n\n      window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone = function () {\n        return new window.SVGPathSegCurvetoQuadraticSmoothRel(undefined, this._x, this._y);\n      };\n\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype, 'x', {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype, 'y', {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      }); // Add createSVGPathSeg* functions to window.SVGPathElement.\n      // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-Interfacewindow.SVGPathElement.\n\n      window.SVGPathElement.prototype.createSVGPathSegClosePath = function () {\n        return new window.SVGPathSegClosePath(undefined);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegMovetoAbs = function (x, y) {\n        return new window.SVGPathSegMovetoAbs(undefined, x, y);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegMovetoRel = function (x, y) {\n        return new window.SVGPathSegMovetoRel(undefined, x, y);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegLinetoAbs = function (x, y) {\n        return new window.SVGPathSegLinetoAbs(undefined, x, y);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegLinetoRel = function (x, y) {\n        return new window.SVGPathSegLinetoRel(undefined, x, y);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs = function (x, y, x1, y1, x2, y2) {\n        return new window.SVGPathSegCurvetoCubicAbs(undefined, x, y, x1, y1, x2, y2);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel = function (x, y, x1, y1, x2, y2) {\n        return new window.SVGPathSegCurvetoCubicRel(undefined, x, y, x1, y1, x2, y2);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs = function (x, y, x1, y1) {\n        return new window.SVGPathSegCurvetoQuadraticAbs(undefined, x, y, x1, y1);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel = function (x, y, x1, y1) {\n        return new window.SVGPathSegCurvetoQuadraticRel(undefined, x, y, x1, y1);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegArcAbs = function (x, y, r1, r2, angle, largeArcFlag, sweepFlag) {\n        return new window.SVGPathSegArcAbs(undefined, x, y, r1, r2, angle, largeArcFlag, sweepFlag);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegArcRel = function (x, y, r1, r2, angle, largeArcFlag, sweepFlag) {\n        return new window.SVGPathSegArcRel(undefined, x, y, r1, r2, angle, largeArcFlag, sweepFlag);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs = function (x) {\n        return new window.SVGPathSegLinetoHorizontalAbs(undefined, x);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel = function (x) {\n        return new window.SVGPathSegLinetoHorizontalRel(undefined, x);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs = function (y) {\n        return new window.SVGPathSegLinetoVerticalAbs(undefined, y);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel = function (y) {\n        return new window.SVGPathSegLinetoVerticalRel(undefined, y);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs = function (x, y, x2, y2) {\n        return new window.SVGPathSegCurvetoCubicSmoothAbs(undefined, x, y, x2, y2);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel = function (x, y, x2, y2) {\n        return new window.SVGPathSegCurvetoCubicSmoothRel(undefined, x, y, x2, y2);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs = function (x, y) {\n        return new window.SVGPathSegCurvetoQuadraticSmoothAbs(undefined, x, y);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel = function (x, y) {\n        return new window.SVGPathSegCurvetoQuadraticSmoothRel(undefined, x, y);\n      };\n\n      if (!('getPathSegAtLength' in window.SVGPathElement.prototype)) {\n        // Add getPathSegAtLength to SVGPathElement.\n        // Spec: https://www.w3.org/TR/SVG11/single-page.html#paths-__svg__SVGPathElement__getPathSegAtLength\n        // This polyfill requires SVGPathElement.getTotalLength to implement the distance-along-a-path algorithm.\n        window.SVGPathElement.prototype.getPathSegAtLength = function (distance) {\n          if (distance === undefined || !isFinite(distance)) throw 'Invalid arguments.';\n          var measurementElement = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n          measurementElement.setAttribute('d', this.getAttribute('d'));\n          var lastPathSegment = measurementElement.pathSegList.numberOfItems - 1; // If the path is empty, return 0.\n\n          if (lastPathSegment <= 0) return 0;\n\n          do {\n            measurementElement.pathSegList.removeItem(lastPathSegment);\n            if (distance > measurementElement.getTotalLength()) break;\n            lastPathSegment--;\n          } while (lastPathSegment > 0);\n\n          return lastPathSegment;\n        };\n      }\n    }\n\n    if (!('SVGPathSegList' in window)) {\n      // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-InterfaceSVGPathSegList\n      window.SVGPathSegList = function (pathElement) {\n        this._pathElement = pathElement;\n        this._list = this._parsePath(this._pathElement.getAttribute('d')); // Use a MutationObserver to catch changes to the path's \"d\" attribute.\n\n        this._mutationObserverConfig = {\n          attributes: true,\n          attributeFilter: ['d']\n        };\n        this._pathElementMutationObserver = new MutationObserver(this._updateListFromPathMutations.bind(this));\n\n        this._pathElementMutationObserver.observe(this._pathElement, this._mutationObserverConfig);\n      };\n\n      window.SVGPathSegList.prototype.classname = 'SVGPathSegList';\n      Object.defineProperty(window.SVGPathSegList.prototype, 'numberOfItems', {\n        get: function get() {\n          this._checkPathSynchronizedToList();\n\n          return this._list.length;\n        },\n        enumerable: true\n      }); // Add the pathSegList accessors to window.SVGPathElement.\n      // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-InterfaceSVGAnimatedPathData\n\n      Object.defineProperty(window.SVGPathElement.prototype, 'pathSegList', {\n        get: function get() {\n          if (!this._pathSegList) this._pathSegList = new window.SVGPathSegList(this);\n          return this._pathSegList;\n        },\n        enumerable: true\n      }); // FIXME: The following are not implemented and simply return window.SVGPathElement.pathSegList.\n\n      Object.defineProperty(window.SVGPathElement.prototype, 'normalizedPathSegList', {\n        get: function get() {\n          return this.pathSegList;\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathElement.prototype, 'animatedPathSegList', {\n        get: function get() {\n          return this.pathSegList;\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathElement.prototype, 'animatedNormalizedPathSegList', {\n        get: function get() {\n          return this.pathSegList;\n        },\n        enumerable: true\n      }); // Process any pending mutations to the path element and update the list as needed.\n      // This should be the first call of all public functions and is needed because\n      // MutationObservers are not synchronous so we can have pending asynchronous mutations.\n\n      window.SVGPathSegList.prototype._checkPathSynchronizedToList = function () {\n        this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords());\n      };\n\n      window.SVGPathSegList.prototype._updateListFromPathMutations = function (mutationRecords) {\n        if (!this._pathElement) return;\n        var hasPathMutations = false;\n        mutationRecords.forEach(function (record) {\n          if (record.attributeName == 'd') hasPathMutations = true;\n        });\n        if (hasPathMutations) this._list = this._parsePath(this._pathElement.getAttribute('d'));\n      }; // Serialize the list and update the path's 'd' attribute.\n\n\n      window.SVGPathSegList.prototype._writeListToPath = function () {\n        this._pathElementMutationObserver.disconnect();\n\n        this._pathElement.setAttribute('d', window.SVGPathSegList._pathSegArrayAsString(this._list));\n\n        this._pathElementMutationObserver.observe(this._pathElement, this._mutationObserverConfig);\n      }; // When a path segment changes the list needs to be synchronized back to the path element.\n\n\n      window.SVGPathSegList.prototype.segmentChanged = function (pathSeg) {\n        this._writeListToPath();\n      };\n\n      window.SVGPathSegList.prototype.clear = function () {\n        this._checkPathSynchronizedToList();\n\n        this._list.forEach(function (pathSeg) {\n          pathSeg._owningPathSegList = null;\n        });\n\n        this._list = [];\n\n        this._writeListToPath();\n      };\n\n      window.SVGPathSegList.prototype.initialize = function (newItem) {\n        this._checkPathSynchronizedToList();\n\n        this._list = [newItem];\n        newItem._owningPathSegList = this;\n\n        this._writeListToPath();\n\n        return newItem;\n      };\n\n      window.SVGPathSegList.prototype._checkValidIndex = function (index) {\n        if (isNaN(index) || index < 0 || index >= this.numberOfItems) throw 'INDEX_SIZE_ERR';\n      };\n\n      window.SVGPathSegList.prototype.getItem = function (index) {\n        this._checkPathSynchronizedToList();\n\n        this._checkValidIndex(index);\n\n        return this._list[index];\n      };\n\n      window.SVGPathSegList.prototype.insertItemBefore = function (newItem, index) {\n        this._checkPathSynchronizedToList(); // Spec: If the index is greater than or equal to numberOfItems, then the new item is appended to the end of the list.\n\n\n        if (index > this.numberOfItems) index = this.numberOfItems;\n\n        if (newItem._owningPathSegList) {\n          // SVG2 spec says to make a copy.\n          newItem = newItem.clone();\n        }\n\n        this._list.splice(index, 0, newItem);\n\n        newItem._owningPathSegList = this;\n\n        this._writeListToPath();\n\n        return newItem;\n      };\n\n      window.SVGPathSegList.prototype.replaceItem = function (newItem, index) {\n        this._checkPathSynchronizedToList();\n\n        if (newItem._owningPathSegList) {\n          // SVG2 spec says to make a copy.\n          newItem = newItem.clone();\n        }\n\n        this._checkValidIndex(index);\n\n        this._list[index] = newItem;\n        newItem._owningPathSegList = this;\n\n        this._writeListToPath();\n\n        return newItem;\n      };\n\n      window.SVGPathSegList.prototype.removeItem = function (index) {\n        this._checkPathSynchronizedToList();\n\n        this._checkValidIndex(index);\n\n        var item = this._list[index];\n\n        this._list.splice(index, 1);\n\n        this._writeListToPath();\n\n        return item;\n      };\n\n      window.SVGPathSegList.prototype.appendItem = function (newItem) {\n        this._checkPathSynchronizedToList();\n\n        if (newItem._owningPathSegList) {\n          // SVG2 spec says to make a copy.\n          newItem = newItem.clone();\n        }\n\n        this._list.push(newItem);\n\n        newItem._owningPathSegList = this; // TODO: Optimize this to just append to the existing attribute.\n\n        this._writeListToPath();\n\n        return newItem;\n      };\n\n      window.SVGPathSegList._pathSegArrayAsString = function (pathSegArray) {\n        var string = '';\n        var first = true;\n        pathSegArray.forEach(function (pathSeg) {\n          if (first) {\n            first = false;\n            string += pathSeg._asPathString();\n          } else {\n            string += ' ' + pathSeg._asPathString();\n          }\n        });\n        return string;\n      }; // This closely follows SVGPathParser::parsePath from Source/core/svg/SVGPathParser.cpp.\n\n\n      window.SVGPathSegList.prototype._parsePath = function (string) {\n        if (!string || string.length == 0) return [];\n        var owningPathSegList = this;\n\n        var Builder = function Builder() {\n          this.pathSegList = [];\n        };\n\n        Builder.prototype.appendSegment = function (pathSeg) {\n          this.pathSegList.push(pathSeg);\n        };\n\n        var Source = function Source(string) {\n          this._string = string;\n          this._currentIndex = 0;\n          this._endIndex = this._string.length;\n          this._previousCommand = window.SVGPathSeg.PATHSEG_UNKNOWN;\n\n          this._skipOptionalSpaces();\n        };\n\n        Source.prototype._isCurrentSpace = function () {\n          var character = this._string[this._currentIndex];\n          return character <= ' ' && (character == ' ' || character == '\\n' || character == '\\t' || character == '\\r' || character == '\\f');\n        };\n\n        Source.prototype._skipOptionalSpaces = function () {\n          while (this._currentIndex < this._endIndex && this._isCurrentSpace()) {\n            this._currentIndex++;\n          }\n\n          return this._currentIndex < this._endIndex;\n        };\n\n        Source.prototype._skipOptionalSpacesOrDelimiter = function () {\n          if (this._currentIndex < this._endIndex && !this._isCurrentSpace() && this._string.charAt(this._currentIndex) != ',') return false;\n\n          if (this._skipOptionalSpaces()) {\n            if (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) == ',') {\n              this._currentIndex++;\n\n              this._skipOptionalSpaces();\n            }\n          }\n\n          return this._currentIndex < this._endIndex;\n        };\n\n        Source.prototype.hasMoreData = function () {\n          return this._currentIndex < this._endIndex;\n        };\n\n        Source.prototype.peekSegmentType = function () {\n          var lookahead = this._string[this._currentIndex];\n          return this._pathSegTypeFromChar(lookahead);\n        };\n\n        Source.prototype._pathSegTypeFromChar = function (lookahead) {\n          switch (lookahead) {\n            case 'Z':\n            case 'z':\n              return window.SVGPathSeg.PATHSEG_CLOSEPATH;\n\n            case 'M':\n              return window.SVGPathSeg.PATHSEG_MOVETO_ABS;\n\n            case 'm':\n              return window.SVGPathSeg.PATHSEG_MOVETO_REL;\n\n            case 'L':\n              return window.SVGPathSeg.PATHSEG_LINETO_ABS;\n\n            case 'l':\n              return window.SVGPathSeg.PATHSEG_LINETO_REL;\n\n            case 'C':\n              return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS;\n\n            case 'c':\n              return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL;\n\n            case 'Q':\n              return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS;\n\n            case 'q':\n              return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL;\n\n            case 'A':\n              return window.SVGPathSeg.PATHSEG_ARC_ABS;\n\n            case 'a':\n              return window.SVGPathSeg.PATHSEG_ARC_REL;\n\n            case 'H':\n              return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS;\n\n            case 'h':\n              return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL;\n\n            case 'V':\n              return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS;\n\n            case 'v':\n              return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL;\n\n            case 'S':\n              return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS;\n\n            case 's':\n              return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL;\n\n            case 'T':\n              return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS;\n\n            case 't':\n              return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL;\n\n            default:\n              return window.SVGPathSeg.PATHSEG_UNKNOWN;\n          }\n        };\n\n        Source.prototype._nextCommandHelper = function (lookahead, previousCommand) {\n          // Check for remaining coordinates in the current command.\n          if ((lookahead == '+' || lookahead == '-' || lookahead == '.' || lookahead >= '0' && lookahead <= '9') && previousCommand != window.SVGPathSeg.PATHSEG_CLOSEPATH) {\n            if (previousCommand == window.SVGPathSeg.PATHSEG_MOVETO_ABS) return window.SVGPathSeg.PATHSEG_LINETO_ABS;\n            if (previousCommand == window.SVGPathSeg.PATHSEG_MOVETO_REL) return window.SVGPathSeg.PATHSEG_LINETO_REL;\n            return previousCommand;\n          }\n\n          return window.SVGPathSeg.PATHSEG_UNKNOWN;\n        };\n\n        Source.prototype.initialCommandIsMoveTo = function () {\n          // If the path is empty it is still valid, so return true.\n          if (!this.hasMoreData()) return true;\n          var command = this.peekSegmentType(); // Path must start with moveTo.\n\n          return command == window.SVGPathSeg.PATHSEG_MOVETO_ABS || command == window.SVGPathSeg.PATHSEG_MOVETO_REL;\n        }; // Parse a number from an SVG path. This very closely follows genericParseNumber(...) from Source/core/svg/SVGParserUtilities.cpp.\n        // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-PathDataBNF\n\n\n        Source.prototype._parseNumber = function () {\n          var exponent = 0;\n          var integer = 0;\n          var frac = 1;\n          var decimal = 0;\n          var sign = 1;\n          var expsign = 1;\n          var startIndex = this._currentIndex;\n\n          this._skipOptionalSpaces(); // Read the sign.\n\n\n          if (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) == '+') this._currentIndex++;else if (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) == '-') {\n            this._currentIndex++;\n            sign = -1;\n          }\n          if (this._currentIndex == this._endIndex || (this._string.charAt(this._currentIndex) < '0' || this._string.charAt(this._currentIndex) > '9') && this._string.charAt(this._currentIndex) != '.') // The first character of a number must be one of [0-9+-.].\n            return undefined; // Read the integer part, build right-to-left.\n\n          var startIntPartIndex = this._currentIndex;\n\n          while (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) >= '0' && this._string.charAt(this._currentIndex) <= '9') {\n            this._currentIndex++;\n          } // Advance to first non-digit.\n\n\n          if (this._currentIndex != startIntPartIndex) {\n            var scanIntPartIndex = this._currentIndex - 1;\n            var multiplier = 1;\n\n            while (scanIntPartIndex >= startIntPartIndex) {\n              integer += multiplier * (this._string.charAt(scanIntPartIndex--) - '0');\n              multiplier *= 10;\n            }\n          } // Read the decimals.\n\n\n          if (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) == '.') {\n            this._currentIndex++; // There must be a least one digit following the .\n\n            if (this._currentIndex >= this._endIndex || this._string.charAt(this._currentIndex) < '0' || this._string.charAt(this._currentIndex) > '9') return undefined;\n\n            while (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) >= '0' && this._string.charAt(this._currentIndex) <= '9') {\n              frac *= 10;\n              decimal += (this._string.charAt(this._currentIndex) - '0') / frac;\n              this._currentIndex += 1;\n            }\n          } // Read the exponent part.\n\n\n          if (this._currentIndex != startIndex && this._currentIndex + 1 < this._endIndex && (this._string.charAt(this._currentIndex) == 'e' || this._string.charAt(this._currentIndex) == 'E') && this._string.charAt(this._currentIndex + 1) != 'x' && this._string.charAt(this._currentIndex + 1) != 'm') {\n            this._currentIndex++; // Read the sign of the exponent.\n\n            if (this._string.charAt(this._currentIndex) == '+') {\n              this._currentIndex++;\n            } else if (this._string.charAt(this._currentIndex) == '-') {\n              this._currentIndex++;\n              expsign = -1;\n            } // There must be an exponent.\n\n\n            if (this._currentIndex >= this._endIndex || this._string.charAt(this._currentIndex) < '0' || this._string.charAt(this._currentIndex) > '9') return undefined;\n\n            while (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) >= '0' && this._string.charAt(this._currentIndex) <= '9') {\n              exponent *= 10;\n              exponent += this._string.charAt(this._currentIndex) - '0';\n              this._currentIndex++;\n            }\n          }\n\n          var number = integer + decimal;\n          number *= sign;\n          if (exponent) number *= Math.pow(10, expsign * exponent);\n          if (startIndex == this._currentIndex) return undefined;\n\n          this._skipOptionalSpacesOrDelimiter();\n\n          return number;\n        };\n\n        Source.prototype._parseArcFlag = function () {\n          if (this._currentIndex >= this._endIndex) return undefined;\n          var flag = false;\n\n          var flagChar = this._string.charAt(this._currentIndex++);\n\n          if (flagChar == '0') flag = false;else if (flagChar == '1') flag = true;else return undefined;\n\n          this._skipOptionalSpacesOrDelimiter();\n\n          return flag;\n        };\n\n        Source.prototype.parseSegment = function () {\n          var lookahead = this._string[this._currentIndex];\n\n          var command = this._pathSegTypeFromChar(lookahead);\n\n          if (command == window.SVGPathSeg.PATHSEG_UNKNOWN) {\n            // Possibly an implicit command. Not allowed if this is the first command.\n            if (this._previousCommand == window.SVGPathSeg.PATHSEG_UNKNOWN) return null;\n            command = this._nextCommandHelper(lookahead, this._previousCommand);\n            if (command == window.SVGPathSeg.PATHSEG_UNKNOWN) return null;\n          } else {\n            this._currentIndex++;\n          }\n\n          this._previousCommand = command;\n\n          switch (command) {\n            case window.SVGPathSeg.PATHSEG_MOVETO_REL:\n              return new window.SVGPathSegMovetoRel(owningPathSegList, this._parseNumber(), this._parseNumber());\n\n            case window.SVGPathSeg.PATHSEG_MOVETO_ABS:\n              return new window.SVGPathSegMovetoAbs(owningPathSegList, this._parseNumber(), this._parseNumber());\n\n            case window.SVGPathSeg.PATHSEG_LINETO_REL:\n              return new window.SVGPathSegLinetoRel(owningPathSegList, this._parseNumber(), this._parseNumber());\n\n            case window.SVGPathSeg.PATHSEG_LINETO_ABS:\n              return new window.SVGPathSegLinetoAbs(owningPathSegList, this._parseNumber(), this._parseNumber());\n\n            case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:\n              return new window.SVGPathSegLinetoHorizontalRel(owningPathSegList, this._parseNumber());\n\n            case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:\n              return new window.SVGPathSegLinetoHorizontalAbs(owningPathSegList, this._parseNumber());\n\n            case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:\n              return new window.SVGPathSegLinetoVerticalRel(owningPathSegList, this._parseNumber());\n\n            case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:\n              return new window.SVGPathSegLinetoVerticalAbs(owningPathSegList, this._parseNumber());\n\n            case window.SVGPathSeg.PATHSEG_CLOSEPATH:\n              this._skipOptionalSpaces();\n\n              return new window.SVGPathSegClosePath(owningPathSegList);\n\n            case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:\n              var points = {\n                x1: this._parseNumber(),\n                y1: this._parseNumber(),\n                x2: this._parseNumber(),\n                y2: this._parseNumber(),\n                x: this._parseNumber(),\n                y: this._parseNumber()\n              };\n              return new window.SVGPathSegCurvetoCubicRel(owningPathSegList, points.x, points.y, points.x1, points.y1, points.x2, points.y2);\n\n            case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:\n              var points = {\n                x1: this._parseNumber(),\n                y1: this._parseNumber(),\n                x2: this._parseNumber(),\n                y2: this._parseNumber(),\n                x: this._parseNumber(),\n                y: this._parseNumber()\n              };\n              return new window.SVGPathSegCurvetoCubicAbs(owningPathSegList, points.x, points.y, points.x1, points.y1, points.x2, points.y2);\n\n            case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:\n              var points = {\n                x2: this._parseNumber(),\n                y2: this._parseNumber(),\n                x: this._parseNumber(),\n                y: this._parseNumber()\n              };\n              return new window.SVGPathSegCurvetoCubicSmoothRel(owningPathSegList, points.x, points.y, points.x2, points.y2);\n\n            case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:\n              var points = {\n                x2: this._parseNumber(),\n                y2: this._parseNumber(),\n                x: this._parseNumber(),\n                y: this._parseNumber()\n              };\n              return new window.SVGPathSegCurvetoCubicSmoothAbs(owningPathSegList, points.x, points.y, points.x2, points.y2);\n\n            case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:\n              var points = {\n                x1: this._parseNumber(),\n                y1: this._parseNumber(),\n                x: this._parseNumber(),\n                y: this._parseNumber()\n              };\n              return new window.SVGPathSegCurvetoQuadraticRel(owningPathSegList, points.x, points.y, points.x1, points.y1);\n\n            case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:\n              var points = {\n                x1: this._parseNumber(),\n                y1: this._parseNumber(),\n                x: this._parseNumber(),\n                y: this._parseNumber()\n              };\n              return new window.SVGPathSegCurvetoQuadraticAbs(owningPathSegList, points.x, points.y, points.x1, points.y1);\n\n            case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:\n              return new window.SVGPathSegCurvetoQuadraticSmoothRel(owningPathSegList, this._parseNumber(), this._parseNumber());\n\n            case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:\n              return new window.SVGPathSegCurvetoQuadraticSmoothAbs(owningPathSegList, this._parseNumber(), this._parseNumber());\n\n            case window.SVGPathSeg.PATHSEG_ARC_REL:\n              var points = {\n                x1: this._parseNumber(),\n                y1: this._parseNumber(),\n                arcAngle: this._parseNumber(),\n                arcLarge: this._parseArcFlag(),\n                arcSweep: this._parseArcFlag(),\n                x: this._parseNumber(),\n                y: this._parseNumber()\n              };\n              return new window.SVGPathSegArcRel(owningPathSegList, points.x, points.y, points.x1, points.y1, points.arcAngle, points.arcLarge, points.arcSweep);\n\n            case window.SVGPathSeg.PATHSEG_ARC_ABS:\n              var points = {\n                x1: this._parseNumber(),\n                y1: this._parseNumber(),\n                arcAngle: this._parseNumber(),\n                arcLarge: this._parseArcFlag(),\n                arcSweep: this._parseArcFlag(),\n                x: this._parseNumber(),\n                y: this._parseNumber()\n              };\n              return new window.SVGPathSegArcAbs(owningPathSegList, points.x, points.y, points.x1, points.y1, points.arcAngle, points.arcLarge, points.arcSweep);\n\n            default:\n              throw 'Unknown path seg type.';\n          }\n        };\n\n        var builder = new Builder();\n        var source = new Source(string);\n        if (!source.initialCommandIsMoveTo()) return [];\n\n        while (source.hasMoreData()) {\n          var pathSeg = source.parseSegment();\n          if (!pathSeg) return [];\n          builder.appendSegment(pathSeg);\n        }\n\n        return builder.pathSegList;\n      };\n    }\n  })(); // String.padEnd polyfill for IE11\n  //\n  // https://github.com/uxitten/polyfill/blob/master/string.polyfill.js\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/padEnd\n\n\n  if (!String.prototype.padEnd) {\n    String.prototype.padEnd = function padEnd(targetLength, padString) {\n      targetLength = targetLength >> 0; //floor if number or convert non-number to 0;\n\n      padString = String(typeof padString !== 'undefined' ? padString : ' ');\n\n      if (this.length > targetLength) {\n        return String(this);\n      } else {\n        targetLength = targetLength - this.length;\n\n        if (targetLength > padString.length) {\n          padString += padString.repeat(targetLength / padString.length); //append to original to ensure we are longer than needed\n        }\n\n        return String(this) + padString.slice(0, targetLength);\n      }\n    };\n  } // Object.assign polyfill for IE11\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#Polyfill\n\n\n  if (typeof Object.assign !== 'function') {\n    // Must be writable: true, enumerable: false, configurable: true\n    Object.defineProperty(Object, 'assign', {\n      value: function assign(target, varArgs) {\n        if (target === null || target === undefined) {\n          throw new TypeError('Cannot convert undefined or null to object');\n        }\n\n        var to = Object(target);\n\n        for (var index = 1; index < arguments.length; index++) {\n          var nextSource = arguments[index];\n\n          if (nextSource !== null && nextSource !== undefined) {\n            for (var nextKey in nextSource) {\n              // Avoid bugs when hasOwnProperty is shadowed\n              if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n                to[nextKey] = nextSource[nextKey];\n              }\n            }\n          }\n        }\n\n        return to;\n      },\n      writable: true,\n      configurable: true\n    });\n  }\n  /* jshint ignore:end */\n\n\n  Chart.prototype.axis = function () {};\n\n  Chart.prototype.axis.labels = function (labels) {\n    var $$ = this.internal;\n\n    if (arguments.length) {\n      Object.keys(labels).forEach(function (axisId) {\n        $$.axis.setLabelText(axisId, labels[axisId]);\n      });\n      $$.axis.updateLabels();\n    } // TODO: return some values?\n\n  };\n\n  Chart.prototype.axis.max = function (max) {\n    var $$ = this.internal,\n        config = $$.config;\n\n    if (arguments.length) {\n      if (_typeof(max) === 'object') {\n        if (isValue(max.x)) {\n          config.axis_x_max = max.x;\n        }\n\n        if (isValue(max.y)) {\n          config.axis_y_max = max.y;\n        }\n\n        if (isValue(max.y2)) {\n          config.axis_y2_max = max.y2;\n        }\n      } else {\n        config.axis_y_max = config.axis_y2_max = max;\n      }\n\n      $$.redraw({\n        withUpdateOrgXDomain: true,\n        withUpdateXDomain: true\n      });\n    } else {\n      return {\n        x: config.axis_x_max,\n        y: config.axis_y_max,\n        y2: config.axis_y2_max\n      };\n    }\n  };\n\n  Chart.prototype.axis.min = function (min) {\n    var $$ = this.internal,\n        config = $$.config;\n\n    if (arguments.length) {\n      if (_typeof(min) === 'object') {\n        if (isValue(min.x)) {\n          config.axis_x_min = min.x;\n        }\n\n        if (isValue(min.y)) {\n          config.axis_y_min = min.y;\n        }\n\n        if (isValue(min.y2)) {\n          config.axis_y2_min = min.y2;\n        }\n      } else {\n        config.axis_y_min = config.axis_y2_min = min;\n      }\n\n      $$.redraw({\n        withUpdateOrgXDomain: true,\n        withUpdateXDomain: true\n      });\n    } else {\n      return {\n        x: config.axis_x_min,\n        y: config.axis_y_min,\n        y2: config.axis_y2_min\n      };\n    }\n  };\n\n  Chart.prototype.axis.range = function (range) {\n    if (arguments.length) {\n      if (isDefined(range.max)) {\n        this.axis.max(range.max);\n      }\n\n      if (isDefined(range.min)) {\n        this.axis.min(range.min);\n      }\n    } else {\n      return {\n        max: this.axis.max(),\n        min: this.axis.min()\n      };\n    }\n  };\n\n  Chart.prototype.axis.types = function (types) {\n    var $$ = this.internal;\n\n    if (types === undefined) {\n      return {\n        y: $$.config.axis_y_type,\n        y2: $$.config.axis_y2_type\n      };\n    } else {\n      if (isDefined(types.y)) {\n        $$.config.axis_y_type = types.y;\n      }\n\n      if (isDefined(types.y2)) {\n        $$.config.axis_y2_type = types.y2;\n      }\n\n      $$.updateScales();\n      $$.redraw();\n    }\n  };\n\n  Chart.prototype.category = function (i, category) {\n    var $$ = this.internal,\n        config = $$.config;\n\n    if (arguments.length > 1) {\n      config.axis_x_categories[i] = category;\n      $$.redraw();\n    }\n\n    return config.axis_x_categories[i];\n  };\n\n  Chart.prototype.categories = function (categories) {\n    var $$ = this.internal,\n        config = $$.config;\n\n    if (!arguments.length) {\n      return config.axis_x_categories;\n    }\n\n    config.axis_x_categories = categories;\n    $$.redraw();\n    return config.axis_x_categories;\n  };\n\n  Chart.prototype.resize = function (size) {\n    var $$ = this.internal,\n        config = $$.config;\n    config.size_width = size ? size.width : null;\n    config.size_height = size ? size.height : null;\n    this.flush();\n  };\n\n  Chart.prototype.flush = function () {\n    var $$ = this.internal;\n    $$.updateAndRedraw({\n      withLegend: true,\n      withTransition: false,\n      withTransitionForTransform: false\n    });\n  };\n\n  Chart.prototype.destroy = function () {\n    var $$ = this.internal;\n    window.clearInterval($$.intervalForObserveInserted);\n\n    if ($$.resizeTimeout !== undefined) {\n      window.clearTimeout($$.resizeTimeout);\n    }\n\n    if (window.detachEvent) {\n      window.detachEvent('onresize', $$.resizeIfElementDisplayed);\n    } else if (window.removeEventListener) {\n      window.removeEventListener('resize', $$.resizeIfElementDisplayed);\n    } else {\n      var wrapper = window.onresize; // check if no one else removed our wrapper and remove our resizeFunction from it\n\n      if (wrapper && wrapper.add && wrapper.remove) {\n        wrapper.remove($$.resizeFunction);\n      }\n    } // Removes the inner resize functions\n\n\n    $$.resizeFunction.remove(); // Unbinds from the window focus event\n\n    $$.unbindWindowFocus();\n    $$.selectChart.classed('c3', false).html(''); // MEMO: this is needed because the reference of some elements will not be released, then memory leak will happen.\n\n    Object.keys($$).forEach(function (key) {\n      $$[key] = null;\n    });\n    return null;\n  };\n\n  Chart.prototype.color = function (id) {\n    var $$ = this.internal;\n    return $$.color(id); // more patterns\n  };\n\n  Chart.prototype.data = function (targetIds) {\n    var targets = this.internal.data.targets;\n    return typeof targetIds === 'undefined' ? targets : targets.filter(function (t) {\n      return [].concat(targetIds).indexOf(t.id) >= 0;\n    });\n  };\n\n  Chart.prototype.data.shown = function (targetIds) {\n    return this.internal.filterTargetsToShow(this.data(targetIds));\n  };\n  /**\n   * Get values of the data loaded in the chart.\n   *\n   * @param {String|Array} targetId This API returns the value of specified target.\n   * @param flat\n   * @return {Array} Data values\n   */\n\n\n  Chart.prototype.data.values = function (targetId) {\n    var flat = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    var values = null;\n\n    if (targetId) {\n      var targets = this.data(targetId);\n\n      if (targets && isArray(targets)) {\n        values = targets.reduce(function (ret, v) {\n          var dataValue = v.values.map(function (d) {\n            return d.value;\n          });\n\n          if (flat) {\n            ret = ret.concat(dataValue);\n          } else {\n            ret.push(dataValue);\n          }\n\n          return ret;\n        }, []);\n      }\n    }\n\n    return values;\n  };\n\n  Chart.prototype.data.names = function (names) {\n    this.internal.clearLegendItemTextBoxCache();\n    return this.internal.updateDataAttributes('names', names);\n  };\n\n  Chart.prototype.data.colors = function (colors) {\n    return this.internal.updateDataAttributes('colors', colors);\n  };\n\n  Chart.prototype.data.axes = function (axes) {\n    return this.internal.updateDataAttributes('axes', axes);\n  };\n\n  Chart.prototype.data.stackNormalized = function (normalized) {\n    if (normalized === undefined) {\n      return this.internal.isStackNormalized();\n    }\n\n    this.internal.config.data_stack_normalize = !!normalized;\n    this.internal.redraw();\n  };\n\n  Chart.prototype.donut = function () {};\n\n  Chart.prototype.donut.padAngle = function (padAngle) {\n    if (padAngle === undefined) {\n      return this.internal.config.donut_padAngle;\n    }\n\n    this.internal.config.donut_padAngle = padAngle;\n    this.flush();\n  };\n\n  Chart.prototype.flow = function (args) {\n    var $$ = this.internal,\n        targets,\n        data,\n        notfoundIds = [],\n        orgDataCount = $$.getMaxDataCount(),\n        dataCount,\n        domain,\n        baseTarget,\n        baseValue,\n        length = 0,\n        tail = 0,\n        diff,\n        to;\n\n    if (args.json) {\n      data = $$.convertJsonToData(args.json, args.keys);\n    } else if (args.rows) {\n      data = $$.convertRowsToData(args.rows);\n    } else if (args.columns) {\n      data = $$.convertColumnsToData(args.columns);\n    } else {\n      return;\n    }\n\n    targets = $$.convertDataToTargets(data, true); // Update/Add data\n\n    $$.data.targets.forEach(function (t) {\n      var found = false,\n          i,\n          j;\n\n      for (i = 0; i < targets.length; i++) {\n        if (t.id === targets[i].id) {\n          found = true;\n\n          if (t.values[t.values.length - 1]) {\n            tail = t.values[t.values.length - 1].index + 1;\n          }\n\n          length = targets[i].values.length;\n\n          for (j = 0; j < length; j++) {\n            targets[i].values[j].index = tail + j;\n\n            if (!$$.isTimeSeries()) {\n              targets[i].values[j].x = tail + j;\n            }\n          }\n\n          t.values = t.values.concat(targets[i].values);\n          targets.splice(i, 1);\n          break;\n        }\n      }\n\n      if (!found) {\n        notfoundIds.push(t.id);\n      }\n    }); // Append null for not found targets\n\n    $$.data.targets.forEach(function (t) {\n      var i, j;\n\n      for (i = 0; i < notfoundIds.length; i++) {\n        if (t.id === notfoundIds[i]) {\n          tail = t.values[t.values.length - 1].index + 1;\n\n          for (j = 0; j < length; j++) {\n            t.values.push({\n              id: t.id,\n              index: tail + j,\n              x: $$.isTimeSeries() ? $$.getOtherTargetX(tail + j) : tail + j,\n              value: null\n            });\n          }\n        }\n      }\n    }); // Generate null values for new target\n\n    if ($$.data.targets.length) {\n      targets.forEach(function (t) {\n        var i,\n            missing = [];\n\n        for (i = $$.data.targets[0].values[0].index; i < tail; i++) {\n          missing.push({\n            id: t.id,\n            index: i,\n            x: $$.isTimeSeries() ? $$.getOtherTargetX(i) : i,\n            value: null\n          });\n        }\n\n        t.values.forEach(function (v) {\n          v.index += tail;\n\n          if (!$$.isTimeSeries()) {\n            v.x += tail;\n          }\n        });\n        t.values = missing.concat(t.values);\n      });\n    }\n\n    $$.data.targets = $$.data.targets.concat(targets); // add remained\n    // check data count because behavior needs to change when it's only one\n\n    dataCount = $$.getMaxDataCount();\n    baseTarget = $$.data.targets[0];\n    baseValue = baseTarget.values[0]; // Update length to flow if needed\n\n    if (isDefined(args.to)) {\n      length = 0;\n      to = $$.isTimeSeries() ? $$.parseDate(args.to) : args.to;\n      baseTarget.values.forEach(function (v) {\n        if (v.x < to) {\n          length++;\n        }\n      });\n    } else if (isDefined(args.length)) {\n      length = args.length;\n    } // If only one data, update the domain to flow from left edge of the chart\n\n\n    if (!orgDataCount) {\n      if ($$.isTimeSeries()) {\n        if (baseTarget.values.length > 1) {\n          diff = baseTarget.values[baseTarget.values.length - 1].x - baseValue.x;\n        } else {\n          diff = baseValue.x - $$.getXDomain($$.data.targets)[0];\n        }\n      } else {\n        diff = 1;\n      }\n\n      domain = [baseValue.x - diff, baseValue.x];\n      $$.updateXDomain(null, true, true, false, domain);\n    } else if (orgDataCount === 1) {\n      if ($$.isTimeSeries()) {\n        diff = (baseTarget.values[baseTarget.values.length - 1].x - baseValue.x) / 2;\n        domain = [new Date(+baseValue.x - diff), new Date(+baseValue.x + diff)];\n        $$.updateXDomain(null, true, true, false, domain);\n      }\n    } // Set targets\n\n\n    $$.updateTargets($$.data.targets); // Redraw with new targets\n\n    $$.redraw({\n      flow: {\n        index: baseValue.index,\n        length: length,\n        duration: isValue(args.duration) ? args.duration : $$.config.transition_duration,\n        done: args.done,\n        orgDataCount: orgDataCount\n      },\n      withLegend: true,\n      withTransition: orgDataCount > 1,\n      withTrimXDomain: false,\n      withUpdateXAxis: true\n    });\n  };\n\n  ChartInternal.prototype.generateFlow = function (args) {\n    var $$ = this,\n        config = $$.config,\n        d3 = $$.d3;\n    return function () {\n      var targets = args.targets,\n          flow = args.flow,\n          drawBar = args.drawBar,\n          drawLine = args.drawLine,\n          drawArea = args.drawArea,\n          cx = args.cx,\n          cy = args.cy,\n          xv = args.xv,\n          xForText = args.xForText,\n          yForText = args.yForText,\n          duration = args.duration;\n\n      var translateX,\n          scaleX = 1,\n          transform,\n          flowIndex = flow.index,\n          flowLength = flow.length,\n          flowStart = $$.getValueOnIndex($$.data.targets[0].values, flowIndex),\n          flowEnd = $$.getValueOnIndex($$.data.targets[0].values, flowIndex + flowLength),\n          orgDomain = $$.x.domain(),\n          domain,\n          durationForFlow = flow.duration || duration,\n          done = flow.done || function () {},\n          wait = $$.generateWait();\n\n      var xgrid, xgridLines, mainRegion, mainText, mainBar, mainLine, mainArea, mainCircle; // set flag\n\n      $$.flowing = true; // remove head data after rendered\n\n      $$.data.targets.forEach(function (d) {\n        d.values.splice(0, flowLength);\n      }); // update x domain to generate axis elements for flow\n\n      domain = $$.updateXDomain(targets, true, true); // update elements related to x scale\n\n      if ($$.updateXGrid) {\n        $$.updateXGrid(true);\n      }\n\n      xgrid = $$.xgrid || d3.selectAll([]); // xgrid needs to be obtained after updateXGrid\n\n      xgridLines = $$.xgridLines || d3.selectAll([]);\n      mainRegion = $$.mainRegion || d3.selectAll([]);\n      mainText = $$.mainText || d3.selectAll([]);\n      mainBar = $$.mainBar || d3.selectAll([]);\n      mainLine = $$.mainLine || d3.selectAll([]);\n      mainArea = $$.mainArea || d3.selectAll([]);\n      mainCircle = $$.mainCircle || d3.selectAll([]); // generate transform to flow\n\n      if (!flow.orgDataCount) {\n        // if empty\n        if ($$.data.targets[0].values.length !== 1) {\n          translateX = $$.x(orgDomain[0]) - $$.x(domain[0]);\n        } else {\n          if ($$.isTimeSeries()) {\n            flowStart = $$.getValueOnIndex($$.data.targets[0].values, 0);\n            flowEnd = $$.getValueOnIndex($$.data.targets[0].values, $$.data.targets[0].values.length - 1);\n            translateX = $$.x(flowStart.x) - $$.x(flowEnd.x);\n          } else {\n            translateX = diffDomain(domain) / 2;\n          }\n        }\n      } else if (flow.orgDataCount === 1 || (flowStart && flowStart.x) === (flowEnd && flowEnd.x)) {\n        translateX = $$.x(orgDomain[0]) - $$.x(domain[0]);\n      } else {\n        if ($$.isTimeSeries()) {\n          translateX = $$.x(orgDomain[0]) - $$.x(domain[0]);\n        } else {\n          translateX = $$.x(flowStart.x) - $$.x(flowEnd.x);\n        }\n      }\n\n      scaleX = diffDomain(orgDomain) / diffDomain(domain);\n      transform = 'translate(' + translateX + ',0) scale(' + scaleX + ',1)';\n      $$.hideXGridFocus();\n      var flowTransition = d3.transition().ease(d3.easeLinear).duration(durationForFlow);\n      wait.add($$.xAxis($$.axes.x, flowTransition));\n      wait.add(mainBar.transition(flowTransition).attr('transform', transform));\n      wait.add(mainLine.transition(flowTransition).attr('transform', transform));\n      wait.add(mainArea.transition(flowTransition).attr('transform', transform));\n      wait.add(mainCircle.transition(flowTransition).attr('transform', transform));\n      wait.add(mainText.transition(flowTransition).attr('transform', transform));\n      wait.add(mainRegion.filter($$.isRegionOnX).transition(flowTransition).attr('transform', transform));\n      wait.add(xgrid.transition(flowTransition).attr('transform', transform));\n      wait.add(xgridLines.transition(flowTransition).attr('transform', transform));\n      wait(function () {\n        var i,\n            shapes = [],\n            texts = []; // remove flowed elements\n\n        if (flowLength) {\n          for (i = 0; i < flowLength; i++) {\n            shapes.push('.' + CLASS.shape + '-' + (flowIndex + i));\n            texts.push('.' + CLASS.text + '-' + (flowIndex + i));\n          }\n\n          $$.svg.selectAll('.' + CLASS.shapes).selectAll(shapes).remove();\n          $$.svg.selectAll('.' + CLASS.texts).selectAll(texts).remove();\n          $$.svg.select('.' + CLASS.xgrid).remove();\n        } // draw again for removing flowed elements and reverting attr\n\n\n        xgrid.attr('transform', null).attr('x1', $$.xgridAttr.x1).attr('x2', $$.xgridAttr.x2).attr('y1', $$.xgridAttr.y1).attr('y2', $$.xgridAttr.y2).style('opacity', $$.xgridAttr.opacity);\n        xgridLines.attr('transform', null);\n        xgridLines.select('line').attr('x1', config.axis_rotated ? 0 : xv).attr('x2', config.axis_rotated ? $$.width : xv);\n        xgridLines.select('text').attr('x', config.axis_rotated ? $$.width : 0).attr('y', xv);\n        mainBar.attr('transform', null).attr('d', drawBar);\n        mainLine.attr('transform', null).attr('d', drawLine);\n        mainArea.attr('transform', null).attr('d', drawArea);\n        mainCircle.attr('transform', null).attr('cx', cx).attr('cy', cy);\n        mainText.attr('transform', null).attr('x', xForText).attr('y', yForText).style('fill-opacity', $$.opacityForText.bind($$));\n        mainRegion.attr('transform', null);\n        mainRegion.filter($$.isRegionOnX).attr('x', $$.regionX.bind($$)).attr('width', $$.regionWidth.bind($$)); // callback for end of flow\n\n        done();\n        $$.flowing = false;\n      });\n    };\n  };\n\n  Chart.prototype.focus = function (targetIds) {\n    var $$ = this.internal,\n        candidates;\n    targetIds = $$.mapToTargetIds(targetIds);\n    candidates = $$.svg.selectAll($$.selectorTargets(targetIds.filter($$.isTargetToShow, $$))), this.revert();\n    this.defocus();\n    candidates.classed(CLASS.focused, true).classed(CLASS.defocused, false);\n\n    if ($$.hasArcType()) {\n      $$.expandArc(targetIds);\n    }\n\n    $$.toggleFocusLegend(targetIds, true);\n    $$.focusedTargetIds = targetIds;\n    $$.defocusedTargetIds = $$.defocusedTargetIds.filter(function (id) {\n      return targetIds.indexOf(id) < 0;\n    });\n  };\n\n  Chart.prototype.defocus = function (targetIds) {\n    var $$ = this.internal,\n        candidates;\n    targetIds = $$.mapToTargetIds(targetIds);\n    candidates = $$.svg.selectAll($$.selectorTargets(targetIds.filter($$.isTargetToShow, $$))), candidates.classed(CLASS.focused, false).classed(CLASS.defocused, true);\n\n    if ($$.hasArcType()) {\n      $$.unexpandArc(targetIds);\n    }\n\n    $$.toggleFocusLegend(targetIds, false);\n    $$.focusedTargetIds = $$.focusedTargetIds.filter(function (id) {\n      return targetIds.indexOf(id) < 0;\n    });\n    $$.defocusedTargetIds = targetIds;\n  };\n\n  Chart.prototype.revert = function (targetIds) {\n    var $$ = this.internal,\n        candidates;\n    targetIds = $$.mapToTargetIds(targetIds);\n    candidates = $$.svg.selectAll($$.selectorTargets(targetIds)); // should be for all targets\n\n    candidates.classed(CLASS.focused, false).classed(CLASS.defocused, false);\n\n    if ($$.hasArcType()) {\n      $$.unexpandArc(targetIds);\n    }\n\n    if ($$.config.legend_show) {\n      $$.showLegend(targetIds.filter($$.isLegendToShow.bind($$)));\n      $$.legend.selectAll($$.selectorLegends(targetIds)).filter(function () {\n        return $$.d3.select(this).classed(CLASS.legendItemFocused);\n      }).classed(CLASS.legendItemFocused, false);\n    }\n\n    $$.focusedTargetIds = [];\n    $$.defocusedTargetIds = [];\n  };\n\n  Chart.prototype.xgrids = function (grids) {\n    var $$ = this.internal,\n        config = $$.config;\n\n    if (!grids) {\n      return config.grid_x_lines;\n    }\n\n    config.grid_x_lines = grids;\n    $$.redrawWithoutRescale();\n    return config.grid_x_lines;\n  };\n\n  Chart.prototype.xgrids.add = function (grids) {\n    var $$ = this.internal;\n    return this.xgrids($$.config.grid_x_lines.concat(grids ? grids : []));\n  };\n\n  Chart.prototype.xgrids.remove = function (params) {\n    // TODO: multiple\n    var $$ = this.internal;\n    $$.removeGridLines(params, true);\n  };\n\n  Chart.prototype.ygrids = function (grids) {\n    var $$ = this.internal,\n        config = $$.config;\n\n    if (!grids) {\n      return config.grid_y_lines;\n    }\n\n    config.grid_y_lines = grids;\n    $$.redrawWithoutRescale();\n    return config.grid_y_lines;\n  };\n\n  Chart.prototype.ygrids.add = function (grids) {\n    var $$ = this.internal;\n    return this.ygrids($$.config.grid_y_lines.concat(grids ? grids : []));\n  };\n\n  Chart.prototype.ygrids.remove = function (params) {\n    // TODO: multiple\n    var $$ = this.internal;\n    $$.removeGridLines(params, false);\n  };\n\n  Chart.prototype.groups = function (groups) {\n    var $$ = this.internal,\n        config = $$.config;\n\n    if (isUndefined(groups)) {\n      return config.data_groups;\n    }\n\n    config.data_groups = groups;\n    $$.redraw();\n    return config.data_groups;\n  };\n\n  Chart.prototype.legend = function () {};\n\n  Chart.prototype.legend.show = function (targetIds) {\n    var $$ = this.internal;\n    $$.showLegend($$.mapToTargetIds(targetIds));\n    $$.updateAndRedraw({\n      withLegend: true\n    });\n  };\n\n  Chart.prototype.legend.hide = function (targetIds) {\n    var $$ = this.internal;\n    $$.hideLegend($$.mapToTargetIds(targetIds));\n    $$.updateAndRedraw({\n      withLegend: false\n    });\n  };\n\n  Chart.prototype.load = function (args) {\n    var $$ = this.internal,\n        config = $$.config; // update xs if specified\n\n    if (args.xs) {\n      $$.addXs(args.xs);\n    } // update names if exists\n\n\n    if ('names' in args) {\n      Chart.prototype.data.names.bind(this)(args.names);\n    } // update classes if exists\n\n\n    if ('classes' in args) {\n      Object.keys(args.classes).forEach(function (id) {\n        config.data_classes[id] = args.classes[id];\n      });\n    } // update categories if exists\n\n\n    if ('categories' in args && $$.isCategorized()) {\n      config.axis_x_categories = args.categories;\n    } // update axes if exists\n\n\n    if ('axes' in args) {\n      Object.keys(args.axes).forEach(function (id) {\n        config.data_axes[id] = args.axes[id];\n      });\n    } // update colors if exists\n\n\n    if ('colors' in args) {\n      Object.keys(args.colors).forEach(function (id) {\n        config.data_colors[id] = args.colors[id];\n      });\n    } // use cache if exists\n\n\n    if ('cacheIds' in args && $$.hasCaches(args.cacheIds)) {\n      $$.load($$.getCaches(args.cacheIds), args.done);\n      return;\n    } // unload if needed\n\n\n    if (args.unload) {\n      // TODO: do not unload if target will load (included in url/rows/columns)\n      $$.unload($$.mapToTargetIds(args.unload === true ? null : args.unload), function () {\n        $$.loadFromArgs(args);\n      });\n    } else {\n      $$.loadFromArgs(args);\n    }\n  };\n\n  Chart.prototype.unload = function (args) {\n    var $$ = this.internal;\n    args = args || {};\n\n    if (args instanceof Array) {\n      args = {\n        ids: args\n      };\n    } else if (typeof args === 'string') {\n      args = {\n        ids: [args]\n      };\n    }\n\n    $$.unload($$.mapToTargetIds(args.ids), function () {\n      $$.redraw({\n        withUpdateOrgXDomain: true,\n        withUpdateXDomain: true,\n        withLegend: true\n      });\n\n      if (args.done) {\n        args.done();\n      }\n    });\n  };\n\n  Chart.prototype.pie = function () {};\n\n  Chart.prototype.pie.padAngle = function (padAngle) {\n    if (padAngle === undefined) {\n      return this.internal.config.pie_padAngle;\n    }\n\n    this.internal.config.pie_padAngle = padAngle;\n    this.flush();\n  };\n\n  Chart.prototype.regions = function (regions) {\n    var $$ = this.internal,\n        config = $$.config;\n\n    if (!regions) {\n      return config.regions;\n    }\n\n    config.regions = regions;\n    $$.redrawWithoutRescale();\n    return config.regions;\n  };\n\n  Chart.prototype.regions.add = function (regions) {\n    var $$ = this.internal,\n        config = $$.config;\n\n    if (!regions) {\n      return config.regions;\n    }\n\n    config.regions = config.regions.concat(regions);\n    $$.redrawWithoutRescale();\n    return config.regions;\n  };\n\n  Chart.prototype.regions.remove = function (options) {\n    var $$ = this.internal,\n        config = $$.config,\n        duration,\n        classes,\n        regions;\n    options = options || {};\n    duration = getOption(options, 'duration', config.transition_duration);\n    classes = getOption(options, 'classes', [CLASS.region]);\n    regions = $$.main.select('.' + CLASS.regions).selectAll(classes.map(function (c) {\n      return '.' + c;\n    }));\n    (duration ? regions.transition().duration(duration) : regions).style('opacity', 0).remove();\n    config.regions = config.regions.filter(function (region) {\n      var found = false;\n\n      if (!region['class']) {\n        return true;\n      }\n\n      region['class'].split(' ').forEach(function (c) {\n        if (classes.indexOf(c) >= 0) {\n          found = true;\n        }\n      });\n      return !found;\n    });\n    return config.regions;\n  };\n\n  Chart.prototype.selected = function (targetId) {\n    var $$ = this.internal,\n        d3 = $$.d3;\n    return $$.main.selectAll('.' + CLASS.shapes + $$.getTargetSelectorSuffix(targetId)).selectAll('.' + CLASS.shape).filter(function () {\n      return d3.select(this).classed(CLASS.SELECTED);\n    }).nodes().map(function (d) {\n      var data = d.__data__;\n      return data.data ? data.data : data;\n    });\n  };\n\n  Chart.prototype.select = function (ids, indices, resetOther) {\n    var $$ = this.internal,\n        d3 = $$.d3,\n        config = $$.config;\n\n    if (!config.data_selection_enabled) {\n      return;\n    }\n\n    $$.main.selectAll('.' + CLASS.shapes).selectAll('.' + CLASS.shape).each(function (d, i) {\n      var shape = d3.select(this),\n          id = d.data ? d.data.id : d.id,\n          toggle = $$.getToggle(this, d).bind($$),\n          isTargetId = config.data_selection_grouped || !ids || ids.indexOf(id) >= 0,\n          isTargetIndex = !indices || indices.indexOf(i) >= 0,\n          isSelected = shape.classed(CLASS.SELECTED); // line/area selection not supported yet\n\n      if (shape.classed(CLASS.line) || shape.classed(CLASS.area)) {\n        return;\n      }\n\n      if (isTargetId && isTargetIndex) {\n        if (config.data_selection_isselectable(d) && !isSelected) {\n          toggle(true, shape.classed(CLASS.SELECTED, true), d, i);\n        }\n      } else if (isDefined(resetOther) && resetOther) {\n        if (isSelected) {\n          toggle(false, shape.classed(CLASS.SELECTED, false), d, i);\n        }\n      }\n    });\n  };\n\n  Chart.prototype.unselect = function (ids, indices) {\n    var $$ = this.internal,\n        d3 = $$.d3,\n        config = $$.config;\n\n    if (!config.data_selection_enabled) {\n      return;\n    }\n\n    $$.main.selectAll('.' + CLASS.shapes).selectAll('.' + CLASS.shape).each(function (d, i) {\n      var shape = d3.select(this),\n          id = d.data ? d.data.id : d.id,\n          toggle = $$.getToggle(this, d).bind($$),\n          isTargetId = config.data_selection_grouped || !ids || ids.indexOf(id) >= 0,\n          isTargetIndex = !indices || indices.indexOf(i) >= 0,\n          isSelected = shape.classed(CLASS.SELECTED); // line/area selection not supported yet\n\n      if (shape.classed(CLASS.line) || shape.classed(CLASS.area)) {\n        return;\n      }\n\n      if (isTargetId && isTargetIndex) {\n        if (config.data_selection_isselectable(d)) {\n          if (isSelected) {\n            toggle(false, shape.classed(CLASS.SELECTED, false), d, i);\n          }\n        }\n      }\n    });\n  };\n\n  Chart.prototype.show = function (targetIds, options) {\n    var $$ = this.internal,\n        targets;\n    targetIds = $$.mapToTargetIds(targetIds);\n    options = options || {};\n    $$.removeHiddenTargetIds(targetIds);\n    targets = $$.svg.selectAll($$.selectorTargets(targetIds));\n    targets.transition().style('display', isIE() ? 'block' : 'initial', 'important').style('opacity', 1, 'important').call($$.endall, function () {\n      targets.style('opacity', null).style('opacity', 1);\n    });\n\n    if (options.withLegend) {\n      $$.showLegend(targetIds);\n    }\n\n    $$.redraw({\n      withUpdateOrgXDomain: true,\n      withUpdateXDomain: true,\n      withLegend: true\n    });\n  };\n\n  Chart.prototype.hide = function (targetIds, options) {\n    var $$ = this.internal,\n        targets;\n    targetIds = $$.mapToTargetIds(targetIds);\n    options = options || {};\n    $$.addHiddenTargetIds(targetIds);\n    targets = $$.svg.selectAll($$.selectorTargets(targetIds));\n    targets.transition().style('opacity', 0, 'important').call($$.endall, function () {\n      targets.style('opacity', null).style('opacity', 0);\n      targets.style('display', 'none');\n    });\n\n    if (options.withLegend) {\n      $$.hideLegend(targetIds);\n    }\n\n    $$.redraw({\n      withUpdateOrgXDomain: true,\n      withUpdateXDomain: true,\n      withLegend: true\n    });\n  };\n\n  Chart.prototype.toggle = function (targetIds, options) {\n    var that = this,\n        $$ = this.internal;\n    $$.mapToTargetIds(targetIds).forEach(function (targetId) {\n      $$.isTargetToShow(targetId) ? that.hide(targetId, options) : that.show(targetId, options);\n    });\n  };\n\n  Chart.prototype.subchart = function () {};\n\n  Chart.prototype.subchart.isShown = function () {\n    var $$ = this.internal;\n    return $$.config.subchart_show;\n  };\n\n  Chart.prototype.subchart.show = function () {\n    var $$ = this.internal;\n\n    if ($$.config.subchart_show) {\n      return;\n    }\n\n    $$.config.subchart_show = true; // insert DOM\n\n    $$.initSubchart(); // update dimensions with sub chart now visible\n\n    $$.updateDimension(); // insert brush (depends on sizes previously updated)\n\n    $$.initSubchartBrush(); // attach data\n\n    $$.updateTargetsForSubchart($$.getTargets()); // reset fade-in state\n\n    $$.mapToIds($$.data.targets).forEach(function (id) {\n      $$.withoutFadeIn[id] = false;\n    }); // redraw chart !\n\n    $$.updateAndRedraw(); // update visible targets !\n\n    $$.showTargets();\n  };\n\n  Chart.prototype.subchart.hide = function () {\n    var $$ = this.internal;\n\n    if (!$$.config.subchart_show) {\n      return;\n    }\n\n    $$.config.subchart_show = false; // remove DOM\n\n    $$.removeSubchart(); // re-render chart\n\n    $$.redraw();\n  };\n\n  Chart.prototype.tooltip = function () {};\n\n  Chart.prototype.tooltip.show = function (args) {\n    var $$ = this.internal,\n        targets,\n        data,\n        mouse = {}; // determine mouse position on the chart\n\n    if (args.mouse) {\n      mouse = args.mouse;\n    } else {\n      // determine focus data\n      if (args.data) {\n        data = args.data;\n      } else if (typeof args.x !== 'undefined') {\n        if (args.id) {\n          targets = $$.data.targets.filter(function (t) {\n            return t.id === args.id;\n          });\n        } else {\n          targets = $$.data.targets;\n        }\n\n        data = $$.filterByX(targets, args.x).slice(0, 1)[0];\n      }\n\n      mouse = data ? $$.getMousePosition(data) : null;\n    } // emulate mouse events to show\n\n\n    $$.dispatchEvent('mousemove', mouse);\n    $$.config.tooltip_onshow.call($$, data);\n  };\n\n  Chart.prototype.tooltip.hide = function () {\n    // TODO: get target data by checking the state of focus\n    this.internal.dispatchEvent('mouseout', 0);\n    this.internal.config.tooltip_onhide.call(this);\n  };\n\n  Chart.prototype.transform = function (type, targetIds) {\n    var $$ = this.internal,\n        options = ['pie', 'donut'].indexOf(type) >= 0 ? {\n      withTransform: true\n    } : null;\n    $$.transformTo(targetIds, type, options);\n  };\n\n  ChartInternal.prototype.transformTo = function (targetIds, type, optionsForRedraw) {\n    var $$ = this,\n        withTransitionForAxis = !$$.hasArcType(),\n        options = optionsForRedraw || {\n      withTransitionForAxis: withTransitionForAxis\n    };\n    options.withTransitionForTransform = false;\n    $$.transiting = false;\n    $$.setTargetType(targetIds, type);\n    $$.updateTargets($$.data.targets); // this is needed when transforming to arc\n\n    $$.updateAndRedraw(options);\n  };\n\n  Chart.prototype.x = function (x) {\n    var $$ = this.internal;\n\n    if (arguments.length) {\n      $$.updateTargetX($$.data.targets, x);\n      $$.redraw({\n        withUpdateOrgXDomain: true,\n        withUpdateXDomain: true\n      });\n    }\n\n    return $$.data.xs;\n  };\n\n  Chart.prototype.xs = function (xs) {\n    var $$ = this.internal;\n\n    if (arguments.length) {\n      $$.updateTargetXs($$.data.targets, xs);\n      $$.redraw({\n        withUpdateOrgXDomain: true,\n        withUpdateXDomain: true\n      });\n    }\n\n    return $$.data.xs;\n  };\n\n  Chart.prototype.zoom = function (domain) {\n    var $$ = this.internal;\n\n    if (domain) {\n      if ($$.isTimeSeries()) {\n        domain = domain.map(function (x) {\n          return $$.parseDate(x);\n        });\n      }\n\n      if ($$.config.subchart_show) {\n        $$.brush.selectionAsValue(domain, true);\n      } else {\n        $$.updateXDomain(null, true, false, false, domain);\n        $$.redraw({\n          withY: $$.config.zoom_rescale,\n          withSubchart: false\n        });\n      }\n\n      $$.config.zoom_onzoom.call(this, $$.x.orgDomain());\n      return domain;\n    } else {\n      return $$.x.domain();\n    }\n  };\n\n  Chart.prototype.zoom.enable = function (enabled) {\n    var $$ = this.internal;\n    $$.config.zoom_enabled = enabled;\n    $$.updateAndRedraw();\n  };\n\n  Chart.prototype.unzoom = function () {\n    var $$ = this.internal;\n\n    if ($$.config.subchart_show) {\n      $$.brush.clear();\n    } else {\n      $$.updateXDomain(null, true, false, false, $$.subX.domain());\n      $$.redraw({\n        withY: $$.config.zoom_rescale,\n        withSubchart: false\n      });\n    }\n  };\n\n  Chart.prototype.zoom.max = function (max) {\n    var $$ = this.internal,\n        config = $$.config,\n        d3 = $$.d3;\n\n    if (max === 0 || max) {\n      config.zoom_x_max = d3.max([$$.orgXDomain[1], max]);\n    } else {\n      return config.zoom_x_max;\n    }\n  };\n\n  Chart.prototype.zoom.min = function (min) {\n    var $$ = this.internal,\n        config = $$.config,\n        d3 = $$.d3;\n\n    if (min === 0 || min) {\n      config.zoom_x_min = d3.min([$$.orgXDomain[0], min]);\n    } else {\n      return config.zoom_x_min;\n    }\n  };\n\n  Chart.prototype.zoom.range = function (range) {\n    if (arguments.length) {\n      if (isDefined(range.max)) {\n        this.domain.max(range.max);\n      }\n\n      if (isDefined(range.min)) {\n        this.domain.min(range.min);\n      }\n    } else {\n      return {\n        max: this.domain.max(),\n        min: this.domain.min()\n      };\n    }\n  };\n\n  ChartInternal.prototype.initPie = function () {\n    var $$ = this,\n        d3 = $$.d3;\n    $$.pie = d3.pie().padAngle(this.getPadAngle.bind(this)).value(function (d) {\n      return d.values.reduce(function (a, b) {\n        return a + b.value;\n      }, 0);\n    });\n    var orderFct = $$.getOrderFunction(); // we need to reverse the returned order if asc or desc to have the slice in expected order.\n\n    if (orderFct && ($$.isOrderAsc() || $$.isOrderDesc())) {\n      var defaultSort = orderFct;\n\n      orderFct = function orderFct(t1, t2) {\n        return defaultSort(t1, t2) * -1;\n      };\n    }\n\n    $$.pie.sort(orderFct || null);\n  };\n\n  ChartInternal.prototype.updateRadius = function () {\n    var $$ = this,\n        config = $$.config,\n        w = config.gauge_width || config.donut_width,\n        gaugeArcWidth = $$.filterTargetsToShow($$.data.targets).length * $$.config.gauge_arcs_minWidth;\n    $$.radiusExpanded = Math.min($$.arcWidth, $$.arcHeight) / 2 * ($$.hasType('gauge') ? 0.85 : 1);\n    $$.radius = $$.radiusExpanded * 0.95;\n    $$.innerRadiusRatio = w ? ($$.radius - w) / $$.radius : 0.6;\n    $$.innerRadius = $$.hasType('donut') || $$.hasType('gauge') ? $$.radius * $$.innerRadiusRatio : 0;\n    $$.gaugeArcWidth = w ? w : gaugeArcWidth <= $$.radius - $$.innerRadius ? $$.radius - $$.innerRadius : gaugeArcWidth <= $$.radius ? gaugeArcWidth : $$.radius;\n  };\n\n  ChartInternal.prototype.getPadAngle = function () {\n    if (this.hasType('pie')) {\n      return this.config.pie_padAngle || 0;\n    } else if (this.hasType('donut')) {\n      return this.config.donut_padAngle || 0;\n    } else {\n      return 0;\n    }\n  };\n\n  ChartInternal.prototype.updateArc = function () {\n    var $$ = this;\n    $$.svgArc = $$.getSvgArc();\n    $$.svgArcExpanded = $$.getSvgArcExpanded();\n    $$.svgArcExpandedSub = $$.getSvgArcExpanded(0.98);\n  };\n\n  ChartInternal.prototype.updateAngle = function (d) {\n    var $$ = this,\n        config = $$.config,\n        found = false,\n        index = 0,\n        gMin,\n        gMax,\n        gTic,\n        gValue;\n\n    if (!config) {\n      return null;\n    }\n\n    $$.pie($$.filterTargetsToShow($$.data.targets)).forEach(function (t) {\n      if (!found && t.data.id === d.data.id) {\n        found = true;\n        d = t;\n        d.index = index;\n      }\n\n      index++;\n    });\n\n    if (isNaN(d.startAngle)) {\n      d.startAngle = 0;\n    }\n\n    if (isNaN(d.endAngle)) {\n      d.endAngle = d.startAngle;\n    }\n\n    if ($$.isGaugeType(d.data)) {\n      gMin = config.gauge_min;\n      gMax = config.gauge_max;\n      gTic = Math.PI * (config.gauge_fullCircle ? 2 : 1) / (gMax - gMin);\n      gValue = d.value < gMin ? 0 : d.value < gMax ? d.value - gMin : gMax - gMin;\n      d.startAngle = config.gauge_startingAngle;\n      d.endAngle = d.startAngle + gTic * gValue;\n    }\n\n    return found ? d : null;\n  };\n\n  ChartInternal.prototype.getSvgArc = function () {\n    var $$ = this,\n        hasGaugeType = $$.hasType('gauge'),\n        singleArcWidth = $$.gaugeArcWidth / $$.filterTargetsToShow($$.data.targets).length,\n        arc = $$.d3.arc().outerRadius(function (d) {\n      return hasGaugeType ? $$.radius - singleArcWidth * d.index : $$.radius;\n    }).innerRadius(function (d) {\n      return hasGaugeType ? $$.radius - singleArcWidth * (d.index + 1) : $$.innerRadius;\n    }),\n        newArc = function newArc(d, withoutUpdate) {\n      var updated;\n\n      if (withoutUpdate) {\n        return arc(d);\n      } // for interpolate\n\n\n      updated = $$.updateAngle(d);\n      return updated ? arc(updated) : 'M 0 0';\n    }; // TODO: extends all function\n\n\n    newArc.centroid = arc.centroid;\n    return newArc;\n  };\n\n  ChartInternal.prototype.getSvgArcExpanded = function (rate) {\n    rate = rate || 1;\n    var $$ = this,\n        hasGaugeType = $$.hasType('gauge'),\n        singleArcWidth = $$.gaugeArcWidth / $$.filterTargetsToShow($$.data.targets).length,\n        expandWidth = Math.min($$.radiusExpanded * rate - $$.radius, singleArcWidth * 0.8 - (1 - rate) * 100),\n        arc = $$.d3.arc().outerRadius(function (d) {\n      return hasGaugeType ? $$.radius - singleArcWidth * d.index + expandWidth : $$.radiusExpanded * rate;\n    }).innerRadius(function (d) {\n      return hasGaugeType ? $$.radius - singleArcWidth * (d.index + 1) : $$.innerRadius;\n    });\n    return function (d) {\n      var updated = $$.updateAngle(d);\n      return updated ? arc(updated) : 'M 0 0';\n    };\n  };\n\n  ChartInternal.prototype.getArc = function (d, withoutUpdate, force) {\n    return force || this.isArcType(d.data) ? this.svgArc(d, withoutUpdate) : 'M 0 0';\n  };\n\n  ChartInternal.prototype.transformForArcLabel = function (d) {\n    var $$ = this,\n        config = $$.config,\n        updated = $$.updateAngle(d),\n        c,\n        x,\n        y,\n        h,\n        ratio,\n        translate = '',\n        hasGauge = $$.hasType('gauge');\n\n    if (updated && !hasGauge) {\n      c = this.svgArc.centroid(updated);\n      x = isNaN(c[0]) ? 0 : c[0];\n      y = isNaN(c[1]) ? 0 : c[1];\n      h = Math.sqrt(x * x + y * y);\n\n      if ($$.hasType('donut') && config.donut_label_ratio) {\n        ratio = isFunction(config.donut_label_ratio) ? config.donut_label_ratio(d, $$.radius, h) : config.donut_label_ratio;\n      } else if ($$.hasType('pie') && config.pie_label_ratio) {\n        ratio = isFunction(config.pie_label_ratio) ? config.pie_label_ratio(d, $$.radius, h) : config.pie_label_ratio;\n      } else {\n        ratio = $$.radius && h ? (36 / $$.radius > 0.375 ? 1.175 - 36 / $$.radius : 0.8) * $$.radius / h : 0;\n      }\n\n      translate = 'translate(' + x * ratio + ',' + y * ratio + ')';\n    } else if (updated && hasGauge && $$.filterTargetsToShow($$.data.targets).length > 1) {\n      var y1 = Math.sin(updated.endAngle - Math.PI / 2);\n      x = Math.cos(updated.endAngle - Math.PI / 2) * ($$.radiusExpanded + 25);\n      y = y1 * ($$.radiusExpanded + 15 - Math.abs(y1 * 10)) + 3;\n      translate = 'translate(' + x + ',' + y + ')';\n    }\n\n    return translate;\n  };\n  /**\n   * @deprecated Use `getRatio('arc', d)` instead.\n   */\n\n\n  ChartInternal.prototype.getArcRatio = function (d) {\n    return this.getRatio('arc', d);\n  };\n\n  ChartInternal.prototype.convertToArcData = function (d) {\n    return this.addName({\n      id: d.data.id,\n      value: d.value,\n      ratio: this.getRatio('arc', d),\n      index: d.index\n    });\n  };\n\n  ChartInternal.prototype.textForArcLabel = function (d) {\n    var $$ = this,\n        updated,\n        value,\n        ratio,\n        id,\n        format;\n\n    if (!$$.shouldShowArcLabel()) {\n      return '';\n    }\n\n    updated = $$.updateAngle(d);\n    value = updated ? updated.value : null;\n    ratio = $$.getRatio('arc', updated);\n    id = d.data.id;\n\n    if (!$$.hasType('gauge') && !$$.meetsArcLabelThreshold(ratio)) {\n      return '';\n    }\n\n    format = $$.getArcLabelFormat();\n    return format ? format(value, ratio, id) : $$.defaultArcValueFormat(value, ratio);\n  };\n\n  ChartInternal.prototype.textForGaugeMinMax = function (value, isMax) {\n    var $$ = this,\n        format = $$.getGaugeLabelExtents();\n    return format ? format(value, isMax) : value;\n  };\n\n  ChartInternal.prototype.expandArc = function (targetIds) {\n    var $$ = this,\n        interval; // MEMO: avoid to cancel transition\n\n    if ($$.transiting) {\n      interval = window.setInterval(function () {\n        if (!$$.transiting) {\n          window.clearInterval(interval);\n\n          if ($$.legend.selectAll('.c3-legend-item-focused').size() > 0) {\n            $$.expandArc(targetIds);\n          }\n        }\n      }, 10);\n      return;\n    }\n\n    targetIds = $$.mapToTargetIds(targetIds);\n    $$.svg.selectAll($$.selectorTargets(targetIds, '.' + CLASS.chartArc)).each(function (d) {\n      if (!$$.shouldExpand(d.data.id)) {\n        return;\n      }\n\n      $$.d3.select(this).selectAll('path').transition().duration($$.expandDuration(d.data.id)).attr('d', $$.svgArcExpanded).transition().duration($$.expandDuration(d.data.id) * 2).attr('d', $$.svgArcExpandedSub).each(function (d) {\n        if ($$.isDonutType(d.data)) ;\n      });\n    });\n  };\n\n  ChartInternal.prototype.unexpandArc = function (targetIds) {\n    var $$ = this;\n\n    if ($$.transiting) {\n      return;\n    }\n\n    targetIds = $$.mapToTargetIds(targetIds);\n    $$.svg.selectAll($$.selectorTargets(targetIds, '.' + CLASS.chartArc)).selectAll('path').transition().duration(function (d) {\n      return $$.expandDuration(d.data.id);\n    }).attr('d', $$.svgArc);\n    $$.svg.selectAll('.' + CLASS.arc);\n  };\n\n  ChartInternal.prototype.expandDuration = function (id) {\n    var $$ = this,\n        config = $$.config;\n\n    if ($$.isDonutType(id)) {\n      return config.donut_expand_duration;\n    } else if ($$.isGaugeType(id)) {\n      return config.gauge_expand_duration;\n    } else if ($$.isPieType(id)) {\n      return config.pie_expand_duration;\n    } else {\n      return 50;\n    }\n  };\n\n  ChartInternal.prototype.shouldExpand = function (id) {\n    var $$ = this,\n        config = $$.config;\n    return $$.isDonutType(id) && config.donut_expand || $$.isGaugeType(id) && config.gauge_expand || $$.isPieType(id) && config.pie_expand;\n  };\n\n  ChartInternal.prototype.shouldShowArcLabel = function () {\n    var $$ = this,\n        config = $$.config,\n        shouldShow = true;\n\n    if ($$.hasType('donut')) {\n      shouldShow = config.donut_label_show;\n    } else if ($$.hasType('pie')) {\n      shouldShow = config.pie_label_show;\n    } // when gauge, always true\n\n\n    return shouldShow;\n  };\n\n  ChartInternal.prototype.meetsArcLabelThreshold = function (ratio) {\n    var $$ = this,\n        config = $$.config,\n        threshold = $$.hasType('donut') ? config.donut_label_threshold : config.pie_label_threshold;\n    return ratio >= threshold;\n  };\n\n  ChartInternal.prototype.getArcLabelFormat = function () {\n    var $$ = this,\n        config = $$.config,\n        format = config.pie_label_format;\n\n    if ($$.hasType('gauge')) {\n      format = config.gauge_label_format;\n    } else if ($$.hasType('donut')) {\n      format = config.donut_label_format;\n    }\n\n    return format;\n  };\n\n  ChartInternal.prototype.getGaugeLabelExtents = function () {\n    var $$ = this,\n        config = $$.config;\n    return config.gauge_label_extents;\n  };\n\n  ChartInternal.prototype.getArcTitle = function () {\n    var $$ = this;\n    return $$.hasType('donut') ? $$.config.donut_title : '';\n  };\n\n  ChartInternal.prototype.updateTargetsForArc = function (targets) {\n    var $$ = this,\n        main = $$.main,\n        mainPies,\n        mainPieEnter,\n        classChartArc = $$.classChartArc.bind($$),\n        classArcs = $$.classArcs.bind($$),\n        classFocus = $$.classFocus.bind($$);\n    mainPies = main.select('.' + CLASS.chartArcs).selectAll('.' + CLASS.chartArc).data($$.pie(targets)).attr('class', function (d) {\n      return classChartArc(d) + classFocus(d.data);\n    });\n    mainPieEnter = mainPies.enter().append('g').attr('class', classChartArc);\n    mainPieEnter.append('g').attr('class', classArcs);\n    mainPieEnter.append('text').attr('dy', $$.hasType('gauge') ? '-.1em' : '.35em').style('opacity', 0).style('text-anchor', 'middle').style('pointer-events', 'none'); // MEMO: can not keep same color..., but not bad to update color in redraw\n    //mainPieUpdate.exit().remove();\n  };\n\n  ChartInternal.prototype.initArc = function () {\n    var $$ = this;\n    $$.arcs = $$.main.select('.' + CLASS.chart).append('g').attr('class', CLASS.chartArcs).attr('transform', $$.getTranslate('arc'));\n    $$.arcs.append('text').attr('class', CLASS.chartArcsTitle).style('text-anchor', 'middle').text($$.getArcTitle());\n  };\n\n  ChartInternal.prototype.redrawArc = function (duration, durationForExit, withTransform) {\n    var $$ = this,\n        d3 = $$.d3,\n        config = $$.config,\n        main = $$.main,\n        arcs,\n        mainArc,\n        arcLabelLines,\n        mainArcLabelLine,\n        hasGaugeType = $$.hasType('gauge');\n    arcs = main.selectAll('.' + CLASS.arcs).selectAll('.' + CLASS.arc).data($$.arcData.bind($$));\n    mainArc = arcs.enter().append('path').attr('class', $$.classArc.bind($$)).style('fill', function (d) {\n      return $$.color(d.data);\n    }).style('cursor', function (d) {\n      return config.interaction_enabled && config.data_selection_isselectable(d) ? 'pointer' : null;\n    }).each(function (d) {\n      if ($$.isGaugeType(d.data)) {\n        d.startAngle = d.endAngle = config.gauge_startingAngle;\n      }\n\n      this._current = d;\n    }).merge(arcs);\n\n    if (hasGaugeType) {\n      arcLabelLines = main.selectAll('.' + CLASS.arcs).selectAll('.' + CLASS.arcLabelLine).data($$.arcData.bind($$));\n      mainArcLabelLine = arcLabelLines.enter().append('rect').attr('class', function (d) {\n        return CLASS.arcLabelLine + ' ' + CLASS.target + ' ' + CLASS.target + '-' + d.data.id;\n      }).merge(arcLabelLines);\n\n      if ($$.filterTargetsToShow($$.data.targets).length === 1) {\n        mainArcLabelLine.style('display', 'none');\n      } else {\n        mainArcLabelLine.style('fill', function (d) {\n          return $$.levelColor ? $$.levelColor(d.data.values.reduce(function (total, item) {\n            return total + item.value;\n          }, 0)) : $$.color(d.data);\n        }).style('display', config.gauge_labelLine_show ? '' : 'none').each(function (d) {\n          var lineLength = 0,\n              lineThickness = 2,\n              x = 0,\n              y = 0,\n              transform = '';\n\n          if ($$.hiddenTargetIds.indexOf(d.data.id) < 0) {\n            var updated = $$.updateAngle(d),\n                innerLineLength = $$.gaugeArcWidth / $$.filterTargetsToShow($$.data.targets).length * (updated.index + 1),\n                lineAngle = updated.endAngle - Math.PI / 2,\n                arcInnerRadius = $$.radius - innerLineLength,\n                linePositioningAngle = lineAngle - (arcInnerRadius === 0 ? 0 : 1 / arcInnerRadius);\n            lineLength = $$.radiusExpanded - $$.radius + innerLineLength;\n            x = Math.cos(linePositioningAngle) * arcInnerRadius;\n            y = Math.sin(linePositioningAngle) * arcInnerRadius;\n            transform = 'rotate(' + lineAngle * 180 / Math.PI + ', ' + x + ', ' + y + ')';\n          }\n\n          d3.select(this).attr('x', x).attr('y', y).attr('width', lineLength).attr('height', lineThickness).attr('transform', transform).style('stroke-dasharray', '0, ' + (lineLength + lineThickness) + ', 0');\n        });\n      }\n    }\n\n    mainArc.attr('transform', function (d) {\n      return !$$.isGaugeType(d.data) && withTransform ? 'scale(0)' : '';\n    }).on('mouseover', config.interaction_enabled ? function (d) {\n      var updated, arcData;\n\n      if ($$.transiting) {\n        // skip while transiting\n        return;\n      }\n\n      updated = $$.updateAngle(d);\n\n      if (updated) {\n        arcData = $$.convertToArcData(updated); // transitions\n\n        $$.expandArc(updated.data.id);\n        $$.api.focus(updated.data.id);\n        $$.toggleFocusLegend(updated.data.id, true);\n        $$.config.data_onmouseover(arcData, this);\n      }\n    } : null).on('mousemove', config.interaction_enabled ? function (d) {\n      var updated = $$.updateAngle(d),\n          arcData,\n          selectedData;\n\n      if (updated) {\n        arcData = $$.convertToArcData(updated), selectedData = [arcData];\n        $$.showTooltip(selectedData, this);\n      }\n    } : null).on('mouseout', config.interaction_enabled ? function (d) {\n      var updated, arcData;\n\n      if ($$.transiting) {\n        // skip while transiting\n        return;\n      }\n\n      updated = $$.updateAngle(d);\n\n      if (updated) {\n        arcData = $$.convertToArcData(updated); // transitions\n\n        $$.unexpandArc(updated.data.id);\n        $$.api.revert();\n        $$.revertLegend();\n        $$.hideTooltip();\n        $$.config.data_onmouseout(arcData, this);\n      }\n    } : null).on('click', config.interaction_enabled ? function (d, i) {\n      var updated = $$.updateAngle(d),\n          arcData;\n\n      if (updated) {\n        arcData = $$.convertToArcData(updated);\n\n        if ($$.toggleShape) {\n          $$.toggleShape(this, arcData, i);\n        }\n\n        $$.config.data_onclick.call($$.api, arcData, this);\n      }\n    } : null).each(function () {\n      $$.transiting = true;\n    }).transition().duration(duration).attrTween('d', function (d) {\n      var updated = $$.updateAngle(d),\n          interpolate;\n\n      if (!updated) {\n        return function () {\n          return 'M 0 0';\n        };\n      } //                if (this._current === d) {\n      //                    this._current = {\n      //                        startAngle: Math.PI*2,\n      //                        endAngle: Math.PI*2,\n      //                    };\n      //                }\n\n\n      if (isNaN(this._current.startAngle)) {\n        this._current.startAngle = 0;\n      }\n\n      if (isNaN(this._current.endAngle)) {\n        this._current.endAngle = this._current.startAngle;\n      }\n\n      interpolate = d3.interpolate(this._current, updated);\n      this._current = interpolate(0);\n      return function (t) {\n        // prevents crashing the charts once in transition and chart.destroy() has been called\n        if ($$.config === null) {\n          return 'M 0 0';\n        }\n\n        var interpolated = interpolate(t);\n        interpolated.data = d.data; // data.id will be updated by interporator\n\n        return $$.getArc(interpolated, true);\n      };\n    }).attr('transform', withTransform ? 'scale(1)' : '').style('fill', function (d) {\n      return $$.levelColor ? $$.levelColor(d.data.values.reduce(function (total, item) {\n        return total + item.value;\n      }, 0)) : $$.color(d.data.id);\n    }) // Where gauge reading color would receive customization.\n    .call($$.endall, function () {\n      $$.transiting = false;\n    });\n    arcs.exit().transition().duration(durationForExit).style('opacity', 0).remove();\n    main.selectAll('.' + CLASS.chartArc).select('text').style('opacity', 0).attr('class', function (d) {\n      return $$.isGaugeType(d.data) ? CLASS.gaugeValue : '';\n    }).text($$.textForArcLabel.bind($$)).attr('transform', $$.transformForArcLabel.bind($$)).style('font-size', function (d) {\n      return $$.isGaugeType(d.data) && $$.filterTargetsToShow($$.data.targets).length === 1 ? Math.round($$.radius / 5) + 'px' : '';\n    }).transition().duration(duration).style('opacity', function (d) {\n      return $$.isTargetToShow(d.data.id) && $$.isArcType(d.data) ? 1 : 0;\n    });\n    main.select('.' + CLASS.chartArcsTitle).style('opacity', $$.hasType('donut') || hasGaugeType ? 1 : 0);\n\n    if (hasGaugeType) {\n      var index = 0;\n      var backgroundArc = $$.arcs.select('g.' + CLASS.chartArcsBackground).selectAll('path.' + CLASS.chartArcsBackground).data($$.data.targets);\n      backgroundArc.enter().append('path').attr('class', function (d, i) {\n        return CLASS.chartArcsBackground + ' ' + CLASS.chartArcsBackground + '-' + i;\n      }).merge(backgroundArc).attr('d', function (d1) {\n        if ($$.hiddenTargetIds.indexOf(d1.id) >= 0) {\n          return 'M 0 0';\n        }\n\n        var d = {\n          data: [{\n            value: config.gauge_max\n          }],\n          startAngle: config.gauge_startingAngle,\n          endAngle: -1 * config.gauge_startingAngle * (config.gauge_fullCircle ? Math.PI : 1),\n          index: index++\n        };\n        return $$.getArc(d, true, true);\n      });\n      backgroundArc.exit().remove();\n      $$.arcs.select('.' + CLASS.chartArcsGaugeUnit).attr('dy', '.75em').text(config.gauge_label_show ? config.gauge_units : '');\n      $$.arcs.select('.' + CLASS.chartArcsGaugeMin).attr('dx', -1 * ($$.innerRadius + ($$.radius - $$.innerRadius) / (config.gauge_fullCircle ? 1 : 2)) + 'px').attr('dy', '1.2em').text(config.gauge_label_show ? $$.textForGaugeMinMax(config.gauge_min, false) : '');\n      $$.arcs.select('.' + CLASS.chartArcsGaugeMax).attr('dx', $$.innerRadius + ($$.radius - $$.innerRadius) / (config.gauge_fullCircle ? 1 : 2) + 'px').attr('dy', '1.2em').text(config.gauge_label_show ? $$.textForGaugeMinMax(config.gauge_max, true) : '');\n    }\n  };\n\n  ChartInternal.prototype.initGauge = function () {\n    var arcs = this.arcs;\n\n    if (this.hasType('gauge')) {\n      arcs.append('g').attr('class', CLASS.chartArcsBackground);\n      arcs.append('text').attr('class', CLASS.chartArcsGaugeUnit).style('text-anchor', 'middle').style('pointer-events', 'none');\n      arcs.append('text').attr('class', CLASS.chartArcsGaugeMin).style('text-anchor', 'middle').style('pointer-events', 'none');\n      arcs.append('text').attr('class', CLASS.chartArcsGaugeMax).style('text-anchor', 'middle').style('pointer-events', 'none');\n    }\n  };\n\n  ChartInternal.prototype.getGaugeLabelHeight = function () {\n    return this.config.gauge_label_show ? 20 : 0;\n  };\n  /**\n   * Store value into cache\n   *\n   * @param key\n   * @param value\n   */\n\n\n  ChartInternal.prototype.addToCache = function (key, value) {\n    this.cache[\"$\".concat(key)] = value;\n  };\n  /**\n   * Returns a cached value or undefined\n   *\n   * @param key\n   * @return {*}\n   */\n\n\n  ChartInternal.prototype.getFromCache = function (key) {\n    return this.cache[\"$\".concat(key)];\n  };\n  /**\n   * Reset cached data\n   */\n\n\n  ChartInternal.prototype.resetCache = function () {\n    var _this = this;\n\n    Object.keys(this.cache).filter(function (key) {\n      return /^\\$/.test(key);\n    }).forEach(function (key) {\n      delete _this.cache[key];\n    });\n  }; // Old API that stores Targets\n\n\n  ChartInternal.prototype.hasCaches = function (ids) {\n    for (var i = 0; i < ids.length; i++) {\n      if (!(ids[i] in this.cache)) {\n        return false;\n      }\n    }\n\n    return true;\n  };\n\n  ChartInternal.prototype.addCache = function (id, target) {\n    this.cache[id] = this.cloneTarget(target);\n  };\n\n  ChartInternal.prototype.getCaches = function (ids) {\n    var targets = [],\n        i;\n\n    for (i = 0; i < ids.length; i++) {\n      if (ids[i] in this.cache) {\n        targets.push(this.cloneTarget(this.cache[ids[i]]));\n      }\n    }\n\n    return targets;\n  };\n\n  ChartInternal.prototype.categoryName = function (i) {\n    var config = this.config;\n    return i < config.axis_x_categories.length ? config.axis_x_categories[i] : i;\n  };\n\n  ChartInternal.prototype.generateTargetClass = function (targetId) {\n    return targetId || targetId === 0 ? ('-' + targetId).replace(/\\s/g, '-') : '';\n  };\n\n  ChartInternal.prototype.generateClass = function (prefix, targetId) {\n    return ' ' + prefix + ' ' + prefix + this.generateTargetClass(targetId);\n  };\n\n  ChartInternal.prototype.classText = function (d) {\n    return this.generateClass(CLASS.text, d.index);\n  };\n\n  ChartInternal.prototype.classTexts = function (d) {\n    return this.generateClass(CLASS.texts, d.id);\n  };\n\n  ChartInternal.prototype.classShape = function (d) {\n    return this.generateClass(CLASS.shape, d.index);\n  };\n\n  ChartInternal.prototype.classShapes = function (d) {\n    return this.generateClass(CLASS.shapes, d.id);\n  };\n\n  ChartInternal.prototype.classLine = function (d) {\n    return this.classShape(d) + this.generateClass(CLASS.line, d.id);\n  };\n\n  ChartInternal.prototype.classLines = function (d) {\n    return this.classShapes(d) + this.generateClass(CLASS.lines, d.id);\n  };\n\n  ChartInternal.prototype.classCircle = function (d) {\n    return this.classShape(d) + this.generateClass(CLASS.circle, d.index);\n  };\n\n  ChartInternal.prototype.classCircles = function (d) {\n    return this.classShapes(d) + this.generateClass(CLASS.circles, d.id);\n  };\n\n  ChartInternal.prototype.classBar = function (d) {\n    return this.classShape(d) + this.generateClass(CLASS.bar, d.index);\n  };\n\n  ChartInternal.prototype.classBars = function (d) {\n    return this.classShapes(d) + this.generateClass(CLASS.bars, d.id);\n  };\n\n  ChartInternal.prototype.classArc = function (d) {\n    return this.classShape(d.data) + this.generateClass(CLASS.arc, d.data.id);\n  };\n\n  ChartInternal.prototype.classArcs = function (d) {\n    return this.classShapes(d.data) + this.generateClass(CLASS.arcs, d.data.id);\n  };\n\n  ChartInternal.prototype.classArea = function (d) {\n    return this.classShape(d) + this.generateClass(CLASS.area, d.id);\n  };\n\n  ChartInternal.prototype.classAreas = function (d) {\n    return this.classShapes(d) + this.generateClass(CLASS.areas, d.id);\n  };\n\n  ChartInternal.prototype.classRegion = function (d, i) {\n    return this.generateClass(CLASS.region, i) + ' ' + ('class' in d ? d['class'] : '');\n  };\n\n  ChartInternal.prototype.classEvent = function (d) {\n    return this.generateClass(CLASS.eventRect, d.index);\n  };\n\n  ChartInternal.prototype.classTarget = function (id) {\n    var $$ = this;\n    var additionalClassSuffix = $$.config.data_classes[id],\n        additionalClass = '';\n\n    if (additionalClassSuffix) {\n      additionalClass = ' ' + CLASS.target + '-' + additionalClassSuffix;\n    }\n\n    return $$.generateClass(CLASS.target, id) + additionalClass;\n  };\n\n  ChartInternal.prototype.classFocus = function (d) {\n    return this.classFocused(d) + this.classDefocused(d);\n  };\n\n  ChartInternal.prototype.classFocused = function (d) {\n    return ' ' + (this.focusedTargetIds.indexOf(d.id) >= 0 ? CLASS.focused : '');\n  };\n\n  ChartInternal.prototype.classDefocused = function (d) {\n    return ' ' + (this.defocusedTargetIds.indexOf(d.id) >= 0 ? CLASS.defocused : '');\n  };\n\n  ChartInternal.prototype.classChartText = function (d) {\n    return CLASS.chartText + this.classTarget(d.id);\n  };\n\n  ChartInternal.prototype.classChartLine = function (d) {\n    return CLASS.chartLine + this.classTarget(d.id);\n  };\n\n  ChartInternal.prototype.classChartBar = function (d) {\n    return CLASS.chartBar + this.classTarget(d.id);\n  };\n\n  ChartInternal.prototype.classChartArc = function (d) {\n    return CLASS.chartArc + this.classTarget(d.data.id);\n  };\n\n  ChartInternal.prototype.getTargetSelectorSuffix = function (targetId) {\n    var targetClass = this.generateTargetClass(targetId);\n\n    if (window.CSS && window.CSS.escape) {\n      return window.CSS.escape(targetClass);\n    } // fallback on imperfect method for old browsers (does not handles unicode)\n\n\n    return targetClass.replace(/([?!@#$%^&*()=+,.<>'\":;\\[\\]\\/|~`{}\\\\])/g, '\\\\$1');\n  };\n\n  ChartInternal.prototype.selectorTarget = function (id, prefix) {\n    return (prefix || '') + '.' + CLASS.target + this.getTargetSelectorSuffix(id);\n  };\n\n  ChartInternal.prototype.selectorTargets = function (ids, prefix) {\n    var $$ = this;\n    ids = ids || [];\n    return ids.length ? ids.map(function (id) {\n      return $$.selectorTarget(id, prefix);\n    }) : null;\n  };\n\n  ChartInternal.prototype.selectorLegend = function (id) {\n    return '.' + CLASS.legendItem + this.getTargetSelectorSuffix(id);\n  };\n\n  ChartInternal.prototype.selectorLegends = function (ids) {\n    var $$ = this;\n    return ids && ids.length ? ids.map(function (id) {\n      return $$.selectorLegend(id);\n    }) : null;\n  };\n\n  ChartInternal.prototype.getClipPath = function (id) {\n    return 'url(' + (isIE(9) ? '' : document.URL.split('#')[0]) + '#' + id + ')';\n  };\n\n  ChartInternal.prototype.appendClip = function (parent, id) {\n    return parent.append('clipPath').attr('id', id).append('rect');\n  };\n\n  ChartInternal.prototype.getAxisClipX = function (forHorizontal) {\n    // axis line width + padding for left\n    var left = Math.max(30, this.margin.left);\n    return forHorizontal ? -(1 + left) : -(left - 1);\n  };\n\n  ChartInternal.prototype.getAxisClipY = function (forHorizontal) {\n    return forHorizontal ? -20 : -this.margin.top;\n  };\n\n  ChartInternal.prototype.getXAxisClipX = function () {\n    var $$ = this;\n    return $$.getAxisClipX(!$$.config.axis_rotated);\n  };\n\n  ChartInternal.prototype.getXAxisClipY = function () {\n    var $$ = this;\n    return $$.getAxisClipY(!$$.config.axis_rotated);\n  };\n\n  ChartInternal.prototype.getYAxisClipX = function () {\n    var $$ = this;\n    return $$.config.axis_y_inner ? -1 : $$.getAxisClipX($$.config.axis_rotated);\n  };\n\n  ChartInternal.prototype.getYAxisClipY = function () {\n    var $$ = this;\n    return $$.getAxisClipY($$.config.axis_rotated);\n  };\n\n  ChartInternal.prototype.getAxisClipWidth = function (forHorizontal) {\n    var $$ = this,\n        left = Math.max(30, $$.margin.left),\n        right = Math.max(30, $$.margin.right); // width + axis line width + padding for left/right\n\n    return forHorizontal ? $$.width + 2 + left + right : $$.margin.left + 20;\n  };\n\n  ChartInternal.prototype.getAxisClipHeight = function (forHorizontal) {\n    // less than 20 is not enough to show the axis label 'outer' without legend\n    return (forHorizontal ? this.margin.bottom : this.margin.top + this.height) + 20;\n  };\n\n  ChartInternal.prototype.getXAxisClipWidth = function () {\n    var $$ = this;\n    return $$.getAxisClipWidth(!$$.config.axis_rotated);\n  };\n\n  ChartInternal.prototype.getXAxisClipHeight = function () {\n    var $$ = this;\n    return $$.getAxisClipHeight(!$$.config.axis_rotated);\n  };\n\n  ChartInternal.prototype.getYAxisClipWidth = function () {\n    var $$ = this;\n    return $$.getAxisClipWidth($$.config.axis_rotated) + ($$.config.axis_y_inner ? 20 : 0);\n  };\n\n  ChartInternal.prototype.getYAxisClipHeight = function () {\n    var $$ = this;\n    return $$.getAxisClipHeight($$.config.axis_rotated);\n  };\n\n  ChartInternal.prototype.generateColor = function () {\n    var $$ = this,\n        config = $$.config,\n        d3 = $$.d3,\n        colors = config.data_colors,\n        pattern = notEmpty(config.color_pattern) ? config.color_pattern : d3.schemeCategory10,\n        callback = config.data_color,\n        ids = [];\n    return function (d) {\n      var id = d.id || d.data && d.data.id || d,\n          color; // if callback function is provided\n\n      if (colors[id] instanceof Function) {\n        color = colors[id](d);\n      } // if specified, choose that color\n      else if (colors[id]) {\n          color = colors[id];\n        } // if not specified, choose from pattern\n        else {\n            if (ids.indexOf(id) < 0) {\n              ids.push(id);\n            }\n\n            color = pattern[ids.indexOf(id) % pattern.length];\n            colors[id] = color;\n          }\n\n      return callback instanceof Function ? callback(color, d) : color;\n    };\n  };\n\n  ChartInternal.prototype.generateLevelColor = function () {\n    var $$ = this,\n        config = $$.config,\n        colors = config.color_pattern,\n        threshold = config.color_threshold,\n        asValue = threshold.unit === 'value',\n        values = threshold.values && threshold.values.length ? threshold.values : [],\n        max = threshold.max || 100;\n    return notEmpty(threshold) && notEmpty(colors) ? function (value) {\n      var i,\n          v,\n          color = colors[colors.length - 1];\n\n      for (i = 0; i < values.length; i++) {\n        v = asValue ? value : value * 100 / max;\n\n        if (v < values[i]) {\n          color = colors[i];\n          break;\n        }\n      }\n\n      return color;\n    } : null;\n  };\n\n  ChartInternal.prototype.getDefaultConfig = function () {\n    var config = {\n      bindto: '#chart',\n      svg_classname: undefined,\n      size_width: undefined,\n      size_height: undefined,\n      padding_left: undefined,\n      padding_right: undefined,\n      padding_top: undefined,\n      padding_bottom: undefined,\n      resize_auto: true,\n      zoom_enabled: false,\n      zoom_initialRange: undefined,\n      zoom_type: 'scroll',\n      zoom_disableDefaultBehavior: false,\n      zoom_privileged: false,\n      zoom_rescale: false,\n      zoom_onzoom: function zoom_onzoom() {},\n      zoom_onzoomstart: function zoom_onzoomstart() {},\n      zoom_onzoomend: function zoom_onzoomend() {},\n      zoom_x_min: undefined,\n      zoom_x_max: undefined,\n      interaction_brighten: true,\n      interaction_enabled: true,\n      onmouseover: function onmouseover() {},\n      onmouseout: function onmouseout() {},\n      onresize: function onresize() {},\n      onresized: function onresized() {},\n      oninit: function oninit() {},\n      onrendered: function onrendered() {},\n      transition_duration: 350,\n      data_epochs: 'epochs',\n      data_x: undefined,\n      data_xs: {},\n      data_xFormat: '%Y-%m-%d',\n      data_xLocaltime: true,\n      data_xSort: true,\n      data_idConverter: function data_idConverter(id) {\n        return id;\n      },\n      data_names: {},\n      data_classes: {},\n      data_groups: [],\n      data_axes: {},\n      data_type: undefined,\n      data_types: {},\n      data_labels: {},\n      data_order: 'desc',\n      data_regions: {},\n      data_color: undefined,\n      data_colors: {},\n      data_hide: false,\n      data_filter: undefined,\n      data_selection_enabled: false,\n      data_selection_grouped: false,\n      data_selection_isselectable: function data_selection_isselectable() {\n        return true;\n      },\n      data_selection_multiple: true,\n      data_selection_draggable: false,\n      data_stack_normalize: false,\n      data_onclick: function data_onclick() {},\n      data_onmouseover: function data_onmouseover() {},\n      data_onmouseout: function data_onmouseout() {},\n      data_onselected: function data_onselected() {},\n      data_onunselected: function data_onunselected() {},\n      data_url: undefined,\n      data_headers: undefined,\n      data_json: undefined,\n      data_rows: undefined,\n      data_columns: undefined,\n      data_mimeType: undefined,\n      data_keys: undefined,\n      // configuration for no plot-able data supplied.\n      data_empty_label_text: '',\n      // subchart\n      subchart_show: false,\n      subchart_size_height: 60,\n      subchart_axis_x_show: true,\n      subchart_onbrush: function subchart_onbrush() {},\n      // color\n      color_pattern: [],\n      color_threshold: {},\n      // legend\n      legend_show: true,\n      legend_hide: false,\n      legend_position: 'bottom',\n      legend_inset_anchor: 'top-left',\n      legend_inset_x: 10,\n      legend_inset_y: 0,\n      legend_inset_step: undefined,\n      legend_item_onclick: undefined,\n      legend_item_onmouseover: undefined,\n      legend_item_onmouseout: undefined,\n      legend_equally: false,\n      legend_padding: 0,\n      legend_item_tile_width: 10,\n      legend_item_tile_height: 10,\n      // axis\n      axis_rotated: false,\n      axis_x_show: true,\n      axis_x_type: 'indexed',\n      axis_x_localtime: true,\n      axis_x_categories: [],\n      axis_x_tick_centered: false,\n      axis_x_tick_format: undefined,\n      axis_x_tick_culling: {},\n      axis_x_tick_culling_max: 10,\n      axis_x_tick_count: undefined,\n      axis_x_tick_fit: true,\n      axis_x_tick_values: null,\n      axis_x_tick_rotate: 0,\n      axis_x_tick_outer: true,\n      axis_x_tick_multiline: true,\n      axis_x_tick_multilineMax: 0,\n      axis_x_tick_width: null,\n      axis_x_max: undefined,\n      axis_x_min: undefined,\n      axis_x_padding: {},\n      axis_x_height: undefined,\n      axis_x_selection: undefined,\n      axis_x_label: {},\n      axis_x_inner: undefined,\n      axis_y_show: true,\n      axis_y_type: 'linear',\n      axis_y_max: undefined,\n      axis_y_min: undefined,\n      axis_y_inverted: false,\n      axis_y_center: undefined,\n      axis_y_inner: undefined,\n      axis_y_label: {},\n      axis_y_tick_format: undefined,\n      axis_y_tick_outer: true,\n      axis_y_tick_values: null,\n      axis_y_tick_rotate: 0,\n      axis_y_tick_count: undefined,\n      axis_y_tick_time_type: undefined,\n      axis_y_tick_time_interval: undefined,\n      axis_y_padding: {},\n      axis_y_default: undefined,\n      axis_y2_show: false,\n      axis_y2_type: 'linear',\n      axis_y2_max: undefined,\n      axis_y2_min: undefined,\n      axis_y2_inverted: false,\n      axis_y2_center: undefined,\n      axis_y2_inner: undefined,\n      axis_y2_label: {},\n      axis_y2_tick_format: undefined,\n      axis_y2_tick_outer: true,\n      axis_y2_tick_values: null,\n      axis_y2_tick_count: undefined,\n      axis_y2_padding: {},\n      axis_y2_default: undefined,\n      // grid\n      grid_x_show: false,\n      grid_x_type: 'tick',\n      grid_x_lines: [],\n      grid_y_show: false,\n      // not used\n      // grid_y_type: 'tick',\n      grid_y_lines: [],\n      grid_y_ticks: 10,\n      grid_focus_show: true,\n      grid_lines_front: true,\n      // point - point of each data\n      point_show: true,\n      point_r: 2.5,\n      point_sensitivity: 10,\n      point_focus_expand_enabled: true,\n      point_focus_expand_r: undefined,\n      point_select_r: undefined,\n      // line\n      line_connectNull: false,\n      line_step_type: 'step',\n      // bar\n      bar_width: undefined,\n      bar_width_ratio: 0.6,\n      bar_width_max: undefined,\n      bar_zerobased: true,\n      bar_space: 0,\n      // area\n      area_zerobased: true,\n      area_above: false,\n      // pie\n      pie_label_show: true,\n      pie_label_format: undefined,\n      pie_label_threshold: 0.05,\n      pie_label_ratio: undefined,\n      pie_expand: {},\n      pie_expand_duration: 50,\n      pie_padAngle: 0,\n      // gauge\n      gauge_fullCircle: false,\n      gauge_label_show: true,\n      gauge_labelLine_show: true,\n      gauge_label_format: undefined,\n      gauge_min: 0,\n      gauge_max: 100,\n      gauge_startingAngle: -1 * Math.PI / 2,\n      gauge_label_extents: undefined,\n      gauge_units: undefined,\n      gauge_width: undefined,\n      gauge_arcs_minWidth: 5,\n      gauge_expand: {},\n      gauge_expand_duration: 50,\n      // donut\n      donut_label_show: true,\n      donut_label_format: undefined,\n      donut_label_threshold: 0.05,\n      donut_label_ratio: undefined,\n      donut_width: undefined,\n      donut_title: '',\n      donut_expand: {},\n      donut_expand_duration: 50,\n      donut_padAngle: 0,\n      // spline\n      spline_interpolation_type: 'cardinal',\n      // stanford\n      stanford_lines: [],\n      stanford_regions: [],\n      stanford_texts: [],\n      stanford_scaleMin: undefined,\n      stanford_scaleMax: undefined,\n      stanford_scaleWidth: undefined,\n      stanford_scaleFormat: undefined,\n      stanford_scaleValues: undefined,\n      stanford_colors: undefined,\n      stanford_padding: {\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0\n      },\n      // region - region to change style\n      regions: [],\n      // tooltip - show when mouseover on each data\n      tooltip_show: true,\n      tooltip_grouped: true,\n      tooltip_order: undefined,\n      tooltip_format_title: undefined,\n      tooltip_format_name: undefined,\n      tooltip_format_value: undefined,\n      tooltip_horizontal: undefined,\n      tooltip_position: undefined,\n      tooltip_contents: function tooltip_contents(d, defaultTitleFormat, defaultValueFormat, color) {\n        return this.getTooltipContent ? this.getTooltipContent(d, defaultTitleFormat, defaultValueFormat, color) : '';\n      },\n      tooltip_init_show: false,\n      tooltip_init_x: 0,\n      tooltip_init_position: {\n        top: '0px',\n        left: '50px'\n      },\n      tooltip_onshow: function tooltip_onshow() {},\n      tooltip_onhide: function tooltip_onhide() {},\n      // title\n      title_text: undefined,\n      title_padding: {\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0\n      },\n      title_position: 'top-center'\n    };\n    Object.keys(this.additionalConfig).forEach(function (key) {\n      config[key] = this.additionalConfig[key];\n    }, this);\n    return config;\n  };\n\n  ChartInternal.prototype.additionalConfig = {};\n\n  ChartInternal.prototype.loadConfig = function (config) {\n    var this_config = this.config,\n        target,\n        keys,\n        read;\n\n    function find() {\n      var key = keys.shift(); //        console.log(\"key =>\", key, \", target =>\", target);\n\n      if (key && target && _typeof(target) === 'object' && key in target) {\n        target = target[key];\n        return find();\n      } else if (!key) {\n        return target;\n      } else {\n        return undefined;\n      }\n    }\n\n    Object.keys(this_config).forEach(function (key) {\n      target = config;\n      keys = key.split('_');\n      read = find(); //        console.log(\"CONFIG : \", key, read);\n\n      if (isDefined(read)) {\n        this_config[key] = read;\n      }\n    });\n  };\n\n  ChartInternal.prototype.convertUrlToData = function (url, mimeType, headers, keys, done) {\n    var $$ = this,\n        type = mimeType ? mimeType : 'csv',\n        f,\n        converter;\n\n    if (type === 'json') {\n      f = $$.d3.json;\n      converter = $$.convertJsonToData;\n    } else if (type === 'tsv') {\n      f = $$.d3.tsv;\n      converter = $$.convertXsvToData;\n    } else {\n      f = $$.d3.csv;\n      converter = $$.convertXsvToData;\n    }\n\n    f(url, headers).then(function (data) {\n      done.call($$, converter.call($$, data, keys));\n    })[\"catch\"](function (error) {\n      throw error;\n    });\n  };\n\n  ChartInternal.prototype.convertXsvToData = function (xsv) {\n    var keys = xsv.columns,\n        rows = xsv;\n\n    if (rows.length === 0) {\n      return {\n        keys: keys,\n        rows: [keys.reduce(function (row, key) {\n          return Object.assign(row, _defineProperty({}, key, null));\n        }, {})]\n      };\n    } else {\n      // [].concat() is to convert result into a plain array otherwise\n      // test is not happy because rows have properties.\n      return {\n        keys: keys,\n        rows: [].concat(xsv)\n      };\n    }\n  };\n\n  ChartInternal.prototype.convertJsonToData = function (json, keys) {\n    var $$ = this,\n        new_rows = [],\n        targetKeys,\n        data;\n\n    if (keys) {\n      // when keys specified, json would be an array that includes objects\n      if (keys.x) {\n        targetKeys = keys.value.concat(keys.x);\n        $$.config.data_x = keys.x;\n      } else {\n        targetKeys = keys.value;\n      }\n\n      new_rows.push(targetKeys);\n      json.forEach(function (o) {\n        var new_row = [];\n        targetKeys.forEach(function (key) {\n          // convert undefined to null because undefined data will be removed in convertDataToTargets()\n          var v = $$.findValueInJson(o, key);\n\n          if (isUndefined(v)) {\n            v = null;\n          }\n\n          new_row.push(v);\n        });\n        new_rows.push(new_row);\n      });\n      data = $$.convertRowsToData(new_rows);\n    } else {\n      Object.keys(json).forEach(function (key) {\n        new_rows.push([key].concat(json[key]));\n      });\n      data = $$.convertColumnsToData(new_rows);\n    }\n\n    return data;\n  };\n  /**\n   * Finds value from the given nested object by the given path.\n   * If it's not found, then this returns undefined.\n   * @param {Object} object the object\n   * @param {string} path the path\n   */\n\n\n  ChartInternal.prototype.findValueInJson = function (object, path) {\n    if (path in object) {\n      // If object has a key that contains . or [], return the key's value\n      // instead of searching for an inner object.\n      // See https://github.com/c3js/c3/issues/1691 for details.\n      return object[path];\n    }\n\n    path = path.replace(/\\[(\\w+)\\]/g, '.$1'); // convert indexes to properties (replace [] with .)\n\n    path = path.replace(/^\\./, ''); // strip a leading dot\n\n    var pathArray = path.split('.');\n\n    for (var i = 0; i < pathArray.length; ++i) {\n      var k = pathArray[i];\n\n      if (k in object) {\n        object = object[k];\n      } else {\n        return;\n      }\n    }\n\n    return object;\n  };\n  /**\n   * Converts the rows to normalized data.\n   * @param {any[][]} rows The row data\n   * @return {Object}\n   */\n\n\n  ChartInternal.prototype.convertRowsToData = function (rows) {\n    var newRows = [];\n    var keys = rows[0];\n\n    for (var i = 1; i < rows.length; i++) {\n      var newRow = {};\n\n      for (var j = 0; j < rows[i].length; j++) {\n        if (isUndefined(rows[i][j])) {\n          throw new Error('Source data is missing a component at (' + i + ',' + j + ')!');\n        }\n\n        newRow[keys[j]] = rows[i][j];\n      }\n\n      newRows.push(newRow);\n    }\n\n    return {\n      keys: keys,\n      rows: newRows\n    };\n  };\n  /**\n   * Converts the columns to normalized data.\n   * @param {any[][]} columns The column data\n   * @return {Object}\n   */\n\n\n  ChartInternal.prototype.convertColumnsToData = function (columns) {\n    var newRows = [];\n    var keys = [];\n\n    for (var i = 0; i < columns.length; i++) {\n      var key = columns[i][0];\n\n      for (var j = 1; j < columns[i].length; j++) {\n        if (isUndefined(newRows[j - 1])) {\n          newRows[j - 1] = {};\n        }\n\n        if (isUndefined(columns[i][j])) {\n          throw new Error('Source data is missing a component at (' + i + ',' + j + ')!');\n        }\n\n        newRows[j - 1][key] = columns[i][j];\n      }\n\n      keys.push(key);\n    }\n\n    return {\n      keys: keys,\n      rows: newRows\n    };\n  };\n  /**\n   * Converts the data format into the target format.\n   * @param {!Object} data\n   * @param {!Array} data.keys Ordered list of target IDs.\n   * @param {!Array} data.rows Rows of data to convert.\n   * @param {boolean} appendXs True to append to $$.data.xs, False to replace.\n   * @return {!Array}\n   */\n\n\n  ChartInternal.prototype.convertDataToTargets = function (data, appendXs) {\n    var $$ = this,\n        config = $$.config,\n        targets,\n        ids,\n        xs,\n        keys,\n        epochs; // handles format where keys are not orderly provided\n\n    if (isArray(data)) {\n      keys = Object.keys(data[0]);\n    } else {\n      keys = data.keys;\n      data = data.rows;\n    }\n\n    xs = keys.filter($$.isX, $$);\n\n    if (!$$.isStanfordGraphType()) {\n      ids = keys.filter($$.isNotX, $$);\n    } else {\n      epochs = keys.filter($$.isEpochs, $$);\n      ids = keys.filter($$.isNotXAndNotEpochs, $$);\n\n      if (xs.length !== 1 || epochs.length !== 1 || ids.length !== 1) {\n        throw new Error(\"You must define the 'x' key name and the 'epochs' for Stanford Diagrams\");\n      }\n    } // save x for update data by load when custom x and c3.x API\n\n\n    ids.forEach(function (id) {\n      var xKey = $$.getXKey(id);\n\n      if ($$.isCustomX() || $$.isTimeSeries()) {\n        // if included in input data\n        if (xs.indexOf(xKey) >= 0) {\n          $$.data.xs[id] = (appendXs && $$.data.xs[id] ? $$.data.xs[id] : []).concat(data.map(function (d) {\n            return d[xKey];\n          }).filter(isValue).map(function (rawX, i) {\n            return $$.generateTargetX(rawX, id, i);\n          }));\n        } // if not included in input data, find from preloaded data of other id's x\n        else if (config.data_x) {\n            $$.data.xs[id] = $$.getOtherTargetXs();\n          } // if not included in input data, find from preloaded data\n          else if (notEmpty(config.data_xs)) {\n              $$.data.xs[id] = $$.getXValuesOfXKey(xKey, $$.data.targets);\n            } // MEMO: if no x included, use same x of current will be used\n\n      } else {\n        $$.data.xs[id] = data.map(function (d, i) {\n          return i;\n        });\n      }\n    }); // check x is defined\n\n    ids.forEach(function (id) {\n      if (!$$.data.xs[id]) {\n        throw new Error('x is not defined for id = \"' + id + '\".');\n      }\n    }); // convert to target\n\n    targets = ids.map(function (id, index) {\n      var convertedId = config.data_idConverter(id);\n      return {\n        id: convertedId,\n        id_org: id,\n        values: data.map(function (d, i) {\n          var xKey = $$.getXKey(id),\n              rawX = d[xKey],\n              value = d[id] !== null && !isNaN(d[id]) ? +d[id] : null,\n              x,\n              returnData; // use x as categories if custom x and categorized\n\n          if ($$.isCustomX() && $$.isCategorized() && !isUndefined(rawX)) {\n            if (index === 0 && i === 0) {\n              config.axis_x_categories = [];\n            }\n\n            x = config.axis_x_categories.indexOf(rawX);\n\n            if (x === -1) {\n              x = config.axis_x_categories.length;\n              config.axis_x_categories.push(rawX);\n            }\n          } else {\n            x = $$.generateTargetX(rawX, id, i);\n          } // mark as x = undefined if value is undefined and filter to remove after mapped\n\n\n          if (isUndefined(d[id]) || $$.data.xs[id].length <= i) {\n            x = undefined;\n          }\n\n          returnData = {\n            x: x,\n            value: value,\n            id: convertedId\n          };\n\n          if ($$.isStanfordGraphType()) {\n            returnData.epochs = d[epochs];\n          }\n\n          return returnData;\n        }).filter(function (v) {\n          return isDefined(v.x);\n        })\n      };\n    }); // finish targets\n\n    targets.forEach(function (t) {\n      var i; // sort values by its x\n\n      if (config.data_xSort) {\n        t.values = t.values.sort(function (v1, v2) {\n          var x1 = v1.x || v1.x === 0 ? v1.x : Infinity,\n              x2 = v2.x || v2.x === 0 ? v2.x : Infinity;\n          return x1 - x2;\n        });\n      } // indexing each value\n\n\n      i = 0;\n      t.values.forEach(function (v) {\n        v.index = i++;\n      }); // this needs to be sorted because its index and value.index is identical\n\n      $$.data.xs[t.id].sort(function (v1, v2) {\n        return v1 - v2;\n      });\n    }); // cache information about values\n\n    $$.hasNegativeValue = $$.hasNegativeValueInTargets(targets);\n    $$.hasPositiveValue = $$.hasPositiveValueInTargets(targets); // set target types\n\n    if (config.data_type) {\n      $$.setTargetType($$.mapToIds(targets).filter(function (id) {\n        return !(id in config.data_types);\n      }), config.data_type);\n    } // cache as original id keyed\n\n\n    targets.forEach(function (d) {\n      $$.addCache(d.id_org, d);\n    });\n    return targets;\n  };\n\n  ChartInternal.prototype.isEpochs = function (key) {\n    var $$ = this,\n        config = $$.config;\n    return config.data_epochs && key === config.data_epochs;\n  };\n\n  ChartInternal.prototype.isX = function (key) {\n    var $$ = this,\n        config = $$.config;\n    return config.data_x && key === config.data_x || notEmpty(config.data_xs) && hasValue(config.data_xs, key);\n  };\n\n  ChartInternal.prototype.isNotX = function (key) {\n    return !this.isX(key);\n  };\n\n  ChartInternal.prototype.isNotXAndNotEpochs = function (key) {\n    return !this.isX(key) && !this.isEpochs(key);\n  };\n  /**\n   * Returns whether the normalized stack option is enabled or not.\n   *\n   * To be enabled it must also have data.groups defined.\n   *\n   * @return {boolean}\n   */\n\n\n  ChartInternal.prototype.isStackNormalized = function () {\n    return this.config.data_stack_normalize && this.config.data_groups.length > 0;\n  };\n  /**\n   * Returns whether the axis is normalized or not.\n   *\n   * An axis is normalized as long as one of its associated target\n   * is normalized.\n   *\n   * @param axisId Axis ID (y or y2)\n   * @return {Boolean}\n   */\n\n\n  ChartInternal.prototype.isAxisNormalized = function (axisId) {\n    var $$ = this;\n\n    if (!$$.isStackNormalized()) {\n      // shortcut\n      return false;\n    }\n\n    return $$.data.targets.filter(function (target) {\n      return $$.axis.getId(target.id) === axisId;\n    }).some(function (target) {\n      return $$.isTargetNormalized(target.id);\n    });\n  };\n  /**\n   * Returns whether the values for this target ID is normalized or not.\n   *\n   * To be normalized the option needs to be enabled and target needs\n   * to be defined in `data.groups`.\n   *\n   * @param targetId ID of the target\n   * @return {Boolean} True if the target is normalized, false otherwise.\n   */\n\n\n  ChartInternal.prototype.isTargetNormalized = function (targetId) {\n    var $$ = this;\n    return $$.isStackNormalized() && $$.config.data_groups.some(function (group) {\n      return group.includes(targetId);\n    });\n  };\n\n  ChartInternal.prototype.getXKey = function (id) {\n    var $$ = this,\n        config = $$.config;\n    return config.data_x ? config.data_x : notEmpty(config.data_xs) ? config.data_xs[id] : null;\n  };\n  /**\n   * Get sum of visible data per index for given axis.\n   *\n   * Expect axisId to be either 'y' or 'y2'.\n   *\n   * @private\n   * @param axisId Compute sum for data associated to given axis.\n   * @return {Array}\n   */\n\n\n  ChartInternal.prototype.getTotalPerIndex = function (axisId) {\n    var $$ = this;\n\n    if (!$$.isStackNormalized()) {\n      return null;\n    }\n\n    var cached = $$.getFromCache('getTotalPerIndex');\n\n    if (cached !== undefined) {\n      return cached[axisId];\n    }\n\n    var sum = {\n      y: [],\n      y2: []\n    };\n    $$.data.targets // keep only target that are normalized\n    .filter(function (target) {\n      return $$.isTargetNormalized(target.id);\n    }) // keep only target that are visible\n    .filter(function (target) {\n      return $$.isTargetToShow(target.id);\n    }) // compute sum per axis\n    .forEach(function (target) {\n      var sumByAxis = sum[$$.axis.getId(target.id)];\n      target.values.forEach(function (v, i) {\n        if (!sumByAxis[i]) {\n          sumByAxis[i] = 0;\n        }\n\n        sumByAxis[i] += isNumber(v.value) ? v.value : 0;\n      });\n    });\n    $$.addToCache('getTotalPerIndex', sum);\n    return sum[axisId];\n  };\n  /**\n   * Get sum of visible data.\n   *\n   * Should be used for normalised data only since all values\n   * are expected to be positive.\n   *\n   * @private\n   * @return {Number}\n   */\n\n\n  ChartInternal.prototype.getTotalDataSum = function () {\n    var $$ = this;\n    var cached = $$.getFromCache('getTotalDataSum');\n\n    if (cached !== undefined) {\n      return cached;\n    }\n\n    var totalDataSum = flattenArray($$.data.targets.filter(function (target) {\n      return $$.isTargetToShow(target.id);\n    }).map(function (target) {\n      return target.values;\n    })).map(function (d) {\n      return d.value;\n    }).reduce(function (p, c) {\n      return p + c;\n    }, 0);\n    $$.addToCache('getTotalDataSum', totalDataSum);\n    return totalDataSum;\n  };\n\n  ChartInternal.prototype.getXValuesOfXKey = function (key, targets) {\n    var $$ = this,\n        xValues,\n        ids = targets && notEmpty(targets) ? $$.mapToIds(targets) : [];\n    ids.forEach(function (id) {\n      if ($$.getXKey(id) === key) {\n        xValues = $$.data.xs[id];\n      }\n    });\n    return xValues;\n  };\n\n  ChartInternal.prototype.getXValue = function (id, i) {\n    var $$ = this;\n    return id in $$.data.xs && $$.data.xs[id] && isValue($$.data.xs[id][i]) ? $$.data.xs[id][i] : i;\n  };\n\n  ChartInternal.prototype.getOtherTargetXs = function () {\n    var $$ = this,\n        idsForX = Object.keys($$.data.xs);\n    return idsForX.length ? $$.data.xs[idsForX[0]] : null;\n  };\n\n  ChartInternal.prototype.getOtherTargetX = function (index) {\n    var xs = this.getOtherTargetXs();\n    return xs && index < xs.length ? xs[index] : null;\n  };\n\n  ChartInternal.prototype.addXs = function (xs) {\n    var $$ = this;\n    Object.keys(xs).forEach(function (id) {\n      $$.config.data_xs[id] = xs[id];\n    });\n  };\n\n  ChartInternal.prototype.addName = function (data) {\n    var $$ = this,\n        name;\n\n    if (data) {\n      name = $$.config.data_names[data.id];\n      data.name = name !== undefined ? name : data.id;\n    }\n\n    return data;\n  };\n\n  ChartInternal.prototype.getValueOnIndex = function (values, index) {\n    var valueOnIndex = values.filter(function (v) {\n      return v.index === index;\n    });\n    return valueOnIndex.length ? valueOnIndex[0] : null;\n  };\n\n  ChartInternal.prototype.updateTargetX = function (targets, x) {\n    var $$ = this;\n    targets.forEach(function (t) {\n      t.values.forEach(function (v, i) {\n        v.x = $$.generateTargetX(x[i], t.id, i);\n      });\n      $$.data.xs[t.id] = x;\n    });\n  };\n\n  ChartInternal.prototype.updateTargetXs = function (targets, xs) {\n    var $$ = this;\n    targets.forEach(function (t) {\n      if (xs[t.id]) {\n        $$.updateTargetX([t], xs[t.id]);\n      }\n    });\n  };\n\n  ChartInternal.prototype.generateTargetX = function (rawX, id, index) {\n    var $$ = this,\n        x;\n\n    if ($$.isTimeSeries()) {\n      x = rawX ? $$.parseDate(rawX) : $$.parseDate($$.getXValue(id, index));\n    } else if ($$.isCustomX() && !$$.isCategorized()) {\n      x = isValue(rawX) ? +rawX : $$.getXValue(id, index);\n    } else {\n      x = index;\n    }\n\n    return x;\n  };\n\n  ChartInternal.prototype.cloneTarget = function (target) {\n    return {\n      id: target.id,\n      id_org: target.id_org,\n      values: target.values.map(function (d) {\n        return {\n          x: d.x,\n          value: d.value,\n          id: d.id\n        };\n      })\n    };\n  };\n\n  ChartInternal.prototype.getMaxDataCount = function () {\n    var $$ = this;\n    return $$.d3.max($$.data.targets, function (t) {\n      return t.values.length;\n    });\n  };\n\n  ChartInternal.prototype.mapToIds = function (targets) {\n    return targets.map(function (d) {\n      return d.id;\n    });\n  };\n\n  ChartInternal.prototype.mapToTargetIds = function (ids) {\n    var $$ = this;\n    return ids ? [].concat(ids) : $$.mapToIds($$.data.targets);\n  };\n\n  ChartInternal.prototype.hasTarget = function (targets, id) {\n    var ids = this.mapToIds(targets),\n        i;\n\n    for (i = 0; i < ids.length; i++) {\n      if (ids[i] === id) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  ChartInternal.prototype.isTargetToShow = function (targetId) {\n    return this.hiddenTargetIds.indexOf(targetId) < 0;\n  };\n\n  ChartInternal.prototype.isLegendToShow = function (targetId) {\n    return this.hiddenLegendIds.indexOf(targetId) < 0;\n  };\n  /**\n   * Returns only visible targets.\n   *\n   * This is the same as calling {@link filterTargetsToShow} on $$.data.targets.\n   *\n   * @return {Array}\n   */\n\n\n  ChartInternal.prototype.getTargetsToShow = function () {\n    var $$ = this;\n    return $$.filterTargetsToShow($$.data.targets);\n  };\n\n  ChartInternal.prototype.filterTargetsToShow = function (targets) {\n    var $$ = this;\n    return targets.filter(function (t) {\n      return $$.isTargetToShow(t.id);\n    });\n  };\n  /**\n   * @return {Array} Returns all the targets attached to the chart, visible or not\n   */\n\n\n  ChartInternal.prototype.getTargets = function () {\n    var $$ = this;\n    return $$.data.targets;\n  };\n\n  ChartInternal.prototype.mapTargetsToUniqueXs = function (targets) {\n    var $$ = this;\n    var xs = $$.d3.set($$.d3.merge(targets.map(function (t) {\n      return t.values.map(function (v) {\n        return +v.x;\n      });\n    }))).values();\n    xs = $$.isTimeSeries() ? xs.map(function (x) {\n      return new Date(+x);\n    }) : xs.map(function (x) {\n      return +x;\n    });\n    return xs.sort(function (a, b) {\n      return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n    });\n  };\n\n  ChartInternal.prototype.addHiddenTargetIds = function (targetIds) {\n    targetIds = targetIds instanceof Array ? targetIds : new Array(targetIds);\n\n    for (var i = 0; i < targetIds.length; i++) {\n      if (this.hiddenTargetIds.indexOf(targetIds[i]) < 0) {\n        this.hiddenTargetIds = this.hiddenTargetIds.concat(targetIds[i]);\n      }\n    }\n\n    this.resetCache();\n  };\n\n  ChartInternal.prototype.removeHiddenTargetIds = function (targetIds) {\n    this.hiddenTargetIds = this.hiddenTargetIds.filter(function (id) {\n      return targetIds.indexOf(id) < 0;\n    });\n    this.resetCache();\n  };\n\n  ChartInternal.prototype.addHiddenLegendIds = function (targetIds) {\n    targetIds = targetIds instanceof Array ? targetIds : new Array(targetIds);\n\n    for (var i = 0; i < targetIds.length; i++) {\n      if (this.hiddenLegendIds.indexOf(targetIds[i]) < 0) {\n        this.hiddenLegendIds = this.hiddenLegendIds.concat(targetIds[i]);\n      }\n    }\n  };\n\n  ChartInternal.prototype.removeHiddenLegendIds = function (targetIds) {\n    this.hiddenLegendIds = this.hiddenLegendIds.filter(function (id) {\n      return targetIds.indexOf(id) < 0;\n    });\n  };\n\n  ChartInternal.prototype.getValuesAsIdKeyed = function (targets) {\n    var ys = {};\n    targets.forEach(function (t) {\n      ys[t.id] = [];\n      t.values.forEach(function (v) {\n        ys[t.id].push(v.value);\n      });\n    });\n    return ys;\n  };\n\n  ChartInternal.prototype.checkValueInTargets = function (targets, checker) {\n    var ids = Object.keys(targets),\n        i,\n        j,\n        values;\n\n    for (i = 0; i < ids.length; i++) {\n      values = targets[ids[i]].values;\n\n      for (j = 0; j < values.length; j++) {\n        if (checker(values[j].value)) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  };\n\n  ChartInternal.prototype.hasNegativeValueInTargets = function (targets) {\n    return this.checkValueInTargets(targets, function (v) {\n      return v < 0;\n    });\n  };\n\n  ChartInternal.prototype.hasPositiveValueInTargets = function (targets) {\n    return this.checkValueInTargets(targets, function (v) {\n      return v > 0;\n    });\n  };\n\n  ChartInternal.prototype.isOrderDesc = function () {\n    var config = this.config;\n    return typeof config.data_order === 'string' && config.data_order.toLowerCase() === 'desc';\n  };\n\n  ChartInternal.prototype.isOrderAsc = function () {\n    var config = this.config;\n    return typeof config.data_order === 'string' && config.data_order.toLowerCase() === 'asc';\n  };\n\n  ChartInternal.prototype.getOrderFunction = function () {\n    var $$ = this,\n        config = $$.config,\n        orderAsc = $$.isOrderAsc(),\n        orderDesc = $$.isOrderDesc();\n\n    if (orderAsc || orderDesc) {\n      var reducer = function reducer(p, c) {\n        return p + Math.abs(c.value);\n      };\n\n      return function (t1, t2) {\n        var t1Sum = t1.values.reduce(reducer, 0),\n            t2Sum = t2.values.reduce(reducer, 0);\n        return orderAsc ? t2Sum - t1Sum : t1Sum - t2Sum;\n      };\n    } else if (isFunction(config.data_order)) {\n      return config.data_order;\n    } else if (isArray(config.data_order)) {\n      var order = config.data_order;\n      return function (t1, t2) {\n        return order.indexOf(t1.id) - order.indexOf(t2.id);\n      };\n    }\n  };\n\n  ChartInternal.prototype.orderTargets = function (targets) {\n    var fct = this.getOrderFunction();\n\n    if (fct) {\n      targets.sort(fct);\n    }\n\n    return targets;\n  };\n  /**\n   * Returns all the values from the given targets at the given index.\n   *\n   * @param {Array} targets\n   * @param {Number} index\n   * @return {Array}\n   */\n\n\n  ChartInternal.prototype.filterByIndex = function (targets, index) {\n    return this.d3.merge(targets.map(function (t) {\n      return t.values.filter(function (v) {\n        return v.index === index;\n      });\n    }));\n  };\n\n  ChartInternal.prototype.filterByX = function (targets, x) {\n    return this.d3.merge(targets.map(function (t) {\n      return t.values;\n    })).filter(function (v) {\n      return v.x - x === 0;\n    });\n  };\n\n  ChartInternal.prototype.filterRemoveNull = function (data) {\n    return data.filter(function (d) {\n      return isValue(d.value);\n    });\n  };\n\n  ChartInternal.prototype.filterByXDomain = function (targets, xDomain) {\n    return targets.map(function (t) {\n      return {\n        id: t.id,\n        id_org: t.id_org,\n        values: t.values.filter(function (v) {\n          return xDomain[0] <= v.x && v.x <= xDomain[1];\n        })\n      };\n    });\n  };\n\n  ChartInternal.prototype.hasDataLabel = function () {\n    var config = this.config;\n\n    if (typeof config.data_labels === 'boolean' && config.data_labels) {\n      return true;\n    } else if (_typeof(config.data_labels) === 'object' && notEmpty(config.data_labels)) {\n      return true;\n    }\n\n    return false;\n  };\n\n  ChartInternal.prototype.getDataLabelLength = function (min, max, key) {\n    var $$ = this,\n        lengths = [0, 0],\n        paddingCoef = 1.3;\n    $$.selectChart.select('svg').selectAll('.dummy').data([min, max]).enter().append('text').text(function (d) {\n      return $$.dataLabelFormat(d.id)(d);\n    }).each(function (d, i) {\n      lengths[i] = getBBox(this)[key] * paddingCoef;\n    }).remove();\n    return lengths;\n  };\n  /**\n   * Returns true if the given data point is not arc type, otherwise false.\n   * @param {Object} d The data point\n   * @return {boolean}\n   */\n\n\n  ChartInternal.prototype.isNoneArc = function (d) {\n    return this.hasTarget(this.data.targets, d.id);\n  };\n  /**\n   * Returns true if the given data point is arc type, otherwise false.\n   * @param {Object} d The data point\n   * @return {boolean}\n   */\n\n\n  ChartInternal.prototype.isArc = function (d) {\n    return 'data' in d && this.hasTarget(this.data.targets, d.data.id);\n  };\n  /**\n   * Find the closest point from the given pos among the given targets or\n   * undefined if none satisfies conditions.\n   *\n   * @param {Array} targets\n   * @param {Array} pos An [x,y] coordinate\n   * @return {Object|undefined}\n   */\n\n\n  ChartInternal.prototype.findClosestFromTargets = function (targets, pos) {\n    var $$ = this; // for each target, find the closest point\n\n    var candidates = targets.map(function (t) {\n      return $$.findClosest(t.values, pos, $$.config.tooltip_horizontal ? $$.horizontalDistance.bind($$) : $$.dist.bind($$), $$.config.point_sensitivity);\n    }).filter(function (v) {\n      return v;\n    }); // returns the closest of candidates\n\n    if (candidates.length === 0) {\n      return undefined;\n    } else if (candidates.length === 1) {\n      return candidates[0];\n    } else {\n      return $$.findClosest(candidates, pos, $$.dist.bind($$));\n    }\n  };\n  /**\n   * Find the closest point from the x value or undefined if none satisfies conditions.\n   *\n   * @param {Array} targets\n   * @param {Array} x A value on X axis\n   * @return {Object|undefined}\n   */\n\n\n  ChartInternal.prototype.findClosestFromTargetsByX = function (targets, x) {\n    var closest;\n    var diff;\n    targets.forEach(function (t) {\n      t.values.forEach(function (d) {\n        var newDiff = Math.abs(x - d.x);\n\n        if (diff === undefined || newDiff < diff) {\n          closest = d;\n          diff = newDiff;\n        }\n      });\n    });\n    return closest;\n  };\n  /**\n   * Using given compute distance method, returns the closest data point from the\n   * given position.\n   *\n   * Giving optionally a minimum distance to satisfy.\n   *\n   * @param {Array} dataPoints List of DataPoints\n   * @param {Array} pos An [x,y] coordinate\n   * @param {Function} computeDist Function to compute distance between 2 points\n   * @param {Number} minDist Minimal distance to satisfy\n   * @return {Object|undefined} Closest data point\n   */\n\n\n  ChartInternal.prototype.findClosest = function (dataPoints, pos, computeDist) {\n    var minDist = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : Infinity;\n    var $$ = this;\n    var closest; // find closest bar\n\n    dataPoints.filter(function (v) {\n      return v && $$.isBarType(v.id);\n    }).forEach(function (v) {\n      if (!closest) {\n        var shape = $$.main.select('.' + CLASS.bars + $$.getTargetSelectorSuffix(v.id) + ' .' + CLASS.bar + '-' + v.index).node();\n\n        if ($$.isWithinBar(pos, shape)) {\n          closest = v;\n        }\n      }\n    }); // find closest point from non-bar\n\n    dataPoints.filter(function (v) {\n      return v && !$$.isBarType(v.id);\n    }).forEach(function (v) {\n      var d = computeDist(v, pos);\n\n      if (d < minDist) {\n        minDist = d;\n        closest = v;\n      }\n    });\n    return closest;\n  };\n\n  ChartInternal.prototype.dist = function (data, pos) {\n    var $$ = this,\n        config = $$.config,\n        xIndex = config.axis_rotated ? 1 : 0,\n        yIndex = config.axis_rotated ? 0 : 1,\n        y = $$.circleY(data, data.index),\n        x = $$.x(data.x);\n    return Math.sqrt(Math.pow(x - pos[xIndex], 2) + Math.pow(y - pos[yIndex], 2));\n  };\n\n  ChartInternal.prototype.horizontalDistance = function (data, pos) {\n    var $$ = this,\n        config = $$.config,\n        xIndex = config.axis_rotated ? 1 : 0,\n        x = $$.x(data.x);\n    return Math.abs(x - pos[xIndex]);\n  };\n\n  ChartInternal.prototype.convertValuesToStep = function (values) {\n    var converted = [].concat(values),\n        i;\n\n    if (!this.isCategorized()) {\n      return values;\n    }\n\n    for (i = values.length + 1; 0 < i; i--) {\n      converted[i] = converted[i - 1];\n    }\n\n    converted[0] = {\n      x: converted[0].x - 1,\n      value: converted[0].value,\n      id: converted[0].id\n    };\n    converted[values.length + 1] = {\n      x: converted[values.length].x + 1,\n      value: converted[values.length].value,\n      id: converted[values.length].id\n    };\n    return converted;\n  };\n  /**\n   * Get ratio value\n   *\n   * @param {String} type Ratio for given type\n   * @param {Object} d Data value object\n   * @param {Boolean} asPercent Convert the return as percent or not\n   * @return {Number} Ratio value\n   * @private\n   */\n\n\n  ChartInternal.prototype.getRatio = function (type, d) {\n    var asPercent = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    var $$ = this;\n    var api = $$.api;\n    var ratio = 0;\n\n    if (d && api.data.shown.call(api).length) {\n      ratio = d.ratio || d.value;\n\n      if (type === 'arc') {\n        if ($$.hasType('gauge')) {\n          ratio = (d.endAngle - d.startAngle) / (Math.PI * ($$.config.gauge_fullCircle ? 2 : 1));\n        } else {\n          var total = $$.getTotalDataSum();\n          ratio = d.value / total;\n        }\n      } else if (type === 'index') {\n        var _total = $$.getTotalPerIndex($$.axis.getId(d.id));\n\n        d.ratio = isNumber(d.value) && _total && _total[d.index] > 0 ? d.value / _total[d.index] : 0;\n        ratio = d.ratio;\n      }\n    }\n\n    return asPercent && ratio ? ratio * 100 : ratio;\n  };\n\n  ChartInternal.prototype.updateDataAttributes = function (name, attrs) {\n    var $$ = this,\n        config = $$.config,\n        current = config['data_' + name];\n\n    if (typeof attrs === 'undefined') {\n      return current;\n    }\n\n    Object.keys(attrs).forEach(function (id) {\n      current[id] = attrs[id];\n    });\n    $$.redraw({\n      withLegend: true\n    });\n    return current;\n  };\n\n  ChartInternal.prototype.load = function (targets, args) {\n    var $$ = this;\n\n    if (targets) {\n      // filter loading targets if needed\n      if (args.filter) {\n        targets = targets.filter(args.filter);\n      } // set type if args.types || args.type specified\n\n\n      if (args.type || args.types) {\n        targets.forEach(function (t) {\n          var type = args.types && args.types[t.id] ? args.types[t.id] : args.type;\n          $$.setTargetType(t.id, type);\n        });\n      } // Update/Add data\n\n\n      $$.data.targets.forEach(function (d) {\n        for (var i = 0; i < targets.length; i++) {\n          if (d.id === targets[i].id) {\n            d.values = targets[i].values;\n            targets.splice(i, 1);\n            break;\n          }\n        }\n      });\n      $$.data.targets = $$.data.targets.concat(targets); // add remained\n    } // Set targets\n\n\n    $$.updateTargets($$.data.targets); // Redraw with new targets\n\n    $$.redraw({\n      withUpdateOrgXDomain: true,\n      withUpdateXDomain: true,\n      withLegend: true\n    });\n\n    if (args.done) {\n      args.done();\n    }\n  };\n\n  ChartInternal.prototype.loadFromArgs = function (args) {\n    var $$ = this;\n    $$.resetCache();\n\n    if (args.data) {\n      $$.load($$.convertDataToTargets(args.data), args);\n    } else if (args.url) {\n      $$.convertUrlToData(args.url, args.mimeType, args.headers, args.keys, function (data) {\n        $$.load($$.convertDataToTargets(data), args);\n      });\n    } else if (args.json) {\n      $$.load($$.convertDataToTargets($$.convertJsonToData(args.json, args.keys)), args);\n    } else if (args.rows) {\n      $$.load($$.convertDataToTargets($$.convertRowsToData(args.rows)), args);\n    } else if (args.columns) {\n      $$.load($$.convertDataToTargets($$.convertColumnsToData(args.columns)), args);\n    } else {\n      $$.load(null, args);\n    }\n  };\n\n  ChartInternal.prototype.unload = function (targetIds, done) {\n    var $$ = this;\n    $$.resetCache();\n\n    if (!done) {\n      done = function done() {};\n    } // filter existing target\n\n\n    targetIds = targetIds.filter(function (id) {\n      return $$.hasTarget($$.data.targets, id);\n    }); // If no target, call done and return\n\n    if (!targetIds || targetIds.length === 0) {\n      done();\n      return;\n    }\n\n    $$.svg.selectAll(targetIds.map(function (id) {\n      return $$.selectorTarget(id);\n    })).transition().style('opacity', 0).remove().call($$.endall, done);\n    targetIds.forEach(function (id) {\n      // Reset fadein for future load\n      $$.withoutFadeIn[id] = false; // Remove target's elements\n\n      if ($$.legend) {\n        $$.legend.selectAll('.' + CLASS.legendItem + $$.getTargetSelectorSuffix(id)).remove();\n      } // Remove target\n\n\n      $$.data.targets = $$.data.targets.filter(function (t) {\n        return t.id !== id;\n      });\n    });\n  };\n\n  ChartInternal.prototype.getYDomainMin = function (targets) {\n    var $$ = this,\n        config = $$.config,\n        ids = $$.mapToIds(targets),\n        ys = $$.getValuesAsIdKeyed(targets),\n        j,\n        k,\n        baseId,\n        idsInGroup,\n        id,\n        hasNegativeValue;\n\n    if (config.data_groups.length > 0) {\n      hasNegativeValue = $$.hasNegativeValueInTargets(targets);\n\n      for (j = 0; j < config.data_groups.length; j++) {\n        // Determine baseId\n        idsInGroup = config.data_groups[j].filter(function (id) {\n          return ids.indexOf(id) >= 0;\n        });\n\n        if (idsInGroup.length === 0) {\n          continue;\n        }\n\n        baseId = idsInGroup[0]; // Consider negative values\n\n        if (hasNegativeValue && ys[baseId]) {\n          ys[baseId].forEach(function (v, i) {\n            ys[baseId][i] = v < 0 ? v : 0;\n          });\n        } // Compute min\n\n\n        for (k = 1; k < idsInGroup.length; k++) {\n          id = idsInGroup[k];\n\n          if (!ys[id]) {\n            continue;\n          }\n\n          ys[id].forEach(function (v, i) {\n            if ($$.axis.getId(id) === $$.axis.getId(baseId) && ys[baseId] && !(hasNegativeValue && +v > 0)) {\n              ys[baseId][i] += +v;\n            }\n          });\n        }\n      }\n    }\n\n    return $$.d3.min(Object.keys(ys).map(function (key) {\n      return $$.d3.min(ys[key]);\n    }));\n  };\n\n  ChartInternal.prototype.getYDomainMax = function (targets) {\n    var $$ = this,\n        config = $$.config,\n        ids = $$.mapToIds(targets),\n        ys = $$.getValuesAsIdKeyed(targets),\n        j,\n        k,\n        baseId,\n        idsInGroup,\n        id,\n        hasPositiveValue;\n\n    if (config.data_groups.length > 0) {\n      hasPositiveValue = $$.hasPositiveValueInTargets(targets);\n\n      for (j = 0; j < config.data_groups.length; j++) {\n        // Determine baseId\n        idsInGroup = config.data_groups[j].filter(function (id) {\n          return ids.indexOf(id) >= 0;\n        });\n\n        if (idsInGroup.length === 0) {\n          continue;\n        }\n\n        baseId = idsInGroup[0]; // Consider positive values\n\n        if (hasPositiveValue && ys[baseId]) {\n          ys[baseId].forEach(function (v, i) {\n            ys[baseId][i] = v > 0 ? v : 0;\n          });\n        } // Compute max\n\n\n        for (k = 1; k < idsInGroup.length; k++) {\n          id = idsInGroup[k];\n\n          if (!ys[id]) {\n            continue;\n          }\n\n          ys[id].forEach(function (v, i) {\n            if ($$.axis.getId(id) === $$.axis.getId(baseId) && ys[baseId] && !(hasPositiveValue && +v < 0)) {\n              ys[baseId][i] += +v;\n            }\n          });\n        }\n      }\n    }\n\n    return $$.d3.max(Object.keys(ys).map(function (key) {\n      return $$.d3.max(ys[key]);\n    }));\n  };\n\n  ChartInternal.prototype.getYDomain = function (targets, axisId, xDomain) {\n    var $$ = this,\n        config = $$.config;\n\n    if ($$.isAxisNormalized(axisId)) {\n      return [0, 100];\n    }\n\n    var targetsByAxisId = targets.filter(function (t) {\n      return $$.axis.getId(t.id) === axisId;\n    }),\n        yTargets = xDomain ? $$.filterByXDomain(targetsByAxisId, xDomain) : targetsByAxisId,\n        yMin = axisId === 'y2' ? config.axis_y2_min : config.axis_y_min,\n        yMax = axisId === 'y2' ? config.axis_y2_max : config.axis_y_max,\n        yDomainMin = $$.getYDomainMin(yTargets),\n        yDomainMax = $$.getYDomainMax(yTargets),\n        domain,\n        domainLength,\n        padding_top,\n        padding_bottom,\n        center = axisId === 'y2' ? config.axis_y2_center : config.axis_y_center,\n        yDomainAbs,\n        lengths,\n        diff,\n        ratio,\n        isAllPositive,\n        isAllNegative,\n        isZeroBased = $$.hasType('bar', yTargets) && config.bar_zerobased || $$.hasType('area', yTargets) && config.area_zerobased,\n        isInverted = axisId === 'y2' ? config.axis_y2_inverted : config.axis_y_inverted,\n        showHorizontalDataLabel = $$.hasDataLabel() && config.axis_rotated,\n        showVerticalDataLabel = $$.hasDataLabel() && !config.axis_rotated; // MEMO: avoid inverting domain unexpectedly\n\n    yDomainMin = isValue(yMin) ? yMin : isValue(yMax) ? yDomainMin < yMax ? yDomainMin : yMax - 10 : yDomainMin;\n    yDomainMax = isValue(yMax) ? yMax : isValue(yMin) ? yMin < yDomainMax ? yDomainMax : yMin + 10 : yDomainMax;\n\n    if (yTargets.length === 0) {\n      // use current domain if target of axisId is none\n      return axisId === 'y2' ? $$.y2.domain() : $$.y.domain();\n    }\n\n    if (isNaN(yDomainMin)) {\n      // set minimum to zero when not number\n      yDomainMin = 0;\n    }\n\n    if (isNaN(yDomainMax)) {\n      // set maximum to have same value as yDomainMin\n      yDomainMax = yDomainMin;\n    }\n\n    if (yDomainMin === yDomainMax) {\n      yDomainMin < 0 ? yDomainMax = 0 : yDomainMin = 0;\n    }\n\n    isAllPositive = yDomainMin >= 0 && yDomainMax >= 0;\n    isAllNegative = yDomainMin <= 0 && yDomainMax <= 0; // Cancel zerobased if axis_*_min / axis_*_max specified\n\n    if (isValue(yMin) && isAllPositive || isValue(yMax) && isAllNegative) {\n      isZeroBased = false;\n    } // Bar/Area chart should be 0-based if all positive|negative\n\n\n    if (isZeroBased) {\n      if (isAllPositive) {\n        yDomainMin = 0;\n      }\n\n      if (isAllNegative) {\n        yDomainMax = 0;\n      }\n    }\n\n    domainLength = Math.abs(yDomainMax - yDomainMin);\n    padding_top = padding_bottom = domainLength * 0.1;\n\n    if (typeof center !== 'undefined') {\n      yDomainAbs = Math.max(Math.abs(yDomainMin), Math.abs(yDomainMax));\n      yDomainMax = center + yDomainAbs;\n      yDomainMin = center - yDomainAbs;\n    } // add padding for data label\n\n\n    if (showHorizontalDataLabel) {\n      lengths = $$.getDataLabelLength(yDomainMin, yDomainMax, 'width');\n      diff = diffDomain($$.y.range());\n      ratio = [lengths[0] / diff, lengths[1] / diff];\n      padding_top += domainLength * (ratio[1] / (1 - ratio[0] - ratio[1]));\n      padding_bottom += domainLength * (ratio[0] / (1 - ratio[0] - ratio[1]));\n    } else if (showVerticalDataLabel) {\n      lengths = $$.getDataLabelLength(yDomainMin, yDomainMax, 'height');\n      var pixelsToAxisPadding = $$.getY(config[\"axis_\".concat(axisId, \"_type\")], // input domain as pixels\n      [0, config.axis_rotated ? $$.width : $$.height], // output range as axis padding\n      [0, domainLength]);\n      padding_top += pixelsToAxisPadding(lengths[1]);\n      padding_bottom += pixelsToAxisPadding(lengths[0]);\n    }\n\n    if (axisId === 'y' && notEmpty(config.axis_y_padding)) {\n      padding_top = $$.axis.getPadding(config.axis_y_padding, 'top', padding_top, domainLength);\n      padding_bottom = $$.axis.getPadding(config.axis_y_padding, 'bottom', padding_bottom, domainLength);\n    }\n\n    if (axisId === 'y2' && notEmpty(config.axis_y2_padding)) {\n      padding_top = $$.axis.getPadding(config.axis_y2_padding, 'top', padding_top, domainLength);\n      padding_bottom = $$.axis.getPadding(config.axis_y2_padding, 'bottom', padding_bottom, domainLength);\n    } // Bar/Area chart should be 0-based if all positive|negative\n\n\n    if (isZeroBased) {\n      if (isAllPositive) {\n        padding_bottom = yDomainMin;\n      }\n\n      if (isAllNegative) {\n        padding_top = -yDomainMax;\n      }\n    }\n\n    domain = [yDomainMin - padding_bottom, yDomainMax + padding_top];\n    return isInverted ? domain.reverse() : domain;\n  };\n\n  ChartInternal.prototype.getXDomainMin = function (targets) {\n    var $$ = this,\n        config = $$.config;\n    return isDefined(config.axis_x_min) ? $$.isTimeSeries() ? this.parseDate(config.axis_x_min) : config.axis_x_min : $$.d3.min(targets, function (t) {\n      return $$.d3.min(t.values, function (v) {\n        return v.x;\n      });\n    });\n  };\n\n  ChartInternal.prototype.getXDomainMax = function (targets) {\n    var $$ = this,\n        config = $$.config;\n    return isDefined(config.axis_x_max) ? $$.isTimeSeries() ? this.parseDate(config.axis_x_max) : config.axis_x_max : $$.d3.max(targets, function (t) {\n      return $$.d3.max(t.values, function (v) {\n        return v.x;\n      });\n    });\n  };\n\n  ChartInternal.prototype.getXDomainPadding = function (domain) {\n    var $$ = this,\n        config = $$.config,\n        diff = domain[1] - domain[0],\n        maxDataCount,\n        padding,\n        paddingLeft,\n        paddingRight;\n\n    if ($$.isCategorized()) {\n      padding = 0;\n    } else if ($$.hasType('bar')) {\n      maxDataCount = $$.getMaxDataCount();\n      padding = maxDataCount > 1 ? diff / (maxDataCount - 1) / 2 : 0.5;\n    } else {\n      padding = diff * 0.01;\n    }\n\n    if (_typeof(config.axis_x_padding) === 'object' && notEmpty(config.axis_x_padding)) {\n      paddingLeft = isValue(config.axis_x_padding.left) ? config.axis_x_padding.left : padding;\n      paddingRight = isValue(config.axis_x_padding.right) ? config.axis_x_padding.right : padding;\n    } else if (typeof config.axis_x_padding === 'number') {\n      paddingLeft = paddingRight = config.axis_x_padding;\n    } else {\n      paddingLeft = paddingRight = padding;\n    }\n\n    return {\n      left: paddingLeft,\n      right: paddingRight\n    };\n  };\n\n  ChartInternal.prototype.getXDomain = function (targets) {\n    var $$ = this,\n        xDomain = [$$.getXDomainMin(targets), $$.getXDomainMax(targets)],\n        firstX = xDomain[0],\n        lastX = xDomain[1],\n        padding = $$.getXDomainPadding(xDomain),\n        min = 0,\n        max = 0; // show center of x domain if min and max are the same\n\n    if (firstX - lastX === 0 && !$$.isCategorized()) {\n      if ($$.isTimeSeries()) {\n        firstX = new Date(firstX.getTime() * 0.5);\n        lastX = new Date(lastX.getTime() * 1.5);\n      } else {\n        firstX = firstX === 0 ? 1 : firstX * 0.5;\n        lastX = lastX === 0 ? -1 : lastX * 1.5;\n      }\n    }\n\n    if (firstX || firstX === 0) {\n      min = $$.isTimeSeries() ? new Date(firstX.getTime() - padding.left) : firstX - padding.left;\n    }\n\n    if (lastX || lastX === 0) {\n      max = $$.isTimeSeries() ? new Date(lastX.getTime() + padding.right) : lastX + padding.right;\n    }\n\n    return [min, max];\n  };\n\n  ChartInternal.prototype.updateXDomain = function (targets, withUpdateXDomain, withUpdateOrgXDomain, withTrim, domain) {\n    var $$ = this,\n        config = $$.config;\n\n    if (withUpdateOrgXDomain) {\n      $$.x.domain(domain ? domain : $$.d3.extent($$.getXDomain(targets)));\n      $$.orgXDomain = $$.x.domain();\n\n      if (config.zoom_enabled) {\n        $$.zoom.update();\n      }\n\n      $$.subX.domain($$.x.domain());\n\n      if ($$.brush) {\n        $$.brush.updateScale($$.subX);\n      }\n    }\n\n    if (withUpdateXDomain) {\n      $$.x.domain(domain ? domain : !$$.brush || $$.brush.empty() ? $$.orgXDomain : $$.brush.selectionAsValue());\n    } // Trim domain when too big by zoom mousemove event\n\n\n    if (withTrim) {\n      $$.x.domain($$.trimXDomain($$.x.orgDomain()));\n    }\n\n    return $$.x.domain();\n  };\n\n  ChartInternal.prototype.trimXDomain = function (domain) {\n    var zoomDomain = this.getZoomDomain(),\n        min = zoomDomain[0],\n        max = zoomDomain[1];\n\n    if (domain[0] <= min) {\n      domain[1] = +domain[1] + (min - domain[0]);\n      domain[0] = min;\n    }\n\n    if (max <= domain[1]) {\n      domain[0] = +domain[0] - (domain[1] - max);\n      domain[1] = max;\n    }\n\n    return domain;\n  };\n\n  ChartInternal.prototype.drag = function (mouse) {\n    var $$ = this,\n        config = $$.config,\n        main = $$.main,\n        d3 = $$.d3;\n    var sx, sy, mx, my, minX, maxX, minY, maxY;\n\n    if ($$.hasArcType()) {\n      return;\n    }\n\n    if (!config.data_selection_enabled) {\n      return;\n    } // do nothing if not selectable\n\n\n    if (!config.data_selection_multiple) {\n      return;\n    } // skip when single selection because drag is used for multiple selection\n\n\n    sx = $$.dragStart[0];\n    sy = $$.dragStart[1];\n    mx = mouse[0];\n    my = mouse[1];\n    minX = Math.min(sx, mx);\n    maxX = Math.max(sx, mx);\n    minY = config.data_selection_grouped ? $$.margin.top : Math.min(sy, my);\n    maxY = config.data_selection_grouped ? $$.height : Math.max(sy, my);\n    main.select('.' + CLASS.dragarea).attr('x', minX).attr('y', minY).attr('width', maxX - minX).attr('height', maxY - minY); // TODO: binary search when multiple xs\n\n    main.selectAll('.' + CLASS.shapes).selectAll('.' + CLASS.shape).each(function (d, i) {\n      if (!config.data_selection_isselectable(d)) {\n        return;\n      }\n\n      var shape = d3.select(this),\n          isSelected = shape.classed(CLASS.SELECTED),\n          isIncluded = shape.classed(CLASS.INCLUDED),\n          _x,\n          _y,\n          _w,\n          _h,\n          toggle,\n          isWithin = false,\n          box;\n\n      if (shape.classed(CLASS.circle)) {\n        _x = shape.attr('cx') * 1;\n        _y = shape.attr('cy') * 1;\n        toggle = $$.togglePoint;\n        isWithin = minX < _x && _x < maxX && minY < _y && _y < maxY;\n      } else if (shape.classed(CLASS.bar)) {\n        box = getPathBox(this);\n        _x = box.x;\n        _y = box.y;\n        _w = box.width;\n        _h = box.height;\n        toggle = $$.togglePath;\n        isWithin = !(maxX < _x || _x + _w < minX) && !(maxY < _y || _y + _h < minY);\n      } else {\n        // line/area selection not supported yet\n        return;\n      }\n\n      if (isWithin ^ isIncluded) {\n        shape.classed(CLASS.INCLUDED, !isIncluded); // TODO: included/unincluded callback here\n\n        shape.classed(CLASS.SELECTED, !isSelected);\n        toggle.call($$, !isSelected, shape, d, i);\n      }\n    });\n  };\n\n  ChartInternal.prototype.dragstart = function (mouse) {\n    var $$ = this,\n        config = $$.config;\n\n    if ($$.hasArcType()) {\n      return;\n    }\n\n    if (!config.data_selection_enabled) {\n      return;\n    } // do nothing if not selectable\n\n\n    $$.dragStart = mouse;\n    $$.main.select('.' + CLASS.chart).append('rect').attr('class', CLASS.dragarea).style('opacity', 0.1);\n    $$.dragging = true;\n  };\n\n  ChartInternal.prototype.dragend = function () {\n    var $$ = this,\n        config = $$.config;\n\n    if ($$.hasArcType()) {\n      return;\n    }\n\n    if (!config.data_selection_enabled) {\n      return;\n    } // do nothing if not selectable\n\n\n    $$.main.select('.' + CLASS.dragarea).transition().duration(100).style('opacity', 0).remove();\n    $$.main.selectAll('.' + CLASS.shape).classed(CLASS.INCLUDED, false);\n    $$.dragging = false;\n  };\n\n  ChartInternal.prototype.getYFormat = function (forArc) {\n    var $$ = this,\n        formatForY = forArc && !$$.hasType('gauge') ? $$.defaultArcValueFormat : $$.yFormat,\n        formatForY2 = forArc && !$$.hasType('gauge') ? $$.defaultArcValueFormat : $$.y2Format;\n    return function (v, ratio, id) {\n      var format = $$.axis.getId(id) === 'y2' ? formatForY2 : formatForY;\n      return format.call($$, v, ratio);\n    };\n  };\n\n  ChartInternal.prototype.yFormat = function (v) {\n    var $$ = this,\n        config = $$.config,\n        format = config.axis_y_tick_format ? config.axis_y_tick_format : $$.defaultValueFormat;\n    return format(v);\n  };\n\n  ChartInternal.prototype.y2Format = function (v) {\n    var $$ = this,\n        config = $$.config,\n        format = config.axis_y2_tick_format ? config.axis_y2_tick_format : $$.defaultValueFormat;\n    return format(v);\n  };\n\n  ChartInternal.prototype.defaultValueFormat = function (v) {\n    return isValue(v) ? +v : '';\n  };\n\n  ChartInternal.prototype.defaultArcValueFormat = function (v, ratio) {\n    return (ratio * 100).toFixed(1) + '%';\n  };\n\n  ChartInternal.prototype.dataLabelFormat = function (targetId) {\n    var $$ = this,\n        data_labels = $$.config.data_labels,\n        format,\n        defaultFormat = function defaultFormat(v) {\n      return isValue(v) ? +v : '';\n    }; // find format according to axis id\n\n\n    if (typeof data_labels.format === 'function') {\n      format = data_labels.format;\n    } else if (_typeof(data_labels.format) === 'object') {\n      if (data_labels.format[targetId]) {\n        format = data_labels.format[targetId] === true ? defaultFormat : data_labels.format[targetId];\n      } else {\n        format = function format() {\n          return '';\n        };\n      }\n    } else {\n      format = defaultFormat;\n    }\n\n    return format;\n  };\n\n  ChartInternal.prototype.initGrid = function () {\n    var $$ = this,\n        config = $$.config,\n        d3 = $$.d3;\n    $$.grid = $$.main.append('g').attr('clip-path', $$.clipPathForGrid).attr('class', CLASS.grid);\n\n    if (config.grid_x_show) {\n      $$.grid.append('g').attr('class', CLASS.xgrids);\n    }\n\n    if (config.grid_y_show) {\n      $$.grid.append('g').attr('class', CLASS.ygrids);\n    }\n\n    if (config.grid_focus_show) {\n      $$.grid.append('g').attr('class', CLASS.xgridFocus).append('line').attr('class', CLASS.xgridFocus);\n    }\n\n    $$.xgrid = d3.selectAll([]);\n\n    if (!config.grid_lines_front) {\n      $$.initGridLines();\n    }\n  };\n\n  ChartInternal.prototype.initGridLines = function () {\n    var $$ = this,\n        d3 = $$.d3;\n    $$.gridLines = $$.main.append('g').attr('clip-path', $$.clipPathForGrid).attr('class', CLASS.grid + ' ' + CLASS.gridLines);\n    $$.gridLines.append('g').attr('class', CLASS.xgridLines);\n    $$.gridLines.append('g').attr('class', CLASS.ygridLines);\n    $$.xgridLines = d3.selectAll([]);\n  };\n\n  ChartInternal.prototype.updateXGrid = function (withoutUpdate) {\n    var $$ = this,\n        config = $$.config,\n        d3 = $$.d3,\n        xgridData = $$.generateGridData(config.grid_x_type, $$.x),\n        tickOffset = $$.isCategorized() ? $$.xAxis.tickOffset() : 0;\n    $$.xgridAttr = config.axis_rotated ? {\n      x1: 0,\n      x2: $$.width,\n      y1: function y1(d) {\n        return $$.x(d) - tickOffset;\n      },\n      y2: function y2(d) {\n        return $$.x(d) - tickOffset;\n      }\n    } : {\n      x1: function x1(d) {\n        return $$.x(d) + tickOffset;\n      },\n      x2: function x2(d) {\n        return $$.x(d) + tickOffset;\n      },\n      y1: 0,\n      y2: $$.height\n    };\n\n    $$.xgridAttr.opacity = function () {\n      var pos = +d3.select(this).attr(config.axis_rotated ? 'y1' : 'x1');\n      return pos === (config.axis_rotated ? $$.height : 0) ? 0 : 1;\n    };\n\n    var xgrid = $$.main.select('.' + CLASS.xgrids).selectAll('.' + CLASS.xgrid).data(xgridData);\n    var xgridEnter = xgrid.enter().append('line').attr('class', CLASS.xgrid).attr('x1', $$.xgridAttr.x1).attr('x2', $$.xgridAttr.x2).attr('y1', $$.xgridAttr.y1).attr('y2', $$.xgridAttr.y2).style('opacity', 0);\n    $$.xgrid = xgridEnter.merge(xgrid);\n\n    if (!withoutUpdate) {\n      $$.xgrid.attr('x1', $$.xgridAttr.x1).attr('x2', $$.xgridAttr.x2).attr('y1', $$.xgridAttr.y1).attr('y2', $$.xgridAttr.y2).style('opacity', $$.xgridAttr.opacity);\n    }\n\n    xgrid.exit().remove();\n  };\n\n  ChartInternal.prototype.updateYGrid = function () {\n    var $$ = this,\n        config = $$.config,\n        gridValues = $$.yAxis.tickValues() || $$.y.ticks(config.grid_y_ticks);\n    var ygrid = $$.main.select('.' + CLASS.ygrids).selectAll('.' + CLASS.ygrid).data(gridValues);\n    var ygridEnter = ygrid.enter().append('line') // TODO: x1, x2, y1, y2, opacity need to be set here maybe\n    .attr('class', CLASS.ygrid);\n    $$.ygrid = ygridEnter.merge(ygrid);\n    $$.ygrid.attr('x1', config.axis_rotated ? $$.y : 0).attr('x2', config.axis_rotated ? $$.y : $$.width).attr('y1', config.axis_rotated ? 0 : $$.y).attr('y2', config.axis_rotated ? $$.height : $$.y);\n    ygrid.exit().remove();\n    $$.smoothLines($$.ygrid, 'grid');\n  };\n\n  ChartInternal.prototype.gridTextAnchor = function (d) {\n    return d.position ? d.position : 'end';\n  };\n\n  ChartInternal.prototype.gridTextDx = function (d) {\n    return d.position === 'start' ? 4 : d.position === 'middle' ? 0 : -4;\n  };\n\n  ChartInternal.prototype.xGridTextX = function (d) {\n    return d.position === 'start' ? -this.height : d.position === 'middle' ? -this.height / 2 : 0;\n  };\n\n  ChartInternal.prototype.yGridTextX = function (d) {\n    return d.position === 'start' ? 0 : d.position === 'middle' ? this.width / 2 : this.width;\n  };\n\n  ChartInternal.prototype.updateGrid = function (duration) {\n    var $$ = this,\n        main = $$.main,\n        config = $$.config,\n        xgridLine,\n        xgridLineEnter,\n        ygridLine,\n        ygridLineEnter,\n        xv = $$.xv.bind($$),\n        yv = $$.yv.bind($$),\n        xGridTextX = $$.xGridTextX.bind($$),\n        yGridTextX = $$.yGridTextX.bind($$); // hide if arc type\n\n    $$.grid.style('visibility', $$.hasArcType() ? 'hidden' : 'visible');\n    main.select('line.' + CLASS.xgridFocus).style('visibility', 'hidden');\n\n    if (config.grid_x_show) {\n      $$.updateXGrid();\n    }\n\n    xgridLine = main.select('.' + CLASS.xgridLines).selectAll('.' + CLASS.xgridLine).data(config.grid_x_lines); // enter\n\n    xgridLineEnter = xgridLine.enter().append('g').attr('class', function (d) {\n      return CLASS.xgridLine + (d['class'] ? ' ' + d['class'] : '');\n    });\n    xgridLineEnter.append('line').attr('x1', config.axis_rotated ? 0 : xv).attr('x2', config.axis_rotated ? $$.width : xv).attr('y1', config.axis_rotated ? xv : 0).attr('y2', config.axis_rotated ? xv : $$.height).style('opacity', 0);\n    xgridLineEnter.append('text').attr('text-anchor', $$.gridTextAnchor).attr('transform', config.axis_rotated ? '' : 'rotate(-90)').attr('x', config.axis_rotated ? yGridTextX : xGridTextX).attr('y', xv).attr('dx', $$.gridTextDx).attr('dy', -5).style('opacity', 0); // udpate\n\n    $$.xgridLines = xgridLineEnter.merge(xgridLine); // done in d3.transition() of the end of this function\n    // exit\n\n    xgridLine.exit().transition().duration(duration).style('opacity', 0).remove(); // Y-Grid\n\n    if (config.grid_y_show) {\n      $$.updateYGrid();\n    }\n\n    ygridLine = main.select('.' + CLASS.ygridLines).selectAll('.' + CLASS.ygridLine).data(config.grid_y_lines); // enter\n\n    ygridLineEnter = ygridLine.enter().append('g').attr('class', function (d) {\n      return CLASS.ygridLine + (d['class'] ? ' ' + d['class'] : '');\n    });\n    ygridLineEnter.append('line').attr('x1', config.axis_rotated ? yv : 0).attr('x2', config.axis_rotated ? yv : $$.width).attr('y1', config.axis_rotated ? 0 : yv).attr('y2', config.axis_rotated ? $$.height : yv).style('opacity', 0);\n    ygridLineEnter.append('text').attr('text-anchor', $$.gridTextAnchor).attr('transform', config.axis_rotated ? 'rotate(-90)' : '').attr('x', config.axis_rotated ? xGridTextX : yGridTextX).attr('y', yv).attr('dx', $$.gridTextDx).attr('dy', -5).style('opacity', 0); // update\n\n    $$.ygridLines = ygridLineEnter.merge(ygridLine);\n    $$.ygridLines.select('line').transition().duration(duration).attr('x1', config.axis_rotated ? yv : 0).attr('x2', config.axis_rotated ? yv : $$.width).attr('y1', config.axis_rotated ? 0 : yv).attr('y2', config.axis_rotated ? $$.height : yv).style('opacity', 1);\n    $$.ygridLines.select('text').transition().duration(duration).attr('x', config.axis_rotated ? $$.xGridTextX.bind($$) : $$.yGridTextX.bind($$)).attr('y', yv).text(function (d) {\n      return d.text;\n    }).style('opacity', 1); // exit\n\n    ygridLine.exit().transition().duration(duration).style('opacity', 0).remove();\n  };\n\n  ChartInternal.prototype.redrawGrid = function (withTransition, transition) {\n    var $$ = this,\n        config = $$.config,\n        xv = $$.xv.bind($$),\n        lines = $$.xgridLines.select('line'),\n        texts = $$.xgridLines.select('text');\n    return [(withTransition ? lines.transition(transition) : lines).attr('x1', config.axis_rotated ? 0 : xv).attr('x2', config.axis_rotated ? $$.width : xv).attr('y1', config.axis_rotated ? xv : 0).attr('y2', config.axis_rotated ? xv : $$.height).style('opacity', 1), (withTransition ? texts.transition(transition) : texts).attr('x', config.axis_rotated ? $$.yGridTextX.bind($$) : $$.xGridTextX.bind($$)).attr('y', xv).text(function (d) {\n      return d.text;\n    }).style('opacity', 1)];\n  };\n\n  ChartInternal.prototype.showXGridFocus = function (selectedData) {\n    var $$ = this,\n        config = $$.config,\n        dataToShow = selectedData.filter(function (d) {\n      return d && isValue(d.value);\n    }),\n        focusEl = $$.main.selectAll('line.' + CLASS.xgridFocus),\n        xx = $$.xx.bind($$);\n\n    if (!config.tooltip_show) {\n      return;\n    } // Hide when stanford plot exists\n\n\n    if ($$.hasType('stanford') || $$.hasArcType()) {\n      return;\n    }\n\n    focusEl.style('visibility', 'visible').data([dataToShow[0]]).attr(config.axis_rotated ? 'y1' : 'x1', xx).attr(config.axis_rotated ? 'y2' : 'x2', xx);\n    $$.smoothLines(focusEl, 'grid');\n  };\n\n  ChartInternal.prototype.hideXGridFocus = function () {\n    this.main.select('line.' + CLASS.xgridFocus).style('visibility', 'hidden');\n  };\n\n  ChartInternal.prototype.updateXgridFocus = function () {\n    var $$ = this,\n        config = $$.config;\n    $$.main.select('line.' + CLASS.xgridFocus).attr('x1', config.axis_rotated ? 0 : -10).attr('x2', config.axis_rotated ? $$.width : -10).attr('y1', config.axis_rotated ? -10 : 0).attr('y2', config.axis_rotated ? -10 : $$.height);\n  };\n\n  ChartInternal.prototype.generateGridData = function (type, scale) {\n    var $$ = this,\n        gridData = [],\n        xDomain,\n        firstYear,\n        lastYear,\n        i,\n        tickNum = $$.main.select('.' + CLASS.axisX).selectAll('.tick').size();\n\n    if (type === 'year') {\n      xDomain = $$.getXDomain();\n      firstYear = xDomain[0].getFullYear();\n      lastYear = xDomain[1].getFullYear();\n\n      for (i = firstYear; i <= lastYear; i++) {\n        gridData.push(new Date(i + '-01-01 00:00:00'));\n      }\n    } else {\n      gridData = scale.ticks(10);\n\n      if (gridData.length > tickNum) {\n        // use only int\n        gridData = gridData.filter(function (d) {\n          return ('' + d).indexOf('.') < 0;\n        });\n      }\n    }\n\n    return gridData;\n  };\n\n  ChartInternal.prototype.getGridFilterToRemove = function (params) {\n    return params ? function (line) {\n      var found = false;\n      [].concat(params).forEach(function (param) {\n        if ('value' in param && line.value === param.value || 'class' in param && line['class'] === param['class']) {\n          found = true;\n        }\n      });\n      return found;\n    } : function () {\n      return true;\n    };\n  };\n\n  ChartInternal.prototype.removeGridLines = function (params, forX) {\n    var $$ = this,\n        config = $$.config,\n        toRemove = $$.getGridFilterToRemove(params),\n        toShow = function toShow(line) {\n      return !toRemove(line);\n    },\n        classLines = forX ? CLASS.xgridLines : CLASS.ygridLines,\n        classLine = forX ? CLASS.xgridLine : CLASS.ygridLine;\n\n    $$.main.select('.' + classLines).selectAll('.' + classLine).filter(toRemove).transition().duration(config.transition_duration).style('opacity', 0).remove();\n\n    if (forX) {\n      config.grid_x_lines = config.grid_x_lines.filter(toShow);\n    } else {\n      config.grid_y_lines = config.grid_y_lines.filter(toShow);\n    }\n  };\n\n  ChartInternal.prototype.initEventRect = function () {\n    var $$ = this,\n        config = $$.config;\n    $$.main.select('.' + CLASS.chart).append('g').attr('class', CLASS.eventRects).style('fill-opacity', 0);\n    $$.eventRect = $$.main.select('.' + CLASS.eventRects).append('rect').attr('class', CLASS.eventRect); // event rect handle zoom event as well\n\n    if (config.zoom_enabled && $$.zoom) {\n      $$.eventRect.call($$.zoom).on('dblclick.zoom', null);\n\n      if (config.zoom_initialRange) {\n        // WORKAROUND: Add transition to apply transform immediately when no subchart\n        $$.eventRect.transition().duration(0).call($$.zoom.transform, $$.zoomTransform(config.zoom_initialRange));\n      }\n    }\n  };\n\n  ChartInternal.prototype.redrawEventRect = function () {\n    var $$ = this,\n        d3 = $$.d3,\n        config = $$.config;\n\n    function mouseout() {\n      $$.svg.select('.' + CLASS.eventRect).style('cursor', null);\n      $$.hideXGridFocus();\n      $$.hideTooltip();\n      $$.unexpandCircles();\n      $$.unexpandBars();\n    }\n\n    var isHoveringDataPoint = function isHoveringDataPoint(mouse, closest) {\n      return closest && ($$.isBarType(closest.id) || $$.dist(closest, mouse) < config.point_sensitivity);\n    };\n\n    var withName = function withName(d) {\n      return d ? $$.addName(Object.assign({}, d)) : null;\n    }; // rects for mouseover\n\n\n    $$.main.select('.' + CLASS.eventRects).style('cursor', config.zoom_enabled ? config.axis_rotated ? 'ns-resize' : 'ew-resize' : null);\n    $$.eventRect.attr('x', 0).attr('y', 0).attr('width', $$.width).attr('height', $$.height).on('mouseout', config.interaction_enabled ? function () {\n      if (!config) {\n        return;\n      } // chart is destroyed\n\n\n      if ($$.hasArcType()) {\n        return;\n      }\n\n      if ($$.mouseover) {\n        config.data_onmouseout.call($$.api, $$.mouseover);\n        $$.mouseover = undefined;\n      }\n\n      mouseout();\n    } : null).on('mousemove', config.interaction_enabled ? function () {\n      // do nothing when dragging\n      if ($$.dragging) {\n        return;\n      }\n\n      var targetsToShow = $$.getTargetsToShow(); // do nothing if arc type\n\n      if ($$.hasArcType(targetsToShow)) {\n        return;\n      }\n\n      var mouse = d3.mouse(this);\n      var closest = withName($$.findClosestFromTargets(targetsToShow, mouse));\n      var isMouseCloseToDataPoint = isHoveringDataPoint(mouse, closest); // ensure onmouseout is always called if mousemove switch between 2 targets\n\n      if ($$.mouseover && (!closest || closest.id !== $$.mouseover.id || closest.index !== $$.mouseover.index)) {\n        config.data_onmouseout.call($$.api, $$.mouseover);\n        $$.mouseover = undefined;\n      }\n\n      if (closest && !$$.mouseover) {\n        config.data_onmouseover.call($$.api, closest);\n        $$.mouseover = closest;\n      } // show cursor as pointer if we're hovering a data point close enough\n\n\n      $$.svg.select('.' + CLASS.eventRect).style('cursor', isMouseCloseToDataPoint ? 'pointer' : null); // if tooltip not grouped, we want to display only data from closest data point\n\n      var showSingleDataPoint = !config.tooltip_grouped || $$.hasType('stanford', targetsToShow); // find data to highlight\n\n      var selectedData;\n\n      if (showSingleDataPoint) {\n        if (closest) {\n          selectedData = [closest];\n        }\n      } else {\n        var closestByX;\n\n        if (closest) {\n          // reuse closest value\n          closestByX = closest;\n        } else {\n          // try to find the closest value by X values from the mouse position\n          var mouseX = config.axis_rotated ? mouse[1] : mouse[0];\n          closestByX = $$.findClosestFromTargetsByX(targetsToShow, $$.x.invert(mouseX));\n        } // highlight all data for this 'x' value\n\n\n        if (closestByX) {\n          selectedData = $$.filterByX(targetsToShow, closestByX.x);\n        }\n      } // ensure we have data to show\n\n\n      if (!selectedData || selectedData.length === 0) {\n        return mouseout();\n      } // inject names for each point\n\n\n      selectedData = selectedData.map(withName); // show tooltip\n\n      $$.showTooltip(selectedData, this); // expand points\n\n      if (config.point_focus_expand_enabled) {\n        $$.unexpandCircles();\n        selectedData.forEach(function (d) {\n          $$.expandCircles(d.index, d.id, false);\n        });\n      } // expand bars\n\n\n      $$.unexpandBars();\n      selectedData.forEach(function (d) {\n        $$.expandBars(d.index, d.id, false);\n      }); // Show xgrid focus line\n\n      $$.showXGridFocus(selectedData);\n    } : null).on('click', config.interaction_enabled ? function () {\n      var targetsToShow = $$.getTargetsToShow();\n\n      if ($$.hasArcType(targetsToShow)) {\n        return;\n      }\n\n      var mouse = d3.mouse(this);\n      var closest = withName($$.findClosestFromTargets(targetsToShow, mouse));\n\n      if (!isHoveringDataPoint(mouse, closest)) {\n        return;\n      } // select if selection enabled\n\n\n      var sameXData;\n\n      if (!config.data_selection_grouped || $$.isStanfordType(closest)) {\n        sameXData = [closest];\n      } else {\n        sameXData = $$.filterByX(targetsToShow, closest.x);\n      } // toggle selected state\n\n\n      sameXData.forEach(function (d) {\n        $$.main.selectAll('.' + CLASS.shapes + $$.getTargetSelectorSuffix(d.id)).selectAll('.' + CLASS.shape + '-' + d.index).each(function () {\n          if (config.data_selection_grouped || $$.isWithinShape(this, d)) {\n            $$.toggleShape(this, d, d.index);\n          }\n        });\n      }); // call data_onclick on the closest data point\n\n      if (closest) {\n        var shape = $$.main.selectAll('.' + CLASS.shapes + $$.getTargetSelectorSuffix(closest.id)).select('.' + CLASS.shape + '-' + closest.index);\n        config.data_onclick.call($$.api, closest, shape.node());\n      }\n    } : null).call(config.interaction_enabled && config.data_selection_draggable && $$.drag ? d3.drag().on('drag', function () {\n      $$.drag(d3.mouse(this));\n    }).on('start', function () {\n      $$.dragstart(d3.mouse(this));\n    }).on('end', function () {\n      $$.dragend();\n    }) : function () {});\n  };\n\n  ChartInternal.prototype.getMousePosition = function (data) {\n    var $$ = this;\n    return [$$.x(data.x), $$.getYScale(data.id)(data.value)];\n  };\n\n  ChartInternal.prototype.dispatchEvent = function (type, mouse) {\n    var $$ = this,\n        selector = '.' + CLASS.eventRect,\n        eventRect = $$.main.select(selector).node(),\n        box = eventRect.getBoundingClientRect(),\n        x = box.left + (mouse ? mouse[0] : 0),\n        y = box.top + (mouse ? mouse[1] : 0),\n        event = document.createEvent('MouseEvents');\n    event.initMouseEvent(type, true, true, window, 0, x, y, x, y, false, false, false, false, 0, null);\n    eventRect.dispatchEvent(event);\n  };\n\n  ChartInternal.prototype.initLegend = function () {\n    var $$ = this;\n    $$.legendItemTextBox = {};\n    $$.legendHasRendered = false;\n    $$.legend = $$.svg.append('g').attr('transform', $$.getTranslate('legend'));\n\n    if (!$$.config.legend_show) {\n      $$.legend.style('visibility', 'hidden');\n      $$.hiddenLegendIds = $$.mapToIds($$.data.targets);\n      return;\n    } // MEMO: call here to update legend box and tranlate for all\n    // MEMO: translate will be updated by this, so transform not needed in updateLegend()\n\n\n    $$.updateLegendWithDefaults();\n  };\n\n  ChartInternal.prototype.updateLegendWithDefaults = function () {\n    var $$ = this;\n    $$.updateLegend($$.mapToIds($$.data.targets), {\n      withTransform: false,\n      withTransitionForTransform: false,\n      withTransition: false\n    });\n  };\n\n  ChartInternal.prototype.updateSizeForLegend = function (legendHeight, legendWidth) {\n    var $$ = this,\n        config = $$.config,\n        insetLegendPosition = {\n      top: $$.isLegendTop ? $$.getCurrentPaddingTop() + config.legend_inset_y + 5.5 : $$.currentHeight - legendHeight - $$.getCurrentPaddingBottom() - config.legend_inset_y,\n      left: $$.isLegendLeft ? $$.getCurrentPaddingLeft() + config.legend_inset_x + 0.5 : $$.currentWidth - legendWidth - $$.getCurrentPaddingRight() - config.legend_inset_x + 0.5\n    };\n    $$.margin3 = {\n      top: $$.isLegendRight ? 0 : $$.isLegendInset ? insetLegendPosition.top : $$.currentHeight - legendHeight,\n      right: NaN,\n      bottom: 0,\n      left: $$.isLegendRight ? $$.currentWidth - legendWidth : $$.isLegendInset ? insetLegendPosition.left : 0\n    };\n  };\n\n  ChartInternal.prototype.transformLegend = function (withTransition) {\n    var $$ = this;\n    (withTransition ? $$.legend.transition() : $$.legend).attr('transform', $$.getTranslate('legend'));\n  };\n\n  ChartInternal.prototype.updateLegendStep = function (step) {\n    this.legendStep = step;\n  };\n\n  ChartInternal.prototype.updateLegendItemWidth = function (w) {\n    this.legendItemWidth = w;\n  };\n\n  ChartInternal.prototype.updateLegendItemHeight = function (h) {\n    this.legendItemHeight = h;\n  };\n\n  ChartInternal.prototype.getLegendWidth = function () {\n    var $$ = this;\n    return $$.config.legend_show ? $$.isLegendRight || $$.isLegendInset ? $$.legendItemWidth * ($$.legendStep + 1) : $$.currentWidth : 0;\n  };\n\n  ChartInternal.prototype.getLegendHeight = function () {\n    var $$ = this,\n        h = 0;\n\n    if ($$.config.legend_show) {\n      if ($$.isLegendRight) {\n        h = $$.currentHeight;\n      } else {\n        h = Math.max(20, $$.legendItemHeight) * ($$.legendStep + 1);\n      }\n    }\n\n    return h;\n  };\n\n  ChartInternal.prototype.opacityForLegend = function (legendItem) {\n    return legendItem.classed(CLASS.legendItemHidden) ? null : 1;\n  };\n\n  ChartInternal.prototype.opacityForUnfocusedLegend = function (legendItem) {\n    return legendItem.classed(CLASS.legendItemHidden) ? null : 0.3;\n  };\n\n  ChartInternal.prototype.toggleFocusLegend = function (targetIds, focus) {\n    var $$ = this;\n    targetIds = $$.mapToTargetIds(targetIds);\n    $$.legend.selectAll('.' + CLASS.legendItem).filter(function (id) {\n      return targetIds.indexOf(id) >= 0;\n    }).classed(CLASS.legendItemFocused, focus).transition().duration(100).style('opacity', function () {\n      var opacity = focus ? $$.opacityForLegend : $$.opacityForUnfocusedLegend;\n      return opacity.call($$, $$.d3.select(this));\n    });\n  };\n\n  ChartInternal.prototype.revertLegend = function () {\n    var $$ = this,\n        d3 = $$.d3;\n    $$.legend.selectAll('.' + CLASS.legendItem).classed(CLASS.legendItemFocused, false).transition().duration(100).style('opacity', function () {\n      return $$.opacityForLegend(d3.select(this));\n    });\n  };\n\n  ChartInternal.prototype.showLegend = function (targetIds) {\n    var $$ = this,\n        config = $$.config;\n\n    if (!config.legend_show) {\n      config.legend_show = true;\n      $$.legend.style('visibility', 'visible');\n\n      if (!$$.legendHasRendered) {\n        $$.updateLegendWithDefaults();\n      }\n    }\n\n    $$.removeHiddenLegendIds(targetIds);\n    $$.legend.selectAll($$.selectorLegends(targetIds)).style('visibility', 'visible').transition().style('opacity', function () {\n      return $$.opacityForLegend($$.d3.select(this));\n    });\n  };\n\n  ChartInternal.prototype.hideLegend = function (targetIds) {\n    var $$ = this,\n        config = $$.config;\n\n    if (config.legend_show && isEmpty(targetIds)) {\n      config.legend_show = false;\n      $$.legend.style('visibility', 'hidden');\n    }\n\n    $$.addHiddenLegendIds(targetIds);\n    $$.legend.selectAll($$.selectorLegends(targetIds)).style('opacity', 0).style('visibility', 'hidden');\n  };\n\n  ChartInternal.prototype.clearLegendItemTextBoxCache = function () {\n    this.legendItemTextBox = {};\n  };\n\n  ChartInternal.prototype.updateLegend = function (targetIds, options, transitions) {\n    var $$ = this,\n        config = $$.config;\n    var xForLegend, xForLegendText, xForLegendRect, yForLegend, yForLegendText, yForLegendRect, x1ForLegendTile, x2ForLegendTile, yForLegendTile;\n    var paddingTop = 4,\n        paddingRight = 10,\n        maxWidth = 0,\n        maxHeight = 0,\n        posMin = 10,\n        tileWidth = config.legend_item_tile_width + 5;\n    var l,\n        totalLength = 0,\n        offsets = {},\n        widths = {},\n        heights = {},\n        margins = [0],\n        steps = {},\n        step = 0;\n    var withTransition, withTransitionForTransform;\n    var texts, rects, tiles, background; // Skip elements when their name is set to null\n\n    targetIds = targetIds.filter(function (id) {\n      return !isDefined(config.data_names[id]) || config.data_names[id] !== null;\n    });\n    options = options || {};\n    withTransition = getOption(options, 'withTransition', true);\n    withTransitionForTransform = getOption(options, 'withTransitionForTransform', true);\n\n    function getTextBox(textElement, id) {\n      if (!$$.legendItemTextBox[id]) {\n        $$.legendItemTextBox[id] = $$.getTextRect(textElement.textContent, CLASS.legendItem, textElement);\n      }\n\n      return $$.legendItemTextBox[id];\n    }\n\n    function updatePositions(textElement, id, index) {\n      var reset = index === 0,\n          isLast = index === targetIds.length - 1,\n          box = getTextBox(textElement, id),\n          itemWidth = box.width + tileWidth + (isLast && !($$.isLegendRight || $$.isLegendInset) ? 0 : paddingRight) + config.legend_padding,\n          itemHeight = box.height + paddingTop,\n          itemLength = $$.isLegendRight || $$.isLegendInset ? itemHeight : itemWidth,\n          areaLength = $$.isLegendRight || $$.isLegendInset ? $$.getLegendHeight() : $$.getLegendWidth(),\n          margin,\n          maxLength; // MEMO: care about condifion of step, totalLength\n\n      function updateValues(id, withoutStep) {\n        if (!withoutStep) {\n          margin = (areaLength - totalLength - itemLength) / 2;\n\n          if (margin < posMin) {\n            margin = (areaLength - itemLength) / 2;\n            totalLength = 0;\n            step++;\n          }\n        }\n\n        steps[id] = step;\n        margins[step] = $$.isLegendInset ? 10 : margin;\n        offsets[id] = totalLength;\n        totalLength += itemLength;\n      }\n\n      if (reset) {\n        totalLength = 0;\n        step = 0;\n        maxWidth = 0;\n        maxHeight = 0;\n      }\n\n      if (config.legend_show && !$$.isLegendToShow(id)) {\n        widths[id] = heights[id] = steps[id] = offsets[id] = 0;\n        return;\n      }\n\n      widths[id] = itemWidth;\n      heights[id] = itemHeight;\n\n      if (!maxWidth || itemWidth >= maxWidth) {\n        maxWidth = itemWidth;\n      }\n\n      if (!maxHeight || itemHeight >= maxHeight) {\n        maxHeight = itemHeight;\n      }\n\n      maxLength = $$.isLegendRight || $$.isLegendInset ? maxHeight : maxWidth;\n\n      if (config.legend_equally) {\n        Object.keys(widths).forEach(function (id) {\n          widths[id] = maxWidth;\n        });\n        Object.keys(heights).forEach(function (id) {\n          heights[id] = maxHeight;\n        });\n        margin = (areaLength - maxLength * targetIds.length) / 2;\n\n        if (margin < posMin) {\n          totalLength = 0;\n          step = 0;\n          targetIds.forEach(function (id) {\n            updateValues(id);\n          });\n        } else {\n          updateValues(id, true);\n        }\n      } else {\n        updateValues(id);\n      }\n    }\n\n    if ($$.isLegendInset) {\n      step = config.legend_inset_step ? config.legend_inset_step : targetIds.length;\n      $$.updateLegendStep(step);\n    }\n\n    if ($$.isLegendRight) {\n      xForLegend = function xForLegend(id) {\n        return maxWidth * steps[id];\n      };\n\n      yForLegend = function yForLegend(id) {\n        return margins[steps[id]] + offsets[id];\n      };\n    } else if ($$.isLegendInset) {\n      xForLegend = function xForLegend(id) {\n        return maxWidth * steps[id] + 10;\n      };\n\n      yForLegend = function yForLegend(id) {\n        return margins[steps[id]] + offsets[id];\n      };\n    } else {\n      xForLegend = function xForLegend(id) {\n        return margins[steps[id]] + offsets[id];\n      };\n\n      yForLegend = function yForLegend(id) {\n        return maxHeight * steps[id];\n      };\n    }\n\n    xForLegendText = function xForLegendText(id, i) {\n      return xForLegend(id, i) + 4 + config.legend_item_tile_width;\n    };\n\n    yForLegendText = function yForLegendText(id, i) {\n      return yForLegend(id, i) + 9;\n    };\n\n    xForLegendRect = function xForLegendRect(id, i) {\n      return xForLegend(id, i);\n    };\n\n    yForLegendRect = function yForLegendRect(id, i) {\n      return yForLegend(id, i) - 5;\n    };\n\n    x1ForLegendTile = function x1ForLegendTile(id, i) {\n      return xForLegend(id, i) - 2;\n    };\n\n    x2ForLegendTile = function x2ForLegendTile(id, i) {\n      return xForLegend(id, i) - 2 + config.legend_item_tile_width;\n    };\n\n    yForLegendTile = function yForLegendTile(id, i) {\n      return yForLegend(id, i) + 4;\n    }; // Define g for legend area\n\n\n    l = $$.legend.selectAll('.' + CLASS.legendItem).data(targetIds).enter().append('g').attr('class', function (id) {\n      return $$.generateClass(CLASS.legendItem, id);\n    }).style('visibility', function (id) {\n      return $$.isLegendToShow(id) ? 'visible' : 'hidden';\n    }).style('cursor', function () {\n      return config.interaction_enabled ? 'pointer' : 'auto';\n    }).on('click', config.interaction_enabled ? function (id) {\n      if (config.legend_item_onclick) {\n        config.legend_item_onclick.call($$, id);\n      } else {\n        if ($$.d3.event.altKey) {\n          $$.api.hide();\n          $$.api.show(id);\n        } else {\n          $$.api.toggle(id);\n          $$.isTargetToShow(id) ? $$.api.focus(id) : $$.api.revert();\n        }\n      }\n    } : null).on('mouseover', config.interaction_enabled ? function (id) {\n      if (config.legend_item_onmouseover) {\n        config.legend_item_onmouseover.call($$, id);\n      } else {\n        $$.d3.select(this).classed(CLASS.legendItemFocused, true);\n\n        if (!$$.transiting && $$.isTargetToShow(id)) {\n          $$.api.focus(id);\n        }\n      }\n    } : null).on('mouseout', config.interaction_enabled ? function (id) {\n      if (config.legend_item_onmouseout) {\n        config.legend_item_onmouseout.call($$, id);\n      } else {\n        $$.d3.select(this).classed(CLASS.legendItemFocused, false);\n        $$.api.revert();\n      }\n    } : null);\n    l.append('text').text(function (id) {\n      return isDefined(config.data_names[id]) ? config.data_names[id] : id;\n    }).each(function (id, i) {\n      updatePositions(this, id, i);\n    }).style('pointer-events', 'none').attr('x', $$.isLegendRight || $$.isLegendInset ? xForLegendText : -200).attr('y', $$.isLegendRight || $$.isLegendInset ? -200 : yForLegendText);\n    l.append('rect').attr('class', CLASS.legendItemEvent).style('fill-opacity', 0).attr('x', $$.isLegendRight || $$.isLegendInset ? xForLegendRect : -200).attr('y', $$.isLegendRight || $$.isLegendInset ? -200 : yForLegendRect);\n    l.append('line').attr('class', CLASS.legendItemTile).style('stroke', $$.color).style('pointer-events', 'none').attr('x1', $$.isLegendRight || $$.isLegendInset ? x1ForLegendTile : -200).attr('y1', $$.isLegendRight || $$.isLegendInset ? -200 : yForLegendTile).attr('x2', $$.isLegendRight || $$.isLegendInset ? x2ForLegendTile : -200).attr('y2', $$.isLegendRight || $$.isLegendInset ? -200 : yForLegendTile).attr('stroke-width', config.legend_item_tile_height); // Set background for inset legend\n\n    background = $$.legend.select('.' + CLASS.legendBackground + ' rect');\n\n    if ($$.isLegendInset && maxWidth > 0 && background.size() === 0) {\n      background = $$.legend.insert('g', '.' + CLASS.legendItem).attr('class', CLASS.legendBackground).append('rect');\n    }\n\n    texts = $$.legend.selectAll('text').data(targetIds).text(function (id) {\n      return isDefined(config.data_names[id]) ? config.data_names[id] : id;\n    }) // MEMO: needed for update\n    .each(function (id, i) {\n      updatePositions(this, id, i);\n    });\n    (withTransition ? texts.transition() : texts).attr('x', xForLegendText).attr('y', yForLegendText);\n    rects = $$.legend.selectAll('rect.' + CLASS.legendItemEvent).data(targetIds);\n    (withTransition ? rects.transition() : rects).attr('width', function (id) {\n      return widths[id];\n    }).attr('height', function (id) {\n      return heights[id];\n    }).attr('x', xForLegendRect).attr('y', yForLegendRect);\n    tiles = $$.legend.selectAll('line.' + CLASS.legendItemTile).data(targetIds);\n    (withTransition ? tiles.transition() : tiles).style('stroke', $$.levelColor ? function (id) {\n      return $$.levelColor($$.cache[id].values.reduce(function (total, item) {\n        return total + item.value;\n      }, 0));\n    } : $$.color).attr('x1', x1ForLegendTile).attr('y1', yForLegendTile).attr('x2', x2ForLegendTile).attr('y2', yForLegendTile);\n\n    if (background) {\n      (withTransition ? background.transition() : background).attr('height', $$.getLegendHeight() - 12).attr('width', maxWidth * (step + 1) + 10);\n    } // toggle legend state\n\n\n    $$.legend.selectAll('.' + CLASS.legendItem).classed(CLASS.legendItemHidden, function (id) {\n      return !$$.isTargetToShow(id);\n    }); // Update all to reflect change of legend\n\n    $$.updateLegendItemWidth(maxWidth);\n    $$.updateLegendItemHeight(maxHeight);\n    $$.updateLegendStep(step); // Update size and scale\n\n    $$.updateSizes();\n    $$.updateScales();\n    $$.updateSvgSize(); // Update g positions\n\n    $$.transformAll(withTransitionForTransform, transitions);\n    $$.legendHasRendered = true;\n  };\n\n  ChartInternal.prototype.initRegion = function () {\n    var $$ = this;\n    $$.region = $$.main.append('g').attr('clip-path', $$.clipPath).attr('class', CLASS.regions);\n  };\n\n  ChartInternal.prototype.updateRegion = function (duration) {\n    var $$ = this,\n        config = $$.config; // hide if arc type\n\n    $$.region.style('visibility', $$.hasArcType() ? 'hidden' : 'visible');\n    var mainRegion = $$.main.select('.' + CLASS.regions).selectAll('.' + CLASS.region).data(config.regions);\n    var g = mainRegion.enter().append('g');\n    g.append('rect').attr('x', $$.regionX.bind($$)).attr('y', $$.regionY.bind($$)).attr('width', $$.regionWidth.bind($$)).attr('height', $$.regionHeight.bind($$)).style('fill-opacity', function (d) {\n      return isValue(d.opacity) ? d.opacity : 0.1;\n    });\n    g.append('text').text($$.labelRegion.bind($$));\n    $$.mainRegion = g.merge(mainRegion).attr('class', $$.classRegion.bind($$));\n    mainRegion.exit().transition().duration(duration).style('opacity', 0).remove();\n  };\n\n  ChartInternal.prototype.redrawRegion = function (withTransition, transition) {\n    var $$ = this,\n        regions = $$.mainRegion,\n        regionLabels = $$.mainRegion.selectAll('text');\n    return [(withTransition ? regions.transition(transition) : regions).attr('x', $$.regionX.bind($$)).attr('y', $$.regionY.bind($$)).attr('width', $$.regionWidth.bind($$)).attr('height', $$.regionHeight.bind($$)).style('fill-opacity', function (d) {\n      return isValue(d.opacity) ? d.opacity : 0.1;\n    }), (withTransition ? regionLabels.transition(transition) : regionLabels).attr('x', $$.labelOffsetX.bind($$)).attr('y', $$.labelOffsetY.bind($$)).attr('transform', $$.labelTransform.bind($$)).attr('style', 'text-anchor: left;')];\n  };\n\n  ChartInternal.prototype.regionX = function (d) {\n    var $$ = this,\n        config = $$.config,\n        xPos,\n        yScale = d.axis === 'y' ? $$.y : $$.y2;\n\n    if (d.axis === 'y' || d.axis === 'y2') {\n      xPos = config.axis_rotated ? 'start' in d ? yScale(d.start) : 0 : 0;\n    } else {\n      xPos = config.axis_rotated ? 0 : 'start' in d ? $$.x($$.isTimeSeries() ? $$.parseDate(d.start) : d.start) : 0;\n    }\n\n    return xPos;\n  };\n\n  ChartInternal.prototype.regionY = function (d) {\n    var $$ = this,\n        config = $$.config,\n        yPos,\n        yScale = d.axis === 'y' ? $$.y : $$.y2;\n\n    if (d.axis === 'y' || d.axis === 'y2') {\n      yPos = config.axis_rotated ? 0 : 'end' in d ? yScale(d.end) : 0;\n    } else {\n      yPos = config.axis_rotated ? 'start' in d ? $$.x($$.isTimeSeries() ? $$.parseDate(d.start) : d.start) : 0 : 0;\n    }\n\n    return yPos;\n  };\n\n  ChartInternal.prototype.regionWidth = function (d) {\n    var $$ = this,\n        config = $$.config,\n        start = $$.regionX(d),\n        end,\n        yScale = d.axis === 'y' ? $$.y : $$.y2;\n\n    if (d.axis === 'y' || d.axis === 'y2') {\n      end = config.axis_rotated ? 'end' in d ? yScale(d.end) : $$.width : $$.width;\n    } else {\n      end = config.axis_rotated ? $$.width : 'end' in d ? $$.x($$.isTimeSeries() ? $$.parseDate(d.end) : d.end) : $$.width;\n    }\n\n    return end < start ? 0 : end - start;\n  };\n\n  ChartInternal.prototype.regionHeight = function (d) {\n    var $$ = this,\n        config = $$.config,\n        start = this.regionY(d),\n        end,\n        yScale = d.axis === 'y' ? $$.y : $$.y2;\n\n    if (d.axis === 'y' || d.axis === 'y2') {\n      end = config.axis_rotated ? $$.height : 'start' in d ? yScale(d.start) : $$.height;\n    } else {\n      end = config.axis_rotated ? 'end' in d ? $$.x($$.isTimeSeries() ? $$.parseDate(d.end) : d.end) : $$.height : $$.height;\n    }\n\n    return end < start ? 0 : end - start;\n  };\n\n  ChartInternal.prototype.isRegionOnX = function (d) {\n    return !d.axis || d.axis === 'x';\n  };\n\n  ChartInternal.prototype.labelRegion = function (d) {\n    return 'label' in d ? d.label : '';\n  };\n\n  ChartInternal.prototype.labelTransform = function (d) {\n    return 'vertical' in d && d.vertical ? 'rotate(90)' : '';\n  };\n\n  ChartInternal.prototype.labelOffsetX = function (d) {\n    var paddingX = 'paddingX' in d ? d.paddingX : 3;\n    var paddingY = 'paddingY' in d ? d.paddingY : 3;\n    return 'vertical' in d && d.vertical ? this.regionY(d) + paddingY : this.regionX(d) + paddingX;\n  };\n\n  ChartInternal.prototype.labelOffsetY = function (d) {\n    var paddingX = 'paddingX' in d ? d.paddingX : 3;\n    var paddingY = 'paddingY' in d ? d.paddingY : 3;\n    return 'vertical' in d && d.vertical ? -(this.regionX(d) + paddingX) : this.regionY(d) + 10 + paddingY;\n  };\n\n  function c3LogScale(d3, linearScale, logScale) {\n    var PROJECTION = [0.01, 10];\n\n    if (!linearScale) {\n      linearScale = d3.scaleLinear();\n      linearScale.range(PROJECTION);\n    }\n\n    if (!logScale) {\n      logScale = d3.scaleLog();\n      logScale.domain(PROJECTION);\n      logScale.nice();\n    } // copied from https://github.com/compute-io/logspace\n\n\n    function logspace(a, b, len) {\n      var arr, end, tmp, d;\n\n      if (arguments.length < 3) {\n        len = 10;\n      } else {\n        if (len === 0) {\n          return [];\n        }\n      } // Calculate the increment:\n\n\n      end = len - 1;\n      d = (b - a) / end; // Build the output array...\n\n      arr = new Array(len);\n      tmp = a;\n      arr[0] = Math.pow(10, tmp);\n\n      for (var i = 1; i < end; i++) {\n        tmp += d;\n        arr[i] = Math.pow(10, tmp);\n      }\n\n      arr[end] = Math.pow(10, b);\n      return arr;\n    }\n\n    function scale(x) {\n      return logScale(linearScale(x));\n    }\n\n    scale.domain = function (x) {\n      if (!arguments.length) {\n        return linearScale.domain();\n      }\n\n      linearScale.domain(x);\n      return scale;\n    };\n\n    scale.range = function (x) {\n      if (!arguments.length) {\n        return logScale.range();\n      }\n\n      logScale.range(x);\n      return scale;\n    };\n\n    scale.ticks = function (m) {\n      return logspace(-2, 1, m || 10).map(function (v) {\n        return linearScale.invert(v);\n      });\n    };\n\n    scale.copy = function () {\n      return c3LogScale(d3, linearScale.copy(), logScale.copy());\n    };\n\n    return scale;\n  }\n\n  ChartInternal.prototype.getScale = function (min, max, forTimeseries) {\n    return (forTimeseries ? this.d3.scaleTime() : this.d3.scaleLinear()).range([min, max]);\n  };\n\n  ChartInternal.prototype.getX = function (min, max, domain, offset) {\n    var $$ = this,\n        scale = $$.getScale(min, max, $$.isTimeSeries()),\n        _scale = domain ? scale.domain(domain) : scale,\n        key; // Define customized scale if categorized axis\n\n\n    if ($$.isCategorized()) {\n      offset = offset || function () {\n        return 0;\n      };\n\n      scale = function scale(d, raw) {\n        var v = _scale(d) + offset(d);\n        return raw ? v : Math.ceil(v);\n      };\n    } else {\n      scale = function scale(d, raw) {\n        var v = _scale(d);\n\n        return raw ? v : Math.ceil(v);\n      };\n    } // define functions\n\n\n    for (key in _scale) {\n      scale[key] = _scale[key];\n    }\n\n    scale.orgDomain = function () {\n      return _scale.domain();\n    }; // define custom domain() for categorized axis\n\n\n    if ($$.isCategorized()) {\n      scale.domain = function (domain) {\n        if (!arguments.length) {\n          domain = this.orgDomain();\n          return [domain[0], domain[1] + 1];\n        }\n\n        _scale.domain(domain);\n\n        return scale;\n      };\n    }\n\n    return scale;\n  };\n  /**\n   * Creates and configures a D3 scale instance for the given type.\n   *\n   * By defaults it returns a Linear scale.\n   *\n   * @param {String} type Type of d3-scale to create. Type can be 'linear', 'time', 'timeseries' or 'log'.\n   * @param {Array} domain The scale domain such as [from, to]\n   * @param {Array} range The scale's range such as [from, to]\n   *\n   * @return A d3-scale instance\n   */\n\n\n  ChartInternal.prototype.getY = function (type, domain, range) {\n    var scale;\n\n    if (type === 'timeseries' || type === 'time') {\n      scale = this.d3.scaleTime();\n    } else if (type === 'log') {\n      scale = c3LogScale(this.d3);\n    } else if (type === 'linear' || type === undefined) {\n      scale = this.d3.scaleLinear();\n    } else {\n      throw new Error(\"Invalid Y axis type: \\\"\".concat(type, \"\\\"\"));\n    }\n\n    if (domain) {\n      scale.domain(domain);\n    }\n\n    if (range) {\n      scale.range(range);\n    }\n\n    return scale;\n  };\n\n  ChartInternal.prototype.getYScale = function (id) {\n    return this.axis.getId(id) === 'y2' ? this.y2 : this.y;\n  };\n\n  ChartInternal.prototype.getSubYScale = function (id) {\n    return this.axis.getId(id) === 'y2' ? this.subY2 : this.subY;\n  };\n\n  ChartInternal.prototype.updateScales = function () {\n    var $$ = this,\n        config = $$.config,\n        forInit = !$$.x; // update edges\n\n    $$.xMin = config.axis_rotated ? 1 : 0;\n    $$.xMax = config.axis_rotated ? $$.height : $$.width;\n    $$.yMin = config.axis_rotated ? 0 : $$.height;\n    $$.yMax = config.axis_rotated ? $$.width : 1;\n    $$.subXMin = $$.xMin;\n    $$.subXMax = $$.xMax;\n    $$.subYMin = config.axis_rotated ? 0 : $$.height2;\n    $$.subYMax = config.axis_rotated ? $$.width2 : 1; // update scales\n\n    $$.x = $$.getX($$.xMin, $$.xMax, forInit ? undefined : $$.x.orgDomain(), function () {\n      return $$.xAxis.tickOffset();\n    });\n    $$.y = $$.getY(config.axis_y_type, forInit ? config.axis_y_default : $$.y.domain(), [$$.yMin, $$.yMax]);\n    $$.y2 = $$.getY(config.axis_y2_type, forInit ? config.axis_y2_default : $$.y2.domain(), [$$.yMin, $$.yMax]);\n    $$.subX = $$.getX($$.xMin, $$.xMax, $$.orgXDomain, function (d) {\n      return d % 1 ? 0 : $$.subXAxis.tickOffset();\n    });\n    $$.subY = $$.getY(config.axis_y_type, forInit ? config.axis_y_default : $$.subY.domain(), [$$.subYMin, $$.subYMax]);\n    $$.subY2 = $$.getY(config.axis_y2_type, forInit ? config.axis_y2_default : $$.subY2.domain(), [$$.subYMin, $$.subYMax]); // update axes\n\n    $$.xAxisTickFormat = $$.axis.getXAxisTickFormat();\n    $$.xAxisTickValues = $$.axis.getXAxisTickValues();\n    $$.yAxisTickValues = $$.axis.getYAxisTickValues();\n    $$.y2AxisTickValues = $$.axis.getY2AxisTickValues();\n    $$.xAxis = $$.axis.getXAxis($$.x, $$.xOrient, $$.xAxisTickFormat, $$.xAxisTickValues, config.axis_x_tick_outer);\n    $$.subXAxis = $$.axis.getXAxis($$.subX, $$.subXOrient, $$.xAxisTickFormat, $$.xAxisTickValues, config.axis_x_tick_outer);\n    $$.yAxis = $$.axis.getYAxis('y', $$.y, $$.yOrient, $$.yAxisTickValues, config.axis_y_tick_outer);\n    $$.y2Axis = $$.axis.getYAxis('y2', $$.y2, $$.y2Orient, $$.y2AxisTickValues, config.axis_y2_tick_outer); // Set initialized scales to brush and zoom\n\n    if (!forInit) {\n      if ($$.brush) {\n        $$.brush.updateScale($$.subX);\n      }\n    } // update for arc\n\n\n    if ($$.updateArc) {\n      $$.updateArc();\n    }\n  };\n\n  ChartInternal.prototype.selectPoint = function (target, d, i) {\n    var $$ = this,\n        config = $$.config,\n        cx = (config.axis_rotated ? $$.circleY : $$.circleX).bind($$),\n        cy = (config.axis_rotated ? $$.circleX : $$.circleY).bind($$),\n        r = $$.pointSelectR.bind($$);\n    config.data_onselected.call($$.api, d, target.node()); // add selected-circle on low layer g\n\n    $$.main.select('.' + CLASS.selectedCircles + $$.getTargetSelectorSuffix(d.id)).selectAll('.' + CLASS.selectedCircle + '-' + i).data([d]).enter().append('circle').attr('class', function () {\n      return $$.generateClass(CLASS.selectedCircle, i);\n    }).attr('cx', cx).attr('cy', cy).attr('stroke', function () {\n      return $$.color(d);\n    }).attr('r', function (d) {\n      return $$.pointSelectR(d) * 1.4;\n    }).transition().duration(100).attr('r', r);\n  };\n\n  ChartInternal.prototype.unselectPoint = function (target, d, i) {\n    var $$ = this;\n    $$.config.data_onunselected.call($$.api, d, target.node()); // remove selected-circle from low layer g\n\n    $$.main.select('.' + CLASS.selectedCircles + $$.getTargetSelectorSuffix(d.id)).selectAll('.' + CLASS.selectedCircle + '-' + i).transition().duration(100).attr('r', 0).remove();\n  };\n\n  ChartInternal.prototype.togglePoint = function (selected, target, d, i) {\n    selected ? this.selectPoint(target, d, i) : this.unselectPoint(target, d, i);\n  };\n\n  ChartInternal.prototype.selectPath = function (target, d) {\n    var $$ = this;\n    $$.config.data_onselected.call($$, d, target.node());\n\n    if ($$.config.interaction_brighten) {\n      target.transition().duration(100).style('fill', function () {\n        return $$.d3.rgb($$.color(d)).brighter(0.75);\n      });\n    }\n  };\n\n  ChartInternal.prototype.unselectPath = function (target, d) {\n    var $$ = this;\n    $$.config.data_onunselected.call($$, d, target.node());\n\n    if ($$.config.interaction_brighten) {\n      target.transition().duration(100).style('fill', function () {\n        return $$.color(d);\n      });\n    }\n  };\n\n  ChartInternal.prototype.togglePath = function (selected, target, d, i) {\n    selected ? this.selectPath(target, d, i) : this.unselectPath(target, d, i);\n  };\n\n  ChartInternal.prototype.getToggle = function (that, d) {\n    var $$ = this,\n        toggle;\n\n    if (that.nodeName === 'circle') {\n      if ($$.isStepType(d)) {\n        // circle is hidden in step chart, so treat as within the click area\n        toggle = function toggle() {}; // TODO: how to select step chart?\n\n      } else {\n        toggle = $$.togglePoint;\n      }\n    } else if (that.nodeName === 'path') {\n      toggle = $$.togglePath;\n    }\n\n    return toggle;\n  };\n\n  ChartInternal.prototype.toggleShape = function (that, d, i) {\n    var $$ = this,\n        d3 = $$.d3,\n        config = $$.config,\n        shape = d3.select(that),\n        isSelected = shape.classed(CLASS.SELECTED),\n        toggle = $$.getToggle(that, d).bind($$);\n\n    if (config.data_selection_enabled && config.data_selection_isselectable(d)) {\n      if (!config.data_selection_multiple) {\n        $$.main.selectAll('.' + CLASS.shapes + (config.data_selection_grouped ? $$.getTargetSelectorSuffix(d.id) : '')).selectAll('.' + CLASS.shape).each(function (d, i) {\n          var shape = d3.select(this);\n\n          if (shape.classed(CLASS.SELECTED)) {\n            toggle(false, shape.classed(CLASS.SELECTED, false), d, i);\n          }\n        });\n      }\n\n      shape.classed(CLASS.SELECTED, !isSelected);\n      toggle(!isSelected, shape, d, i);\n    }\n  };\n\n  ChartInternal.prototype.initBar = function () {\n    var $$ = this;\n    $$.main.select('.' + CLASS.chart).append('g').attr('class', CLASS.chartBars);\n  };\n\n  ChartInternal.prototype.updateTargetsForBar = function (targets) {\n    var $$ = this,\n        config = $$.config,\n        mainBars,\n        mainBarEnter,\n        classChartBar = $$.classChartBar.bind($$),\n        classBars = $$.classBars.bind($$),\n        classFocus = $$.classFocus.bind($$);\n    mainBars = $$.main.select('.' + CLASS.chartBars).selectAll('.' + CLASS.chartBar).data(targets).attr('class', function (d) {\n      return classChartBar(d) + classFocus(d);\n    });\n    mainBarEnter = mainBars.enter().append('g').attr('class', classChartBar).style('pointer-events', 'none'); // Bars for each data\n\n    mainBarEnter.append('g').attr('class', classBars).style('cursor', function (d) {\n      return config.data_selection_isselectable(d) ? 'pointer' : null;\n    });\n  };\n\n  ChartInternal.prototype.updateBar = function (durationForExit) {\n    var $$ = this,\n        barData = $$.barData.bind($$),\n        classBar = $$.classBar.bind($$),\n        initialOpacity = $$.initialOpacity.bind($$),\n        color = function color(d) {\n      return $$.color(d.id);\n    };\n\n    var mainBar = $$.main.selectAll('.' + CLASS.bars).selectAll('.' + CLASS.bar).data(barData);\n    var mainBarEnter = mainBar.enter().append('path').attr('class', classBar).style('stroke', color).style('fill', color);\n    $$.mainBar = mainBarEnter.merge(mainBar).style('opacity', initialOpacity);\n    mainBar.exit().transition().duration(durationForExit).style('opacity', 0);\n  };\n\n  ChartInternal.prototype.redrawBar = function (drawBar, withTransition, transition) {\n    var $$ = this;\n    return [(withTransition ? this.mainBar.transition(transition) : this.mainBar).attr('d', drawBar).style('stroke', this.color).style('fill', this.color).style('opacity', function (d) {\n      return $$.isTargetToShow(d.id) ? 1 : 0;\n    })];\n  };\n\n  ChartInternal.prototype.getBarW = function (axis, barTargetsNum) {\n    var $$ = this,\n        config = $$.config,\n        w = typeof config.bar_width === 'number' ? config.bar_width : barTargetsNum ? axis.tickInterval() * config.bar_width_ratio / barTargetsNum : 0;\n    return config.bar_width_max && w > config.bar_width_max ? config.bar_width_max : w;\n  };\n\n  ChartInternal.prototype.getBars = function (i, id) {\n    var $$ = this;\n    return (id ? $$.main.selectAll('.' + CLASS.bars + $$.getTargetSelectorSuffix(id)) : $$.main).selectAll('.' + CLASS.bar + (isValue(i) ? '-' + i : ''));\n  };\n\n  ChartInternal.prototype.expandBars = function (i, id, reset) {\n    var $$ = this;\n\n    if (reset) {\n      $$.unexpandBars();\n    }\n\n    $$.getBars(i, id).classed(CLASS.EXPANDED, true);\n  };\n\n  ChartInternal.prototype.unexpandBars = function (i) {\n    var $$ = this;\n    $$.getBars(i).classed(CLASS.EXPANDED, false);\n  };\n\n  ChartInternal.prototype.generateDrawBar = function (barIndices, isSub) {\n    var $$ = this,\n        config = $$.config,\n        getPoints = $$.generateGetBarPoints(barIndices, isSub);\n    return function (d, i) {\n      // 4 points that make a bar\n      var points = getPoints(d, i); // switch points if axis is rotated, not applicable for sub chart\n\n      var indexX = config.axis_rotated ? 1 : 0;\n      var indexY = config.axis_rotated ? 0 : 1;\n      var path = 'M ' + points[0][indexX] + ',' + points[0][indexY] + ' ' + 'L' + points[1][indexX] + ',' + points[1][indexY] + ' ' + 'L' + points[2][indexX] + ',' + points[2][indexY] + ' ' + 'L' + points[3][indexX] + ',' + points[3][indexY] + ' ' + 'z';\n      return path;\n    };\n  };\n\n  ChartInternal.prototype.generateGetBarPoints = function (barIndices, isSub) {\n    var $$ = this,\n        axis = isSub ? $$.subXAxis : $$.xAxis,\n        barTargetsNum = barIndices.__max__ + 1,\n        barW = $$.getBarW(axis, barTargetsNum),\n        barX = $$.getShapeX(barW, barTargetsNum, barIndices, !!isSub),\n        barY = $$.getShapeY(!!isSub),\n        barOffset = $$.getShapeOffset($$.isBarType, barIndices, !!isSub),\n        barSpaceOffset = barW * ($$.config.bar_space / 2),\n        yScale = isSub ? $$.getSubYScale : $$.getYScale;\n    return function (d, i) {\n      var y0 = yScale.call($$, d.id)(0),\n          offset = barOffset(d, i) || y0,\n          // offset is for stacked bar chart\n      posX = barX(d),\n          posY = barY(d); // fix posY not to overflow opposite quadrant\n\n      if ($$.config.axis_rotated) {\n        if (0 < d.value && posY < y0 || d.value < 0 && y0 < posY) {\n          posY = y0;\n        }\n      }\n\n      posY -= y0 - offset; // 4 points that make a bar\n\n      return [[posX + barSpaceOffset, offset], [posX + barSpaceOffset, posY], [posX + barW - barSpaceOffset, posY], [posX + barW - barSpaceOffset, offset]];\n    };\n  };\n  /**\n   * Returns whether the data point is within the given bar shape.\n   *\n   * @param mouse\n   * @param barShape\n   * @return {boolean}\n   */\n\n\n  ChartInternal.prototype.isWithinBar = function (mouse, barShape) {\n    return isWithinBox(mouse, getBBox(barShape), 2);\n  };\n\n  ChartInternal.prototype.getShapeIndices = function (typeFilter) {\n    var $$ = this,\n        config = $$.config,\n        indices = {},\n        i = 0,\n        j,\n        k;\n    $$.filterTargetsToShow($$.data.targets.filter(typeFilter, $$)).forEach(function (d) {\n      for (j = 0; j < config.data_groups.length; j++) {\n        if (config.data_groups[j].indexOf(d.id) < 0) {\n          continue;\n        }\n\n        for (k = 0; k < config.data_groups[j].length; k++) {\n          if (config.data_groups[j][k] in indices) {\n            indices[d.id] = indices[config.data_groups[j][k]];\n            break;\n          }\n        }\n      }\n\n      if (isUndefined(indices[d.id])) {\n        indices[d.id] = i++;\n      }\n    });\n    indices.__max__ = i - 1;\n    return indices;\n  };\n\n  ChartInternal.prototype.getShapeX = function (offset, targetsNum, indices, isSub) {\n    var $$ = this,\n        scale = isSub ? $$.subX : $$.x;\n    return function (d) {\n      var index = d.id in indices ? indices[d.id] : 0;\n      return d.x || d.x === 0 ? scale(d.x) - offset * (targetsNum / 2 - index) : 0;\n    };\n  };\n\n  ChartInternal.prototype.getShapeY = function (isSub) {\n    var $$ = this;\n    return function (d) {\n      var scale = isSub ? $$.getSubYScale(d.id) : $$.getYScale(d.id);\n      return scale($$.isTargetNormalized(d.id) ? $$.getRatio('index', d, true) : d.value);\n    };\n  };\n\n  ChartInternal.prototype.getShapeOffset = function (typeFilter, indices, isSub) {\n    var $$ = this,\n        targets = $$.orderTargets($$.filterTargetsToShow($$.data.targets.filter(typeFilter, $$))),\n        targetIds = targets.map(function (t) {\n      return t.id;\n    });\n    return function (d, i) {\n      var scale = isSub ? $$.getSubYScale(d.id) : $$.getYScale(d.id),\n          y0 = scale(0),\n          offset = y0;\n      targets.forEach(function (t) {\n        var rowValues = $$.isStepType(d) ? $$.convertValuesToStep(t.values) : t.values;\n        var isTargetNormalized = $$.isTargetNormalized(d.id);\n        var values = rowValues.map(function (v) {\n          return isTargetNormalized ? $$.getRatio('index', v, true) : v.value;\n        });\n\n        if (t.id === d.id || indices[t.id] !== indices[d.id]) {\n          return;\n        }\n\n        if (targetIds.indexOf(t.id) < targetIds.indexOf(d.id)) {\n          // check if the x values line up\n          if (isUndefined(rowValues[i]) || +rowValues[i].x !== +d.x) {\n            // \"+\" for timeseries\n            // if not, try to find the value that does line up\n            i = -1;\n            rowValues.forEach(function (v, j) {\n              var x1 = v.x.constructor === Date ? +v.x : v.x;\n              var x2 = d.x.constructor === Date ? +d.x : d.x;\n\n              if (x1 === x2) {\n                i = j;\n              }\n            });\n          }\n\n          if (i in rowValues && rowValues[i].value * d.value >= 0) {\n            offset += scale(values[i]) - y0;\n          }\n        }\n      });\n      return offset;\n    };\n  };\n\n  ChartInternal.prototype.isWithinShape = function (that, d) {\n    var $$ = this,\n        shape = $$.d3.select(that),\n        isWithin;\n\n    if (!$$.isTargetToShow(d.id)) {\n      isWithin = false;\n    } else if (that.nodeName === 'circle') {\n      isWithin = $$.isStepType(d) ? $$.isWithinStep(that, $$.getYScale(d.id)(d.value)) : $$.isWithinCircle(that, $$.pointSelectR(d) * 1.5);\n    } else if (that.nodeName === 'path') {\n      isWithin = shape.classed(CLASS.bar) ? $$.isWithinBar($$.d3.mouse(that), that) : true;\n    }\n\n    return isWithin;\n  };\n\n  ChartInternal.prototype.getInterpolate = function (d) {\n    var $$ = this,\n        d3 = $$.d3,\n        types = {\n      linear: d3.curveLinear,\n      'linear-closed': d3.curveLinearClosed,\n      basis: d3.curveBasis,\n      'basis-open': d3.curveBasisOpen,\n      'basis-closed': d3.curveBasisClosed,\n      bundle: d3.curveBundle,\n      cardinal: d3.curveCardinal,\n      'cardinal-open': d3.curveCardinalOpen,\n      'cardinal-closed': d3.curveCardinalClosed,\n      monotone: d3.curveMonotoneX,\n      step: d3.curveStep,\n      'step-before': d3.curveStepBefore,\n      'step-after': d3.curveStepAfter\n    },\n        type;\n\n    if ($$.isSplineType(d)) {\n      type = types[$$.config.spline_interpolation_type] || types.cardinal;\n    } else if ($$.isStepType(d)) {\n      type = types[$$.config.line_step_type];\n    } else {\n      type = types.linear;\n    }\n\n    return type;\n  };\n\n  ChartInternal.prototype.initLine = function () {\n    var $$ = this;\n    $$.main.select('.' + CLASS.chart).append('g').attr('class', CLASS.chartLines);\n  };\n\n  ChartInternal.prototype.updateTargetsForLine = function (targets) {\n    var $$ = this,\n        config = $$.config,\n        mainLines,\n        mainLineEnter,\n        classChartLine = $$.classChartLine.bind($$),\n        classLines = $$.classLines.bind($$),\n        classAreas = $$.classAreas.bind($$),\n        classCircles = $$.classCircles.bind($$),\n        classFocus = $$.classFocus.bind($$);\n    mainLines = $$.main.select('.' + CLASS.chartLines).selectAll('.' + CLASS.chartLine).data(targets).attr('class', function (d) {\n      return classChartLine(d) + classFocus(d);\n    });\n    mainLineEnter = mainLines.enter().append('g').attr('class', classChartLine).style('opacity', 0).style('pointer-events', 'none'); // Lines for each data\n\n    mainLineEnter.append('g').attr('class', classLines); // Areas\n\n    mainLineEnter.append('g').attr('class', classAreas); // Circles for each data point on lines\n\n    mainLineEnter.append('g').attr('class', function (d) {\n      return $$.generateClass(CLASS.selectedCircles, d.id);\n    });\n    mainLineEnter.append('g').attr('class', classCircles).style('cursor', function (d) {\n      return config.data_selection_isselectable(d) ? 'pointer' : null;\n    }); // Update date for selected circles\n\n    targets.forEach(function (t) {\n      $$.main.selectAll('.' + CLASS.selectedCircles + $$.getTargetSelectorSuffix(t.id)).selectAll('.' + CLASS.selectedCircle).each(function (d) {\n        d.value = t.values[d.index].value;\n      });\n    }); // MEMO: can not keep same color...\n    //mainLineUpdate.exit().remove();\n  };\n\n  ChartInternal.prototype.updateLine = function (durationForExit) {\n    var $$ = this;\n    var mainLine = $$.main.selectAll('.' + CLASS.lines).selectAll('.' + CLASS.line).data($$.lineData.bind($$));\n    var mainLineEnter = mainLine.enter().append('path').attr('class', $$.classLine.bind($$)).style('stroke', $$.color);\n    $$.mainLine = mainLineEnter.merge(mainLine).style('opacity', $$.initialOpacity.bind($$)).style('shape-rendering', function (d) {\n      return $$.isStepType(d) ? 'crispEdges' : '';\n    }).attr('transform', null);\n    mainLine.exit().transition().duration(durationForExit).style('opacity', 0);\n  };\n\n  ChartInternal.prototype.redrawLine = function (drawLine, withTransition, transition) {\n    return [(withTransition ? this.mainLine.transition(transition) : this.mainLine).attr('d', drawLine).style('stroke', this.color).style('opacity', 1)];\n  };\n\n  ChartInternal.prototype.generateDrawLine = function (lineIndices, isSub) {\n    var $$ = this,\n        config = $$.config,\n        line = $$.d3.line(),\n        getPoints = $$.generateGetLinePoints(lineIndices, isSub),\n        yScaleGetter = isSub ? $$.getSubYScale : $$.getYScale,\n        xValue = function xValue(d) {\n      return (isSub ? $$.subxx : $$.xx).call($$, d);\n    },\n        yValue = function yValue(d, i) {\n      return config.data_groups.length > 0 ? getPoints(d, i)[0][1] : yScaleGetter.call($$, d.id)(d.value);\n    };\n\n    line = config.axis_rotated ? line.x(yValue).y(xValue) : line.x(xValue).y(yValue);\n\n    if (!config.line_connectNull) {\n      line = line.defined(function (d) {\n        return d.value != null;\n      });\n    }\n\n    return function (d) {\n      var values = config.line_connectNull ? $$.filterRemoveNull(d.values) : d.values,\n          x = isSub ? $$.subX : $$.x,\n          y = yScaleGetter.call($$, d.id),\n          x0 = 0,\n          y0 = 0,\n          path;\n\n      if ($$.isLineType(d)) {\n        if (config.data_regions[d.id]) {\n          path = $$.lineWithRegions(values, x, y, config.data_regions[d.id]);\n        } else {\n          if ($$.isStepType(d)) {\n            values = $$.convertValuesToStep(values);\n          }\n\n          path = line.curve($$.getInterpolate(d))(values);\n        }\n      } else {\n        if (values[0]) {\n          x0 = x(values[0].x);\n          y0 = y(values[0].value);\n        }\n\n        path = config.axis_rotated ? 'M ' + y0 + ' ' + x0 : 'M ' + x0 + ' ' + y0;\n      }\n\n      return path ? path : 'M 0 0';\n    };\n  };\n\n  ChartInternal.prototype.generateGetLinePoints = function (lineIndices, isSub) {\n    // partial duplication of generateGetBarPoints\n    var $$ = this,\n        config = $$.config,\n        lineTargetsNum = lineIndices.__max__ + 1,\n        x = $$.getShapeX(0, lineTargetsNum, lineIndices, !!isSub),\n        y = $$.getShapeY(!!isSub),\n        lineOffset = $$.getShapeOffset($$.isLineType, lineIndices, !!isSub),\n        yScale = isSub ? $$.getSubYScale : $$.getYScale;\n    return function (d, i) {\n      var y0 = yScale.call($$, d.id)(0),\n          offset = lineOffset(d, i) || y0,\n          // offset is for stacked area chart\n      posX = x(d),\n          posY = y(d); // fix posY not to overflow opposite quadrant\n\n      if (config.axis_rotated) {\n        if (0 < d.value && posY < y0 || d.value < 0 && y0 < posY) {\n          posY = y0;\n        }\n      } // 1 point that marks the line position\n\n\n      return [[posX, posY - (y0 - offset)], [posX, posY - (y0 - offset)], // needed for compatibility\n      [posX, posY - (y0 - offset)], // needed for compatibility\n      [posX, posY - (y0 - offset)] // needed for compatibility\n      ];\n    };\n  };\n\n  ChartInternal.prototype.lineWithRegions = function (d, x, y, _regions) {\n    var $$ = this,\n        config = $$.config,\n        prev = -1,\n        i,\n        j,\n        s = 'M',\n        sWithRegion,\n        xp,\n        yp,\n        dx,\n        dy,\n        dd,\n        diff,\n        diffx2,\n        xOffset = $$.isCategorized() ? 0.5 : 0,\n        xValue,\n        yValue,\n        regions = [];\n\n    function isWithinRegions(x, regions) {\n      var i;\n\n      for (i = 0; i < regions.length; i++) {\n        if (regions[i].start < x && x <= regions[i].end) {\n          return true;\n        }\n      }\n\n      return false;\n    } // Check start/end of regions\n\n\n    if (isDefined(_regions)) {\n      for (i = 0; i < _regions.length; i++) {\n        regions[i] = {};\n\n        if (isUndefined(_regions[i].start)) {\n          regions[i].start = d[0].x;\n        } else {\n          regions[i].start = $$.isTimeSeries() ? $$.parseDate(_regions[i].start) : _regions[i].start;\n        }\n\n        if (isUndefined(_regions[i].end)) {\n          regions[i].end = d[d.length - 1].x;\n        } else {\n          regions[i].end = $$.isTimeSeries() ? $$.parseDate(_regions[i].end) : _regions[i].end;\n        }\n      }\n    } // Set scales\n\n\n    xValue = config.axis_rotated ? function (d) {\n      return y(d.value);\n    } : function (d) {\n      return x(d.x);\n    };\n    yValue = config.axis_rotated ? function (d) {\n      return x(d.x);\n    } : function (d) {\n      return y(d.value);\n    }; // Define svg generator function for region\n\n    function generateM(points) {\n      return 'M' + points[0][0] + ' ' + points[0][1] + ' ' + points[1][0] + ' ' + points[1][1];\n    }\n\n    if ($$.isTimeSeries()) {\n      sWithRegion = function sWithRegion(d0, d1, j, diff) {\n        var x0 = d0.x.getTime(),\n            x_diff = d1.x - d0.x,\n            xv0 = new Date(x0 + x_diff * j),\n            xv1 = new Date(x0 + x_diff * (j + diff)),\n            points;\n\n        if (config.axis_rotated) {\n          points = [[y(yp(j)), x(xv0)], [y(yp(j + diff)), x(xv1)]];\n        } else {\n          points = [[x(xv0), y(yp(j))], [x(xv1), y(yp(j + diff))]];\n        }\n\n        return generateM(points);\n      };\n    } else {\n      sWithRegion = function sWithRegion(d0, d1, j, diff) {\n        var points;\n\n        if (config.axis_rotated) {\n          points = [[y(yp(j), true), x(xp(j))], [y(yp(j + diff), true), x(xp(j + diff))]];\n        } else {\n          points = [[x(xp(j), true), y(yp(j))], [x(xp(j + diff), true), y(yp(j + diff))]];\n        }\n\n        return generateM(points);\n      };\n    } // Generate\n\n\n    for (i = 0; i < d.length; i++) {\n      // Draw as normal\n      if (isUndefined(regions) || !isWithinRegions(d[i].x, regions)) {\n        s += ' ' + xValue(d[i]) + ' ' + yValue(d[i]);\n      } // Draw with region // TODO: Fix for horizotal charts\n      else {\n          xp = $$.getScale(d[i - 1].x + xOffset, d[i].x + xOffset, $$.isTimeSeries());\n          yp = $$.getScale(d[i - 1].value, d[i].value);\n          dx = x(d[i].x) - x(d[i - 1].x);\n          dy = y(d[i].value) - y(d[i - 1].value);\n          dd = Math.sqrt(Math.pow(dx, 2) + Math.pow(dy, 2));\n          diff = 2 / dd;\n          diffx2 = diff * 2;\n\n          for (j = diff; j <= 1; j += diffx2) {\n            s += sWithRegion(d[i - 1], d[i], j, diff);\n          }\n        }\n\n      prev = d[i].x;\n    }\n\n    return s;\n  };\n\n  ChartInternal.prototype.updateArea = function (durationForExit) {\n    var $$ = this,\n        d3 = $$.d3;\n    var mainArea = $$.main.selectAll('.' + CLASS.areas).selectAll('.' + CLASS.area).data($$.lineData.bind($$));\n    var mainAreaEnter = mainArea.enter().append('path').attr('class', $$.classArea.bind($$)).style('fill', $$.color).style('opacity', function () {\n      $$.orgAreaOpacity = +d3.select(this).style('opacity');\n      return 0;\n    });\n    $$.mainArea = mainAreaEnter.merge(mainArea).style('opacity', $$.orgAreaOpacity);\n    mainArea.exit().transition().duration(durationForExit).style('opacity', 0);\n  };\n\n  ChartInternal.prototype.redrawArea = function (drawArea, withTransition, transition) {\n    return [(withTransition ? this.mainArea.transition(transition) : this.mainArea).attr('d', drawArea).style('fill', this.color).style('opacity', this.orgAreaOpacity)];\n  };\n\n  ChartInternal.prototype.generateDrawArea = function (areaIndices, isSub) {\n    var $$ = this,\n        config = $$.config,\n        area = $$.d3.area(),\n        getPoints = $$.generateGetAreaPoints(areaIndices, isSub),\n        yScaleGetter = isSub ? $$.getSubYScale : $$.getYScale,\n        xValue = function xValue(d) {\n      return (isSub ? $$.subxx : $$.xx).call($$, d);\n    },\n        value0 = function value0(d, i) {\n      return config.data_groups.length > 0 ? getPoints(d, i)[0][1] : yScaleGetter.call($$, d.id)($$.getAreaBaseValue(d.id));\n    },\n        value1 = function value1(d, i) {\n      return config.data_groups.length > 0 ? getPoints(d, i)[1][1] : yScaleGetter.call($$, d.id)(d.value);\n    };\n\n    area = config.axis_rotated ? area.x0(value0).x1(value1).y(xValue) : area.x(xValue).y0(config.area_above ? 0 : value0).y1(value1);\n\n    if (!config.line_connectNull) {\n      area = area.defined(function (d) {\n        return d.value !== null;\n      });\n    }\n\n    return function (d) {\n      var values = config.line_connectNull ? $$.filterRemoveNull(d.values) : d.values,\n          x0 = 0,\n          y0 = 0,\n          path;\n\n      if ($$.isAreaType(d)) {\n        if ($$.isStepType(d)) {\n          values = $$.convertValuesToStep(values);\n        }\n\n        path = area.curve($$.getInterpolate(d))(values);\n      } else {\n        if (values[0]) {\n          x0 = $$.x(values[0].x);\n          y0 = $$.getYScale(d.id)(values[0].value);\n        }\n\n        path = config.axis_rotated ? 'M ' + y0 + ' ' + x0 : 'M ' + x0 + ' ' + y0;\n      }\n\n      return path ? path : 'M 0 0';\n    };\n  };\n\n  ChartInternal.prototype.getAreaBaseValue = function () {\n    return 0;\n  };\n\n  ChartInternal.prototype.generateGetAreaPoints = function (areaIndices, isSub) {\n    // partial duplication of generateGetBarPoints\n    var $$ = this,\n        config = $$.config,\n        areaTargetsNum = areaIndices.__max__ + 1,\n        x = $$.getShapeX(0, areaTargetsNum, areaIndices, !!isSub),\n        y = $$.getShapeY(!!isSub),\n        areaOffset = $$.getShapeOffset($$.isAreaType, areaIndices, !!isSub),\n        yScale = isSub ? $$.getSubYScale : $$.getYScale;\n    return function (d, i) {\n      var y0 = yScale.call($$, d.id)(0),\n          offset = areaOffset(d, i) || y0,\n          // offset is for stacked area chart\n      posX = x(d),\n          posY = y(d); // fix posY not to overflow opposite quadrant\n\n      if (config.axis_rotated) {\n        if (0 < d.value && posY < y0 || d.value < 0 && y0 < posY) {\n          posY = y0;\n        }\n      } // 1 point that marks the area position\n\n\n      return [[posX, offset], [posX, posY - (y0 - offset)], [posX, posY - (y0 - offset)], // needed for compatibility\n      [posX, offset] // needed for compatibility\n      ];\n    };\n  };\n\n  ChartInternal.prototype.updateCircle = function (cx, cy) {\n    var $$ = this;\n    var mainCircle = $$.main.selectAll('.' + CLASS.circles).selectAll('.' + CLASS.circle).data($$.lineOrScatterOrStanfordData.bind($$));\n    var mainCircleEnter = mainCircle.enter().append('circle').attr('shape-rendering', $$.isStanfordGraphType() ? 'crispEdges' : '').attr('class', $$.classCircle.bind($$)).attr('cx', cx).attr('cy', cy).attr('r', $$.pointR.bind($$)).style('color', $$.isStanfordGraphType() ? $$.getStanfordPointColor.bind($$) : $$.color);\n    $$.mainCircle = mainCircleEnter.merge(mainCircle).style('opacity', $$.isStanfordGraphType() ? 1 : $$.initialOpacityForCircle.bind($$));\n    mainCircle.exit().style('opacity', 0);\n  };\n\n  ChartInternal.prototype.redrawCircle = function (cx, cy, withTransition, transition) {\n    var $$ = this,\n        selectedCircles = $$.main.selectAll('.' + CLASS.selectedCircle);\n    return [(withTransition ? $$.mainCircle.transition(transition) : $$.mainCircle).style('opacity', this.opacityForCircle.bind($$)).style('color', $$.isStanfordGraphType() ? $$.getStanfordPointColor.bind($$) : $$.color).attr('cx', cx).attr('cy', cy), (withTransition ? selectedCircles.transition(transition) : selectedCircles).attr('cx', cx).attr('cy', cy)];\n  };\n\n  ChartInternal.prototype.circleX = function (d) {\n    return d.x || d.x === 0 ? this.x(d.x) : null;\n  };\n\n  ChartInternal.prototype.updateCircleY = function () {\n    var $$ = this,\n        lineIndices,\n        getPoints;\n\n    if ($$.config.data_groups.length > 0) {\n      lineIndices = $$.getShapeIndices($$.isLineType), getPoints = $$.generateGetLinePoints(lineIndices);\n\n      $$.circleY = function (d, i) {\n        return getPoints(d, i)[0][1];\n      };\n    } else {\n      $$.circleY = function (d) {\n        return $$.getYScale(d.id)(d.value);\n      };\n    }\n  };\n\n  ChartInternal.prototype.getCircles = function (i, id) {\n    var $$ = this;\n    return (id ? $$.main.selectAll('.' + CLASS.circles + $$.getTargetSelectorSuffix(id)) : $$.main).selectAll('.' + CLASS.circle + (isValue(i) ? '-' + i : ''));\n  };\n\n  ChartInternal.prototype.expandCircles = function (i, id, reset) {\n    var $$ = this,\n        r = $$.pointExpandedR.bind($$);\n\n    if (reset) {\n      $$.unexpandCircles();\n    }\n\n    $$.getCircles(i, id).classed(CLASS.EXPANDED, true).attr('r', r);\n  };\n\n  ChartInternal.prototype.unexpandCircles = function (i) {\n    var $$ = this,\n        r = $$.pointR.bind($$);\n    $$.getCircles(i).filter(function () {\n      return $$.d3.select(this).classed(CLASS.EXPANDED);\n    }).classed(CLASS.EXPANDED, false).attr('r', r);\n  };\n\n  ChartInternal.prototype.pointR = function (d) {\n    var $$ = this,\n        config = $$.config;\n    return $$.isStepType(d) ? 0 : isFunction(config.point_r) ? config.point_r(d) : config.point_r;\n  };\n\n  ChartInternal.prototype.pointExpandedR = function (d) {\n    var $$ = this,\n        config = $$.config;\n\n    if (config.point_focus_expand_enabled) {\n      return isFunction(config.point_focus_expand_r) ? config.point_focus_expand_r(d) : config.point_focus_expand_r ? config.point_focus_expand_r : $$.pointR(d) * 1.75;\n    } else {\n      return $$.pointR(d);\n    }\n  };\n\n  ChartInternal.prototype.pointSelectR = function (d) {\n    var $$ = this,\n        config = $$.config;\n    return isFunction(config.point_select_r) ? config.point_select_r(d) : config.point_select_r ? config.point_select_r : $$.pointR(d) * 4;\n  };\n\n  ChartInternal.prototype.isWithinCircle = function (that, r) {\n    var d3 = this.d3,\n        mouse = d3.mouse(that),\n        d3_this = d3.select(that),\n        cx = +d3_this.attr('cx'),\n        cy = +d3_this.attr('cy');\n    return Math.sqrt(Math.pow(cx - mouse[0], 2) + Math.pow(cy - mouse[1], 2)) < r;\n  };\n\n  ChartInternal.prototype.isWithinStep = function (that, y) {\n    return Math.abs(y - this.d3.mouse(that)[1]) < 30;\n  };\n\n  ChartInternal.prototype.getCurrentWidth = function () {\n    var $$ = this,\n        config = $$.config;\n    return config.size_width ? config.size_width : $$.getParentWidth();\n  };\n\n  ChartInternal.prototype.getCurrentHeight = function () {\n    var $$ = this,\n        config = $$.config,\n        h = config.size_height ? config.size_height : $$.getParentHeight();\n    return h > 0 ? h : 320 / ($$.hasType('gauge') && !config.gauge_fullCircle ? 2 : 1);\n  };\n\n  ChartInternal.prototype.getCurrentPaddingTop = function () {\n    var $$ = this,\n        config = $$.config,\n        padding = isValue(config.padding_top) ? config.padding_top : 0;\n\n    if ($$.title && $$.title.node()) {\n      padding += $$.getTitlePadding();\n    }\n\n    return padding;\n  };\n\n  ChartInternal.prototype.getCurrentPaddingBottom = function () {\n    var config = this.config;\n    return isValue(config.padding_bottom) ? config.padding_bottom : 0;\n  };\n\n  ChartInternal.prototype.getCurrentPaddingLeft = function (withoutRecompute) {\n    var $$ = this,\n        config = $$.config;\n\n    if (isValue(config.padding_left)) {\n      return config.padding_left;\n    } else if (config.axis_rotated) {\n      return !config.axis_x_show || config.axis_x_inner ? 1 : Math.max(ceil10($$.getAxisWidthByAxisId('x', withoutRecompute)), 40);\n    } else if (!config.axis_y_show || config.axis_y_inner) {\n      // && !config.axis_rotated\n      return $$.axis.getYAxisLabelPosition().isOuter ? 30 : 1;\n    } else {\n      return ceil10($$.getAxisWidthByAxisId('y', withoutRecompute));\n    }\n  };\n\n  ChartInternal.prototype.getCurrentPaddingRight = function () {\n    var $$ = this,\n        config = $$.config,\n        padding = 0,\n        defaultPadding = 10,\n        legendWidthOnRight = $$.isLegendRight ? $$.getLegendWidth() + 20 : 0;\n\n    if (isValue(config.padding_right)) {\n      padding = config.padding_right + 1; // 1 is needed not to hide tick line\n    } else if (config.axis_rotated) {\n      padding = defaultPadding + legendWidthOnRight;\n    } else if (!config.axis_y2_show || config.axis_y2_inner) {\n      // && !config.axis_rotated\n      padding = 2 + legendWidthOnRight + ($$.axis.getY2AxisLabelPosition().isOuter ? 20 : 0);\n    } else {\n      padding = ceil10($$.getAxisWidthByAxisId('y2')) + legendWidthOnRight;\n    }\n\n    if ($$.colorScale && $$.colorScale.node()) {\n      padding += $$.getColorScalePadding();\n    }\n\n    return padding;\n  };\n\n  ChartInternal.prototype.getParentRectValue = function (key) {\n    var parent = this.selectChart.node(),\n        v;\n\n    while (parent && parent.tagName !== 'BODY') {\n      try {\n        v = parent.getBoundingClientRect()[key];\n      } catch (e) {\n        if (key === 'width') {\n          // In IE in certain cases getBoundingClientRect\n          // will cause an \"unspecified error\"\n          v = parent.offsetWidth;\n        }\n      }\n\n      if (v) {\n        break;\n      }\n\n      parent = parent.parentNode;\n    }\n\n    return v;\n  };\n\n  ChartInternal.prototype.getParentWidth = function () {\n    return this.getParentRectValue('width');\n  };\n\n  ChartInternal.prototype.getParentHeight = function () {\n    var h = this.selectChart.style('height');\n    return h.indexOf('px') > 0 ? +h.replace('px', '') : 0;\n  };\n\n  ChartInternal.prototype.getSvgLeft = function (withoutRecompute) {\n    var $$ = this,\n        config = $$.config,\n        hasLeftAxisRect = config.axis_rotated || !config.axis_rotated && !config.axis_y_inner,\n        leftAxisClass = config.axis_rotated ? CLASS.axisX : CLASS.axisY,\n        leftAxis = $$.main.select('.' + leftAxisClass).node(),\n        svgRect = leftAxis && hasLeftAxisRect ? leftAxis.getBoundingClientRect() : {\n      right: 0\n    },\n        chartRect = $$.selectChart.node().getBoundingClientRect(),\n        hasArc = $$.hasArcType(),\n        svgLeft = svgRect.right - chartRect.left - (hasArc ? 0 : $$.getCurrentPaddingLeft(withoutRecompute));\n    return svgLeft > 0 ? svgLeft : 0;\n  };\n\n  ChartInternal.prototype.getAxisWidthByAxisId = function (id, withoutRecompute) {\n    var $$ = this,\n        position = $$.axis.getLabelPositionById(id);\n    return $$.axis.getMaxTickWidth(id, withoutRecompute) + (position.isInner ? 20 : 40);\n  };\n\n  ChartInternal.prototype.getHorizontalAxisHeight = function (axisId) {\n    var $$ = this,\n        config = $$.config,\n        h = 30;\n\n    if (axisId === 'x' && !config.axis_x_show) {\n      return 8;\n    }\n\n    if (axisId === 'x' && config.axis_x_height) {\n      return config.axis_x_height;\n    }\n\n    if (axisId === 'y' && !config.axis_y_show) {\n      return config.legend_show && !$$.isLegendRight && !$$.isLegendInset ? 10 : 1;\n    }\n\n    if (axisId === 'y2' && !config.axis_y2_show) {\n      return $$.rotated_padding_top;\n    } // Calculate x axis height when tick rotated\n\n\n    if (axisId === 'x' && !config.axis_rotated && config.axis_x_tick_rotate) {\n      h = 30 + $$.axis.getMaxTickWidth(axisId) * Math.cos(Math.PI * (90 - Math.abs(config.axis_x_tick_rotate)) / 180);\n    } // Calculate y axis height when tick rotated\n\n\n    if (axisId === 'y' && config.axis_rotated && config.axis_y_tick_rotate) {\n      h = 30 + $$.axis.getMaxTickWidth(axisId) * Math.cos(Math.PI * (90 - Math.abs(config.axis_y_tick_rotate)) / 180);\n    }\n\n    return h + ($$.axis.getLabelPositionById(axisId).isInner ? 0 : 10) + (axisId === 'y2' ? -10 : 0);\n  };\n\n  ChartInternal.prototype.initBrush = function (scale) {\n    var $$ = this,\n        d3 = $$.d3; // TODO: dynamically change brushY/brushX according to axis_rotated.\n\n    $$.brush = ($$.config.axis_rotated ? d3.brushY() : d3.brushX()).on('brush', function () {\n      var event = d3.event.sourceEvent;\n\n      if (event && event.type === 'zoom') {\n        return;\n      }\n\n      $$.redrawForBrush();\n    }).on('end', function () {\n      var event = d3.event.sourceEvent;\n\n      if (event && event.type === 'zoom') {\n        return;\n      }\n\n      if ($$.brush.empty() && event && event.type !== 'end') {\n        $$.brush.clear();\n      }\n    });\n\n    $$.brush.updateExtent = function () {\n      var range = this.scale.range(),\n          extent;\n\n      if ($$.config.axis_rotated) {\n        extent = [[0, range[0]], [$$.width2, range[1]]];\n      } else {\n        extent = [[range[0], 0], [range[1], $$.height2]];\n      }\n\n      this.extent(extent);\n      return this;\n    };\n\n    $$.brush.updateScale = function (scale) {\n      this.scale = scale;\n      return this;\n    };\n\n    $$.brush.update = function (scale) {\n      this.updateScale(scale || $$.subX).updateExtent();\n      $$.context.select('.' + CLASS.brush).call(this);\n    };\n\n    $$.brush.clear = function () {\n      $$.context.select('.' + CLASS.brush).call($$.brush.move, null);\n    };\n\n    $$.brush.selection = function () {\n      return d3.brushSelection($$.context.select('.' + CLASS.brush).node());\n    };\n\n    $$.brush.selectionAsValue = function (selectionAsValue, withTransition) {\n      var selection, brush;\n\n      if (selectionAsValue) {\n        if ($$.context) {\n          selection = [this.scale(selectionAsValue[0]), this.scale(selectionAsValue[1])];\n          brush = $$.context.select('.' + CLASS.brush);\n\n          if (withTransition) {\n            brush = brush.transition();\n          }\n\n          $$.brush.move(brush, selection);\n        }\n\n        return [];\n      }\n\n      selection = $$.brush.selection() || [0, 0];\n      return [this.scale.invert(selection[0]), this.scale.invert(selection[1])];\n    };\n\n    $$.brush.empty = function () {\n      var selection = $$.brush.selection();\n      return !selection || selection[0] === selection[1];\n    };\n\n    return $$.brush.updateScale(scale);\n  };\n\n  ChartInternal.prototype.initSubchart = function () {\n    var $$ = this,\n        config = $$.config,\n        context = $$.context = $$.svg.append('g').attr('transform', $$.getTranslate('context')); // set style\n\n    context.style('visibility', 'visible'); // Define g for chart area\n\n    context.append('g').attr('clip-path', $$.clipPathForSubchart).attr('class', CLASS.chart); // Define g for bar chart area\n\n    context.select('.' + CLASS.chart).append('g').attr('class', CLASS.chartBars); // Define g for line chart area\n\n    context.select('.' + CLASS.chart).append('g').attr('class', CLASS.chartLines); // Add extent rect for Brush\n\n    context.append('g').attr('clip-path', $$.clipPath).attr('class', CLASS.brush); // ATTENTION: This must be called AFTER chart added\n    // Add Axis\n\n    $$.axes.subx = context.append('g').attr('class', CLASS.axisX).attr('transform', $$.getTranslate('subx')).attr('clip-path', config.axis_rotated ? '' : $$.clipPathForXAxis);\n  };\n\n  ChartInternal.prototype.initSubchartBrush = function () {\n    var $$ = this; // Add extent rect for Brush\n\n    $$.initBrush($$.subX).updateExtent();\n    $$.context.select('.' + CLASS.brush).call($$.brush);\n  };\n\n  ChartInternal.prototype.updateTargetsForSubchart = function (targets) {\n    var $$ = this,\n        context = $$.context,\n        config = $$.config,\n        contextLineEnter,\n        contextLine,\n        contextBarEnter,\n        contextBar,\n        classChartBar = $$.classChartBar.bind($$),\n        classBars = $$.classBars.bind($$),\n        classChartLine = $$.classChartLine.bind($$),\n        classLines = $$.classLines.bind($$),\n        classAreas = $$.classAreas.bind($$); //-- Bar --//\n\n    contextBar = context.select('.' + CLASS.chartBars).selectAll('.' + CLASS.chartBar).data(targets);\n    contextBarEnter = contextBar.enter().append('g').style('opacity', 0);\n    contextBarEnter.merge(contextBar).attr('class', classChartBar); // Bars for each data\n\n    contextBarEnter.append('g').attr('class', classBars); //-- Line --//\n\n    contextLine = context.select('.' + CLASS.chartLines).selectAll('.' + CLASS.chartLine).data(targets);\n    contextLineEnter = contextLine.enter().append('g').style('opacity', 0);\n    contextLineEnter.merge(contextLine).attr('class', classChartLine); // Lines for each data\n\n    contextLineEnter.append('g').attr('class', classLines); // Area\n\n    contextLineEnter.append('g').attr('class', classAreas); //-- Brush --//\n\n    context.selectAll('.' + CLASS.brush + ' rect').attr(config.axis_rotated ? 'width' : 'height', config.axis_rotated ? $$.width2 : $$.height2);\n  };\n\n  ChartInternal.prototype.updateBarForSubchart = function (durationForExit) {\n    var $$ = this;\n    var contextBar = $$.context.selectAll('.' + CLASS.bars).selectAll('.' + CLASS.bar).data($$.barData.bind($$));\n    var contextBarEnter = contextBar.enter().append('path').attr('class', $$.classBar.bind($$)).style('stroke', 'none').style('fill', $$.color);\n    contextBar.exit().transition().duration(durationForExit).style('opacity', 0).remove();\n    $$.contextBar = contextBarEnter.merge(contextBar).style('opacity', $$.initialOpacity.bind($$));\n  };\n\n  ChartInternal.prototype.redrawBarForSubchart = function (drawBarOnSub, withTransition, duration) {\n    (withTransition ? this.contextBar.transition(Math.random().toString()).duration(duration) : this.contextBar).attr('d', drawBarOnSub).style('opacity', 1);\n  };\n\n  ChartInternal.prototype.updateLineForSubchart = function (durationForExit) {\n    var $$ = this;\n    var contextLine = $$.context.selectAll('.' + CLASS.lines).selectAll('.' + CLASS.line).data($$.lineData.bind($$));\n    var contextLineEnter = contextLine.enter().append('path').attr('class', $$.classLine.bind($$)).style('stroke', $$.color);\n    contextLine.exit().transition().duration(durationForExit).style('opacity', 0).remove();\n    $$.contextLine = contextLineEnter.merge(contextLine).style('opacity', $$.initialOpacity.bind($$));\n  };\n\n  ChartInternal.prototype.redrawLineForSubchart = function (drawLineOnSub, withTransition, duration) {\n    (withTransition ? this.contextLine.transition(Math.random().toString()).duration(duration) : this.contextLine).attr('d', drawLineOnSub).style('opacity', 1);\n  };\n\n  ChartInternal.prototype.updateAreaForSubchart = function (durationForExit) {\n    var $$ = this,\n        d3 = $$.d3;\n    var contextArea = $$.context.selectAll('.' + CLASS.areas).selectAll('.' + CLASS.area).data($$.lineData.bind($$));\n    var contextAreaEnter = contextArea.enter().append('path').attr('class', $$.classArea.bind($$)).style('fill', $$.color).style('opacity', function () {\n      $$.orgAreaOpacity = +d3.select(this).style('opacity');\n      return 0;\n    });\n    contextArea.exit().transition().duration(durationForExit).style('opacity', 0).remove();\n    $$.contextArea = contextAreaEnter.merge(contextArea).style('opacity', 0);\n  };\n\n  ChartInternal.prototype.redrawAreaForSubchart = function (drawAreaOnSub, withTransition, duration) {\n    (withTransition ? this.contextArea.transition(Math.random().toString()).duration(duration) : this.contextArea).attr('d', drawAreaOnSub).style('fill', this.color).style('opacity', this.orgAreaOpacity);\n  };\n\n  ChartInternal.prototype.redrawSubchart = function (withSubchart, transitions, duration, durationForExit, areaIndices, barIndices, lineIndices) {\n    var $$ = this,\n        d3 = $$.d3,\n        drawAreaOnSub,\n        drawBarOnSub,\n        drawLineOnSub; // reflect main chart to extent on subchart if zoomed\n\n    if (d3.event && d3.event.type === 'zoom') {\n      $$.brush.selectionAsValue($$.x.orgDomain());\n    } // update subchart elements if needed\n\n\n    if (withSubchart) {\n      // extent rect\n      if (!$$.brush.empty()) {\n        $$.brush.selectionAsValue($$.x.orgDomain());\n      } // setup drawer - MEMO: this must be called after axis updated\n\n\n      drawAreaOnSub = $$.generateDrawArea(areaIndices, true);\n      drawBarOnSub = $$.generateDrawBar(barIndices, true);\n      drawLineOnSub = $$.generateDrawLine(lineIndices, true);\n      $$.updateBarForSubchart(duration);\n      $$.updateLineForSubchart(duration);\n      $$.updateAreaForSubchart(duration);\n      $$.redrawBarForSubchart(drawBarOnSub, duration, duration);\n      $$.redrawLineForSubchart(drawLineOnSub, duration, duration);\n      $$.redrawAreaForSubchart(drawAreaOnSub, duration, duration);\n    }\n  };\n\n  ChartInternal.prototype.redrawForBrush = function () {\n    var $$ = this,\n        x = $$.x,\n        d3 = $$.d3,\n        s;\n    $$.redraw({\n      withTransition: false,\n      withY: $$.config.zoom_rescale,\n      withSubchart: false,\n      withUpdateXDomain: true,\n      withEventRect: false,\n      withDimension: false\n    }); // update zoom transation binded to event rect\n\n    s = d3.event.selection || $$.brush.scale.range();\n    $$.main.select('.' + CLASS.eventRect).call($$.zoom.transform, d3.zoomIdentity.scale($$.width / (s[1] - s[0])).translate(-s[0], 0));\n    $$.config.subchart_onbrush.call($$.api, x.orgDomain());\n  };\n\n  ChartInternal.prototype.transformContext = function (withTransition, transitions) {\n    var $$ = this,\n        subXAxis;\n\n    if (transitions && transitions.axisSubX) {\n      subXAxis = transitions.axisSubX;\n    } else {\n      subXAxis = $$.context.select('.' + CLASS.axisX);\n\n      if (withTransition) {\n        subXAxis = subXAxis.transition();\n      }\n    }\n\n    $$.context.attr('transform', $$.getTranslate('context'));\n    subXAxis.attr('transform', $$.getTranslate('subx'));\n  };\n\n  ChartInternal.prototype.getDefaultSelection = function () {\n    var $$ = this,\n        config = $$.config,\n        selection = isFunction(config.axis_x_selection) ? config.axis_x_selection($$.getXDomain($$.data.targets)) : config.axis_x_selection;\n\n    if ($$.isTimeSeries()) {\n      selection = [$$.parseDate(selection[0]), $$.parseDate(selection[1])];\n    }\n\n    return selection;\n  };\n\n  ChartInternal.prototype.removeSubchart = function () {\n    var $$ = this;\n    $$.brush = null;\n    $$.context.remove();\n    $$.context = null;\n  };\n\n  ChartInternal.prototype.initText = function () {\n    var $$ = this;\n    $$.main.select('.' + CLASS.chart).append('g').attr('class', CLASS.chartTexts);\n    $$.mainText = $$.d3.selectAll([]);\n  };\n\n  ChartInternal.prototype.updateTargetsForText = function (targets) {\n    var $$ = this,\n        classChartText = $$.classChartText.bind($$),\n        classTexts = $$.classTexts.bind($$),\n        classFocus = $$.classFocus.bind($$);\n    var mainText = $$.main.select('.' + CLASS.chartTexts).selectAll('.' + CLASS.chartText).data(targets);\n    var mainTextEnter = mainText.enter().append('g').attr('class', classChartText).style('opacity', 0).style('pointer-events', 'none');\n    mainTextEnter.append('g').attr('class', classTexts);\n    mainTextEnter.merge(mainText).attr('class', function (d) {\n      return classChartText(d) + classFocus(d);\n    });\n  };\n\n  ChartInternal.prototype.updateText = function (xForText, yForText, durationForExit) {\n    var $$ = this,\n        config = $$.config,\n        barOrLineData = $$.barOrLineData.bind($$),\n        classText = $$.classText.bind($$);\n    var mainText = $$.main.selectAll('.' + CLASS.texts).selectAll('.' + CLASS.text).data(barOrLineData);\n    var mainTextEnter = mainText.enter().append('text').attr('class', classText).attr('text-anchor', function (d) {\n      return config.axis_rotated ? d.value < 0 ? 'end' : 'start' : 'middle';\n    }).style('stroke', 'none').attr('x', xForText).attr('y', yForText).style('fill', function (d) {\n      return $$.color(d);\n    }).style('fill-opacity', 0);\n    $$.mainText = mainTextEnter.merge(mainText).text(function (d, i, j) {\n      return $$.dataLabelFormat(d.id)(d.value, d.id, i, j);\n    });\n    mainText.exit().transition().duration(durationForExit).style('fill-opacity', 0).remove();\n  };\n\n  ChartInternal.prototype.redrawText = function (xForText, yForText, forFlow, withTransition, transition) {\n    return [(withTransition ? this.mainText.transition(transition) : this.mainText).attr('x', xForText).attr('y', yForText).style('fill', this.color).style('fill-opacity', forFlow ? 0 : this.opacityForText.bind(this))];\n  };\n\n  ChartInternal.prototype.getTextRect = function (text, cls, element) {\n    var dummy = this.d3.select('body').append('div').classed('c3', true),\n        svg = dummy.append('svg').style('visibility', 'hidden').style('position', 'fixed').style('top', 0).style('left', 0),\n        font = this.d3.select(element).style('font'),\n        rect;\n    svg.selectAll('.dummy').data([text]).enter().append('text').classed(cls ? cls : '', true).style('font', font).text(text).each(function () {\n      rect = getBBox(this);\n    });\n    dummy.remove();\n    return rect;\n  };\n\n  ChartInternal.prototype.generateXYForText = function (areaIndices, barIndices, lineIndices, forX) {\n    var $$ = this,\n        getAreaPoints = $$.generateGetAreaPoints(areaIndices, false),\n        getBarPoints = $$.generateGetBarPoints(barIndices, false),\n        getLinePoints = $$.generateGetLinePoints(lineIndices, false),\n        getter = forX ? $$.getXForText : $$.getYForText;\n    return function (d, i) {\n      var getPoints = $$.isAreaType(d) ? getAreaPoints : $$.isBarType(d) ? getBarPoints : getLinePoints;\n      return getter.call($$, getPoints(d, i), d, this);\n    };\n  };\n\n  ChartInternal.prototype.getXForText = function (points, d, textElement) {\n    var $$ = this,\n        box = getBBox(textElement),\n        xPos,\n        padding;\n\n    if ($$.config.axis_rotated) {\n      padding = $$.isBarType(d) ? 4 : 6;\n      xPos = points[2][1] + padding * (d.value < 0 ? -1 : 1);\n    } else {\n      xPos = $$.hasType('bar') ? (points[2][0] + points[0][0]) / 2 : points[0][0];\n    } // show labels regardless of the domain if value is null\n\n\n    if (d.value === null) {\n      if (xPos > $$.width) {\n        xPos = $$.width - box.width;\n      } else if (xPos < 0) {\n        xPos = 4;\n      }\n    }\n\n    return xPos;\n  };\n\n  ChartInternal.prototype.getYForText = function (points, d, textElement) {\n    var $$ = this,\n        box = getBBox(textElement),\n        yPos;\n\n    if ($$.config.axis_rotated) {\n      yPos = (points[0][0] + points[2][0] + box.height * 0.6) / 2;\n    } else {\n      yPos = points[2][1];\n\n      if (d.value < 0 || d.value === 0 && !$$.hasPositiveValue) {\n        yPos += box.height;\n\n        if ($$.isBarType(d) && $$.isSafari()) {\n          yPos -= 3;\n        } else if (!$$.isBarType(d) && $$.isChrome()) {\n          yPos += 3;\n        }\n      } else {\n        yPos += $$.isBarType(d) ? -3 : -6;\n      }\n    } // show labels regardless of the domain if value is null\n\n\n    if (d.value === null && !$$.config.axis_rotated) {\n      if (yPos < box.height) {\n        yPos = box.height;\n      } else if (yPos > this.height) {\n        yPos = this.height - 4;\n      }\n    }\n\n    return yPos;\n  };\n\n  ChartInternal.prototype.initTitle = function () {\n    var $$ = this;\n    $$.title = $$.svg.append('text').text($$.config.title_text).attr('class', $$.CLASS.title);\n  };\n\n  ChartInternal.prototype.redrawTitle = function () {\n    var $$ = this;\n    $$.title.attr('x', $$.xForTitle.bind($$)).attr('y', $$.yForTitle.bind($$));\n  };\n\n  ChartInternal.prototype.xForTitle = function () {\n    var $$ = this,\n        config = $$.config,\n        position = config.title_position || 'left',\n        x;\n\n    if (position.indexOf('right') >= 0) {\n      x = $$.currentWidth - $$.getTextRect($$.title.node().textContent, $$.CLASS.title, $$.title.node()).width - config.title_padding.right;\n    } else if (position.indexOf('center') >= 0) {\n      x = Math.max(($$.currentWidth - $$.getTextRect($$.title.node().textContent, $$.CLASS.title, $$.title.node()).width) / 2, 0);\n    } else {\n      // left\n      x = config.title_padding.left;\n    }\n\n    return x;\n  };\n\n  ChartInternal.prototype.yForTitle = function () {\n    var $$ = this;\n    return $$.config.title_padding.top + $$.getTextRect($$.title.node().textContent, $$.CLASS.title, $$.title.node()).height;\n  };\n\n  ChartInternal.prototype.getTitlePadding = function () {\n    var $$ = this;\n    return $$.yForTitle() + $$.config.title_padding.bottom;\n  };\n\n  function powerOfTen(d) {\n    return d / Math.pow(10, Math.ceil(Math.log(d) / Math.LN10 - 1e-12)) === 1;\n  }\n\n  ChartInternal.prototype.drawColorScale = function () {\n    var $$ = this,\n        d3 = $$.d3,\n        config = $$.config,\n        target = $$.data.targets[0],\n        barWidth,\n        barHeight,\n        axis,\n        points,\n        legendAxis,\n        axisScale,\n        inverseScale,\n        height;\n    barWidth = !isNaN(config.stanford_scaleWidth) ? config.stanford_scaleWidth : 20;\n    barHeight = 5;\n\n    if (barHeight < 0 || barWidth < 0) {\n      throw Error(\"Colorscale's barheight and barwidth must be greater than 0.\");\n    }\n\n    height = $$.height - config.stanford_padding.bottom - config.stanford_padding.top;\n    points = d3.range(config.stanford_padding.bottom, height, barHeight);\n    inverseScale = d3.scaleSequential(target.colors).domain([points[points.length - 1], points[0]]);\n\n    if ($$.colorScale) {\n      $$.colorScale.remove();\n    }\n\n    $$.colorScale = $$.svg.append('g').attr('width', 50).attr('height', height).attr('class', CLASS.colorScale);\n    $$.colorScale.append('g').attr('transform', \"translate(0, \".concat(config.stanford_padding.top, \")\")).selectAll('bars').data(points).enter().append('rect').attr('y', function (d, i) {\n      return i * barHeight;\n    }).attr('x', 0).attr('width', barWidth).attr('height', barHeight).attr('fill', function (d) {\n      return inverseScale(d);\n    }); // Legend Axis\n\n    axisScale = d3.scaleLog().domain([target.minEpochs, target.maxEpochs]).range([points[0] + config.stanford_padding.top + points[points.length - 1] + barHeight - 1, points[0] + config.stanford_padding.top]);\n    legendAxis = d3.axisRight(axisScale);\n\n    if (config.stanford_scaleFormat === 'pow10') {\n      legendAxis.tickValues([1, 10, 100, 1000, 10000, 100000, 1000000, 10000000]);\n    } else if (isFunction(config.stanford_scaleFormat)) {\n      legendAxis.tickFormat(config.stanford_scaleFormat);\n    } else {\n      legendAxis.tickFormat(d3.format('d'));\n    }\n\n    if (isFunction(config.stanford_scaleValues)) {\n      legendAxis.tickValues(config.stanford_scaleValues(target.minEpochs, target.maxEpochs));\n    } // Draw Axis\n\n\n    axis = $$.colorScale.append('g').attr('class', 'legend axis').attr('transform', \"translate(\".concat(barWidth, \",0)\")).call(legendAxis);\n\n    if (config.stanford_scaleFormat === 'pow10') {\n      axis.selectAll('.tick text').text(null).filter(powerOfTen).text(10).append('tspan').attr('dy', '-.7em') // https://bl.ocks.org/mbostock/6738229\n      .text(function (d) {\n        return Math.round(Math.log(d) / Math.LN10);\n      });\n    }\n\n    $$.colorScale.attr('transform', \"translate(\".concat($$.currentWidth - $$.xForColorScale(), \", 0)\"));\n  };\n\n  ChartInternal.prototype.xForColorScale = function () {\n    var $$ = this;\n    return $$.config.stanford_padding.right + getBBox($$.colorScale.node()).width;\n  };\n\n  ChartInternal.prototype.getColorScalePadding = function () {\n    var $$ = this;\n    return $$.xForColorScale() + $$.config.stanford_padding.left + 20;\n  };\n\n  ChartInternal.prototype.isStanfordGraphType = function () {\n    var $$ = this;\n    return $$.config.data_type === 'stanford';\n  };\n\n  ChartInternal.prototype.initStanfordData = function () {\n    var $$ = this,\n        d3 = $$.d3,\n        config = $$.config,\n        target = $$.data.targets[0],\n        epochs,\n        maxEpochs,\n        minEpochs; // Make larger values appear on top\n\n    target.values.sort(compareEpochs); // Get array of epochs\n\n    epochs = target.values.map(function (a) {\n      return a.epochs;\n    });\n    minEpochs = !isNaN(config.stanford_scaleMin) ? config.stanford_scaleMin : d3.min(epochs);\n    maxEpochs = !isNaN(config.stanford_scaleMax) ? config.stanford_scaleMax : d3.max(epochs);\n\n    if (minEpochs > maxEpochs) {\n      throw Error('Number of minEpochs has to be smaller than maxEpochs');\n    }\n\n    target.colors = isFunction(config.stanford_colors) ? config.stanford_colors : d3.interpolateHslLong(d3.hsl(250, 1, 0.5), d3.hsl(0, 1, 0.5));\n    target.colorscale = d3.scaleSequentialLog(target.colors).domain([minEpochs, maxEpochs]);\n    target.minEpochs = minEpochs;\n    target.maxEpochs = maxEpochs;\n  };\n\n  ChartInternal.prototype.getStanfordPointColor = function (d) {\n    var $$ = this,\n        target = $$.data.targets[0];\n    return target.colorscale(d.epochs);\n  }; // http://jsfiddle.net/Xotic750/KtzLq/\n\n\n  ChartInternal.prototype.getCentroid = function (points) {\n    var area = getRegionArea(points);\n    var x = 0,\n        y = 0,\n        i,\n        j,\n        f,\n        point1,\n        point2;\n\n    for (i = 0, j = points.length - 1; i < points.length; j = i, i += 1) {\n      point1 = points[i];\n      point2 = points[j];\n      f = point1.x * point2.y - point2.x * point1.y;\n      x += (point1.x + point2.x) * f;\n      y += (point1.y + point2.y) * f;\n    }\n\n    f = area * 6;\n    return {\n      x: x / f,\n      y: y / f\n    };\n  };\n\n  ChartInternal.prototype.getStanfordTooltipTitle = function (d) {\n    var $$ = this,\n        labelX = $$.axis.getLabelText('x'),\n        labelY = $$.axis.getLabelText('y');\n    return \"\\n      <tr><th>\".concat(labelX ? sanitise(labelX) : 'x', \"</th><th class='value'>\").concat(d.x, \"</th></tr>\\n      <tr><th>\").concat(labelY ? sanitise(labelY) : 'y', \"</th><th class='value'>\").concat(d.value, \"</th></tr>\\n    \");\n  };\n\n  ChartInternal.prototype.countEpochsInRegion = function (region) {\n    var $$ = this,\n        target = $$.data.targets[0],\n        total,\n        count;\n    total = target.values.reduce(function (accumulator, currentValue) {\n      return accumulator + Number(currentValue.epochs);\n    }, 0);\n    count = target.values.reduce(function (accumulator, currentValue) {\n      if (pointInRegion(currentValue, region)) {\n        return accumulator + Number(currentValue.epochs);\n      }\n\n      return accumulator;\n    }, 0);\n    return {\n      value: count,\n      percentage: count !== 0 ? (count / total * 100).toFixed(1) : 0\n    };\n  };\n\n  var getRegionArea = function getRegionArea(points) {\n    // thanks to: https://stackoverflow.com/questions/16282330/find-centerpoint-of-polygon-in-javascript\n    var area = 0,\n        i,\n        j,\n        point1,\n        point2;\n\n    for (i = 0, j = points.length - 1; i < points.length; j = i, i += 1) {\n      point1 = points[i];\n      point2 = points[j];\n      area += point1.x * point2.y;\n      area -= point1.y * point2.x;\n    }\n\n    area /= 2;\n    return area;\n  };\n\n  var pointInRegion = function pointInRegion(point, region) {\n    // thanks to: http://bl.ocks.org/bycoffe/5575904\n    // ray-casting algorithm based on\n    // http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html\n    var xi,\n        yi,\n        yj,\n        xj,\n        intersect,\n        x = point.x,\n        y = point.value,\n        inside = false;\n\n    for (var i = 0, j = region.length - 1; i < region.length; j = i++) {\n      xi = region[i].x;\n      yi = region[i].y;\n      xj = region[j].x;\n      yj = region[j].y;\n      intersect = yi > y !== yj > y && x < (xj - xi) * (y - yi) / (yj - yi) + xi;\n\n      if (intersect) {\n        inside = !inside;\n      }\n    }\n\n    return inside;\n  };\n\n  var compareEpochs = function compareEpochs(a, b) {\n    if (a.epochs < b.epochs) {\n      return -1;\n    }\n\n    if (a.epochs > b.epochs) {\n      return 1;\n    }\n\n    return 0;\n  };\n\n  ChartInternal.prototype.initStanfordElements = function () {\n    var $$ = this; // Avoid blocking eventRect\n\n    $$.stanfordElements = $$.main.select('.' + CLASS.chart).append('g').attr('class', CLASS.stanfordElements);\n    $$.stanfordElements.append('g').attr('class', CLASS.stanfordLines);\n    $$.stanfordElements.append('g').attr('class', CLASS.stanfordTexts);\n    $$.stanfordElements.append('g').attr('class', CLASS.stanfordRegions);\n  };\n\n  ChartInternal.prototype.updateStanfordElements = function (duration) {\n    var $$ = this,\n        main = $$.main,\n        config = $$.config,\n        stanfordLine,\n        stanfordLineEnter,\n        stanfordRegion,\n        stanfordRegionEnter,\n        stanfordText,\n        stanfordTextEnter,\n        xvCustom = $$.xvCustom.bind($$),\n        yvCustom = $$.yvCustom.bind($$),\n        countPointsInRegion = $$.countEpochsInRegion.bind($$); // Stanford-Lines\n\n    stanfordLine = main.select('.' + CLASS.stanfordLines).style('shape-rendering', 'geometricprecision').selectAll('.' + CLASS.stanfordLine).data(config.stanford_lines); // enter\n\n    stanfordLineEnter = stanfordLine.enter().append('g').attr('class', function (d) {\n      return CLASS.stanfordLine + (d['class'] ? ' ' + d['class'] : '');\n    });\n    stanfordLineEnter.append('line').attr('x1', function (d) {\n      return config.axis_rotated ? yvCustom(d, 'value_y1') : xvCustom(d, 'value_x1');\n    }).attr('x2', function (d) {\n      return config.axis_rotated ? yvCustom(d, 'value_y2') : xvCustom(d, 'value_x2');\n    }).attr('y1', function (d) {\n      return config.axis_rotated ? xvCustom(d, 'value_x1') : yvCustom(d, 'value_y1');\n    }).attr('y2', function (d) {\n      return config.axis_rotated ? xvCustom(d, 'value_x2') : yvCustom(d, 'value_y2');\n    }).style('opacity', 0); // update\n\n    $$.stanfordLines = stanfordLineEnter.merge(stanfordLine);\n    $$.stanfordLines.select('line').transition().duration(duration).attr('x1', function (d) {\n      return config.axis_rotated ? yvCustom(d, 'value_y1') : xvCustom(d, 'value_x1');\n    }).attr('x2', function (d) {\n      return config.axis_rotated ? yvCustom(d, 'value_y2') : xvCustom(d, 'value_x2');\n    }).attr('y1', function (d) {\n      return config.axis_rotated ? xvCustom(d, 'value_x1') : yvCustom(d, 'value_y1');\n    }).attr('y2', function (d) {\n      return config.axis_rotated ? xvCustom(d, 'value_x2') : yvCustom(d, 'value_y2');\n    }).style('opacity', 1); // exit\n\n    stanfordLine.exit().transition().duration(duration).style('opacity', 0).remove(); // Stanford-Text\n\n    stanfordText = main.select('.' + CLASS.stanfordTexts).selectAll('.' + CLASS.stanfordText).data(config.stanford_texts); // enter\n\n    stanfordTextEnter = stanfordText.enter().append('g').attr('class', function (d) {\n      return CLASS.stanfordText + (d['class'] ? ' ' + d['class'] : '');\n    });\n    stanfordTextEnter.append('text').attr('x', function (d) {\n      return config.axis_rotated ? yvCustom(d, 'y') : xvCustom(d, 'x');\n    }).attr('y', function (d) {\n      return config.axis_rotated ? xvCustom(d, 'x') : yvCustom(d, 'y');\n    }).style('opacity', 0); // update\n\n    $$.stanfordTexts = stanfordTextEnter.merge(stanfordText);\n    $$.stanfordTexts.select('text').transition().duration(duration).attr('x', function (d) {\n      return config.axis_rotated ? yvCustom(d, 'y') : xvCustom(d, 'x');\n    }).attr('y', function (d) {\n      return config.axis_rotated ? xvCustom(d, 'x') : yvCustom(d, 'y');\n    }).text(function (d) {\n      return d.content;\n    }).style('opacity', 1); // exit\n\n    stanfordText.exit().transition().duration(duration).style('opacity', 0).remove(); // Stanford-Regions\n\n    stanfordRegion = main.select('.' + CLASS.stanfordRegions).selectAll('.' + CLASS.stanfordRegion).data(config.stanford_regions); // enter\n\n    stanfordRegionEnter = stanfordRegion.enter().append('g').attr('class', function (d) {\n      return CLASS.stanfordRegion + (d['class'] ? ' ' + d['class'] : '');\n    });\n    stanfordRegionEnter.append('polygon').attr('points', function (d) {\n      return d.points.map(function (value) {\n        return [config.axis_rotated ? yvCustom(value, 'y') : xvCustom(value, 'x'), config.axis_rotated ? xvCustom(value, 'x') : yvCustom(value, 'y')].join(',');\n      }).join(' ');\n    }).style('opacity', 0);\n    stanfordRegionEnter.append('text').attr('x', function (d) {\n      return $$.getCentroid(d.points).x;\n    }).attr('y', function (d) {\n      return $$.getCentroid(d.points).y;\n    }).style('opacity', 0); // update\n\n    $$.stanfordRegions = stanfordRegionEnter.merge(stanfordRegion);\n    $$.stanfordRegions.select('polygon').transition().duration(duration).attr('points', function (d) {\n      return d.points.map(function (value) {\n        return [config.axis_rotated ? yvCustom(value, 'y') : xvCustom(value, 'x'), config.axis_rotated ? xvCustom(value, 'x') : yvCustom(value, 'y')].join(',');\n      }).join(' ');\n    }).style('opacity', function (d) {\n      return d.opacity ? d.opacity : 0.2;\n    });\n    $$.stanfordRegions.select('text').transition().duration(duration).attr('x', function (d) {\n      return config.axis_rotated ? yvCustom($$.getCentroid(d.points), 'y') : xvCustom($$.getCentroid(d.points), 'x');\n    }).attr('y', function (d) {\n      return config.axis_rotated ? xvCustom($$.getCentroid(d.points), 'x') : yvCustom($$.getCentroid(d.points), 'y');\n    }).text(function (d) {\n      if (d.text) {\n        var value, percentage, temp;\n\n        if ($$.isStanfordGraphType()) {\n          temp = countPointsInRegion(d.points);\n          value = temp.value;\n          percentage = temp.percentage;\n        }\n\n        return d.text(value, percentage);\n      }\n\n      return '';\n    }).attr('text-anchor', 'middle').attr('dominant-baseline', 'middle').style('opacity', 1); // exit\n\n    stanfordRegion.exit().transition().duration(duration).style('opacity', 0).remove();\n  };\n\n  ChartInternal.prototype.initTooltip = function () {\n    var $$ = this,\n        config = $$.config,\n        i;\n    $$.tooltip = $$.selectChart.style('position', 'relative').append('div').attr('class', CLASS.tooltipContainer).style('position', 'absolute').style('pointer-events', 'none').style('display', 'none'); // Show tooltip if needed\n\n    if (config.tooltip_init_show) {\n      if ($$.isTimeSeries() && isString(config.tooltip_init_x)) {\n        config.tooltip_init_x = $$.parseDate(config.tooltip_init_x);\n\n        for (i = 0; i < $$.data.targets[0].values.length; i++) {\n          if ($$.data.targets[0].values[i].x - config.tooltip_init_x === 0) {\n            break;\n          }\n        }\n\n        config.tooltip_init_x = i;\n      }\n\n      $$.tooltip.html(config.tooltip_contents.call($$, $$.data.targets.map(function (d) {\n        return $$.addName(d.values[config.tooltip_init_x]);\n      }), $$.axis.getXAxisTickFormat(), $$.getYFormat($$.hasArcType()), $$.color));\n      $$.tooltip.style('top', config.tooltip_init_position.top).style('left', config.tooltip_init_position.left).style('display', 'block');\n    }\n  };\n\n  ChartInternal.prototype.getTooltipSortFunction = function () {\n    var $$ = this,\n        config = $$.config;\n\n    if (config.data_groups.length === 0 || config.tooltip_order !== undefined) {\n      // if data are not grouped or if an order is specified\n      // for the tooltip values we sort them by their values\n      var order = config.tooltip_order;\n\n      if (order === undefined) {\n        order = config.data_order;\n      }\n\n      var valueOf = function valueOf(obj) {\n        return obj ? obj.value : null;\n      }; // if data are not grouped, we sort them by their value\n\n\n      if (isString(order) && order.toLowerCase() === 'asc') {\n        return function (a, b) {\n          return valueOf(a) - valueOf(b);\n        };\n      } else if (isString(order) && order.toLowerCase() === 'desc') {\n        return function (a, b) {\n          return valueOf(b) - valueOf(a);\n        };\n      } else if (isFunction(order)) {\n        // if the function is from data_order we need\n        // to wrap the returned function in order to format\n        // the sorted value to the expected format\n        var sortFunction = order;\n\n        if (config.tooltip_order === undefined) {\n          sortFunction = function sortFunction(a, b) {\n            return order(a ? {\n              id: a.id,\n              values: [a]\n            } : null, b ? {\n              id: b.id,\n              values: [b]\n            } : null);\n          };\n        }\n\n        return sortFunction;\n      } else if (isArray(order)) {\n        return function (a, b) {\n          return order.indexOf(a.id) - order.indexOf(b.id);\n        };\n      }\n    } else {\n      // if data are grouped, we follow the order of grouped targets\n      var ids = $$.orderTargets($$.data.targets).map(function (i) {\n        return i.id;\n      }); // if it was either asc or desc we need to invert the order\n      // returned by orderTargets\n\n      if ($$.isOrderAsc() || $$.isOrderDesc()) {\n        ids = ids.reverse();\n      }\n\n      return function (a, b) {\n        return ids.indexOf(a.id) - ids.indexOf(b.id);\n      };\n    }\n  };\n\n  ChartInternal.prototype.getTooltipContent = function (d, defaultTitleFormat, defaultValueFormat, color) {\n    var $$ = this,\n        config = $$.config,\n        titleFormat = config.tooltip_format_title || defaultTitleFormat,\n        nameFormat = config.tooltip_format_name || function (name) {\n      return name;\n    },\n        text,\n        i,\n        title,\n        value,\n        name,\n        bgcolor;\n\n    var valueFormat = config.tooltip_format_value;\n\n    if (!valueFormat) {\n      valueFormat = $$.isTargetNormalized(d.id) ? function (v, ratio) {\n        return \"\".concat((ratio * 100).toFixed(2), \"%\");\n      } : defaultValueFormat;\n    }\n\n    var tooltipSortFunction = this.getTooltipSortFunction();\n\n    if (tooltipSortFunction) {\n      d.sort(tooltipSortFunction);\n    }\n\n    for (i = 0; i < d.length; i++) {\n      if (!(d[i] && (d[i].value || d[i].value === 0))) {\n        continue;\n      }\n\n      if ($$.isStanfordGraphType()) {\n        // Custom tooltip for stanford plots\n        if (!text) {\n          title = $$.getStanfordTooltipTitle(d[i]);\n          text = \"<table class='\" + $$.CLASS.tooltip + \"'>\" + title;\n        }\n\n        bgcolor = $$.getStanfordPointColor(d[i]);\n        name = sanitise(config.data_epochs); // Epochs key name\n\n        value = d[i].epochs;\n      } else {\n        // Regular tooltip\n        if (!text) {\n          title = sanitise(titleFormat ? titleFormat(d[i].x, d[i].index) : d[i].x);\n          text = \"<table class='\" + $$.CLASS.tooltip + \"'>\" + (title || title === 0 ? \"<tr><th colspan='2'>\" + title + '</th></tr>' : '');\n        }\n\n        value = sanitise(valueFormat(d[i].value, d[i].ratio, d[i].id, d[i].index, d));\n\n        if (value !== undefined) {\n          // Skip elements when their name is set to null\n          if (d[i].name === null) {\n            continue;\n          }\n\n          name = sanitise(nameFormat(d[i].name, d[i].ratio, d[i].id, d[i].index));\n          bgcolor = $$.levelColor ? $$.levelColor(d[i].value) : color(d[i].id);\n        }\n      }\n\n      if (value !== undefined) {\n        text += \"<tr class='\" + $$.CLASS.tooltipName + '-' + $$.getTargetSelectorSuffix(d[i].id) + \"'>\";\n        text += \"<td class='name'><span style='background-color:\" + bgcolor + \"'></span>\" + name + '</td>';\n        text += \"<td class='value'>\" + value + '</td>';\n        text += '</tr>';\n      }\n    }\n\n    return text + '</table>';\n  };\n\n  ChartInternal.prototype.tooltipPosition = function (dataToShow, tWidth, tHeight, element) {\n    var $$ = this,\n        config = $$.config,\n        d3 = $$.d3;\n    var svgLeft, tooltipLeft, tooltipRight, tooltipTop, chartRight;\n    var forArc = $$.hasArcType(),\n        mouse = d3.mouse(element); // Determin tooltip position\n\n    if (forArc) {\n      tooltipLeft = ($$.width - ($$.isLegendRight ? $$.getLegendWidth() : 0)) / 2 + mouse[0];\n      tooltipTop = ($$.hasType('gauge') ? $$.height : $$.height / 2) + mouse[1] + 20;\n    } else {\n      svgLeft = $$.getSvgLeft(true);\n\n      if (config.axis_rotated) {\n        tooltipLeft = svgLeft + mouse[0] + 100;\n        tooltipRight = tooltipLeft + tWidth;\n        chartRight = $$.currentWidth - $$.getCurrentPaddingRight();\n        tooltipTop = $$.x(dataToShow[0].x) + 20;\n      } else {\n        tooltipLeft = svgLeft + $$.getCurrentPaddingLeft(true) + $$.x(dataToShow[0].x) + 20;\n        tooltipRight = tooltipLeft + tWidth;\n        chartRight = svgLeft + $$.currentWidth - $$.getCurrentPaddingRight();\n        tooltipTop = mouse[1] + 15;\n      }\n\n      if (tooltipRight > chartRight) {\n        // 20 is needed for Firefox to keep tooltip width\n        tooltipLeft -= tooltipRight - chartRight + 20;\n      }\n\n      if (tooltipTop + tHeight > $$.currentHeight) {\n        tooltipTop -= tHeight + 30;\n      }\n    }\n\n    if (tooltipTop < 0) {\n      tooltipTop = 0;\n    }\n\n    return {\n      top: tooltipTop,\n      left: tooltipLeft\n    };\n  };\n\n  ChartInternal.prototype.showTooltip = function (selectedData, element) {\n    var $$ = this,\n        config = $$.config;\n    var tWidth, tHeight, position;\n    var forArc = $$.hasArcType(),\n        dataToShow = selectedData.filter(function (d) {\n      return d && isValue(d.value);\n    }),\n        positionFunction = config.tooltip_position || ChartInternal.prototype.tooltipPosition;\n\n    if (dataToShow.length === 0 || !config.tooltip_show) {\n      $$.hideTooltip();\n      return;\n    }\n\n    $$.tooltip.html(config.tooltip_contents.call($$, selectedData, $$.axis.getXAxisTickFormat(), $$.getYFormat(forArc), $$.color)).style('display', 'block'); // Get tooltip dimensions\n\n    tWidth = $$.tooltip.property('offsetWidth');\n    tHeight = $$.tooltip.property('offsetHeight');\n    position = positionFunction.call(this, dataToShow, tWidth, tHeight, element); // Set tooltip\n\n    $$.tooltip.style('top', position.top + 'px').style('left', position.left + 'px');\n  };\n\n  ChartInternal.prototype.hideTooltip = function () {\n    this.tooltip.style('display', 'none');\n  };\n\n  ChartInternal.prototype.setTargetType = function (targetIds, type) {\n    var $$ = this,\n        config = $$.config;\n    $$.mapToTargetIds(targetIds).forEach(function (id) {\n      $$.withoutFadeIn[id] = type === config.data_types[id];\n      config.data_types[id] = type;\n    });\n\n    if (!targetIds) {\n      config.data_type = type;\n    }\n  };\n\n  ChartInternal.prototype.hasType = function (type, targets) {\n    var $$ = this,\n        types = $$.config.data_types,\n        has = false;\n    targets = targets || $$.data.targets;\n\n    if (targets && targets.length) {\n      targets.forEach(function (target) {\n        var t = types[target.id];\n\n        if (t && t.indexOf(type) >= 0 || !t && type === 'line') {\n          has = true;\n        }\n      });\n    } else if (Object.keys(types).length) {\n      Object.keys(types).forEach(function (id) {\n        if (types[id] === type) {\n          has = true;\n        }\n      });\n    } else {\n      has = $$.config.data_type === type;\n    }\n\n    return has;\n  };\n\n  ChartInternal.prototype.hasArcType = function (targets) {\n    return this.hasType('pie', targets) || this.hasType('donut', targets) || this.hasType('gauge', targets);\n  };\n\n  ChartInternal.prototype.isLineType = function (d) {\n    var config = this.config,\n        id = isString(d) ? d : d.id;\n    return !config.data_types[id] || ['line', 'spline', 'area', 'area-spline', 'step', 'area-step'].indexOf(config.data_types[id]) >= 0;\n  };\n\n  ChartInternal.prototype.isStepType = function (d) {\n    var id = isString(d) ? d : d.id;\n    return ['step', 'area-step'].indexOf(this.config.data_types[id]) >= 0;\n  };\n\n  ChartInternal.prototype.isSplineType = function (d) {\n    var id = isString(d) ? d : d.id;\n    return ['spline', 'area-spline'].indexOf(this.config.data_types[id]) >= 0;\n  };\n\n  ChartInternal.prototype.isAreaType = function (d) {\n    var id = isString(d) ? d : d.id;\n    return ['area', 'area-spline', 'area-step'].indexOf(this.config.data_types[id]) >= 0;\n  };\n\n  ChartInternal.prototype.isBarType = function (d) {\n    var id = isString(d) ? d : d.id;\n    return this.config.data_types[id] === 'bar';\n  };\n\n  ChartInternal.prototype.isScatterType = function (d) {\n    var id = isString(d) ? d : d.id;\n    return this.config.data_types[id] === 'scatter';\n  };\n\n  ChartInternal.prototype.isStanfordType = function (d) {\n    var id = isString(d) ? d : d.id;\n    return this.config.data_types[id] === 'stanford';\n  };\n\n  ChartInternal.prototype.isPieType = function (d) {\n    var id = isString(d) ? d : d.id;\n    return this.config.data_types[id] === 'pie';\n  };\n\n  ChartInternal.prototype.isGaugeType = function (d) {\n    var id = isString(d) ? d : d.id;\n    return this.config.data_types[id] === 'gauge';\n  };\n\n  ChartInternal.prototype.isDonutType = function (d) {\n    var id = isString(d) ? d : d.id;\n    return this.config.data_types[id] === 'donut';\n  };\n\n  ChartInternal.prototype.isArcType = function (d) {\n    return this.isPieType(d) || this.isDonutType(d) || this.isGaugeType(d);\n  };\n\n  ChartInternal.prototype.lineData = function (d) {\n    return this.isLineType(d) ? [d] : [];\n  };\n\n  ChartInternal.prototype.arcData = function (d) {\n    return this.isArcType(d.data) ? [d] : [];\n  };\n  /* not used\n   function scatterData(d) {\n   return isScatterType(d) ? d.values : [];\n   }\n   */\n\n\n  ChartInternal.prototype.barData = function (d) {\n    return this.isBarType(d) ? d.values : [];\n  };\n\n  ChartInternal.prototype.lineOrScatterOrStanfordData = function (d) {\n    return this.isLineType(d) || this.isScatterType(d) || this.isStanfordType(d) ? d.values : [];\n  };\n\n  ChartInternal.prototype.barOrLineData = function (d) {\n    return this.isBarType(d) || this.isLineType(d) ? d.values : [];\n  };\n\n  ChartInternal.prototype.isSafari = function () {\n    var ua = window.navigator.userAgent;\n    return ua.indexOf('Safari') >= 0 && ua.indexOf('Chrome') < 0;\n  };\n\n  ChartInternal.prototype.isChrome = function () {\n    var ua = window.navigator.userAgent;\n    return ua.indexOf('Chrome') >= 0;\n  };\n\n  ChartInternal.prototype.initZoom = function () {\n    var $$ = this,\n        d3 = $$.d3,\n        config = $$.config,\n        startEvent;\n    $$.zoom = d3.zoom().on('start', function () {\n      if (config.zoom_type !== 'scroll') {\n        return;\n      }\n\n      var e = d3.event.sourceEvent;\n\n      if (e && e.type === 'brush') {\n        return;\n      }\n\n      startEvent = e;\n      config.zoom_onzoomstart.call($$.api, e);\n    }).on('zoom', function () {\n      if (config.zoom_type !== 'scroll') {\n        return;\n      }\n\n      var e = d3.event.sourceEvent;\n\n      if (e && e.type === 'brush') {\n        return;\n      }\n\n      $$.redrawForZoom();\n      config.zoom_onzoom.call($$.api, $$.x.orgDomain());\n    }).on('end', function () {\n      if (config.zoom_type !== 'scroll') {\n        return;\n      }\n\n      var e = d3.event.sourceEvent;\n\n      if (e && e.type === 'brush') {\n        return;\n      } // if click, do nothing. otherwise, click interaction will be canceled.\n\n\n      if (e && startEvent.clientX === e.clientX && startEvent.clientY === e.clientY) {\n        return;\n      }\n\n      config.zoom_onzoomend.call($$.api, $$.x.orgDomain());\n    });\n\n    $$.zoom.updateDomain = function () {\n      if (d3.event && d3.event.transform) {\n        $$.x.domain(d3.event.transform.rescaleX($$.subX).domain());\n      }\n\n      return this;\n    };\n\n    $$.zoom.updateExtent = function () {\n      this.scaleExtent([1, Infinity]).translateExtent([[0, 0], [$$.width, $$.height]]).extent([[0, 0], [$$.width, $$.height]]);\n      return this;\n    };\n\n    $$.zoom.update = function () {\n      return this.updateExtent().updateDomain();\n    };\n\n    return $$.zoom.updateExtent();\n  };\n\n  ChartInternal.prototype.zoomTransform = function (range) {\n    var $$ = this,\n        s = [$$.x(range[0]), $$.x(range[1])];\n    return $$.d3.zoomIdentity.scale($$.width / (s[1] - s[0])).translate(-s[0], 0);\n  };\n\n  ChartInternal.prototype.initDragZoom = function () {\n    var $$ = this;\n    var d3 = $$.d3;\n    var config = $$.config;\n    var context = $$.context = $$.svg;\n    var brushXPos = $$.margin.left + 20.5;\n    var brushYPos = $$.margin.top + 0.5;\n\n    if (!(config.zoom_type === 'drag' && config.zoom_enabled)) {\n      return;\n    }\n\n    var getZoomedDomain = function getZoomedDomain(selection) {\n      return selection && selection.map(function (x) {\n        return $$.x.invert(x);\n      });\n    };\n\n    var brush = $$.dragZoomBrush = d3.brushX().on('start', function () {\n      $$.api.unzoom();\n      $$.svg.select('.' + CLASS.dragZoom).classed('disabled', false);\n      config.zoom_onzoomstart.call($$.api, d3.event.sourceEvent);\n    }).on('brush', function () {\n      config.zoom_onzoom.call($$.api, getZoomedDomain(d3.event.selection));\n    }).on('end', function () {\n      if (d3.event.selection == null) {\n        return;\n      }\n\n      var zoomedDomain = getZoomedDomain(d3.event.selection);\n\n      if (!config.zoom_disableDefaultBehavior) {\n        $$.api.zoom(zoomedDomain);\n      }\n\n      $$.svg.select('.' + CLASS.dragZoom).classed('disabled', true);\n      config.zoom_onzoomend.call($$.api, zoomedDomain);\n    });\n    context.append('g').classed(CLASS.dragZoom, true).attr('clip-path', $$.clipPath).attr('transform', 'translate(' + brushXPos + ',' + brushYPos + ')').call(brush);\n  };\n\n  ChartInternal.prototype.getZoomDomain = function () {\n    var $$ = this,\n        config = $$.config,\n        d3 = $$.d3,\n        min = d3.min([$$.orgXDomain[0], config.zoom_x_min]),\n        max = d3.max([$$.orgXDomain[1], config.zoom_x_max]);\n    return [min, max];\n  };\n\n  ChartInternal.prototype.redrawForZoom = function () {\n    var $$ = this,\n        d3 = $$.d3,\n        config = $$.config,\n        zoom = $$.zoom,\n        x = $$.x;\n\n    if (!config.zoom_enabled) {\n      return;\n    }\n\n    if ($$.filterTargetsToShow($$.data.targets).length === 0) {\n      return;\n    }\n\n    zoom.update();\n\n    if (config.zoom_disableDefaultBehavior) {\n      return;\n    }\n\n    if ($$.isCategorized() && x.orgDomain()[0] === $$.orgXDomain[0]) {\n      x.domain([$$.orgXDomain[0] - 1e-10, x.orgDomain()[1]]);\n    }\n\n    $$.redraw({\n      withTransition: false,\n      withY: config.zoom_rescale,\n      withSubchart: false,\n      withEventRect: false,\n      withDimension: false\n    });\n\n    if (d3.event.sourceEvent && d3.event.sourceEvent.type === 'mousemove') {\n      $$.cancelClick = true;\n    }\n  };\n\n  return c3;\n});","map":{"version":3,"sources":["/Users/charlotteweil1/Projets/Viz/gobiTraining/node_modules/c3/c3.js"],"names":["global","factory","exports","module","define","amd","self","c3","_typeof","obj","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","_defineProperty","key","value","Object","defineProperty","enumerable","configurable","writable","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","Array","isArray","_arrayLikeToArray","iter","from","o","minLen","n","toString","call","slice","name","test","len","length","i","arr2","ChartInternal","api","$$","d3","window","require","undefined","config","getDefaultConfig","data","cache","axes","Chart","internal","loadConfig","beforeInit","init","afterInit","bindThis","fn","target","argThis","keys","forEach","bind","asHalfPixel","Math","ceil","ceil10","v","diffDomain","d","getOption","options","defaultValue","isDefined","getPathBox","path","box","getBBox","items","pathSegList","getItem","minX","x","minY","min","y","width","height","element","ignore","hasValue","dict","found","isEmpty","isString","isFunction","isNumber","isUndefined","isValue","notEmpty","sanitise","str","replace","flattenArray","_ref","concat","apply","isWithinBox","point","sensitivity","arguments","xStart","xEnd","yStart","yEnd","getIEVersion","agent","navigator","userAgent","pos","indexOf","parseInt","substring","isIE","version","ver","AxisInternal","component","params","scale","scaleLinear","range","orient","innerTickSize","outerTickSize","withOuterTick","tickPadding","tickValues","tickFormat","tickArguments","tickOffset","tickCulling","tickCentered","tickTextCharSize","tickTextRotate","tickLength","axis","generateAxis","axisX","selection","attr","axisY","scaleExtent","domain","start","stop","generateTicks","ticks","push","unshift","copyScale","newScale","copy","isCategory","textFormatted","formatted","updateRange","rangeExtent","updateTickTextCharSize","tick","size","h","w","select","text","each","isVertical","tspanData","splitted","tickMultiline","splitTickText","tickMultilineMax","ellipsify","map","s","index","tickText","maxWidth","tickWidth","subtext","spaceIndex","textWidth","split","charAt","substr","max","ellipsified","remaining","available","padEnd","updateTickLength","lineY2","tickPosition","textY","rotate","textTransform","textTextAnchor","tspanDx","sin","PI","tspanDy","dy","g","transition","scale0","__chart__","scale1","ticksValues","selectAll","tickEnter","enter","insert","style","tickExit","exit","remove","tickUpdate","merge","tickTransform","tickX","tickY","lineUpdate","append","textUpdate","tspans","tspanEnter","tspanUpdate","pathUpdate","rangeBand","dx","top","right","bottom","left","format","isCentered","tickInterval","interval","node","getTotalLength","Infinity","culling","CLASS","chart","chartLine","chartLines","chartBar","chartBars","chartText","chartTexts","chartArc","chartArcs","chartArcsTitle","chartArcsBackground","chartArcsGaugeUnit","chartArcsGaugeMax","chartArcsGaugeMin","selectedCircle","selectedCircles","eventRect","eventRects","eventRectsSingle","eventRectsMultiple","zoomRect","brush","dragZoom","focused","defocused","region","regions","title","tooltipContainer","tooltip","tooltipName","shape","shapes","line","lines","bar","bars","circle","circles","arc","arcLabelLine","arcs","area","areas","empty","texts","gaugeValue","grid","gridLines","xgrid","xgrids","xgridLine","xgridLines","xgridFocus","ygrid","ygrids","ygridLine","ygridLines","colorScale","stanfordElements","stanfordLine","stanfordLines","stanfordRegion","stanfordRegions","stanfordText","stanfordTexts","axisXLabel","axisYLabel","axisY2","axisY2Label","legendBackground","legendItem","legendItemEvent","legendItemTile","legendItemHidden","legendItemFocused","dragarea","EXPANDED","SELECTED","INCLUDED","Axis","owner","main","axis_x_inner","clipPathForXAxis","getTranslate","axis_x_show","axis_rotated","textAnchorForXAxisLabel","axis_y_inner","clipPathForYAxis","axis_y_show","textAnchorForYAxisLabel","y2","axis_y2_show","textAnchorForY2AxisLabel","getXAxis","withoutTransition","withoutRotateTickText","axisParams","isCategorized","axis_x_tick_multiline","Number","axis_x_tick_multilineMax","axis_x_tick_width","axis_x_tick_rotate","isTimeSeries","parseDate","axis_x_tick_centered","axis_x_tick_culling","updateXAxisTickValues","targets","axis_x_tick_fit","axis_x_tick_count","generateTickValues","mapTargetsToUniqueXs","xAxis","subXAxis","getYAxis","axisId","isAxisNormalized","axis_y_tick_rotate","isTimeSeriesY","axis_y_tick_time_type","axis_y_tick_time_interval","getId","id","data_axes","getXAxisTickFormat","defaultAxisTimeFormat","categoryName","axis_x_tick_format","date","axisTimeFormat","getTickValues","getXAxisTickValues","axis_x_tick_values","getYAxisTickValues","axis_y_tick_values","yAxis","getY2AxisTickValues","axis_y2_tick_values","y2Axis","getLabelOptionByAxisId","option","axis_y_label","axis_y2_label","axis_x_label","getLabelText","setLabelText","getLabelPosition","defaultPosition","position","isInner","isOuter","isLeft","isCenter","isRight","isTop","isMiddle","isBottom","getXAxisLabelPosition","getYAxisLabelPosition","getY2AxisLabelPosition","getLabelPositionById","textForXAxisLabel","textForYAxisLabel","textForY2AxisLabel","xForAxisLabel","forHorizontal","dxForAxisLabel","textAnchorForAxisLabel","xForXAxisLabel","xForYAxisLabel","xForY2AxisLabel","dxForXAxisLabel","dxForYAxisLabel","dxForY2AxisLabel","dyForXAxisLabel","getMaxTickWidth","getHorizontalAxisHeight","dyForYAxisLabel","dyForY2AxisLabel","axis_y2_inner","withoutRecompute","targetsToShow","dummy","svg","currentMaxTickWidths","filterTargetsToShow","getYDomain","yOrient","yAxisTickValues","y2Orient","y2AxisTickValues","getXDomain","xOrient","xAxisTickFormat","xAxisTickValues","classed","updateLabels","withTransition","getPadding","padding","domainLength","p","unit","convertPixelsToAxisPadding","pixels","values","tickCount","forTimeSeries","targetCount","end","count","tickValue","Date","sort","a","b","generateTransitions","duration","axisSubX","subx","redraw","isHidden","generate","initParams","data_url","convertUrlToData","data_mimeType","data_headers","data_keys","initWithData","data_json","convertJsonToData","data_rows","convertRowsToData","data_columns","convertColumnsToData","Error","clipId","valueOf","clipIdForXAxis","clipIdForYAxis","clipIdForGrid","clipIdForSubchart","clipPath","getClipPath","clipPathForGrid","clipPathForSubchart","dragStart","dragging","flowing","cancelClick","mouseover","transiting","color","generateColor","levelColor","generateLevelColor","dataTimeParse","data_xLocaltime","timeParse","utcParse","data_xFormat","axis_x_localtime","timeFormat","utcFormat","getMilliseconds","getSeconds","getMinutes","getHours","getDay","getDate","getMonth","hiddenTargetIds","hiddenLegendIds","focusedTargetIds","defocusedTargetIds","subXOrient","isLegendRight","legend_position","isLegendInset","isLegendTop","legend_inset_anchor","isLegendLeft","legendStep","legendItemWidth","legendItemHeight","rotated_padding_left","rotated_padding_right","rotated_padding_top","withoutFadeIn","intervalForObserveInserted","initChartElements","initBar","initLine","initArc","initGauge","initText","defs","binding","bindto","selectChart","document","createElement","observeInserted","html","xs","convertDataToTargets","data_filter","filter","data_hide","addHiddenTargetIds","mapToIds","legend_hide","addHiddenLegendIds","isStanfordGraphType","initStanfordData","updateSizes","updateScales","extent","subX","subY","subY2","orgXDomain","on","onmouseover","onmouseout","svg_classname","clipChart","appendClip","clipXAxis","clipYAxis","clipGrid","clipSubchart","updateSvgSize","initPie","initDragZoom","subchart_show","initSubchart","initTooltip","initLegend","initTitle","initZoom","drawColorScale","initSubchartBrush","initRegion","initGrid","grid_lines_front","initGridLines","initStanfordElements","initEventRect","updateTargets","axis_x_selection","selectionAsValue","getDefaultSelection","updateDimension","oninit","withTransform","withUpdateXDomain","withUpdateOrgXDomain","withTransitionForAxis","bindResize","bindWindowFocus","smoothLines","el","type","x1","x2","y1","legendHeight","legend","getLegendHeight","legendWidth","getLegendWidth","legendHeightForBottom","hasArc","hasArcType","xAxisHeight","subchartHeight","subchart_size_height","currentWidth","getCurrentWidth","currentHeight","getCurrentHeight","margin","getCurrentPaddingTop","getCurrentPaddingRight","getCurrentPaddingBottom","getCurrentPaddingLeft","margin2","NaN","margin3","updateSizeForLegend","width2","height2","arcWidth","arcHeight","hasType","gauge_fullCircle","getGaugeLabelHeight","updateRadius","radiusExpanded","updateTargetsForText","updateTargetsForBar","updateTargetsForLine","updateTargetsForArc","updateTargetsForSubchart","showTargets","isTargetToShow","transition_duration","transitions","areaIndices","getShapeIndices","isAreaType","barIndices","isBarType","lineIndices","isLineType","withY","withSubchart","withTransitionForExit","withTrimXDomain","withLegend","withEventRect","withDimension","withUpdateXAxis","hideAxis","drawArea","drawBar","drawLine","xForText","yForText","durationForExit","durationForAxis","transitionsToWait","waitForDraw","flow","intervalForCulling","xDomainForZoom","xv","cx","cy","legend_show","updateLegend","updateXDomain","zoom_rescale","orgDomain","axis_y_tick_count","axis_y2_tick_count","axis_x_tick_culling_max","e","generateDrawArea","generateDrawBar","generateDrawLine","generateXYForText","updateCircleY","circleY","circleX","updateXgridFocus","data_empty_label_text","redrawEventRect","updateGrid","updateStanfordElements","updateRegion","updateBar","updateLine","updateArea","updateCircle","hasDataLabel","updateText","redrawTitle","redrawArc","redrawSubchart","generateFlow","isTabVisible","redrawBar","redrawLine","redrawArea","redrawCircle","redrawText","redrawRegion","redrawGrid","generateWait","t","add","onrendered","updateAndRedraw","withTransitionForTransform","transformAll","redrawWithoutRescale","axis_x_type","isCustomX","data_x","data_xs","axis_y_type","initialOpacity","initialOpacityForCircle","opacityForCircle","isPointShouldBeShown","point_show","opacity","isStanfordType","isScatterType","opacityForText","xx","xvCustom","xyValue","axis_x_categories","yvCustom","yScale","yv","subxx","transformMain","transformContext","transformLegend","getXAxisClipX","getXAxisClipY","getXAxisClipWidth","getXAxisClipHeight","getYAxisClipX","getYAxisClipY","getYAxisClipWidth","getYAxisClipHeight","withoutAxis","observer","MutationObserver","console","error","mutations","mutation","previousSibling","disconnect","setInterval","parentNode","clearInterval","update","observe","attributes","childList","characterData","resizeFunction","generateResize","onresize","resize_auto","resizeTimeout","clearTimeout","setTimeout","onresized","resizeIfElementDisplayed","offsetParent","attachEvent","addEventListener","wrapper","_this","windowFocusHandler","unbindWindowFocus","removeEventListener","resizeFunctions","callResizeFunctions","f","splice","endall","callback","timer","done","parsedDate","isNaN","hidden","SVGPathSeg","typeAsLetter","owningPathSegList","pathSegType","pathSegTypeAsLetter","_owningPathSegList","classname","PATHSEG_UNKNOWN","PATHSEG_CLOSEPATH","PATHSEG_MOVETO_ABS","PATHSEG_MOVETO_REL","PATHSEG_LINETO_ABS","PATHSEG_LINETO_REL","PATHSEG_CURVETO_CUBIC_ABS","PATHSEG_CURVETO_CUBIC_REL","PATHSEG_CURVETO_QUADRATIC_ABS","PATHSEG_CURVETO_QUADRATIC_REL","PATHSEG_ARC_ABS","PATHSEG_ARC_REL","PATHSEG_LINETO_HORIZONTAL_ABS","PATHSEG_LINETO_HORIZONTAL_REL","PATHSEG_LINETO_VERTICAL_ABS","PATHSEG_LINETO_VERTICAL_REL","PATHSEG_CURVETO_CUBIC_SMOOTH_ABS","PATHSEG_CURVETO_CUBIC_SMOOTH_REL","PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS","PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL","_segmentChanged","segmentChanged","SVGPathSegClosePath","create","_asPathString","clone","SVGPathSegMovetoAbs","_x","_y","get","set","SVGPathSegMovetoRel","SVGPathSegLinetoAbs","SVGPathSegLinetoRel","SVGPathSegCurvetoCubicAbs","_x1","_y1","_x2","_y2","SVGPathSegCurvetoCubicRel","SVGPathSegCurvetoQuadraticAbs","SVGPathSegCurvetoQuadraticRel","SVGPathSegArcAbs","r1","r2","angle","largeArcFlag","sweepFlag","_r1","_r2","_angle","_largeArcFlag","_sweepFlag","SVGPathSegArcRel","SVGPathSegLinetoHorizontalAbs","SVGPathSegLinetoHorizontalRel","SVGPathSegLinetoVerticalAbs","SVGPathSegLinetoVerticalRel","SVGPathSegCurvetoCubicSmoothAbs","SVGPathSegCurvetoCubicSmoothRel","SVGPathSegCurvetoQuadraticSmoothAbs","SVGPathSegCurvetoQuadraticSmoothRel","SVGPathElement","createSVGPathSegClosePath","createSVGPathSegMovetoAbs","createSVGPathSegMovetoRel","createSVGPathSegLinetoAbs","createSVGPathSegLinetoRel","createSVGPathSegCurvetoCubicAbs","createSVGPathSegCurvetoCubicRel","createSVGPathSegCurvetoQuadraticAbs","createSVGPathSegCurvetoQuadraticRel","createSVGPathSegArcAbs","createSVGPathSegArcRel","createSVGPathSegLinetoHorizontalAbs","createSVGPathSegLinetoHorizontalRel","createSVGPathSegLinetoVerticalAbs","createSVGPathSegLinetoVerticalRel","createSVGPathSegCurvetoCubicSmoothAbs","createSVGPathSegCurvetoCubicSmoothRel","createSVGPathSegCurvetoQuadraticSmoothAbs","createSVGPathSegCurvetoQuadraticSmoothRel","getPathSegAtLength","distance","isFinite","measurementElement","createElementNS","setAttribute","getAttribute","lastPathSegment","numberOfItems","removeItem","SVGPathSegList","pathElement","_pathElement","_list","_parsePath","_mutationObserverConfig","attributeFilter","_pathElementMutationObserver","_updateListFromPathMutations","_checkPathSynchronizedToList","_pathSegList","takeRecords","mutationRecords","hasPathMutations","record","attributeName","_writeListToPath","_pathSegArrayAsString","pathSeg","clear","initialize","newItem","_checkValidIndex","insertItemBefore","replaceItem","item","appendItem","pathSegArray","string","first","Builder","appendSegment","Source","_string","_currentIndex","_endIndex","_previousCommand","_skipOptionalSpaces","_isCurrentSpace","character","_skipOptionalSpacesOrDelimiter","hasMoreData","peekSegmentType","lookahead","_pathSegTypeFromChar","_nextCommandHelper","previousCommand","initialCommandIsMoveTo","command","_parseNumber","exponent","integer","frac","decimal","sign","expsign","startIndex","startIntPartIndex","scanIntPartIndex","multiplier","number","pow","_parseArcFlag","flag","flagChar","parseSegment","points","arcAngle","arcLarge","arcSweep","builder","source","String","targetLength","padString","repeat","assign","varArgs","to","nextSource","nextKey","hasOwnProperty","labels","axis_x_max","axis_y_max","axis_y2_max","axis_x_min","axis_y_min","axis_y2_min","types","axis_y2_type","category","categories","resize","size_width","size_height","flush","destroy","detachEvent","targetIds","shown","targetId","flat","reduce","ret","dataValue","names","clearLegendItemTextBoxCache","updateDataAttributes","colors","stackNormalized","normalized","isStackNormalized","data_stack_normalize","donut","padAngle","donut_padAngle","args","notfoundIds","orgDataCount","getMaxDataCount","dataCount","baseTarget","baseValue","tail","diff","json","rows","columns","j","getOtherTargetX","missing","translateX","scaleX","transform","flowIndex","flowLength","flowStart","getValueOnIndex","flowEnd","durationForFlow","wait","mainRegion","mainText","mainBar","mainLine","mainArea","mainCircle","updateXGrid","hideXGridFocus","flowTransition","ease","easeLinear","isRegionOnX","xgridAttr","regionX","regionWidth","focus","candidates","mapToTargetIds","selectorTargets","revert","defocus","expandArc","toggleFocusLegend","unexpandArc","showLegend","isLegendToShow","selectorLegends","grids","grid_x_lines","removeGridLines","grid_y_lines","groups","data_groups","show","hide","hideLegend","load","addXs","classes","data_classes","data_colors","hasCaches","cacheIds","getCaches","unload","loadFromArgs","ids","pie","pie_padAngle","c","selected","getTargetSelectorSuffix","nodes","__data__","indices","resetOther","data_selection_enabled","toggle","getToggle","isTargetId","data_selection_grouped","isTargetIndex","isSelected","data_selection_isselectable","unselect","removeHiddenTargetIds","that","subchart","isShown","getTargets","removeSubchart","mouse","filterByX","getMousePosition","dispatchEvent","tooltip_onshow","tooltip_onhide","transformTo","optionsForRedraw","setTargetType","updateTargetX","updateTargetXs","zoom","zoom_onzoom","enable","enabled","zoom_enabled","unzoom","zoom_x_max","zoom_x_min","getPadAngle","orderFct","getOrderFunction","isOrderAsc","isOrderDesc","defaultSort","t1","t2","gauge_width","donut_width","gaugeArcWidth","gauge_arcs_minWidth","radius","innerRadiusRatio","innerRadius","updateArc","svgArc","getSvgArc","svgArcExpanded","getSvgArcExpanded","svgArcExpandedSub","updateAngle","gMin","gMax","gTic","gValue","startAngle","endAngle","isGaugeType","gauge_min","gauge_max","gauge_startingAngle","hasGaugeType","singleArcWidth","outerRadius","newArc","withoutUpdate","updated","centroid","rate","expandWidth","getArc","force","isArcType","transformForArcLabel","ratio","translate","hasGauge","sqrt","donut_label_ratio","pie_label_ratio","cos","abs","getArcRatio","getRatio","convertToArcData","addName","textForArcLabel","shouldShowArcLabel","meetsArcLabelThreshold","getArcLabelFormat","defaultArcValueFormat","textForGaugeMinMax","isMax","getGaugeLabelExtents","shouldExpand","expandDuration","isDonutType","donut_expand_duration","gauge_expand_duration","isPieType","pie_expand_duration","donut_expand","gauge_expand","pie_expand","shouldShow","donut_label_show","pie_label_show","threshold","donut_label_threshold","pie_label_threshold","pie_label_format","gauge_label_format","donut_label_format","gauge_label_extents","getArcTitle","donut_title","mainPies","mainPieEnter","classChartArc","classArcs","classFocus","mainArc","arcLabelLines","mainArcLabelLine","arcData","classArc","interaction_enabled","_current","total","gauge_labelLine_show","lineLength","lineThickness","innerLineLength","lineAngle","arcInnerRadius","linePositioningAngle","data_onmouseover","selectedData","showTooltip","revertLegend","hideTooltip","data_onmouseout","toggleShape","data_onclick","attrTween","interpolate","interpolated","round","backgroundArc","d1","gauge_label_show","gauge_units","addToCache","getFromCache","resetCache","addCache","cloneTarget","generateTargetClass","generateClass","prefix","classText","classTexts","classShape","classShapes","classLine","classLines","classCircle","classCircles","classBar","classBars","classArea","classAreas","classRegion","classEvent","classTarget","additionalClassSuffix","additionalClass","classFocused","classDefocused","classChartText","classChartLine","classChartBar","targetClass","CSS","escape","selectorTarget","selectorLegend","URL","parent","getAxisClipX","getAxisClipY","getAxisClipWidth","getAxisClipHeight","pattern","color_pattern","schemeCategory10","data_color","Function","color_threshold","asValue","padding_left","padding_right","padding_top","padding_bottom","zoom_initialRange","zoom_type","zoom_disableDefaultBehavior","zoom_privileged","zoom_onzoomstart","zoom_onzoomend","interaction_brighten","data_epochs","data_xSort","data_idConverter","data_names","data_type","data_types","data_labels","data_order","data_regions","data_selection_multiple","data_selection_draggable","data_onselected","data_onunselected","subchart_axis_x_show","subchart_onbrush","legend_inset_x","legend_inset_y","legend_inset_step","legend_item_onclick","legend_item_onmouseover","legend_item_onmouseout","legend_equally","legend_padding","legend_item_tile_width","legend_item_tile_height","axis_x_tick_outer","axis_x_padding","axis_x_height","axis_y_inverted","axis_y_center","axis_y_tick_format","axis_y_tick_outer","axis_y_padding","axis_y_default","axis_y2_inverted","axis_y2_center","axis_y2_tick_format","axis_y2_tick_outer","axis_y2_padding","axis_y2_default","grid_x_show","grid_x_type","grid_y_show","grid_y_ticks","grid_focus_show","point_r","point_sensitivity","point_focus_expand_enabled","point_focus_expand_r","point_select_r","line_connectNull","line_step_type","bar_width","bar_width_ratio","bar_width_max","bar_zerobased","bar_space","area_zerobased","area_above","spline_interpolation_type","stanford_lines","stanford_regions","stanford_texts","stanford_scaleMin","stanford_scaleMax","stanford_scaleWidth","stanford_scaleFormat","stanford_scaleValues","stanford_colors","stanford_padding","tooltip_show","tooltip_grouped","tooltip_order","tooltip_format_title","tooltip_format_name","tooltip_format_value","tooltip_horizontal","tooltip_position","tooltip_contents","defaultTitleFormat","defaultValueFormat","getTooltipContent","tooltip_init_show","tooltip_init_x","tooltip_init_position","title_text","title_padding","title_position","additionalConfig","this_config","read","find","shift","url","mimeType","headers","converter","tsv","convertXsvToData","csv","then","xsv","row","new_rows","targetKeys","new_row","findValueInJson","object","pathArray","k","newRows","newRow","appendXs","epochs","isX","isNotX","isEpochs","isNotXAndNotEpochs","xKey","getXKey","rawX","generateTargetX","getOtherTargetXs","getXValuesOfXKey","convertedId","id_org","returnData","v1","v2","hasNegativeValue","hasNegativeValueInTargets","hasPositiveValue","hasPositiveValueInTargets","some","isTargetNormalized","group","includes","getTotalPerIndex","cached","sum","sumByAxis","getTotalDataSum","totalDataSum","xValues","getXValue","idsForX","valueOnIndex","hasTarget","getTargetsToShow","removeHiddenLegendIds","getValuesAsIdKeyed","ys","checkValueInTargets","checker","toLowerCase","orderAsc","orderDesc","reducer","t1Sum","t2Sum","order","orderTargets","fct","filterByIndex","filterRemoveNull","filterByXDomain","xDomain","getDataLabelLength","lengths","paddingCoef","dataLabelFormat","isNoneArc","isArc","findClosestFromTargets","findClosest","horizontalDistance","dist","findClosestFromTargetsByX","closest","newDiff","dataPoints","computeDist","minDist","isWithinBar","xIndex","yIndex","convertValuesToStep","converted","asPercent","_total","attrs","current","getYDomainMin","baseId","idsInGroup","getYDomainMax","targetsByAxisId","yTargets","yMin","yMax","yDomainMin","yDomainMax","center","yDomainAbs","isAllPositive","isAllNegative","isZeroBased","isInverted","showHorizontalDataLabel","showVerticalDataLabel","pixelsToAxisPadding","getY","reverse","getXDomainMin","getXDomainMax","getXDomainPadding","maxDataCount","paddingLeft","paddingRight","firstX","lastX","getTime","withTrim","updateScale","trimXDomain","zoomDomain","getZoomDomain","drag","sx","sy","mx","my","maxX","maxY","isIncluded","_w","_h","isWithin","togglePoint","togglePath","dragstart","dragend","getYFormat","forArc","formatForY","yFormat","formatForY2","y2Format","toFixed","defaultFormat","xgridData","generateGridData","xgridEnter","updateYGrid","gridValues","ygridEnter","gridTextAnchor","gridTextDx","xGridTextX","yGridTextX","xgridLineEnter","ygridLineEnter","showXGridFocus","dataToShow","focusEl","gridData","firstYear","lastYear","tickNum","getFullYear","getGridFilterToRemove","param","forX","toRemove","toShow","zoomTransform","mouseout","unexpandCircles","unexpandBars","isHoveringDataPoint","withName","isMouseCloseToDataPoint","showSingleDataPoint","closestByX","mouseX","invert","expandCircles","expandBars","sameXData","isWithinShape","getYScale","selector","getBoundingClientRect","event","createEvent","initMouseEvent","legendItemTextBox","legendHasRendered","updateLegendWithDefaults","insetLegendPosition","updateLegendStep","step","updateLegendItemWidth","updateLegendItemHeight","opacityForLegend","opacityForUnfocusedLegend","xForLegend","xForLegendText","xForLegendRect","yForLegend","yForLegendText","yForLegendRect","x1ForLegendTile","x2ForLegendTile","yForLegendTile","paddingTop","maxHeight","posMin","tileWidth","l","totalLength","offsets","widths","heights","margins","steps","rects","tiles","background","getTextBox","textElement","getTextRect","textContent","updatePositions","reset","isLast","itemWidth","itemHeight","itemLength","areaLength","maxLength","updateValues","withoutStep","altKey","regionY","regionHeight","labelRegion","regionLabels","labelOffsetX","labelOffsetY","labelTransform","xPos","yPos","label","vertical","paddingX","paddingY","c3LogScale","linearScale","logScale","PROJECTION","scaleLog","nice","logspace","tmp","m","getScale","forTimeseries","scaleTime","getX","offset","_scale","raw","getSubYScale","forInit","xMin","xMax","subXMin","subXMax","subYMin","subYMax","selectPoint","r","pointSelectR","unselectPoint","selectPath","rgb","brighter","unselectPath","nodeName","isStepType","mainBars","mainBarEnter","barData","getBarW","barTargetsNum","getBars","isSub","getPoints","generateGetBarPoints","indexX","indexY","__max__","barW","barX","getShapeX","barY","getShapeY","barOffset","getShapeOffset","barSpaceOffset","y0","posX","posY","barShape","typeFilter","targetsNum","rowValues","isWithinStep","isWithinCircle","getInterpolate","linear","curveLinear","curveLinearClosed","basis","curveBasis","curveBasisOpen","curveBasisClosed","bundle","curveBundle","cardinal","curveCardinal","curveCardinalOpen","curveCardinalClosed","monotone","curveMonotoneX","curveStep","curveStepBefore","curveStepAfter","isSplineType","mainLines","mainLineEnter","lineData","generateGetLinePoints","yScaleGetter","xValue","yValue","defined","x0","lineWithRegions","curve","lineTargetsNum","lineOffset","_regions","prev","sWithRegion","xp","yp","dd","diffx2","xOffset","isWithinRegions","generateM","d0","x_diff","xv0","xv1","mainAreaEnter","orgAreaOpacity","generateGetAreaPoints","value0","getAreaBaseValue","value1","areaTargetsNum","areaOffset","lineOrScatterOrStanfordData","mainCircleEnter","pointR","getStanfordPointColor","getCircles","pointExpandedR","d3_this","getParentWidth","getParentHeight","getTitlePadding","getAxisWidthByAxisId","defaultPadding","legendWidthOnRight","getColorScalePadding","getParentRectValue","tagName","offsetWidth","getSvgLeft","hasLeftAxisRect","leftAxisClass","leftAxis","svgRect","chartRect","svgLeft","initBrush","brushY","brushX","sourceEvent","redrawForBrush","updateExtent","context","move","brushSelection","contextLineEnter","contextLine","contextBarEnter","contextBar","updateBarForSubchart","redrawBarForSubchart","drawBarOnSub","random","updateLineForSubchart","redrawLineForSubchart","drawLineOnSub","updateAreaForSubchart","contextArea","contextAreaEnter","redrawAreaForSubchart","drawAreaOnSub","zoomIdentity","mainTextEnter","barOrLineData","forFlow","cls","font","rect","getAreaPoints","getBarPoints","getLinePoints","getter","getXForText","getYForText","isSafari","isChrome","xForTitle","yForTitle","powerOfTen","log","LN10","barWidth","barHeight","legendAxis","axisScale","inverseScale","scaleSequential","minEpochs","maxEpochs","axisRight","xForColorScale","compareEpochs","interpolateHslLong","hsl","colorscale","scaleSequentialLog","getCentroid","getRegionArea","point1","point2","getStanfordTooltipTitle","labelX","labelY","countEpochsInRegion","accumulator","currentValue","pointInRegion","percentage","xi","yi","yj","xj","intersect","inside","stanfordLineEnter","stanfordRegionEnter","stanfordTextEnter","countPointsInRegion","content","join","temp","getTooltipSortFunction","sortFunction","titleFormat","nameFormat","bgcolor","valueFormat","tooltipSortFunction","tooltipPosition","tWidth","tHeight","tooltipLeft","tooltipRight","tooltipTop","chartRight","positionFunction","property","has","ua","startEvent","redrawForZoom","clientX","clientY","updateDomain","rescaleX","translateExtent","brushXPos","brushYPos","getZoomedDomain","dragZoomBrush","zoomedDomain"],"mappings":"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","sourcesContent":["/* @license C3.js v0.7.18 | (c) C3 Team and other contributors | http://c3js.org/ */\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = global || self, global.c3 = factory());\n}(this, (function () { 'use strict';\n\n  function _typeof(obj) {\n    \"@babel/helpers - typeof\";\n\n    if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n      _typeof = function (obj) {\n        return typeof obj;\n      };\n    } else {\n      _typeof = function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n    }\n\n    return _typeof(obj);\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  function _toConsumableArray(arr) {\n    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n  }\n\n  function _arrayWithoutHoles(arr) {\n    if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n  }\n\n  function _iterableToArray(iter) {\n    if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n  }\n\n  function _unsupportedIterableToArray(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(o);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n  }\n\n  function _arrayLikeToArray(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n\n    for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n\n  function _nonIterableSpread() {\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  function ChartInternal(api) {\n    var $$ = this; // Note: This part will be replaced by rollup-plugin-modify\n    // When bundling esm output. Beware of changing this line.\n    // TODO: Maybe we should check that the modification by rollup-plugin-modify\n    // is valid during unit tests.\n\n    $$.d3 = window.d3 ? window.d3 : typeof require !== 'undefined' ? require('d3') : undefined;\n    $$.api = api;\n    $$.config = $$.getDefaultConfig();\n    $$.data = {};\n    $$.cache = {};\n    $$.axes = {};\n  }\n\n  /**\n   * The Chart class\n   *\n   * The methods of this class is the public APIs of the chart object.\n   */\n\n  function Chart(config) {\n    this.internal = new ChartInternal(this);\n    this.internal.loadConfig(config);\n    this.internal.beforeInit(config);\n    this.internal.init();\n    this.internal.afterInit(config) // bind \"this\" to nested API\n    ;\n\n    (function bindThis(fn, target, argThis) {\n      Object.keys(fn).forEach(function (key) {\n        target[key] = fn[key].bind(argThis);\n\n        if (Object.keys(fn[key]).length > 0) {\n          bindThis(fn[key], target[key], argThis);\n        }\n      });\n    })(Chart.prototype, this, this);\n  }\n\n  var asHalfPixel = function asHalfPixel(n) {\n    return Math.ceil(n) + 0.5;\n  };\n  var ceil10 = function ceil10(v) {\n    return Math.ceil(v / 10) * 10;\n  };\n  var diffDomain = function diffDomain(d) {\n    return d[1] - d[0];\n  };\n  var getOption = function getOption(options, key, defaultValue) {\n    return isDefined(options[key]) ? options[key] : defaultValue;\n  };\n  var getPathBox = function getPathBox(path) {\n    var box = getBBox(path),\n        items = [path.pathSegList.getItem(0), path.pathSegList.getItem(1)],\n        minX = items[0].x,\n        minY = Math.min(items[0].y, items[1].y);\n    return {\n      x: minX,\n      y: minY,\n      width: box.width,\n      height: box.height\n    };\n  };\n  var getBBox = function getBBox(element) {\n    try {\n      return element.getBBox();\n    } catch (ignore) {\n      // Firefox will throw an exception if getBBox() is called whereas the\n      // element is rendered with display:none\n      // See https://github.com/c3js/c3/issues/2692\n      // The previous code was using `getBoundingClientRect` which was returning\n      // everything at 0 in this case so let's reproduce this behavior here.\n      return {\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0\n      };\n    }\n  };\n  var hasValue = function hasValue(dict, value) {\n    var found = false;\n    Object.keys(dict).forEach(function (key) {\n      if (dict[key] === value) {\n        found = true;\n      }\n    });\n    return found;\n  };\n  var isArray = function isArray(o) {\n    return Array.isArray(o);\n  };\n  var isDefined = function isDefined(v) {\n    return typeof v !== 'undefined';\n  };\n  var isEmpty = function isEmpty(o) {\n    return typeof o === 'undefined' || o === null || isString(o) && o.length === 0 || _typeof(o) === 'object' && Object.keys(o).length === 0;\n  };\n  var isFunction = function isFunction(o) {\n    return typeof o === 'function';\n  };\n  var isNumber = function isNumber(o) {\n    return typeof o === 'number';\n  };\n  var isString = function isString(o) {\n    return typeof o === 'string';\n  };\n  var isUndefined = function isUndefined(v) {\n    return typeof v === 'undefined';\n  };\n  var isValue = function isValue(v) {\n    return v || v === 0;\n  };\n  var notEmpty = function notEmpty(o) {\n    return !isEmpty(o);\n  };\n  var sanitise = function sanitise(str) {\n    return typeof str === 'string' ? str.replace(/</g, '&lt;').replace(/>/g, '&gt;') : str;\n  };\n  var flattenArray = function flattenArray(arr) {\n    var _ref;\n\n    return Array.isArray(arr) ? (_ref = []).concat.apply(_ref, _toConsumableArray(arr)) : [];\n  };\n  /**\n   * Returns whether the point is within the given box.\n   *\n   * @param {Array} point An [x,y] coordinate\n   * @param {Object} box An object with {x, y, width, height} keys\n   * @param {Number} sensitivity An offset to ease check on very small boxes\n   */\n\n  var isWithinBox = function isWithinBox(point, box) {\n    var sensitivity = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    var xStart = box.x - sensitivity;\n    var xEnd = box.x + box.width + sensitivity;\n    var yStart = box.y + box.height + sensitivity;\n    var yEnd = box.y - sensitivity;\n    return xStart < point[0] && point[0] < xEnd && yEnd < point[1] && point[1] < yStart;\n  };\n  /**\n   * Returns Internet Explorer version number (or false if no Internet Explorer used).\n   *\n   * @param string agent Optional parameter to specify user agent\n   */\n\n  var getIEVersion = function getIEVersion(agent) {\n    // https://stackoverflow.com/questions/19999388/check-if-user-is-using-ie\n    if (typeof agent === 'undefined') {\n      agent = window.navigator.userAgent;\n    }\n\n    var pos = agent.indexOf('MSIE '); // up to IE10\n\n    if (pos > 0) {\n      return parseInt(agent.substring(pos + 5, agent.indexOf('.', pos)), 10);\n    }\n\n    pos = agent.indexOf('Trident/'); // IE11\n\n    if (pos > 0) {\n      pos = agent.indexOf('rv:');\n      return parseInt(agent.substring(pos + 3, agent.indexOf('.', pos)), 10);\n    }\n\n    return false;\n  };\n  /**\n   * Returns whether the used browser is Internet Explorer.\n   *\n   * @param {Number} version Optional parameter to specify IE version\n   */\n\n  var isIE = function isIE(version) {\n    var ver = getIEVersion();\n\n    if (typeof version === 'undefined') {\n      return !!ver;\n    }\n\n    return version === ver;\n  };\n\n  function AxisInternal(component, params) {\n    var internal = this;\n    internal.component = component;\n    internal.params = params || {};\n    internal.d3 = component.d3;\n    internal.scale = internal.d3.scaleLinear();\n    internal.range;\n    internal.orient = 'bottom';\n    internal.innerTickSize = 6;\n    internal.outerTickSize = this.params.withOuterTick ? 6 : 0;\n    internal.tickPadding = 3;\n    internal.tickValues = null;\n    internal.tickFormat;\n    internal.tickArguments;\n    internal.tickOffset = 0;\n    internal.tickCulling = true;\n    internal.tickCentered;\n    internal.tickTextCharSize;\n    internal.tickTextRotate = internal.params.tickTextRotate;\n    internal.tickLength;\n    internal.axis = internal.generateAxis();\n  }\n\n  AxisInternal.prototype.axisX = function (selection, x, tickOffset) {\n    selection.attr('transform', function (d) {\n      return 'translate(' + Math.ceil(x(d) + tickOffset) + ', 0)';\n    });\n  };\n\n  AxisInternal.prototype.axisY = function (selection, y) {\n    selection.attr('transform', function (d) {\n      return 'translate(0,' + Math.ceil(y(d)) + ')';\n    });\n  };\n\n  AxisInternal.prototype.scaleExtent = function (domain) {\n    var start = domain[0],\n        stop = domain[domain.length - 1];\n    return start < stop ? [start, stop] : [stop, start];\n  };\n\n  AxisInternal.prototype.generateTicks = function (scale) {\n    var internal = this;\n    var i,\n        domain,\n        ticks = [];\n\n    if (scale.ticks) {\n      return scale.ticks.apply(scale, internal.tickArguments);\n    }\n\n    domain = scale.domain();\n\n    for (i = Math.ceil(domain[0]); i < domain[1]; i++) {\n      ticks.push(i);\n    }\n\n    if (ticks.length > 0 && ticks[0] > 0) {\n      ticks.unshift(ticks[0] - (ticks[1] - ticks[0]));\n    }\n\n    return ticks;\n  };\n\n  AxisInternal.prototype.copyScale = function () {\n    var internal = this;\n    var newScale = internal.scale.copy(),\n        domain;\n\n    if (internal.params.isCategory) {\n      domain = internal.scale.domain();\n      newScale.domain([domain[0], domain[1] - 1]);\n    }\n\n    return newScale;\n  };\n\n  AxisInternal.prototype.textFormatted = function (v) {\n    var internal = this,\n        formatted = internal.tickFormat ? internal.tickFormat(v) : v;\n    return typeof formatted !== 'undefined' ? formatted : '';\n  };\n\n  AxisInternal.prototype.updateRange = function () {\n    var internal = this;\n    internal.range = internal.scale.rangeExtent ? internal.scale.rangeExtent() : internal.scaleExtent(internal.scale.range());\n    return internal.range;\n  };\n\n  AxisInternal.prototype.updateTickTextCharSize = function (tick) {\n    var internal = this;\n\n    if (internal.tickTextCharSize) {\n      return internal.tickTextCharSize;\n    }\n\n    var size = {\n      h: 11.5,\n      w: 5.5\n    };\n    tick.select('text').text(function (d) {\n      return internal.textFormatted(d);\n    }).each(function (d) {\n      var box = getBBox(this),\n          text = internal.textFormatted(d),\n          h = box.height,\n          w = text ? box.width / text.length : undefined;\n\n      if (h && w) {\n        size.h = h;\n        size.w = w;\n      }\n    }).text('');\n    internal.tickTextCharSize = size;\n    return size;\n  };\n\n  AxisInternal.prototype.isVertical = function () {\n    return this.orient === 'left' || this.orient === 'right';\n  };\n\n  AxisInternal.prototype.tspanData = function (d, i, scale) {\n    var internal = this;\n    var splitted = internal.params.tickMultiline ? internal.splitTickText(d, scale) : [].concat(internal.textFormatted(d));\n\n    if (internal.params.tickMultiline && internal.params.tickMultilineMax > 0) {\n      splitted = internal.ellipsify(splitted, internal.params.tickMultilineMax);\n    }\n\n    return splitted.map(function (s) {\n      return {\n        index: i,\n        splitted: s,\n        length: splitted.length\n      };\n    });\n  };\n\n  AxisInternal.prototype.splitTickText = function (d, scale) {\n    var internal = this,\n        tickText = internal.textFormatted(d),\n        maxWidth = internal.params.tickWidth,\n        subtext,\n        spaceIndex,\n        textWidth,\n        splitted = [];\n\n    if (Object.prototype.toString.call(tickText) === '[object Array]') {\n      return tickText;\n    }\n\n    if (!maxWidth || maxWidth <= 0) {\n      maxWidth = internal.isVertical() ? 95 : internal.params.isCategory ? Math.ceil(scale(1) - scale(0)) - 12 : 110;\n    }\n\n    function split(splitted, text) {\n      spaceIndex = undefined;\n\n      for (var i = 1; i < text.length; i++) {\n        if (text.charAt(i) === ' ') {\n          spaceIndex = i;\n        }\n\n        subtext = text.substr(0, i + 1);\n        textWidth = internal.tickTextCharSize.w * subtext.length; // if text width gets over tick width, split by space index or crrent index\n\n        if (maxWidth < textWidth) {\n          return split(splitted.concat(text.substr(0, spaceIndex ? spaceIndex : i)), text.slice(spaceIndex ? spaceIndex + 1 : i));\n        }\n      }\n\n      return splitted.concat(text);\n    }\n\n    return split(splitted, tickText + '');\n  };\n\n  AxisInternal.prototype.ellipsify = function (splitted, max) {\n    if (splitted.length <= max) {\n      return splitted;\n    }\n\n    var ellipsified = splitted.slice(0, max);\n    var remaining = 3;\n\n    for (var i = max - 1; i >= 0; i--) {\n      var available = ellipsified[i].length;\n      ellipsified[i] = ellipsified[i].substr(0, available - remaining).padEnd(available, '.');\n      remaining -= available;\n\n      if (remaining <= 0) {\n        break;\n      }\n    }\n\n    return ellipsified;\n  };\n\n  AxisInternal.prototype.updateTickLength = function () {\n    var internal = this;\n    internal.tickLength = Math.max(internal.innerTickSize, 0) + internal.tickPadding;\n  };\n\n  AxisInternal.prototype.lineY2 = function (d) {\n    var internal = this,\n        tickPosition = internal.scale(d) + (internal.tickCentered ? 0 : internal.tickOffset);\n    return internal.range[0] < tickPosition && tickPosition < internal.range[1] ? internal.innerTickSize : 0;\n  };\n\n  AxisInternal.prototype.textY = function () {\n    var internal = this,\n        rotate = internal.tickTextRotate;\n    return rotate ? 11.5 - 2.5 * (rotate / 15) * (rotate > 0 ? 1 : -1) : internal.tickLength;\n  };\n\n  AxisInternal.prototype.textTransform = function () {\n    var internal = this,\n        rotate = internal.tickTextRotate;\n    return rotate ? 'rotate(' + rotate + ')' : '';\n  };\n\n  AxisInternal.prototype.textTextAnchor = function () {\n    var internal = this,\n        rotate = internal.tickTextRotate;\n    return rotate ? rotate > 0 ? 'start' : 'end' : 'middle';\n  };\n\n  AxisInternal.prototype.tspanDx = function () {\n    var internal = this,\n        rotate = internal.tickTextRotate;\n    return rotate ? 8 * Math.sin(Math.PI * (rotate / 180)) : 0;\n  };\n\n  AxisInternal.prototype.tspanDy = function (d, i) {\n    var internal = this,\n        dy = internal.tickTextCharSize.h;\n\n    if (i === 0) {\n      if (internal.isVertical()) {\n        dy = -((d.length - 1) * (internal.tickTextCharSize.h / 2) - 3);\n      } else {\n        dy = '.71em';\n      }\n    }\n\n    return dy;\n  };\n\n  AxisInternal.prototype.generateAxis = function () {\n    var internal = this,\n        d3 = internal.d3,\n        params = internal.params;\n\n    function axis(g, transition) {\n      var self;\n      g.each(function () {\n        var g = axis.g = d3.select(this);\n        var scale0 = this.__chart__ || internal.scale,\n            scale1 = this.__chart__ = internal.copyScale();\n        var ticksValues = internal.tickValues ? internal.tickValues : internal.generateTicks(scale1),\n            ticks = g.selectAll('.tick').data(ticksValues, scale1),\n            tickEnter = ticks.enter().insert('g', '.domain').attr('class', 'tick').style('opacity', 1e-6),\n            // MEMO: No exit transition. The reason is this transition affects max tick width calculation because old tick will be included in the ticks.\n        tickExit = ticks.exit().remove(),\n            tickUpdate = ticks.merge(tickEnter),\n            tickTransform,\n            tickX,\n            tickY;\n\n        if (params.isCategory) {\n          internal.tickOffset = Math.ceil((scale1(1) - scale1(0)) / 2);\n          tickX = internal.tickCentered ? 0 : internal.tickOffset;\n          tickY = internal.tickCentered ? internal.tickOffset : 0;\n        } else {\n          internal.tickOffset = tickX = 0;\n        }\n\n        internal.updateRange();\n        internal.updateTickLength();\n        internal.updateTickTextCharSize(g.select('.tick'));\n        var lineUpdate = tickUpdate.select('line').merge(tickEnter.append('line')),\n            textUpdate = tickUpdate.select('text').merge(tickEnter.append('text'));\n        var tspans = tickUpdate.selectAll('text').selectAll('tspan').data(function (d, i) {\n          return internal.tspanData(d, i, scale1);\n        }),\n            tspanEnter = tspans.enter().append('tspan'),\n            tspanUpdate = tspanEnter.merge(tspans).text(function (d) {\n          return d.splitted;\n        });\n        tspans.exit().remove();\n        var path = g.selectAll('.domain').data([0]),\n            pathUpdate = path.enter().append('path').merge(path).attr('class', 'domain'); // TODO: each attr should be one function and change its behavior by internal.orient, probably\n\n        switch (internal.orient) {\n          case 'bottom':\n            {\n              tickTransform = internal.axisX;\n              lineUpdate.attr('x1', tickX).attr('x2', tickX).attr('y2', function (d, i) {\n                return internal.lineY2(d, i);\n              });\n              textUpdate.attr('x', 0).attr('y', function (d, i) {\n                return internal.textY(d, i);\n              }).attr('transform', function (d, i) {\n                return internal.textTransform(d, i);\n              }).style('text-anchor', function (d, i) {\n                return internal.textTextAnchor(d, i);\n              });\n              tspanUpdate.attr('x', 0).attr('dy', function (d, i) {\n                return internal.tspanDy(d, i);\n              }).attr('dx', function (d, i) {\n                return internal.tspanDx(d, i);\n              });\n              pathUpdate.attr('d', 'M' + internal.range[0] + ',' + internal.outerTickSize + 'V0H' + internal.range[1] + 'V' + internal.outerTickSize);\n              break;\n            }\n\n          case 'top':\n            {\n              // TODO: rotated tick text\n              tickTransform = internal.axisX;\n              lineUpdate.attr('x1', tickX).attr('x2', tickX).attr('y2', function (d, i) {\n                return -1 * internal.lineY2(d, i);\n              });\n              textUpdate.attr('x', 0).attr('y', function (d, i) {\n                return -1 * internal.textY(d, i) - (params.isCategory ? 2 : internal.tickLength - 2);\n              }).attr('transform', function (d, i) {\n                return internal.textTransform(d, i);\n              }).style('text-anchor', function (d, i) {\n                return internal.textTextAnchor(d, i);\n              });\n              tspanUpdate.attr('x', 0).attr('dy', function (d, i) {\n                return internal.tspanDy(d, i);\n              }).attr('dx', function (d, i) {\n                return internal.tspanDx(d, i);\n              });\n              pathUpdate.attr('d', 'M' + internal.range[0] + ',' + -internal.outerTickSize + 'V0H' + internal.range[1] + 'V' + -internal.outerTickSize);\n              break;\n            }\n\n          case 'left':\n            {\n              tickTransform = internal.axisY;\n              lineUpdate.attr('x2', -internal.innerTickSize).attr('y1', tickY).attr('y2', tickY);\n              textUpdate.attr('x', -internal.tickLength).attr('y', internal.tickOffset).style('text-anchor', 'end');\n              tspanUpdate.attr('x', -internal.tickLength).attr('dy', function (d, i) {\n                return internal.tspanDy(d, i);\n              });\n              pathUpdate.attr('d', 'M' + -internal.outerTickSize + ',' + internal.range[0] + 'H0V' + internal.range[1] + 'H' + -internal.outerTickSize);\n              break;\n            }\n\n          case 'right':\n            {\n              tickTransform = internal.axisY;\n              lineUpdate.attr('x2', internal.innerTickSize).attr('y1', tickY).attr('y2', tickY);\n              textUpdate.attr('x', internal.tickLength).attr('y', internal.tickOffset).style('text-anchor', 'start');\n              tspanUpdate.attr('x', internal.tickLength).attr('dy', function (d, i) {\n                return internal.tspanDy(d, i);\n              });\n              pathUpdate.attr('d', 'M' + internal.outerTickSize + ',' + internal.range[0] + 'H0V' + internal.range[1] + 'H' + internal.outerTickSize);\n              break;\n            }\n        }\n\n        if (scale1.rangeBand) {\n          var x = scale1,\n              dx = x.rangeBand() / 2;\n\n          scale0 = scale1 = function scale1(d) {\n            return x(d) + dx;\n          };\n        } else if (scale0.rangeBand) {\n          scale0 = scale1;\n        } else {\n          tickExit.call(tickTransform, scale1, internal.tickOffset);\n        }\n\n        tickEnter.call(tickTransform, scale0, internal.tickOffset);\n        self = (transition ? tickUpdate.transition(transition) : tickUpdate).style('opacity', 1).call(tickTransform, scale1, internal.tickOffset);\n      });\n      return self;\n    }\n\n    axis.scale = function (x) {\n      if (!arguments.length) {\n        return internal.scale;\n      }\n\n      internal.scale = x;\n      return axis;\n    };\n\n    axis.orient = function (x) {\n      if (!arguments.length) {\n        return internal.orient;\n      }\n\n      internal.orient = x in {\n        top: 1,\n        right: 1,\n        bottom: 1,\n        left: 1\n      } ? x + '' : 'bottom';\n      return axis;\n    };\n\n    axis.tickFormat = function (format) {\n      if (!arguments.length) {\n        return internal.tickFormat;\n      }\n\n      internal.tickFormat = format;\n      return axis;\n    };\n\n    axis.tickCentered = function (isCentered) {\n      if (!arguments.length) {\n        return internal.tickCentered;\n      }\n\n      internal.tickCentered = isCentered;\n      return axis;\n    };\n\n    axis.tickOffset = function () {\n      return internal.tickOffset;\n    };\n\n    axis.tickInterval = function () {\n      var interval, length;\n\n      if (params.isCategory) {\n        interval = internal.tickOffset * 2;\n      } else {\n        length = axis.g.select('path.domain').node().getTotalLength() - internal.outerTickSize * 2;\n        interval = length / axis.g.selectAll('line').size();\n      }\n\n      return interval === Infinity ? 0 : interval;\n    };\n\n    axis.ticks = function () {\n      if (!arguments.length) {\n        return internal.tickArguments;\n      }\n\n      internal.tickArguments = arguments;\n      return axis;\n    };\n\n    axis.tickCulling = function (culling) {\n      if (!arguments.length) {\n        return internal.tickCulling;\n      }\n\n      internal.tickCulling = culling;\n      return axis;\n    };\n\n    axis.tickValues = function (x) {\n      if (typeof x === 'function') {\n        internal.tickValues = function () {\n          return x(internal.scale.domain());\n        };\n      } else {\n        if (!arguments.length) {\n          return internal.tickValues;\n        }\n\n        internal.tickValues = x;\n      }\n\n      return axis;\n    };\n\n    return axis;\n  };\n\n  var CLASS = {\n    target: 'c3-target',\n    chart: 'c3-chart',\n    chartLine: 'c3-chart-line',\n    chartLines: 'c3-chart-lines',\n    chartBar: 'c3-chart-bar',\n    chartBars: 'c3-chart-bars',\n    chartText: 'c3-chart-text',\n    chartTexts: 'c3-chart-texts',\n    chartArc: 'c3-chart-arc',\n    chartArcs: 'c3-chart-arcs',\n    chartArcsTitle: 'c3-chart-arcs-title',\n    chartArcsBackground: 'c3-chart-arcs-background',\n    chartArcsGaugeUnit: 'c3-chart-arcs-gauge-unit',\n    chartArcsGaugeMax: 'c3-chart-arcs-gauge-max',\n    chartArcsGaugeMin: 'c3-chart-arcs-gauge-min',\n    selectedCircle: 'c3-selected-circle',\n    selectedCircles: 'c3-selected-circles',\n    eventRect: 'c3-event-rect',\n    eventRects: 'c3-event-rects',\n    eventRectsSingle: 'c3-event-rects-single',\n    eventRectsMultiple: 'c3-event-rects-multiple',\n    zoomRect: 'c3-zoom-rect',\n    brush: 'c3-brush',\n    dragZoom: 'c3-drag-zoom',\n    focused: 'c3-focused',\n    defocused: 'c3-defocused',\n    region: 'c3-region',\n    regions: 'c3-regions',\n    title: 'c3-title',\n    tooltipContainer: 'c3-tooltip-container',\n    tooltip: 'c3-tooltip',\n    tooltipName: 'c3-tooltip-name',\n    shape: 'c3-shape',\n    shapes: 'c3-shapes',\n    line: 'c3-line',\n    lines: 'c3-lines',\n    bar: 'c3-bar',\n    bars: 'c3-bars',\n    circle: 'c3-circle',\n    circles: 'c3-circles',\n    arc: 'c3-arc',\n    arcLabelLine: 'c3-arc-label-line',\n    arcs: 'c3-arcs',\n    area: 'c3-area',\n    areas: 'c3-areas',\n    empty: 'c3-empty',\n    text: 'c3-text',\n    texts: 'c3-texts',\n    gaugeValue: 'c3-gauge-value',\n    grid: 'c3-grid',\n    gridLines: 'c3-grid-lines',\n    xgrid: 'c3-xgrid',\n    xgrids: 'c3-xgrids',\n    xgridLine: 'c3-xgrid-line',\n    xgridLines: 'c3-xgrid-lines',\n    xgridFocus: 'c3-xgrid-focus',\n    ygrid: 'c3-ygrid',\n    ygrids: 'c3-ygrids',\n    ygridLine: 'c3-ygrid-line',\n    ygridLines: 'c3-ygrid-lines',\n    colorScale: 'c3-colorscale',\n    stanfordElements: 'c3-stanford-elements',\n    stanfordLine: 'c3-stanford-line',\n    stanfordLines: 'c3-stanford-lines',\n    stanfordRegion: 'c3-stanford-region',\n    stanfordRegions: 'c3-stanford-regions',\n    stanfordText: 'c3-stanford-text',\n    stanfordTexts: 'c3-stanford-texts',\n    axis: 'c3-axis',\n    axisX: 'c3-axis-x',\n    axisXLabel: 'c3-axis-x-label',\n    axisY: 'c3-axis-y',\n    axisYLabel: 'c3-axis-y-label',\n    axisY2: 'c3-axis-y2',\n    axisY2Label: 'c3-axis-y2-label',\n    legendBackground: 'c3-legend-background',\n    legendItem: 'c3-legend-item',\n    legendItemEvent: 'c3-legend-item-event',\n    legendItemTile: 'c3-legend-item-tile',\n    legendItemHidden: 'c3-legend-item-hidden',\n    legendItemFocused: 'c3-legend-item-focused',\n    dragarea: 'c3-dragarea',\n    EXPANDED: '_expanded_',\n    SELECTED: '_selected_',\n    INCLUDED: '_included_'\n  };\n\n  var Axis = function Axis(owner) {\n    _classCallCheck(this, Axis);\n\n    this.owner = owner;\n    this.d3 = owner.d3;\n    this.internal = AxisInternal;\n  };\n\n  Axis.prototype.init = function init() {\n    var $$ = this.owner,\n        config = $$.config,\n        main = $$.main;\n    $$.axes.x = main.append('g').attr('class', CLASS.axis + ' ' + CLASS.axisX).attr('clip-path', config.axis_x_inner ? '' : $$.clipPathForXAxis).attr('transform', $$.getTranslate('x')).style('visibility', config.axis_x_show ? 'visible' : 'hidden');\n    $$.axes.x.append('text').attr('class', CLASS.axisXLabel).attr('transform', config.axis_rotated ? 'rotate(-90)' : '').style('text-anchor', this.textAnchorForXAxisLabel.bind(this));\n    $$.axes.y = main.append('g').attr('class', CLASS.axis + ' ' + CLASS.axisY).attr('clip-path', config.axis_y_inner ? '' : $$.clipPathForYAxis).attr('transform', $$.getTranslate('y')).style('visibility', config.axis_y_show ? 'visible' : 'hidden');\n    $$.axes.y.append('text').attr('class', CLASS.axisYLabel).attr('transform', config.axis_rotated ? '' : 'rotate(-90)').style('text-anchor', this.textAnchorForYAxisLabel.bind(this));\n    $$.axes.y2 = main.append('g').attr('class', CLASS.axis + ' ' + CLASS.axisY2) // clip-path?\n    .attr('transform', $$.getTranslate('y2')).style('visibility', config.axis_y2_show ? 'visible' : 'hidden');\n    $$.axes.y2.append('text').attr('class', CLASS.axisY2Label).attr('transform', config.axis_rotated ? '' : 'rotate(-90)').style('text-anchor', this.textAnchorForY2AxisLabel.bind(this));\n  };\n\n  Axis.prototype.getXAxis = function getXAxis(scale, orient, tickFormat, tickValues, withOuterTick, withoutTransition, withoutRotateTickText) {\n    var $$ = this.owner,\n        config = $$.config,\n        axisParams = {\n      isCategory: $$.isCategorized(),\n      withOuterTick: withOuterTick,\n      tickMultiline: config.axis_x_tick_multiline,\n      tickMultilineMax: config.axis_x_tick_multiline ? Number(config.axis_x_tick_multilineMax) : 0,\n      tickWidth: config.axis_x_tick_width,\n      tickTextRotate: withoutRotateTickText ? 0 : config.axis_x_tick_rotate,\n      withoutTransition: withoutTransition\n    },\n        axis = new this.internal(this, axisParams).axis.scale(scale).orient(orient);\n\n    if ($$.isTimeSeries() && tickValues && typeof tickValues !== 'function') {\n      tickValues = tickValues.map(function (v) {\n        return $$.parseDate(v);\n      });\n    } // Set tick\n\n\n    axis.tickFormat(tickFormat).tickValues(tickValues);\n\n    if ($$.isCategorized()) {\n      axis.tickCentered(config.axis_x_tick_centered);\n\n      if (isEmpty(config.axis_x_tick_culling)) {\n        config.axis_x_tick_culling = false;\n      }\n    }\n\n    return axis;\n  };\n\n  Axis.prototype.updateXAxisTickValues = function updateXAxisTickValues(targets, axis) {\n    var $$ = this.owner,\n        config = $$.config,\n        tickValues;\n\n    if (config.axis_x_tick_fit || config.axis_x_tick_count) {\n      tickValues = this.generateTickValues($$.mapTargetsToUniqueXs(targets), config.axis_x_tick_count, $$.isTimeSeries());\n    }\n\n    if (axis) {\n      axis.tickValues(tickValues);\n    } else {\n      $$.xAxis.tickValues(tickValues);\n      $$.subXAxis.tickValues(tickValues);\n    }\n\n    return tickValues;\n  };\n\n  Axis.prototype.getYAxis = function getYAxis(axisId, scale, orient, tickValues, withOuterTick, withoutTransition, withoutRotateTickText) {\n    var $$ = this.owner;\n    var config = $$.config;\n    var tickFormat = config[\"axis_\".concat(axisId, \"_tick_format\")];\n\n    if (!tickFormat && $$.isAxisNormalized(axisId)) {\n      tickFormat = function tickFormat(x) {\n        return \"\".concat(x, \"%\");\n      };\n    }\n\n    var axis = new this.internal(this, {\n      withOuterTick: withOuterTick,\n      withoutTransition: withoutTransition,\n      tickTextRotate: withoutRotateTickText ? 0 : config.axis_y_tick_rotate\n    }).axis.scale(scale).orient(orient);\n\n    if (tickFormat) {\n      axis.tickFormat(tickFormat);\n    }\n\n    if ($$.isTimeSeriesY()) {\n      axis.ticks(config.axis_y_tick_time_type, config.axis_y_tick_time_interval);\n    } else {\n      axis.tickValues(tickValues);\n    }\n\n    return axis;\n  };\n\n  Axis.prototype.getId = function getId(id) {\n    var config = this.owner.config;\n    return id in config.data_axes ? config.data_axes[id] : 'y';\n  };\n\n  Axis.prototype.getXAxisTickFormat = function getXAxisTickFormat() {\n    // #2251 previously set any negative values to a whole number,\n    // however both should be truncated according to the users format specification\n    var $$ = this.owner,\n        config = $$.config;\n    var format = $$.isTimeSeries() ? $$.defaultAxisTimeFormat : $$.isCategorized() ? $$.categoryName : function (v) {\n      return v;\n    };\n\n    if (config.axis_x_tick_format) {\n      if (isFunction(config.axis_x_tick_format)) {\n        format = config.axis_x_tick_format;\n      } else if ($$.isTimeSeries()) {\n        format = function format(date) {\n          return date ? $$.axisTimeFormat(config.axis_x_tick_format)(date) : '';\n        };\n      }\n    }\n\n    return isFunction(format) ? function (v) {\n      return format.call($$, v);\n    } : format;\n  };\n\n  Axis.prototype.getTickValues = function getTickValues(tickValues, axis) {\n    return tickValues ? tickValues : axis ? axis.tickValues() : undefined;\n  };\n\n  Axis.prototype.getXAxisTickValues = function getXAxisTickValues() {\n    return this.getTickValues(this.owner.config.axis_x_tick_values, this.owner.xAxis);\n  };\n\n  Axis.prototype.getYAxisTickValues = function getYAxisTickValues() {\n    return this.getTickValues(this.owner.config.axis_y_tick_values, this.owner.yAxis);\n  };\n\n  Axis.prototype.getY2AxisTickValues = function getY2AxisTickValues() {\n    return this.getTickValues(this.owner.config.axis_y2_tick_values, this.owner.y2Axis);\n  };\n\n  Axis.prototype.getLabelOptionByAxisId = function getLabelOptionByAxisId(axisId) {\n    var $$ = this.owner,\n        config = $$.config,\n        option;\n\n    if (axisId === 'y') {\n      option = config.axis_y_label;\n    } else if (axisId === 'y2') {\n      option = config.axis_y2_label;\n    } else if (axisId === 'x') {\n      option = config.axis_x_label;\n    }\n\n    return option;\n  };\n\n  Axis.prototype.getLabelText = function getLabelText(axisId) {\n    var option = this.getLabelOptionByAxisId(axisId);\n    return isString(option) ? option : option ? option.text : null;\n  };\n\n  Axis.prototype.setLabelText = function setLabelText(axisId, text) {\n    var $$ = this.owner,\n        config = $$.config,\n        option = this.getLabelOptionByAxisId(axisId);\n\n    if (isString(option)) {\n      if (axisId === 'y') {\n        config.axis_y_label = text;\n      } else if (axisId === 'y2') {\n        config.axis_y2_label = text;\n      } else if (axisId === 'x') {\n        config.axis_x_label = text;\n      }\n    } else if (option) {\n      option.text = text;\n    }\n  };\n\n  Axis.prototype.getLabelPosition = function getLabelPosition(axisId, defaultPosition) {\n    var option = this.getLabelOptionByAxisId(axisId),\n        position = option && _typeof(option) === 'object' && option.position ? option.position : defaultPosition;\n    return {\n      isInner: position.indexOf('inner') >= 0,\n      isOuter: position.indexOf('outer') >= 0,\n      isLeft: position.indexOf('left') >= 0,\n      isCenter: position.indexOf('center') >= 0,\n      isRight: position.indexOf('right') >= 0,\n      isTop: position.indexOf('top') >= 0,\n      isMiddle: position.indexOf('middle') >= 0,\n      isBottom: position.indexOf('bottom') >= 0\n    };\n  };\n\n  Axis.prototype.getXAxisLabelPosition = function getXAxisLabelPosition() {\n    return this.getLabelPosition('x', this.owner.config.axis_rotated ? 'inner-top' : 'inner-right');\n  };\n\n  Axis.prototype.getYAxisLabelPosition = function getYAxisLabelPosition() {\n    return this.getLabelPosition('y', this.owner.config.axis_rotated ? 'inner-right' : 'inner-top');\n  };\n\n  Axis.prototype.getY2AxisLabelPosition = function getY2AxisLabelPosition() {\n    return this.getLabelPosition('y2', this.owner.config.axis_rotated ? 'inner-right' : 'inner-top');\n  };\n\n  Axis.prototype.getLabelPositionById = function getLabelPositionById(id) {\n    return id === 'y2' ? this.getY2AxisLabelPosition() : id === 'y' ? this.getYAxisLabelPosition() : this.getXAxisLabelPosition();\n  };\n\n  Axis.prototype.textForXAxisLabel = function textForXAxisLabel() {\n    return this.getLabelText('x');\n  };\n\n  Axis.prototype.textForYAxisLabel = function textForYAxisLabel() {\n    return this.getLabelText('y');\n  };\n\n  Axis.prototype.textForY2AxisLabel = function textForY2AxisLabel() {\n    return this.getLabelText('y2');\n  };\n\n  Axis.prototype.xForAxisLabel = function xForAxisLabel(forHorizontal, position) {\n    var $$ = this.owner;\n\n    if (forHorizontal) {\n      return position.isLeft ? 0 : position.isCenter ? $$.width / 2 : $$.width;\n    } else {\n      return position.isBottom ? -$$.height : position.isMiddle ? -$$.height / 2 : 0;\n    }\n  };\n\n  Axis.prototype.dxForAxisLabel = function dxForAxisLabel(forHorizontal, position) {\n    if (forHorizontal) {\n      return position.isLeft ? '0.5em' : position.isRight ? '-0.5em' : '0';\n    } else {\n      return position.isTop ? '-0.5em' : position.isBottom ? '0.5em' : '0';\n    }\n  };\n\n  Axis.prototype.textAnchorForAxisLabel = function textAnchorForAxisLabel(forHorizontal, position) {\n    if (forHorizontal) {\n      return position.isLeft ? 'start' : position.isCenter ? 'middle' : 'end';\n    } else {\n      return position.isBottom ? 'start' : position.isMiddle ? 'middle' : 'end';\n    }\n  };\n\n  Axis.prototype.xForXAxisLabel = function xForXAxisLabel() {\n    return this.xForAxisLabel(!this.owner.config.axis_rotated, this.getXAxisLabelPosition());\n  };\n\n  Axis.prototype.xForYAxisLabel = function xForYAxisLabel() {\n    return this.xForAxisLabel(this.owner.config.axis_rotated, this.getYAxisLabelPosition());\n  };\n\n  Axis.prototype.xForY2AxisLabel = function xForY2AxisLabel() {\n    return this.xForAxisLabel(this.owner.config.axis_rotated, this.getY2AxisLabelPosition());\n  };\n\n  Axis.prototype.dxForXAxisLabel = function dxForXAxisLabel() {\n    return this.dxForAxisLabel(!this.owner.config.axis_rotated, this.getXAxisLabelPosition());\n  };\n\n  Axis.prototype.dxForYAxisLabel = function dxForYAxisLabel() {\n    return this.dxForAxisLabel(this.owner.config.axis_rotated, this.getYAxisLabelPosition());\n  };\n\n  Axis.prototype.dxForY2AxisLabel = function dxForY2AxisLabel() {\n    return this.dxForAxisLabel(this.owner.config.axis_rotated, this.getY2AxisLabelPosition());\n  };\n\n  Axis.prototype.dyForXAxisLabel = function dyForXAxisLabel() {\n    var $$ = this.owner,\n        config = $$.config,\n        position = this.getXAxisLabelPosition();\n\n    if (config.axis_rotated) {\n      return position.isInner ? '1.2em' : -25 - ($$.config.axis_x_inner ? 0 : this.getMaxTickWidth('x'));\n    } else {\n      return position.isInner ? '-0.5em' : $$.getHorizontalAxisHeight('x') - 10;\n    }\n  };\n\n  Axis.prototype.dyForYAxisLabel = function dyForYAxisLabel() {\n    var $$ = this.owner,\n        position = this.getYAxisLabelPosition();\n\n    if ($$.config.axis_rotated) {\n      return position.isInner ? '-0.5em' : '3em';\n    } else {\n      return position.isInner ? '1.2em' : -10 - ($$.config.axis_y_inner ? 0 : this.getMaxTickWidth('y') + 10);\n    }\n  };\n\n  Axis.prototype.dyForY2AxisLabel = function dyForY2AxisLabel() {\n    var $$ = this.owner,\n        position = this.getY2AxisLabelPosition();\n\n    if ($$.config.axis_rotated) {\n      return position.isInner ? '1.2em' : '-2.2em';\n    } else {\n      return position.isInner ? '-0.5em' : 15 + ($$.config.axis_y2_inner ? 0 : this.getMaxTickWidth('y2') + 15);\n    }\n  };\n\n  Axis.prototype.textAnchorForXAxisLabel = function textAnchorForXAxisLabel() {\n    var $$ = this.owner;\n    return this.textAnchorForAxisLabel(!$$.config.axis_rotated, this.getXAxisLabelPosition());\n  };\n\n  Axis.prototype.textAnchorForYAxisLabel = function textAnchorForYAxisLabel() {\n    var $$ = this.owner;\n    return this.textAnchorForAxisLabel($$.config.axis_rotated, this.getYAxisLabelPosition());\n  };\n\n  Axis.prototype.textAnchorForY2AxisLabel = function textAnchorForY2AxisLabel() {\n    var $$ = this.owner;\n    return this.textAnchorForAxisLabel($$.config.axis_rotated, this.getY2AxisLabelPosition());\n  };\n\n  Axis.prototype.getMaxTickWidth = function getMaxTickWidth(id, withoutRecompute) {\n    var $$ = this.owner,\n        maxWidth = 0,\n        targetsToShow,\n        scale,\n        axis,\n        dummy,\n        svg;\n\n    if (withoutRecompute && $$.currentMaxTickWidths[id]) {\n      return $$.currentMaxTickWidths[id];\n    }\n\n    if ($$.svg) {\n      targetsToShow = $$.filterTargetsToShow($$.data.targets);\n\n      if (id === 'y') {\n        scale = $$.y.copy().domain($$.getYDomain(targetsToShow, 'y'));\n        axis = this.getYAxis(id, scale, $$.yOrient, $$.yAxisTickValues, false, true, true);\n      } else if (id === 'y2') {\n        scale = $$.y2.copy().domain($$.getYDomain(targetsToShow, 'y2'));\n        axis = this.getYAxis(id, scale, $$.y2Orient, $$.y2AxisTickValues, false, true, true);\n      } else {\n        scale = $$.x.copy().domain($$.getXDomain(targetsToShow));\n        axis = this.getXAxis(scale, $$.xOrient, $$.xAxisTickFormat, $$.xAxisTickValues, false, true, true);\n        this.updateXAxisTickValues(targetsToShow, axis);\n      }\n\n      dummy = $$.d3.select('body').append('div').classed('c3', true);\n      svg = dummy.append('svg').style('visibility', 'hidden').style('position', 'fixed').style('top', 0).style('left', 0), svg.append('g').call(axis).each(function () {\n        $$.d3.select(this).selectAll('text').each(function () {\n          var box = getBBox(this);\n\n          if (maxWidth < box.width) {\n            maxWidth = box.width;\n          }\n        });\n        dummy.remove();\n      });\n    }\n\n    $$.currentMaxTickWidths[id] = maxWidth <= 0 ? $$.currentMaxTickWidths[id] : maxWidth;\n    return $$.currentMaxTickWidths[id];\n  };\n\n  Axis.prototype.updateLabels = function updateLabels(withTransition) {\n    var $$ = this.owner;\n    var axisXLabel = $$.main.select('.' + CLASS.axisX + ' .' + CLASS.axisXLabel),\n        axisYLabel = $$.main.select('.' + CLASS.axisY + ' .' + CLASS.axisYLabel),\n        axisY2Label = $$.main.select('.' + CLASS.axisY2 + ' .' + CLASS.axisY2Label);\n    (withTransition ? axisXLabel.transition() : axisXLabel).attr('x', this.xForXAxisLabel.bind(this)).attr('dx', this.dxForXAxisLabel.bind(this)).attr('dy', this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this));\n    (withTransition ? axisYLabel.transition() : axisYLabel).attr('x', this.xForYAxisLabel.bind(this)).attr('dx', this.dxForYAxisLabel.bind(this)).attr('dy', this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this));\n    (withTransition ? axisY2Label.transition() : axisY2Label).attr('x', this.xForY2AxisLabel.bind(this)).attr('dx', this.dxForY2AxisLabel.bind(this)).attr('dy', this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this));\n  };\n\n  Axis.prototype.getPadding = function getPadding(padding, key, defaultValue, domainLength) {\n    var p = typeof padding === 'number' ? padding : padding[key];\n\n    if (!isValue(p)) {\n      return defaultValue;\n    }\n\n    if (padding.unit === 'ratio') {\n      return padding[key] * domainLength;\n    } // assume padding is pixels if unit is not specified\n\n\n    return this.convertPixelsToAxisPadding(p, domainLength);\n  };\n\n  Axis.prototype.convertPixelsToAxisPadding = function convertPixelsToAxisPadding(pixels, domainLength) {\n    var $$ = this.owner,\n        length = $$.config.axis_rotated ? $$.width : $$.height;\n    return domainLength * (pixels / length);\n  };\n\n  Axis.prototype.generateTickValues = function generateTickValues(values, tickCount, forTimeSeries) {\n    var tickValues = values,\n        targetCount,\n        start,\n        end,\n        count,\n        interval,\n        i,\n        tickValue;\n\n    if (tickCount) {\n      targetCount = isFunction(tickCount) ? tickCount() : tickCount; // compute ticks according to tickCount\n\n      if (targetCount === 1) {\n        tickValues = [values[0]];\n      } else if (targetCount === 2) {\n        tickValues = [values[0], values[values.length - 1]];\n      } else if (targetCount > 2) {\n        count = targetCount - 2;\n        start = values[0];\n        end = values[values.length - 1];\n        interval = (end - start) / (count + 1); // re-construct unique values\n\n        tickValues = [start];\n\n        for (i = 0; i < count; i++) {\n          tickValue = +start + interval * (i + 1);\n          tickValues.push(forTimeSeries ? new Date(tickValue) : tickValue);\n        }\n\n        tickValues.push(end);\n      }\n    }\n\n    if (!forTimeSeries) {\n      tickValues = tickValues.sort(function (a, b) {\n        return a - b;\n      });\n    }\n\n    return tickValues;\n  };\n\n  Axis.prototype.generateTransitions = function generateTransitions(duration) {\n    var $$ = this.owner,\n        axes = $$.axes;\n    return {\n      axisX: duration ? axes.x.transition().duration(duration) : axes.x,\n      axisY: duration ? axes.y.transition().duration(duration) : axes.y,\n      axisY2: duration ? axes.y2.transition().duration(duration) : axes.y2,\n      axisSubX: duration ? axes.subx.transition().duration(duration) : axes.subx\n    };\n  };\n\n  Axis.prototype.redraw = function redraw(duration, isHidden) {\n    var $$ = this.owner,\n        transition = duration ? $$.d3.transition().duration(duration) : null;\n    $$.axes.x.style('opacity', isHidden ? 0 : 1).call($$.xAxis, transition);\n    $$.axes.y.style('opacity', isHidden ? 0 : 1).call($$.yAxis, transition);\n    $$.axes.y2.style('opacity', isHidden ? 0 : 1).call($$.y2Axis, transition);\n    $$.axes.subx.style('opacity', isHidden ? 0 : 1).call($$.subXAxis, transition);\n  };\n\n  var c3 = {\n    version: '0.7.18',\n    chart: {\n      fn: Chart.prototype,\n      internal: {\n        fn: ChartInternal.prototype,\n        axis: {\n          fn: Axis.prototype,\n          internal: {\n            fn: AxisInternal.prototype\n          }\n        }\n      }\n    },\n    generate: function generate(config) {\n      return new Chart(config);\n    }\n  };\n\n  ChartInternal.prototype.beforeInit = function () {// can do something\n  };\n\n  ChartInternal.prototype.afterInit = function () {// can do something\n  };\n\n  ChartInternal.prototype.init = function () {\n    var $$ = this,\n        config = $$.config;\n    $$.initParams();\n\n    if (config.data_url) {\n      $$.convertUrlToData(config.data_url, config.data_mimeType, config.data_headers, config.data_keys, $$.initWithData);\n    } else if (config.data_json) {\n      $$.initWithData($$.convertJsonToData(config.data_json, config.data_keys));\n    } else if (config.data_rows) {\n      $$.initWithData($$.convertRowsToData(config.data_rows));\n    } else if (config.data_columns) {\n      $$.initWithData($$.convertColumnsToData(config.data_columns));\n    } else {\n      throw Error('url or json or rows or columns is required.');\n    }\n  };\n\n  ChartInternal.prototype.initParams = function () {\n    var $$ = this,\n        d3 = $$.d3,\n        config = $$.config; // MEMO: clipId needs to be unique because it conflicts when multiple charts exist\n\n    $$.clipId = 'c3-' + new Date().valueOf() + '-clip';\n    $$.clipIdForXAxis = $$.clipId + '-xaxis';\n    $$.clipIdForYAxis = $$.clipId + '-yaxis';\n    $$.clipIdForGrid = $$.clipId + '-grid';\n    $$.clipIdForSubchart = $$.clipId + '-subchart';\n    $$.clipPath = $$.getClipPath($$.clipId);\n    $$.clipPathForXAxis = $$.getClipPath($$.clipIdForXAxis);\n    $$.clipPathForYAxis = $$.getClipPath($$.clipIdForYAxis);\n    $$.clipPathForGrid = $$.getClipPath($$.clipIdForGrid);\n    $$.clipPathForSubchart = $$.getClipPath($$.clipIdForSubchart);\n    $$.dragStart = null;\n    $$.dragging = false;\n    $$.flowing = false;\n    $$.cancelClick = false;\n    $$.mouseover = undefined;\n    $$.transiting = false;\n    $$.color = $$.generateColor();\n    $$.levelColor = $$.generateLevelColor();\n    $$.dataTimeParse = (config.data_xLocaltime ? d3.timeParse : d3.utcParse)($$.config.data_xFormat);\n    $$.axisTimeFormat = config.axis_x_localtime ? d3.timeFormat : d3.utcFormat;\n\n    $$.defaultAxisTimeFormat = function (date) {\n      if (date.getMilliseconds()) {\n        return d3.timeFormat('.%L')(date);\n      }\n\n      if (date.getSeconds()) {\n        return d3.timeFormat(':%S')(date);\n      }\n\n      if (date.getMinutes()) {\n        return d3.timeFormat('%I:%M')(date);\n      }\n\n      if (date.getHours()) {\n        return d3.timeFormat('%I %p')(date);\n      }\n\n      if (date.getDay() && date.getDate() !== 1) {\n        return d3.timeFormat('%-m/%-d')(date);\n      }\n\n      if (date.getDate() !== 1) {\n        return d3.timeFormat('%-m/%-d')(date);\n      }\n\n      if (date.getMonth()) {\n        return d3.timeFormat('%-m/%-d')(date);\n      }\n\n      return d3.timeFormat('%Y/%-m/%-d')(date);\n    };\n\n    $$.hiddenTargetIds = [];\n    $$.hiddenLegendIds = [];\n    $$.focusedTargetIds = [];\n    $$.defocusedTargetIds = [];\n    $$.xOrient = config.axis_rotated ? config.axis_x_inner ? 'right' : 'left' : config.axis_x_inner ? 'top' : 'bottom';\n    $$.yOrient = config.axis_rotated ? config.axis_y_inner ? 'top' : 'bottom' : config.axis_y_inner ? 'right' : 'left';\n    $$.y2Orient = config.axis_rotated ? config.axis_y2_inner ? 'bottom' : 'top' : config.axis_y2_inner ? 'left' : 'right';\n    $$.subXOrient = config.axis_rotated ? 'left' : 'bottom';\n    $$.isLegendRight = config.legend_position === 'right';\n    $$.isLegendInset = config.legend_position === 'inset';\n    $$.isLegendTop = config.legend_inset_anchor === 'top-left' || config.legend_inset_anchor === 'top-right';\n    $$.isLegendLeft = config.legend_inset_anchor === 'top-left' || config.legend_inset_anchor === 'bottom-left';\n    $$.legendStep = 0;\n    $$.legendItemWidth = 0;\n    $$.legendItemHeight = 0;\n    $$.currentMaxTickWidths = {\n      x: 0,\n      y: 0,\n      y2: 0\n    };\n    $$.rotated_padding_left = 30;\n    $$.rotated_padding_right = config.axis_rotated && !config.axis_x_show ? 0 : 30;\n    $$.rotated_padding_top = 5;\n    $$.withoutFadeIn = {};\n    $$.intervalForObserveInserted = undefined;\n    $$.axes.subx = d3.selectAll([]); // needs when excluding subchart.js\n  };\n\n  ChartInternal.prototype.initChartElements = function () {\n    if (this.initBar) {\n      this.initBar();\n    }\n\n    if (this.initLine) {\n      this.initLine();\n    }\n\n    if (this.initArc) {\n      this.initArc();\n    }\n\n    if (this.initGauge) {\n      this.initGauge();\n    }\n\n    if (this.initText) {\n      this.initText();\n    }\n  };\n\n  ChartInternal.prototype.initWithData = function (data) {\n    var $$ = this,\n        d3 = $$.d3,\n        config = $$.config;\n    var defs,\n        main,\n        binding = true;\n    $$.axis = new Axis($$);\n\n    if (!config.bindto) {\n      $$.selectChart = d3.selectAll([]);\n    } else if (typeof config.bindto.node === 'function') {\n      $$.selectChart = config.bindto;\n    } else {\n      $$.selectChart = d3.select(config.bindto);\n    }\n\n    if ($$.selectChart.empty()) {\n      $$.selectChart = d3.select(document.createElement('div')).style('opacity', 0);\n      $$.observeInserted($$.selectChart);\n      binding = false;\n    }\n\n    $$.selectChart.html('').classed('c3', true); // Init data as targets\n\n    $$.data.xs = {};\n    $$.data.targets = $$.convertDataToTargets(data);\n\n    if (config.data_filter) {\n      $$.data.targets = $$.data.targets.filter(config.data_filter);\n    } // Set targets to hide if needed\n\n\n    if (config.data_hide) {\n      $$.addHiddenTargetIds(config.data_hide === true ? $$.mapToIds($$.data.targets) : config.data_hide);\n    }\n\n    if (config.legend_hide) {\n      $$.addHiddenLegendIds(config.legend_hide === true ? $$.mapToIds($$.data.targets) : config.legend_hide);\n    }\n\n    if ($$.isStanfordGraphType()) {\n      $$.initStanfordData();\n    } // Init sizes and scales\n\n\n    $$.updateSizes();\n    $$.updateScales(); // Set domains for each scale\n\n    $$.x.domain(d3.extent($$.getXDomain($$.data.targets)));\n    $$.y.domain($$.getYDomain($$.data.targets, 'y'));\n    $$.y2.domain($$.getYDomain($$.data.targets, 'y2'));\n    $$.subX.domain($$.x.domain());\n    $$.subY.domain($$.y.domain());\n    $$.subY2.domain($$.y2.domain()); // Save original x domain for zoom update\n\n    $$.orgXDomain = $$.x.domain();\n    /*-- Basic Elements --*/\n    // Define svgs\n\n    $$.svg = $$.selectChart.append('svg').style('overflow', 'hidden').on('mouseenter', function () {\n      return config.onmouseover.call($$);\n    }).on('mouseleave', function () {\n      return config.onmouseout.call($$);\n    });\n\n    if ($$.config.svg_classname) {\n      $$.svg.attr('class', $$.config.svg_classname);\n    } // Define defs\n\n\n    defs = $$.svg.append('defs');\n    $$.clipChart = $$.appendClip(defs, $$.clipId);\n    $$.clipXAxis = $$.appendClip(defs, $$.clipIdForXAxis);\n    $$.clipYAxis = $$.appendClip(defs, $$.clipIdForYAxis);\n    $$.clipGrid = $$.appendClip(defs, $$.clipIdForGrid);\n    $$.clipSubchart = $$.appendClip(defs, $$.clipIdForSubchart);\n    $$.updateSvgSize(); // Define regions\n\n    main = $$.main = $$.svg.append('g').attr('transform', $$.getTranslate('main'));\n\n    if ($$.initPie) {\n      $$.initPie();\n    }\n\n    if ($$.initDragZoom) {\n      $$.initDragZoom();\n    }\n\n    if (config.subchart_show && $$.initSubchart) {\n      $$.initSubchart();\n    }\n\n    if ($$.initTooltip) {\n      $$.initTooltip();\n    }\n\n    if ($$.initLegend) {\n      $$.initLegend();\n    }\n\n    if ($$.initTitle) {\n      $$.initTitle();\n    }\n\n    if ($$.initZoom) {\n      $$.initZoom();\n    }\n\n    if ($$.isStanfordGraphType()) {\n      $$.drawColorScale();\n    } // Update selection based on size and scale\n    // TODO: currently this must be called after initLegend because of update of sizes, but it should be done in initSubchart.\n\n\n    if (config.subchart_show && $$.initSubchartBrush) {\n      $$.initSubchartBrush();\n    }\n    /*-- Main Region --*/\n    // text when empty\n\n\n    main.append('text').attr('class', CLASS.text + ' ' + CLASS.empty).attr('text-anchor', 'middle') // horizontal centering of text at x position in all browsers.\n    .attr('dominant-baseline', 'middle'); // vertical centering of text at y position in all browsers, except IE.\n    // Regions\n\n    $$.initRegion(); // Grids\n\n    $$.initGrid(); // Define g for chart area\n\n    main.append('g').attr('clip-path', $$.clipPath).attr('class', CLASS.chart); // Grid lines\n\n    if (config.grid_lines_front) {\n      $$.initGridLines();\n    }\n\n    $$.initStanfordElements(); // Cover whole with rects for events\n\n    $$.initEventRect(); // Define g for chart\n\n    $$.initChartElements(); // Add Axis\n\n    $$.axis.init(); // Set targets\n\n    $$.updateTargets($$.data.targets); // Set default extent if defined\n\n    if (config.axis_x_selection) {\n      $$.brush.selectionAsValue($$.getDefaultSelection());\n    } // Draw with targets\n\n\n    if (binding) {\n      $$.updateDimension();\n      $$.config.oninit.call($$);\n      $$.redraw({\n        withTransition: false,\n        withTransform: true,\n        withUpdateXDomain: true,\n        withUpdateOrgXDomain: true,\n        withTransitionForAxis: false\n      });\n    } // Bind to resize event\n\n\n    $$.bindResize(); // Bind to window focus event\n\n    $$.bindWindowFocus(); // export element of the chart\n\n    $$.api.element = $$.selectChart.node();\n  };\n\n  ChartInternal.prototype.smoothLines = function (el, type) {\n    var $$ = this;\n\n    if (type === 'grid') {\n      el.each(function () {\n        var g = $$.d3.select(this),\n            x1 = g.attr('x1'),\n            x2 = g.attr('x2'),\n            y1 = g.attr('y1'),\n            y2 = g.attr('y2');\n        g.attr({\n          x1: Math.ceil(x1),\n          x2: Math.ceil(x2),\n          y1: Math.ceil(y1),\n          y2: Math.ceil(y2)\n        });\n      });\n    }\n  };\n\n  ChartInternal.prototype.updateSizes = function () {\n    var $$ = this,\n        config = $$.config;\n    var legendHeight = $$.legend ? $$.getLegendHeight() : 0,\n        legendWidth = $$.legend ? $$.getLegendWidth() : 0,\n        legendHeightForBottom = $$.isLegendRight || $$.isLegendInset ? 0 : legendHeight,\n        hasArc = $$.hasArcType(),\n        xAxisHeight = config.axis_rotated || hasArc ? 0 : $$.getHorizontalAxisHeight('x'),\n        subchartHeight = config.subchart_show && !hasArc ? config.subchart_size_height + xAxisHeight : 0;\n    $$.currentWidth = $$.getCurrentWidth();\n    $$.currentHeight = $$.getCurrentHeight(); // for main\n\n    $$.margin = config.axis_rotated ? {\n      top: $$.getHorizontalAxisHeight('y2') + $$.getCurrentPaddingTop(),\n      right: hasArc ? 0 : $$.getCurrentPaddingRight(),\n      bottom: $$.getHorizontalAxisHeight('y') + legendHeightForBottom + $$.getCurrentPaddingBottom(),\n      left: subchartHeight + (hasArc ? 0 : $$.getCurrentPaddingLeft())\n    } : {\n      top: 4 + $$.getCurrentPaddingTop(),\n      // for top tick text\n      right: hasArc ? 0 : $$.getCurrentPaddingRight(),\n      bottom: xAxisHeight + subchartHeight + legendHeightForBottom + $$.getCurrentPaddingBottom(),\n      left: hasArc ? 0 : $$.getCurrentPaddingLeft()\n    }; // for subchart\n\n    $$.margin2 = config.axis_rotated ? {\n      top: $$.margin.top,\n      right: NaN,\n      bottom: 20 + legendHeightForBottom,\n      left: $$.rotated_padding_left\n    } : {\n      top: $$.currentHeight - subchartHeight - legendHeightForBottom,\n      right: NaN,\n      bottom: xAxisHeight + legendHeightForBottom,\n      left: $$.margin.left\n    }; // for legend\n\n    $$.margin3 = {\n      top: 0,\n      right: NaN,\n      bottom: 0,\n      left: 0\n    };\n\n    if ($$.updateSizeForLegend) {\n      $$.updateSizeForLegend(legendHeight, legendWidth);\n    }\n\n    $$.width = $$.currentWidth - $$.margin.left - $$.margin.right;\n    $$.height = $$.currentHeight - $$.margin.top - $$.margin.bottom;\n\n    if ($$.width < 0) {\n      $$.width = 0;\n    }\n\n    if ($$.height < 0) {\n      $$.height = 0;\n    }\n\n    $$.width2 = config.axis_rotated ? $$.margin.left - $$.rotated_padding_left - $$.rotated_padding_right : $$.width;\n    $$.height2 = config.axis_rotated ? $$.height : $$.currentHeight - $$.margin2.top - $$.margin2.bottom;\n\n    if ($$.width2 < 0) {\n      $$.width2 = 0;\n    }\n\n    if ($$.height2 < 0) {\n      $$.height2 = 0;\n    } // for arc\n\n\n    $$.arcWidth = $$.width - ($$.isLegendRight ? legendWidth + 10 : 0);\n    $$.arcHeight = $$.height - ($$.isLegendRight ? 0 : 10);\n\n    if ($$.hasType('gauge') && !config.gauge_fullCircle) {\n      $$.arcHeight += $$.height - $$.getGaugeLabelHeight();\n    }\n\n    if ($$.updateRadius) {\n      $$.updateRadius();\n    }\n\n    if ($$.isLegendRight && hasArc) {\n      $$.margin3.left = $$.arcWidth / 2 + $$.radiusExpanded * 1.1;\n    }\n  };\n\n  ChartInternal.prototype.updateTargets = function (targets) {\n    var $$ = this,\n        config = $$.config;\n    /*-- Main --*/\n    //-- Text --//\n\n    $$.updateTargetsForText(targets); //-- Bar --//\n\n    $$.updateTargetsForBar(targets); //-- Line --//\n\n    $$.updateTargetsForLine(targets); //-- Arc --//\n\n    if ($$.hasArcType() && $$.updateTargetsForArc) {\n      $$.updateTargetsForArc(targets);\n    }\n    /*-- Sub --*/\n\n\n    if (config.subchart_show && $$.updateTargetsForSubchart) {\n      $$.updateTargetsForSubchart(targets);\n    } // Fade-in each chart\n\n\n    $$.showTargets();\n  };\n\n  ChartInternal.prototype.showTargets = function () {\n    var $$ = this;\n    $$.svg.selectAll('.' + CLASS.target).filter(function (d) {\n      return $$.isTargetToShow(d.id);\n    }).transition().duration($$.config.transition_duration).style('opacity', 1);\n  };\n\n  ChartInternal.prototype.redraw = function (options, transitions) {\n    var $$ = this,\n        main = $$.main,\n        d3 = $$.d3,\n        config = $$.config;\n    var areaIndices = $$.getShapeIndices($$.isAreaType),\n        barIndices = $$.getShapeIndices($$.isBarType),\n        lineIndices = $$.getShapeIndices($$.isLineType);\n    var withY, withSubchart, withTransition, withTransitionForExit, withTransitionForAxis, withTransform, withUpdateXDomain, withUpdateOrgXDomain, withTrimXDomain, withLegend, withEventRect, withDimension, withUpdateXAxis;\n    var hideAxis = $$.hasArcType();\n    var drawArea, drawBar, drawLine, xForText, yForText;\n    var duration, durationForExit, durationForAxis;\n    var transitionsToWait, waitForDraw, flow, transition;\n    var targetsToShow = $$.filterTargetsToShow($$.data.targets),\n        tickValues,\n        i,\n        intervalForCulling,\n        xDomainForZoom;\n    var xv = $$.xv.bind($$),\n        cx,\n        cy;\n    options = options || {};\n    withY = getOption(options, 'withY', true);\n    withSubchart = getOption(options, 'withSubchart', true);\n    withTransition = getOption(options, 'withTransition', true);\n    withTransform = getOption(options, 'withTransform', false);\n    withUpdateXDomain = getOption(options, 'withUpdateXDomain', false);\n    withUpdateOrgXDomain = getOption(options, 'withUpdateOrgXDomain', false);\n    withTrimXDomain = getOption(options, 'withTrimXDomain', true);\n    withUpdateXAxis = getOption(options, 'withUpdateXAxis', withUpdateXDomain);\n    withLegend = getOption(options, 'withLegend', false);\n    withEventRect = getOption(options, 'withEventRect', true);\n    withDimension = getOption(options, 'withDimension', true);\n    withTransitionForExit = getOption(options, 'withTransitionForExit', withTransition);\n    withTransitionForAxis = getOption(options, 'withTransitionForAxis', withTransition);\n    duration = withTransition ? config.transition_duration : 0;\n    durationForExit = withTransitionForExit ? duration : 0;\n    durationForAxis = withTransitionForAxis ? duration : 0;\n    transitions = transitions || $$.axis.generateTransitions(durationForAxis); // update legend and transform each g\n\n    if (withLegend && config.legend_show) {\n      $$.updateLegend($$.mapToIds($$.data.targets), options, transitions);\n    } else if (withDimension) {\n      // need to update dimension (e.g. axis.y.tick.values) because y tick values should change\n      // no need to update axis in it because they will be updated in redraw()\n      $$.updateDimension(true);\n    } // MEMO: needed for grids calculation\n\n\n    if ($$.isCategorized() && targetsToShow.length === 0) {\n      $$.x.domain([0, $$.axes.x.selectAll('.tick').size()]);\n    }\n\n    if (targetsToShow.length) {\n      $$.updateXDomain(targetsToShow, withUpdateXDomain, withUpdateOrgXDomain, withTrimXDomain);\n\n      if (!config.axis_x_tick_values) {\n        tickValues = $$.axis.updateXAxisTickValues(targetsToShow);\n      }\n    } else {\n      $$.xAxis.tickValues([]);\n      $$.subXAxis.tickValues([]);\n    }\n\n    if (config.zoom_rescale && !options.flow) {\n      xDomainForZoom = $$.x.orgDomain();\n    }\n\n    $$.y.domain($$.getYDomain(targetsToShow, 'y', xDomainForZoom));\n    $$.y2.domain($$.getYDomain(targetsToShow, 'y2', xDomainForZoom));\n\n    if (!config.axis_y_tick_values && config.axis_y_tick_count) {\n      $$.yAxis.tickValues($$.axis.generateTickValues($$.y.domain(), config.axis_y_tick_count));\n    }\n\n    if (!config.axis_y2_tick_values && config.axis_y2_tick_count) {\n      $$.y2Axis.tickValues($$.axis.generateTickValues($$.y2.domain(), config.axis_y2_tick_count));\n    } // axes\n\n\n    $$.axis.redraw(durationForAxis, hideAxis); // Update axis label\n\n    $$.axis.updateLabels(withTransition); // show/hide if manual culling needed\n\n    if ((withUpdateXDomain || withUpdateXAxis) && targetsToShow.length) {\n      if (config.axis_x_tick_culling && tickValues) {\n        for (i = 1; i < tickValues.length; i++) {\n          if (tickValues.length / i < config.axis_x_tick_culling_max) {\n            intervalForCulling = i;\n            break;\n          }\n        }\n\n        $$.svg.selectAll('.' + CLASS.axisX + ' .tick text').each(function (e) {\n          var index = tickValues.indexOf(e);\n\n          if (index >= 0) {\n            d3.select(this).style('display', index % intervalForCulling ? 'none' : 'block');\n          }\n        });\n      } else {\n        $$.svg.selectAll('.' + CLASS.axisX + ' .tick text').style('display', 'block');\n      }\n    } // setup drawer - MEMO: these must be called after axis updated\n\n\n    drawArea = $$.generateDrawArea ? $$.generateDrawArea(areaIndices, false) : undefined;\n    drawBar = $$.generateDrawBar ? $$.generateDrawBar(barIndices) : undefined;\n    drawLine = $$.generateDrawLine ? $$.generateDrawLine(lineIndices, false) : undefined;\n    xForText = $$.generateXYForText(areaIndices, barIndices, lineIndices, true);\n    yForText = $$.generateXYForText(areaIndices, barIndices, lineIndices, false); // update circleY based on updated parameters\n\n    $$.updateCircleY(); // generate circle x/y functions depending on updated params\n\n    cx = ($$.config.axis_rotated ? $$.circleY : $$.circleX).bind($$);\n    cy = ($$.config.axis_rotated ? $$.circleX : $$.circleY).bind($$); // Update sub domain\n\n    if (withY) {\n      $$.subY.domain($$.getYDomain(targetsToShow, 'y'));\n      $$.subY2.domain($$.getYDomain(targetsToShow, 'y2'));\n    } // xgrid focus\n\n\n    $$.updateXgridFocus(); // Data empty label positioning and text.\n\n    main.select('text.' + CLASS.text + '.' + CLASS.empty).attr('x', $$.width / 2).attr('y', $$.height / 2).text(config.data_empty_label_text).transition().style('opacity', targetsToShow.length ? 0 : 1); // event rect\n\n    if (withEventRect) {\n      $$.redrawEventRect();\n    } // grid\n\n\n    $$.updateGrid(duration);\n    $$.updateStanfordElements(duration); // rect for regions\n\n    $$.updateRegion(duration); // bars\n\n    $$.updateBar(durationForExit); // lines, areas and circles\n\n    $$.updateLine(durationForExit);\n    $$.updateArea(durationForExit);\n    $$.updateCircle(cx, cy); // text\n\n    if ($$.hasDataLabel()) {\n      $$.updateText(xForText, yForText, durationForExit);\n    } // title\n\n\n    if ($$.redrawTitle) {\n      $$.redrawTitle();\n    } // arc\n\n\n    if ($$.redrawArc) {\n      $$.redrawArc(duration, durationForExit, withTransform);\n    } // subchart\n\n\n    if (config.subchart_show && $$.redrawSubchart) {\n      $$.redrawSubchart(withSubchart, transitions, duration, durationForExit, areaIndices, barIndices, lineIndices);\n    }\n\n    if ($$.isStanfordGraphType()) {\n      $$.drawColorScale();\n    } // circles for select\n\n\n    main.selectAll('.' + CLASS.selectedCircles).filter($$.isBarType.bind($$)).selectAll('circle').remove();\n\n    if (options.flow) {\n      flow = $$.generateFlow({\n        targets: targetsToShow,\n        flow: options.flow,\n        duration: options.flow.duration,\n        drawBar: drawBar,\n        drawLine: drawLine,\n        drawArea: drawArea,\n        cx: cx,\n        cy: cy,\n        xv: xv,\n        xForText: xForText,\n        yForText: yForText\n      });\n    }\n\n    if (duration && $$.isTabVisible()) {\n      // Only use transition if tab visible. See #938.\n      // transition should be derived from one transition\n      transition = d3.transition().duration(duration);\n      transitionsToWait = [];\n      [$$.redrawBar(drawBar, true, transition), $$.redrawLine(drawLine, true, transition), $$.redrawArea(drawArea, true, transition), $$.redrawCircle(cx, cy, true, transition), $$.redrawText(xForText, yForText, options.flow, true, transition), $$.redrawRegion(true, transition), $$.redrawGrid(true, transition)].forEach(function (transitions) {\n        transitions.forEach(function (transition) {\n          transitionsToWait.push(transition);\n        });\n      }); // Wait for end of transitions to call flow and onrendered callback\n\n      waitForDraw = $$.generateWait();\n      transitionsToWait.forEach(function (t) {\n        waitForDraw.add(t);\n      });\n      waitForDraw(function () {\n        if (flow) {\n          flow();\n        }\n\n        if (config.onrendered) {\n          config.onrendered.call($$);\n        }\n      });\n    } else {\n      $$.redrawBar(drawBar);\n      $$.redrawLine(drawLine);\n      $$.redrawArea(drawArea);\n      $$.redrawCircle(cx, cy);\n      $$.redrawText(xForText, yForText, options.flow);\n      $$.redrawRegion();\n      $$.redrawGrid();\n\n      if (flow) {\n        flow();\n      }\n\n      if (config.onrendered) {\n        config.onrendered.call($$);\n      }\n    } // update fadein condition\n\n\n    $$.mapToIds($$.data.targets).forEach(function (id) {\n      $$.withoutFadeIn[id] = true;\n    });\n  };\n\n  ChartInternal.prototype.updateAndRedraw = function (options) {\n    var $$ = this,\n        config = $$.config,\n        transitions;\n    options = options || {}; // same with redraw\n\n    options.withTransition = getOption(options, 'withTransition', true);\n    options.withTransform = getOption(options, 'withTransform', false);\n    options.withLegend = getOption(options, 'withLegend', false); // NOT same with redraw\n\n    options.withUpdateXDomain = getOption(options, 'withUpdateXDomain', true);\n    options.withUpdateOrgXDomain = getOption(options, 'withUpdateOrgXDomain', true);\n    options.withTransitionForExit = false;\n    options.withTransitionForTransform = getOption(options, 'withTransitionForTransform', options.withTransition); // MEMO: this needs to be called before updateLegend and it means this ALWAYS needs to be called)\n\n    $$.updateSizes(); // MEMO: called in updateLegend in redraw if withLegend\n\n    if (!(options.withLegend && config.legend_show)) {\n      transitions = $$.axis.generateTransitions(options.withTransitionForAxis ? config.transition_duration : 0); // Update scales\n\n      $$.updateScales();\n      $$.updateSvgSize(); // Update g positions\n\n      $$.transformAll(options.withTransitionForTransform, transitions);\n    } // Draw with new sizes & scales\n\n\n    $$.redraw(options, transitions);\n  };\n\n  ChartInternal.prototype.redrawWithoutRescale = function () {\n    this.redraw({\n      withY: false,\n      withSubchart: false,\n      withEventRect: false,\n      withTransitionForAxis: false\n    });\n  };\n\n  ChartInternal.prototype.isTimeSeries = function () {\n    return this.config.axis_x_type === 'timeseries';\n  };\n\n  ChartInternal.prototype.isCategorized = function () {\n    return this.config.axis_x_type.indexOf('categor') >= 0;\n  };\n\n  ChartInternal.prototype.isCustomX = function () {\n    var $$ = this,\n        config = $$.config;\n    return !$$.isTimeSeries() && (config.data_x || notEmpty(config.data_xs));\n  };\n\n  ChartInternal.prototype.isTimeSeriesY = function () {\n    return this.config.axis_y_type === 'timeseries';\n  };\n\n  ChartInternal.prototype.getTranslate = function (target) {\n    var $$ = this,\n        config = $$.config,\n        x,\n        y;\n\n    if (target === 'main') {\n      x = asHalfPixel($$.margin.left);\n      y = asHalfPixel($$.margin.top);\n    } else if (target === 'context') {\n      x = asHalfPixel($$.margin2.left);\n      y = asHalfPixel($$.margin2.top);\n    } else if (target === 'legend') {\n      x = $$.margin3.left;\n      y = $$.margin3.top;\n    } else if (target === 'x') {\n      x = 0;\n      y = config.axis_rotated ? 0 : $$.height;\n    } else if (target === 'y') {\n      x = 0;\n      y = config.axis_rotated ? $$.height : 0;\n    } else if (target === 'y2') {\n      x = config.axis_rotated ? 0 : $$.width;\n      y = config.axis_rotated ? 1 : 0;\n    } else if (target === 'subx') {\n      x = 0;\n      y = config.axis_rotated ? 0 : $$.height2;\n    } else if (target === 'arc') {\n      x = $$.arcWidth / 2;\n      y = $$.arcHeight / 2 - ($$.hasType('gauge') ? 6 : 0); // to prevent wrong display of min and max label\n    }\n\n    return 'translate(' + x + ',' + y + ')';\n  };\n\n  ChartInternal.prototype.initialOpacity = function (d) {\n    return d.value !== null && this.withoutFadeIn[d.id] ? 1 : 0;\n  };\n\n  ChartInternal.prototype.initialOpacityForCircle = function (d) {\n    return d.value !== null && this.withoutFadeIn[d.id] ? this.opacityForCircle(d) : 0;\n  };\n\n  ChartInternal.prototype.opacityForCircle = function (d) {\n    var isPointShouldBeShown = isFunction(this.config.point_show) ? this.config.point_show(d) : this.config.point_show;\n    var opacity = isPointShouldBeShown || this.isStanfordType(d) ? 1 : 0;\n    return isValue(d.value) ? this.isScatterType(d) ? 0.5 : opacity : 0;\n  };\n\n  ChartInternal.prototype.opacityForText = function () {\n    return this.hasDataLabel() ? 1 : 0;\n  };\n\n  ChartInternal.prototype.xx = function (d) {\n    return d ? this.x(d.x) : null;\n  };\n\n  ChartInternal.prototype.xvCustom = function (d, xyValue) {\n    var $$ = this,\n        value = xyValue ? d[xyValue] : d.value;\n\n    if ($$.isTimeSeries()) {\n      value = $$.parseDate(d.value);\n    } else if ($$.isCategorized() && typeof d.value === 'string') {\n      value = $$.config.axis_x_categories.indexOf(d.value);\n    }\n\n    return Math.ceil($$.x(value));\n  };\n\n  ChartInternal.prototype.yvCustom = function (d, xyValue) {\n    var $$ = this,\n        yScale = d.axis && d.axis === 'y2' ? $$.y2 : $$.y,\n        value = xyValue ? d[xyValue] : d.value;\n    return Math.ceil(yScale(value));\n  };\n\n  ChartInternal.prototype.xv = function (d) {\n    var $$ = this,\n        value = d.value;\n\n    if ($$.isTimeSeries()) {\n      value = $$.parseDate(d.value);\n    } else if ($$.isCategorized() && typeof d.value === 'string') {\n      value = $$.config.axis_x_categories.indexOf(d.value);\n    }\n\n    return Math.ceil($$.x(value));\n  };\n\n  ChartInternal.prototype.yv = function (d) {\n    var $$ = this,\n        yScale = d.axis && d.axis === 'y2' ? $$.y2 : $$.y;\n    return Math.ceil(yScale(d.value));\n  };\n\n  ChartInternal.prototype.subxx = function (d) {\n    return d ? this.subX(d.x) : null;\n  };\n\n  ChartInternal.prototype.transformMain = function (withTransition, transitions) {\n    var $$ = this,\n        xAxis,\n        yAxis,\n        y2Axis;\n\n    if (transitions && transitions.axisX) {\n      xAxis = transitions.axisX;\n    } else {\n      xAxis = $$.main.select('.' + CLASS.axisX);\n\n      if (withTransition) {\n        xAxis = xAxis.transition();\n      }\n    }\n\n    if (transitions && transitions.axisY) {\n      yAxis = transitions.axisY;\n    } else {\n      yAxis = $$.main.select('.' + CLASS.axisY);\n\n      if (withTransition) {\n        yAxis = yAxis.transition();\n      }\n    }\n\n    if (transitions && transitions.axisY2) {\n      y2Axis = transitions.axisY2;\n    } else {\n      y2Axis = $$.main.select('.' + CLASS.axisY2);\n\n      if (withTransition) {\n        y2Axis = y2Axis.transition();\n      }\n    }\n    (withTransition ? $$.main.transition() : $$.main).attr('transform', $$.getTranslate('main'));\n    xAxis.attr('transform', $$.getTranslate('x'));\n    yAxis.attr('transform', $$.getTranslate('y'));\n    y2Axis.attr('transform', $$.getTranslate('y2'));\n    $$.main.select('.' + CLASS.chartArcs).attr('transform', $$.getTranslate('arc'));\n  };\n\n  ChartInternal.prototype.transformAll = function (withTransition, transitions) {\n    var $$ = this;\n    $$.transformMain(withTransition, transitions);\n\n    if ($$.config.subchart_show) {\n      $$.transformContext(withTransition, transitions);\n    }\n\n    if ($$.legend) {\n      $$.transformLegend(withTransition);\n    }\n  };\n\n  ChartInternal.prototype.updateSvgSize = function () {\n    var $$ = this,\n        brush = $$.svg.select(\".\".concat(CLASS.brush, \" .overlay\"));\n    $$.svg.attr('width', $$.currentWidth).attr('height', $$.currentHeight);\n    $$.svg.selectAll(['#' + $$.clipId, '#' + $$.clipIdForGrid]).select('rect').attr('width', $$.width).attr('height', $$.height);\n    $$.svg.select('#' + $$.clipIdForXAxis).select('rect').attr('x', $$.getXAxisClipX.bind($$)).attr('y', $$.getXAxisClipY.bind($$)).attr('width', $$.getXAxisClipWidth.bind($$)).attr('height', $$.getXAxisClipHeight.bind($$));\n    $$.svg.select('#' + $$.clipIdForYAxis).select('rect').attr('x', $$.getYAxisClipX.bind($$)).attr('y', $$.getYAxisClipY.bind($$)).attr('width', $$.getYAxisClipWidth.bind($$)).attr('height', $$.getYAxisClipHeight.bind($$));\n    $$.svg.select('#' + $$.clipIdForSubchart).select('rect').attr('width', $$.width).attr('height', brush.size() && brush.attr('height') || 0); // MEMO: parent div's height will be bigger than svg when <!DOCTYPE html>\n\n    $$.selectChart.style('max-height', $$.currentHeight + 'px');\n  };\n\n  ChartInternal.prototype.updateDimension = function (withoutAxis) {\n    var $$ = this;\n\n    if (!withoutAxis) {\n      if ($$.config.axis_rotated) {\n        $$.axes.x.call($$.xAxis);\n        $$.axes.subx.call($$.subXAxis);\n      } else {\n        $$.axes.y.call($$.yAxis);\n        $$.axes.y2.call($$.y2Axis);\n      }\n    }\n\n    $$.updateSizes();\n    $$.updateScales();\n    $$.updateSvgSize();\n    $$.transformAll(false);\n  };\n\n  ChartInternal.prototype.observeInserted = function (selection) {\n    var $$ = this,\n        observer;\n\n    if (typeof MutationObserver === 'undefined') {\n      window.console.error('MutationObserver not defined.');\n      return;\n    }\n\n    observer = new MutationObserver(function (mutations) {\n      mutations.forEach(function (mutation) {\n        if (mutation.type === 'childList' && mutation.previousSibling) {\n          observer.disconnect(); // need to wait for completion of load because size calculation requires the actual sizes determined after that completion\n\n          $$.intervalForObserveInserted = window.setInterval(function () {\n            // parentNode will NOT be null when completed\n            if (selection.node().parentNode) {\n              window.clearInterval($$.intervalForObserveInserted);\n              $$.updateDimension();\n\n              if ($$.brush) {\n                $$.brush.update();\n              }\n\n              $$.config.oninit.call($$);\n              $$.redraw({\n                withTransform: true,\n                withUpdateXDomain: true,\n                withUpdateOrgXDomain: true,\n                withTransition: false,\n                withTransitionForTransform: false,\n                withLegend: true\n              });\n              selection.transition().style('opacity', 1);\n            }\n          }, 10);\n        }\n      });\n    });\n    observer.observe(selection.node(), {\n      attributes: true,\n      childList: true,\n      characterData: true\n    });\n  };\n  /**\n   * Binds handlers to the window resize event.\n   */\n\n\n  ChartInternal.prototype.bindResize = function () {\n    var $$ = this,\n        config = $$.config;\n    $$.resizeFunction = $$.generateResize(); // need to call .remove\n\n    $$.resizeFunction.add(function () {\n      config.onresize.call($$);\n    });\n\n    if (config.resize_auto) {\n      $$.resizeFunction.add(function () {\n        if ($$.resizeTimeout !== undefined) {\n          window.clearTimeout($$.resizeTimeout);\n        }\n\n        $$.resizeTimeout = window.setTimeout(function () {\n          delete $$.resizeTimeout;\n          $$.updateAndRedraw({\n            withUpdateXDomain: false,\n            withUpdateOrgXDomain: false,\n            withTransition: false,\n            withTransitionForTransform: false,\n            withLegend: true\n          });\n\n          if ($$.brush) {\n            $$.brush.update();\n          }\n        }, 100);\n      });\n    }\n\n    $$.resizeFunction.add(function () {\n      config.onresized.call($$);\n    });\n\n    $$.resizeIfElementDisplayed = function () {\n      // if element not displayed skip it\n      if ($$.api == null || !$$.api.element.offsetParent) {\n        return;\n      }\n\n      $$.resizeFunction();\n    };\n\n    if (window.attachEvent) {\n      window.attachEvent('onresize', $$.resizeIfElementDisplayed);\n    } else if (window.addEventListener) {\n      window.addEventListener('resize', $$.resizeIfElementDisplayed, false);\n    } else {\n      // fallback to this, if this is a very old browser\n      var wrapper = window.onresize;\n\n      if (!wrapper) {\n        // create a wrapper that will call all charts\n        wrapper = $$.generateResize();\n      } else if (!wrapper.add || !wrapper.remove) {\n        // there is already a handler registered, make sure we call it too\n        wrapper = $$.generateResize();\n        wrapper.add(window.onresize);\n      } // add this graph to the wrapper, we will be removed if the user calls destroy\n\n\n      wrapper.add($$.resizeFunction);\n\n      window.onresize = function () {\n        // if element not displayed skip it\n        if (!$$.api.element.offsetParent) {\n          return;\n        }\n\n        wrapper();\n      };\n    }\n  };\n  /**\n   * Binds handlers to the window focus event.\n   */\n\n\n  ChartInternal.prototype.bindWindowFocus = function () {\n    var _this = this;\n\n    if (this.windowFocusHandler) {\n      // The handler is already set\n      return;\n    }\n\n    this.windowFocusHandler = function () {\n      _this.redraw();\n    };\n\n    window.addEventListener('focus', this.windowFocusHandler);\n  };\n  /**\n   * Unbinds from the window focus event.\n   */\n\n\n  ChartInternal.prototype.unbindWindowFocus = function () {\n    window.removeEventListener('focus', this.windowFocusHandler);\n    delete this.windowFocusHandler;\n  };\n\n  ChartInternal.prototype.generateResize = function () {\n    var resizeFunctions = [];\n\n    function callResizeFunctions() {\n      resizeFunctions.forEach(function (f) {\n        f();\n      });\n    }\n\n    callResizeFunctions.add = function (f) {\n      resizeFunctions.push(f);\n    };\n\n    callResizeFunctions.remove = function (f) {\n      for (var i = 0; i < resizeFunctions.length; i++) {\n        if (resizeFunctions[i] === f) {\n          resizeFunctions.splice(i, 1);\n          break;\n        }\n      }\n    };\n\n    return callResizeFunctions;\n  };\n\n  ChartInternal.prototype.endall = function (transition, callback) {\n    var n = 0;\n    transition.each(function () {\n      ++n;\n    }).on('end', function () {\n      if (! --n) {\n        callback.apply(this, arguments);\n      }\n    });\n  };\n\n  ChartInternal.prototype.generateWait = function () {\n    var $$ = this;\n\n    var transitionsToWait = [],\n        f = function f(callback) {\n      var timer = setInterval(function () {\n        if (!$$.isTabVisible()) {\n          return;\n        }\n\n        var done = 0;\n        transitionsToWait.forEach(function (t) {\n          if (t.empty()) {\n            done += 1;\n            return;\n          }\n\n          try {\n            t.transition();\n          } catch (e) {\n            done += 1;\n          }\n        });\n\n        if (done === transitionsToWait.length) {\n          clearInterval(timer);\n\n          if (callback) {\n            callback();\n          }\n        }\n      }, 50);\n    };\n\n    f.add = function (transition) {\n      transitionsToWait.push(transition);\n    };\n\n    return f;\n  };\n\n  ChartInternal.prototype.parseDate = function (date) {\n    var $$ = this,\n        parsedDate;\n\n    if (date instanceof Date) {\n      parsedDate = date;\n    } else if (typeof date === 'string') {\n      parsedDate = $$.dataTimeParse(date);\n    } else if (_typeof(date) === 'object') {\n      parsedDate = new Date(+date);\n    } else if (typeof date === 'number' && !isNaN(date)) {\n      parsedDate = new Date(+date);\n    }\n\n    if (!parsedDate || isNaN(+parsedDate)) {\n      window.console.error(\"Failed to parse x '\" + date + \"' to Date object\");\n    }\n\n    return parsedDate;\n  };\n\n  ChartInternal.prototype.isTabVisible = function () {\n    return !document.hidden;\n  };\n\n  ChartInternal.prototype.getPathBox = getPathBox;\n  ChartInternal.prototype.CLASS = CLASS;\n\n  /* jshint ignore:start */\n\n  (function () {\n\n    if (!('SVGPathSeg' in window)) {\n      // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-InterfaceSVGPathSeg\n      window.SVGPathSeg = function (type, typeAsLetter, owningPathSegList) {\n        this.pathSegType = type;\n        this.pathSegTypeAsLetter = typeAsLetter;\n        this._owningPathSegList = owningPathSegList;\n      };\n\n      window.SVGPathSeg.prototype.classname = 'SVGPathSeg';\n      window.SVGPathSeg.PATHSEG_UNKNOWN = 0;\n      window.SVGPathSeg.PATHSEG_CLOSEPATH = 1;\n      window.SVGPathSeg.PATHSEG_MOVETO_ABS = 2;\n      window.SVGPathSeg.PATHSEG_MOVETO_REL = 3;\n      window.SVGPathSeg.PATHSEG_LINETO_ABS = 4;\n      window.SVGPathSeg.PATHSEG_LINETO_REL = 5;\n      window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS = 6;\n      window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL = 7;\n      window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS = 8;\n      window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL = 9;\n      window.SVGPathSeg.PATHSEG_ARC_ABS = 10;\n      window.SVGPathSeg.PATHSEG_ARC_REL = 11;\n      window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS = 12;\n      window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL = 13;\n      window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS = 14;\n      window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL = 15;\n      window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS = 16;\n      window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL = 17;\n      window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS = 18;\n      window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL = 19; // Notify owning PathSegList on any changes so they can be synchronized back to the path element.\n\n      window.SVGPathSeg.prototype._segmentChanged = function () {\n        if (this._owningPathSegList) this._owningPathSegList.segmentChanged(this);\n      };\n\n      window.SVGPathSegClosePath = function (owningPathSegList) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CLOSEPATH, 'z', owningPathSegList);\n      };\n\n      window.SVGPathSegClosePath.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegClosePath.prototype.toString = function () {\n        return '[object SVGPathSegClosePath]';\n      };\n\n      window.SVGPathSegClosePath.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter;\n      };\n\n      window.SVGPathSegClosePath.prototype.clone = function () {\n        return new window.SVGPathSegClosePath(undefined);\n      };\n\n      window.SVGPathSegMovetoAbs = function (owningPathSegList, x, y) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_MOVETO_ABS, 'M', owningPathSegList);\n        this._x = x;\n        this._y = y;\n      };\n\n      window.SVGPathSegMovetoAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegMovetoAbs.prototype.toString = function () {\n        return '[object SVGPathSegMovetoAbs]';\n      };\n\n      window.SVGPathSegMovetoAbs.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x + ' ' + this._y;\n      };\n\n      window.SVGPathSegMovetoAbs.prototype.clone = function () {\n        return new window.SVGPathSegMovetoAbs(undefined, this._x, this._y);\n      };\n\n      Object.defineProperty(window.SVGPathSegMovetoAbs.prototype, 'x', {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegMovetoAbs.prototype, 'y', {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegMovetoRel = function (owningPathSegList, x, y) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_MOVETO_REL, 'm', owningPathSegList);\n        this._x = x;\n        this._y = y;\n      };\n\n      window.SVGPathSegMovetoRel.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegMovetoRel.prototype.toString = function () {\n        return '[object SVGPathSegMovetoRel]';\n      };\n\n      window.SVGPathSegMovetoRel.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x + ' ' + this._y;\n      };\n\n      window.SVGPathSegMovetoRel.prototype.clone = function () {\n        return new window.SVGPathSegMovetoRel(undefined, this._x, this._y);\n      };\n\n      Object.defineProperty(window.SVGPathSegMovetoRel.prototype, 'x', {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegMovetoRel.prototype, 'y', {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegLinetoAbs = function (owningPathSegList, x, y) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_ABS, 'L', owningPathSegList);\n        this._x = x;\n        this._y = y;\n      };\n\n      window.SVGPathSegLinetoAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegLinetoAbs.prototype.toString = function () {\n        return '[object SVGPathSegLinetoAbs]';\n      };\n\n      window.SVGPathSegLinetoAbs.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x + ' ' + this._y;\n      };\n\n      window.SVGPathSegLinetoAbs.prototype.clone = function () {\n        return new window.SVGPathSegLinetoAbs(undefined, this._x, this._y);\n      };\n\n      Object.defineProperty(window.SVGPathSegLinetoAbs.prototype, 'x', {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegLinetoAbs.prototype, 'y', {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegLinetoRel = function (owningPathSegList, x, y) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_REL, 'l', owningPathSegList);\n        this._x = x;\n        this._y = y;\n      };\n\n      window.SVGPathSegLinetoRel.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegLinetoRel.prototype.toString = function () {\n        return '[object SVGPathSegLinetoRel]';\n      };\n\n      window.SVGPathSegLinetoRel.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x + ' ' + this._y;\n      };\n\n      window.SVGPathSegLinetoRel.prototype.clone = function () {\n        return new window.SVGPathSegLinetoRel(undefined, this._x, this._y);\n      };\n\n      Object.defineProperty(window.SVGPathSegLinetoRel.prototype, 'x', {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegLinetoRel.prototype, 'y', {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegCurvetoCubicAbs = function (owningPathSegList, x, y, x1, y1, x2, y2) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS, 'C', owningPathSegList);\n        this._x = x;\n        this._y = y;\n        this._x1 = x1;\n        this._y1 = y1;\n        this._x2 = x2;\n        this._y2 = y2;\n      };\n\n      window.SVGPathSegCurvetoCubicAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegCurvetoCubicAbs.prototype.toString = function () {\n        return '[object SVGPathSegCurvetoCubicAbs]';\n      };\n\n      window.SVGPathSegCurvetoCubicAbs.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x1 + ' ' + this._y1 + ' ' + this._x2 + ' ' + this._y2 + ' ' + this._x + ' ' + this._y;\n      };\n\n      window.SVGPathSegCurvetoCubicAbs.prototype.clone = function () {\n        return new window.SVGPathSegCurvetoCubicAbs(undefined, this._x, this._y, this._x1, this._y1, this._x2, this._y2);\n      };\n\n      Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, 'x', {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, 'y', {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, 'x1', {\n        get: function get() {\n          return this._x1;\n        },\n        set: function set(x1) {\n          this._x1 = x1;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, 'y1', {\n        get: function get() {\n          return this._y1;\n        },\n        set: function set(y1) {\n          this._y1 = y1;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, 'x2', {\n        get: function get() {\n          return this._x2;\n        },\n        set: function set(x2) {\n          this._x2 = x2;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, 'y2', {\n        get: function get() {\n          return this._y2;\n        },\n        set: function set(y2) {\n          this._y2 = y2;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegCurvetoCubicRel = function (owningPathSegList, x, y, x1, y1, x2, y2) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL, 'c', owningPathSegList);\n        this._x = x;\n        this._y = y;\n        this._x1 = x1;\n        this._y1 = y1;\n        this._x2 = x2;\n        this._y2 = y2;\n      };\n\n      window.SVGPathSegCurvetoCubicRel.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegCurvetoCubicRel.prototype.toString = function () {\n        return '[object SVGPathSegCurvetoCubicRel]';\n      };\n\n      window.SVGPathSegCurvetoCubicRel.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x1 + ' ' + this._y1 + ' ' + this._x2 + ' ' + this._y2 + ' ' + this._x + ' ' + this._y;\n      };\n\n      window.SVGPathSegCurvetoCubicRel.prototype.clone = function () {\n        return new window.SVGPathSegCurvetoCubicRel(undefined, this._x, this._y, this._x1, this._y1, this._x2, this._y2);\n      };\n\n      Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, 'x', {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, 'y', {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, 'x1', {\n        get: function get() {\n          return this._x1;\n        },\n        set: function set(x1) {\n          this._x1 = x1;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, 'y1', {\n        get: function get() {\n          return this._y1;\n        },\n        set: function set(y1) {\n          this._y1 = y1;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, 'x2', {\n        get: function get() {\n          return this._x2;\n        },\n        set: function set(x2) {\n          this._x2 = x2;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, 'y2', {\n        get: function get() {\n          return this._y2;\n        },\n        set: function set(y2) {\n          this._y2 = y2;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegCurvetoQuadraticAbs = function (owningPathSegList, x, y, x1, y1) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS, 'Q', owningPathSegList);\n        this._x = x;\n        this._y = y;\n        this._x1 = x1;\n        this._y1 = y1;\n      };\n\n      window.SVGPathSegCurvetoQuadraticAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegCurvetoQuadraticAbs.prototype.toString = function () {\n        return '[object SVGPathSegCurvetoQuadraticAbs]';\n      };\n\n      window.SVGPathSegCurvetoQuadraticAbs.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x1 + ' ' + this._y1 + ' ' + this._x + ' ' + this._y;\n      };\n\n      window.SVGPathSegCurvetoQuadraticAbs.prototype.clone = function () {\n        return new window.SVGPathSegCurvetoQuadraticAbs(undefined, this._x, this._y, this._x1, this._y1);\n      };\n\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype, 'x', {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype, 'y', {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype, 'x1', {\n        get: function get() {\n          return this._x1;\n        },\n        set: function set(x1) {\n          this._x1 = x1;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype, 'y1', {\n        get: function get() {\n          return this._y1;\n        },\n        set: function set(y1) {\n          this._y1 = y1;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegCurvetoQuadraticRel = function (owningPathSegList, x, y, x1, y1) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL, 'q', owningPathSegList);\n        this._x = x;\n        this._y = y;\n        this._x1 = x1;\n        this._y1 = y1;\n      };\n\n      window.SVGPathSegCurvetoQuadraticRel.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegCurvetoQuadraticRel.prototype.toString = function () {\n        return '[object SVGPathSegCurvetoQuadraticRel]';\n      };\n\n      window.SVGPathSegCurvetoQuadraticRel.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x1 + ' ' + this._y1 + ' ' + this._x + ' ' + this._y;\n      };\n\n      window.SVGPathSegCurvetoQuadraticRel.prototype.clone = function () {\n        return new window.SVGPathSegCurvetoQuadraticRel(undefined, this._x, this._y, this._x1, this._y1);\n      };\n\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype, 'x', {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype, 'y', {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype, 'x1', {\n        get: function get() {\n          return this._x1;\n        },\n        set: function set(x1) {\n          this._x1 = x1;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype, 'y1', {\n        get: function get() {\n          return this._y1;\n        },\n        set: function set(y1) {\n          this._y1 = y1;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegArcAbs = function (owningPathSegList, x, y, r1, r2, angle, largeArcFlag, sweepFlag) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_ARC_ABS, 'A', owningPathSegList);\n        this._x = x;\n        this._y = y;\n        this._r1 = r1;\n        this._r2 = r2;\n        this._angle = angle;\n        this._largeArcFlag = largeArcFlag;\n        this._sweepFlag = sweepFlag;\n      };\n\n      window.SVGPathSegArcAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegArcAbs.prototype.toString = function () {\n        return '[object SVGPathSegArcAbs]';\n      };\n\n      window.SVGPathSegArcAbs.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._r1 + ' ' + this._r2 + ' ' + this._angle + ' ' + (this._largeArcFlag ? '1' : '0') + ' ' + (this._sweepFlag ? '1' : '0') + ' ' + this._x + ' ' + this._y;\n      };\n\n      window.SVGPathSegArcAbs.prototype.clone = function () {\n        return new window.SVGPathSegArcAbs(undefined, this._x, this._y, this._r1, this._r2, this._angle, this._largeArcFlag, this._sweepFlag);\n      };\n\n      Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'x', {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'y', {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'r1', {\n        get: function get() {\n          return this._r1;\n        },\n        set: function set(r1) {\n          this._r1 = r1;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'r2', {\n        get: function get() {\n          return this._r2;\n        },\n        set: function set(r2) {\n          this._r2 = r2;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'angle', {\n        get: function get() {\n          return this._angle;\n        },\n        set: function set(angle) {\n          this._angle = angle;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'largeArcFlag', {\n        get: function get() {\n          return this._largeArcFlag;\n        },\n        set: function set(largeArcFlag) {\n          this._largeArcFlag = largeArcFlag;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'sweepFlag', {\n        get: function get() {\n          return this._sweepFlag;\n        },\n        set: function set(sweepFlag) {\n          this._sweepFlag = sweepFlag;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegArcRel = function (owningPathSegList, x, y, r1, r2, angle, largeArcFlag, sweepFlag) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_ARC_REL, 'a', owningPathSegList);\n        this._x = x;\n        this._y = y;\n        this._r1 = r1;\n        this._r2 = r2;\n        this._angle = angle;\n        this._largeArcFlag = largeArcFlag;\n        this._sweepFlag = sweepFlag;\n      };\n\n      window.SVGPathSegArcRel.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegArcRel.prototype.toString = function () {\n        return '[object SVGPathSegArcRel]';\n      };\n\n      window.SVGPathSegArcRel.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._r1 + ' ' + this._r2 + ' ' + this._angle + ' ' + (this._largeArcFlag ? '1' : '0') + ' ' + (this._sweepFlag ? '1' : '0') + ' ' + this._x + ' ' + this._y;\n      };\n\n      window.SVGPathSegArcRel.prototype.clone = function () {\n        return new window.SVGPathSegArcRel(undefined, this._x, this._y, this._r1, this._r2, this._angle, this._largeArcFlag, this._sweepFlag);\n      };\n\n      Object.defineProperty(window.SVGPathSegArcRel.prototype, 'x', {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcRel.prototype, 'y', {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcRel.prototype, 'r1', {\n        get: function get() {\n          return this._r1;\n        },\n        set: function set(r1) {\n          this._r1 = r1;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcRel.prototype, 'r2', {\n        get: function get() {\n          return this._r2;\n        },\n        set: function set(r2) {\n          this._r2 = r2;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcRel.prototype, 'angle', {\n        get: function get() {\n          return this._angle;\n        },\n        set: function set(angle) {\n          this._angle = angle;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcRel.prototype, 'largeArcFlag', {\n        get: function get() {\n          return this._largeArcFlag;\n        },\n        set: function set(largeArcFlag) {\n          this._largeArcFlag = largeArcFlag;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegArcRel.prototype, 'sweepFlag', {\n        get: function get() {\n          return this._sweepFlag;\n        },\n        set: function set(sweepFlag) {\n          this._sweepFlag = sweepFlag;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegLinetoHorizontalAbs = function (owningPathSegList, x) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS, 'H', owningPathSegList);\n        this._x = x;\n      };\n\n      window.SVGPathSegLinetoHorizontalAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegLinetoHorizontalAbs.prototype.toString = function () {\n        return '[object SVGPathSegLinetoHorizontalAbs]';\n      };\n\n      window.SVGPathSegLinetoHorizontalAbs.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x;\n      };\n\n      window.SVGPathSegLinetoHorizontalAbs.prototype.clone = function () {\n        return new window.SVGPathSegLinetoHorizontalAbs(undefined, this._x);\n      };\n\n      Object.defineProperty(window.SVGPathSegLinetoHorizontalAbs.prototype, 'x', {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegLinetoHorizontalRel = function (owningPathSegList, x) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL, 'h', owningPathSegList);\n        this._x = x;\n      };\n\n      window.SVGPathSegLinetoHorizontalRel.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegLinetoHorizontalRel.prototype.toString = function () {\n        return '[object SVGPathSegLinetoHorizontalRel]';\n      };\n\n      window.SVGPathSegLinetoHorizontalRel.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x;\n      };\n\n      window.SVGPathSegLinetoHorizontalRel.prototype.clone = function () {\n        return new window.SVGPathSegLinetoHorizontalRel(undefined, this._x);\n      };\n\n      Object.defineProperty(window.SVGPathSegLinetoHorizontalRel.prototype, 'x', {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegLinetoVerticalAbs = function (owningPathSegList, y) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS, 'V', owningPathSegList);\n        this._y = y;\n      };\n\n      window.SVGPathSegLinetoVerticalAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegLinetoVerticalAbs.prototype.toString = function () {\n        return '[object SVGPathSegLinetoVerticalAbs]';\n      };\n\n      window.SVGPathSegLinetoVerticalAbs.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._y;\n      };\n\n      window.SVGPathSegLinetoVerticalAbs.prototype.clone = function () {\n        return new window.SVGPathSegLinetoVerticalAbs(undefined, this._y);\n      };\n\n      Object.defineProperty(window.SVGPathSegLinetoVerticalAbs.prototype, 'y', {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegLinetoVerticalRel = function (owningPathSegList, y) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL, 'v', owningPathSegList);\n        this._y = y;\n      };\n\n      window.SVGPathSegLinetoVerticalRel.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegLinetoVerticalRel.prototype.toString = function () {\n        return '[object SVGPathSegLinetoVerticalRel]';\n      };\n\n      window.SVGPathSegLinetoVerticalRel.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._y;\n      };\n\n      window.SVGPathSegLinetoVerticalRel.prototype.clone = function () {\n        return new window.SVGPathSegLinetoVerticalRel(undefined, this._y);\n      };\n\n      Object.defineProperty(window.SVGPathSegLinetoVerticalRel.prototype, 'y', {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegCurvetoCubicSmoothAbs = function (owningPathSegList, x, y, x2, y2) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS, 'S', owningPathSegList);\n        this._x = x;\n        this._y = y;\n        this._x2 = x2;\n        this._y2 = y2;\n      };\n\n      window.SVGPathSegCurvetoCubicSmoothAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegCurvetoCubicSmoothAbs.prototype.toString = function () {\n        return '[object SVGPathSegCurvetoCubicSmoothAbs]';\n      };\n\n      window.SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x2 + ' ' + this._y2 + ' ' + this._x + ' ' + this._y;\n      };\n\n      window.SVGPathSegCurvetoCubicSmoothAbs.prototype.clone = function () {\n        return new window.SVGPathSegCurvetoCubicSmoothAbs(undefined, this._x, this._y, this._x2, this._y2);\n      };\n\n      Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype, 'x', {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype, 'y', {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype, 'x2', {\n        get: function get() {\n          return this._x2;\n        },\n        set: function set(x2) {\n          this._x2 = x2;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype, 'y2', {\n        get: function get() {\n          return this._y2;\n        },\n        set: function set(y2) {\n          this._y2 = y2;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegCurvetoCubicSmoothRel = function (owningPathSegList, x, y, x2, y2) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL, 's', owningPathSegList);\n        this._x = x;\n        this._y = y;\n        this._x2 = x2;\n        this._y2 = y2;\n      };\n\n      window.SVGPathSegCurvetoCubicSmoothRel.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegCurvetoCubicSmoothRel.prototype.toString = function () {\n        return '[object SVGPathSegCurvetoCubicSmoothRel]';\n      };\n\n      window.SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x2 + ' ' + this._y2 + ' ' + this._x + ' ' + this._y;\n      };\n\n      window.SVGPathSegCurvetoCubicSmoothRel.prototype.clone = function () {\n        return new window.SVGPathSegCurvetoCubicSmoothRel(undefined, this._x, this._y, this._x2, this._y2);\n      };\n\n      Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype, 'x', {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype, 'y', {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype, 'x2', {\n        get: function get() {\n          return this._x2;\n        },\n        set: function set(x2) {\n          this._x2 = x2;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype, 'y2', {\n        get: function get() {\n          return this._y2;\n        },\n        set: function set(y2) {\n          this._y2 = y2;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegCurvetoQuadraticSmoothAbs = function (owningPathSegList, x, y) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS, 'T', owningPathSegList);\n        this._x = x;\n        this._y = y;\n      };\n\n      window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString = function () {\n        return '[object SVGPathSegCurvetoQuadraticSmoothAbs]';\n      };\n\n      window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x + ' ' + this._y;\n      };\n\n      window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone = function () {\n        return new window.SVGPathSegCurvetoQuadraticSmoothAbs(undefined, this._x, this._y);\n      };\n\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype, 'x', {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype, 'y', {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n\n      window.SVGPathSegCurvetoQuadraticSmoothRel = function (owningPathSegList, x, y) {\n        window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL, 't', owningPathSegList);\n        this._x = x;\n        this._y = y;\n      };\n\n      window.SVGPathSegCurvetoQuadraticSmoothRel.prototype = Object.create(window.SVGPathSeg.prototype);\n\n      window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString = function () {\n        return '[object SVGPathSegCurvetoQuadraticSmoothRel]';\n      };\n\n      window.SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString = function () {\n        return this.pathSegTypeAsLetter + ' ' + this._x + ' ' + this._y;\n      };\n\n      window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone = function () {\n        return new window.SVGPathSegCurvetoQuadraticSmoothRel(undefined, this._x, this._y);\n      };\n\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype, 'x', {\n        get: function get() {\n          return this._x;\n        },\n        set: function set(x) {\n          this._x = x;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype, 'y', {\n        get: function get() {\n          return this._y;\n        },\n        set: function set(y) {\n          this._y = y;\n\n          this._segmentChanged();\n        },\n        enumerable: true\n      }); // Add createSVGPathSeg* functions to window.SVGPathElement.\n      // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-Interfacewindow.SVGPathElement.\n\n      window.SVGPathElement.prototype.createSVGPathSegClosePath = function () {\n        return new window.SVGPathSegClosePath(undefined);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegMovetoAbs = function (x, y) {\n        return new window.SVGPathSegMovetoAbs(undefined, x, y);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegMovetoRel = function (x, y) {\n        return new window.SVGPathSegMovetoRel(undefined, x, y);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegLinetoAbs = function (x, y) {\n        return new window.SVGPathSegLinetoAbs(undefined, x, y);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegLinetoRel = function (x, y) {\n        return new window.SVGPathSegLinetoRel(undefined, x, y);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs = function (x, y, x1, y1, x2, y2) {\n        return new window.SVGPathSegCurvetoCubicAbs(undefined, x, y, x1, y1, x2, y2);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel = function (x, y, x1, y1, x2, y2) {\n        return new window.SVGPathSegCurvetoCubicRel(undefined, x, y, x1, y1, x2, y2);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs = function (x, y, x1, y1) {\n        return new window.SVGPathSegCurvetoQuadraticAbs(undefined, x, y, x1, y1);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel = function (x, y, x1, y1) {\n        return new window.SVGPathSegCurvetoQuadraticRel(undefined, x, y, x1, y1);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegArcAbs = function (x, y, r1, r2, angle, largeArcFlag, sweepFlag) {\n        return new window.SVGPathSegArcAbs(undefined, x, y, r1, r2, angle, largeArcFlag, sweepFlag);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegArcRel = function (x, y, r1, r2, angle, largeArcFlag, sweepFlag) {\n        return new window.SVGPathSegArcRel(undefined, x, y, r1, r2, angle, largeArcFlag, sweepFlag);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs = function (x) {\n        return new window.SVGPathSegLinetoHorizontalAbs(undefined, x);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel = function (x) {\n        return new window.SVGPathSegLinetoHorizontalRel(undefined, x);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs = function (y) {\n        return new window.SVGPathSegLinetoVerticalAbs(undefined, y);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel = function (y) {\n        return new window.SVGPathSegLinetoVerticalRel(undefined, y);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs = function (x, y, x2, y2) {\n        return new window.SVGPathSegCurvetoCubicSmoothAbs(undefined, x, y, x2, y2);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel = function (x, y, x2, y2) {\n        return new window.SVGPathSegCurvetoCubicSmoothRel(undefined, x, y, x2, y2);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs = function (x, y) {\n        return new window.SVGPathSegCurvetoQuadraticSmoothAbs(undefined, x, y);\n      };\n\n      window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel = function (x, y) {\n        return new window.SVGPathSegCurvetoQuadraticSmoothRel(undefined, x, y);\n      };\n\n      if (!('getPathSegAtLength' in window.SVGPathElement.prototype)) {\n        // Add getPathSegAtLength to SVGPathElement.\n        // Spec: https://www.w3.org/TR/SVG11/single-page.html#paths-__svg__SVGPathElement__getPathSegAtLength\n        // This polyfill requires SVGPathElement.getTotalLength to implement the distance-along-a-path algorithm.\n        window.SVGPathElement.prototype.getPathSegAtLength = function (distance) {\n          if (distance === undefined || !isFinite(distance)) throw 'Invalid arguments.';\n          var measurementElement = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n          measurementElement.setAttribute('d', this.getAttribute('d'));\n          var lastPathSegment = measurementElement.pathSegList.numberOfItems - 1; // If the path is empty, return 0.\n\n          if (lastPathSegment <= 0) return 0;\n\n          do {\n            measurementElement.pathSegList.removeItem(lastPathSegment);\n            if (distance > measurementElement.getTotalLength()) break;\n            lastPathSegment--;\n          } while (lastPathSegment > 0);\n\n          return lastPathSegment;\n        };\n      }\n    }\n\n    if (!('SVGPathSegList' in window)) {\n      // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-InterfaceSVGPathSegList\n      window.SVGPathSegList = function (pathElement) {\n        this._pathElement = pathElement;\n        this._list = this._parsePath(this._pathElement.getAttribute('d')); // Use a MutationObserver to catch changes to the path's \"d\" attribute.\n\n        this._mutationObserverConfig = {\n          attributes: true,\n          attributeFilter: ['d']\n        };\n        this._pathElementMutationObserver = new MutationObserver(this._updateListFromPathMutations.bind(this));\n\n        this._pathElementMutationObserver.observe(this._pathElement, this._mutationObserverConfig);\n      };\n\n      window.SVGPathSegList.prototype.classname = 'SVGPathSegList';\n      Object.defineProperty(window.SVGPathSegList.prototype, 'numberOfItems', {\n        get: function get() {\n          this._checkPathSynchronizedToList();\n\n          return this._list.length;\n        },\n        enumerable: true\n      }); // Add the pathSegList accessors to window.SVGPathElement.\n      // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-InterfaceSVGAnimatedPathData\n\n      Object.defineProperty(window.SVGPathElement.prototype, 'pathSegList', {\n        get: function get() {\n          if (!this._pathSegList) this._pathSegList = new window.SVGPathSegList(this);\n          return this._pathSegList;\n        },\n        enumerable: true\n      }); // FIXME: The following are not implemented and simply return window.SVGPathElement.pathSegList.\n\n      Object.defineProperty(window.SVGPathElement.prototype, 'normalizedPathSegList', {\n        get: function get() {\n          return this.pathSegList;\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathElement.prototype, 'animatedPathSegList', {\n        get: function get() {\n          return this.pathSegList;\n        },\n        enumerable: true\n      });\n      Object.defineProperty(window.SVGPathElement.prototype, 'animatedNormalizedPathSegList', {\n        get: function get() {\n          return this.pathSegList;\n        },\n        enumerable: true\n      }); // Process any pending mutations to the path element and update the list as needed.\n      // This should be the first call of all public functions and is needed because\n      // MutationObservers are not synchronous so we can have pending asynchronous mutations.\n\n      window.SVGPathSegList.prototype._checkPathSynchronizedToList = function () {\n        this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords());\n      };\n\n      window.SVGPathSegList.prototype._updateListFromPathMutations = function (mutationRecords) {\n        if (!this._pathElement) return;\n        var hasPathMutations = false;\n        mutationRecords.forEach(function (record) {\n          if (record.attributeName == 'd') hasPathMutations = true;\n        });\n        if (hasPathMutations) this._list = this._parsePath(this._pathElement.getAttribute('d'));\n      }; // Serialize the list and update the path's 'd' attribute.\n\n\n      window.SVGPathSegList.prototype._writeListToPath = function () {\n        this._pathElementMutationObserver.disconnect();\n\n        this._pathElement.setAttribute('d', window.SVGPathSegList._pathSegArrayAsString(this._list));\n\n        this._pathElementMutationObserver.observe(this._pathElement, this._mutationObserverConfig);\n      }; // When a path segment changes the list needs to be synchronized back to the path element.\n\n\n      window.SVGPathSegList.prototype.segmentChanged = function (pathSeg) {\n        this._writeListToPath();\n      };\n\n      window.SVGPathSegList.prototype.clear = function () {\n        this._checkPathSynchronizedToList();\n\n        this._list.forEach(function (pathSeg) {\n          pathSeg._owningPathSegList = null;\n        });\n\n        this._list = [];\n\n        this._writeListToPath();\n      };\n\n      window.SVGPathSegList.prototype.initialize = function (newItem) {\n        this._checkPathSynchronizedToList();\n\n        this._list = [newItem];\n        newItem._owningPathSegList = this;\n\n        this._writeListToPath();\n\n        return newItem;\n      };\n\n      window.SVGPathSegList.prototype._checkValidIndex = function (index) {\n        if (isNaN(index) || index < 0 || index >= this.numberOfItems) throw 'INDEX_SIZE_ERR';\n      };\n\n      window.SVGPathSegList.prototype.getItem = function (index) {\n        this._checkPathSynchronizedToList();\n\n        this._checkValidIndex(index);\n\n        return this._list[index];\n      };\n\n      window.SVGPathSegList.prototype.insertItemBefore = function (newItem, index) {\n        this._checkPathSynchronizedToList(); // Spec: If the index is greater than or equal to numberOfItems, then the new item is appended to the end of the list.\n\n\n        if (index > this.numberOfItems) index = this.numberOfItems;\n\n        if (newItem._owningPathSegList) {\n          // SVG2 spec says to make a copy.\n          newItem = newItem.clone();\n        }\n\n        this._list.splice(index, 0, newItem);\n\n        newItem._owningPathSegList = this;\n\n        this._writeListToPath();\n\n        return newItem;\n      };\n\n      window.SVGPathSegList.prototype.replaceItem = function (newItem, index) {\n        this._checkPathSynchronizedToList();\n\n        if (newItem._owningPathSegList) {\n          // SVG2 spec says to make a copy.\n          newItem = newItem.clone();\n        }\n\n        this._checkValidIndex(index);\n\n        this._list[index] = newItem;\n        newItem._owningPathSegList = this;\n\n        this._writeListToPath();\n\n        return newItem;\n      };\n\n      window.SVGPathSegList.prototype.removeItem = function (index) {\n        this._checkPathSynchronizedToList();\n\n        this._checkValidIndex(index);\n\n        var item = this._list[index];\n\n        this._list.splice(index, 1);\n\n        this._writeListToPath();\n\n        return item;\n      };\n\n      window.SVGPathSegList.prototype.appendItem = function (newItem) {\n        this._checkPathSynchronizedToList();\n\n        if (newItem._owningPathSegList) {\n          // SVG2 spec says to make a copy.\n          newItem = newItem.clone();\n        }\n\n        this._list.push(newItem);\n\n        newItem._owningPathSegList = this; // TODO: Optimize this to just append to the existing attribute.\n\n        this._writeListToPath();\n\n        return newItem;\n      };\n\n      window.SVGPathSegList._pathSegArrayAsString = function (pathSegArray) {\n        var string = '';\n        var first = true;\n        pathSegArray.forEach(function (pathSeg) {\n          if (first) {\n            first = false;\n            string += pathSeg._asPathString();\n          } else {\n            string += ' ' + pathSeg._asPathString();\n          }\n        });\n        return string;\n      }; // This closely follows SVGPathParser::parsePath from Source/core/svg/SVGPathParser.cpp.\n\n\n      window.SVGPathSegList.prototype._parsePath = function (string) {\n        if (!string || string.length == 0) return [];\n        var owningPathSegList = this;\n\n        var Builder = function Builder() {\n          this.pathSegList = [];\n        };\n\n        Builder.prototype.appendSegment = function (pathSeg) {\n          this.pathSegList.push(pathSeg);\n        };\n\n        var Source = function Source(string) {\n          this._string = string;\n          this._currentIndex = 0;\n          this._endIndex = this._string.length;\n          this._previousCommand = window.SVGPathSeg.PATHSEG_UNKNOWN;\n\n          this._skipOptionalSpaces();\n        };\n\n        Source.prototype._isCurrentSpace = function () {\n          var character = this._string[this._currentIndex];\n          return character <= ' ' && (character == ' ' || character == '\\n' || character == '\\t' || character == '\\r' || character == '\\f');\n        };\n\n        Source.prototype._skipOptionalSpaces = function () {\n          while (this._currentIndex < this._endIndex && this._isCurrentSpace()) {\n            this._currentIndex++;\n          }\n\n          return this._currentIndex < this._endIndex;\n        };\n\n        Source.prototype._skipOptionalSpacesOrDelimiter = function () {\n          if (this._currentIndex < this._endIndex && !this._isCurrentSpace() && this._string.charAt(this._currentIndex) != ',') return false;\n\n          if (this._skipOptionalSpaces()) {\n            if (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) == ',') {\n              this._currentIndex++;\n\n              this._skipOptionalSpaces();\n            }\n          }\n\n          return this._currentIndex < this._endIndex;\n        };\n\n        Source.prototype.hasMoreData = function () {\n          return this._currentIndex < this._endIndex;\n        };\n\n        Source.prototype.peekSegmentType = function () {\n          var lookahead = this._string[this._currentIndex];\n          return this._pathSegTypeFromChar(lookahead);\n        };\n\n        Source.prototype._pathSegTypeFromChar = function (lookahead) {\n          switch (lookahead) {\n            case 'Z':\n            case 'z':\n              return window.SVGPathSeg.PATHSEG_CLOSEPATH;\n\n            case 'M':\n              return window.SVGPathSeg.PATHSEG_MOVETO_ABS;\n\n            case 'm':\n              return window.SVGPathSeg.PATHSEG_MOVETO_REL;\n\n            case 'L':\n              return window.SVGPathSeg.PATHSEG_LINETO_ABS;\n\n            case 'l':\n              return window.SVGPathSeg.PATHSEG_LINETO_REL;\n\n            case 'C':\n              return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS;\n\n            case 'c':\n              return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL;\n\n            case 'Q':\n              return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS;\n\n            case 'q':\n              return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL;\n\n            case 'A':\n              return window.SVGPathSeg.PATHSEG_ARC_ABS;\n\n            case 'a':\n              return window.SVGPathSeg.PATHSEG_ARC_REL;\n\n            case 'H':\n              return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS;\n\n            case 'h':\n              return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL;\n\n            case 'V':\n              return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS;\n\n            case 'v':\n              return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL;\n\n            case 'S':\n              return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS;\n\n            case 's':\n              return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL;\n\n            case 'T':\n              return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS;\n\n            case 't':\n              return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL;\n\n            default:\n              return window.SVGPathSeg.PATHSEG_UNKNOWN;\n          }\n        };\n\n        Source.prototype._nextCommandHelper = function (lookahead, previousCommand) {\n          // Check for remaining coordinates in the current command.\n          if ((lookahead == '+' || lookahead == '-' || lookahead == '.' || lookahead >= '0' && lookahead <= '9') && previousCommand != window.SVGPathSeg.PATHSEG_CLOSEPATH) {\n            if (previousCommand == window.SVGPathSeg.PATHSEG_MOVETO_ABS) return window.SVGPathSeg.PATHSEG_LINETO_ABS;\n            if (previousCommand == window.SVGPathSeg.PATHSEG_MOVETO_REL) return window.SVGPathSeg.PATHSEG_LINETO_REL;\n            return previousCommand;\n          }\n\n          return window.SVGPathSeg.PATHSEG_UNKNOWN;\n        };\n\n        Source.prototype.initialCommandIsMoveTo = function () {\n          // If the path is empty it is still valid, so return true.\n          if (!this.hasMoreData()) return true;\n          var command = this.peekSegmentType(); // Path must start with moveTo.\n\n          return command == window.SVGPathSeg.PATHSEG_MOVETO_ABS || command == window.SVGPathSeg.PATHSEG_MOVETO_REL;\n        }; // Parse a number from an SVG path. This very closely follows genericParseNumber(...) from Source/core/svg/SVGParserUtilities.cpp.\n        // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-PathDataBNF\n\n\n        Source.prototype._parseNumber = function () {\n          var exponent = 0;\n          var integer = 0;\n          var frac = 1;\n          var decimal = 0;\n          var sign = 1;\n          var expsign = 1;\n          var startIndex = this._currentIndex;\n\n          this._skipOptionalSpaces(); // Read the sign.\n\n\n          if (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) == '+') this._currentIndex++;else if (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) == '-') {\n            this._currentIndex++;\n            sign = -1;\n          }\n          if (this._currentIndex == this._endIndex || (this._string.charAt(this._currentIndex) < '0' || this._string.charAt(this._currentIndex) > '9') && this._string.charAt(this._currentIndex) != '.') // The first character of a number must be one of [0-9+-.].\n            return undefined; // Read the integer part, build right-to-left.\n\n          var startIntPartIndex = this._currentIndex;\n\n          while (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) >= '0' && this._string.charAt(this._currentIndex) <= '9') {\n            this._currentIndex++;\n          } // Advance to first non-digit.\n\n\n          if (this._currentIndex != startIntPartIndex) {\n            var scanIntPartIndex = this._currentIndex - 1;\n            var multiplier = 1;\n\n            while (scanIntPartIndex >= startIntPartIndex) {\n              integer += multiplier * (this._string.charAt(scanIntPartIndex--) - '0');\n              multiplier *= 10;\n            }\n          } // Read the decimals.\n\n\n          if (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) == '.') {\n            this._currentIndex++; // There must be a least one digit following the .\n\n            if (this._currentIndex >= this._endIndex || this._string.charAt(this._currentIndex) < '0' || this._string.charAt(this._currentIndex) > '9') return undefined;\n\n            while (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) >= '0' && this._string.charAt(this._currentIndex) <= '9') {\n              frac *= 10;\n              decimal += (this._string.charAt(this._currentIndex) - '0') / frac;\n              this._currentIndex += 1;\n            }\n          } // Read the exponent part.\n\n\n          if (this._currentIndex != startIndex && this._currentIndex + 1 < this._endIndex && (this._string.charAt(this._currentIndex) == 'e' || this._string.charAt(this._currentIndex) == 'E') && this._string.charAt(this._currentIndex + 1) != 'x' && this._string.charAt(this._currentIndex + 1) != 'm') {\n            this._currentIndex++; // Read the sign of the exponent.\n\n            if (this._string.charAt(this._currentIndex) == '+') {\n              this._currentIndex++;\n            } else if (this._string.charAt(this._currentIndex) == '-') {\n              this._currentIndex++;\n              expsign = -1;\n            } // There must be an exponent.\n\n\n            if (this._currentIndex >= this._endIndex || this._string.charAt(this._currentIndex) < '0' || this._string.charAt(this._currentIndex) > '9') return undefined;\n\n            while (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) >= '0' && this._string.charAt(this._currentIndex) <= '9') {\n              exponent *= 10;\n              exponent += this._string.charAt(this._currentIndex) - '0';\n              this._currentIndex++;\n            }\n          }\n\n          var number = integer + decimal;\n          number *= sign;\n          if (exponent) number *= Math.pow(10, expsign * exponent);\n          if (startIndex == this._currentIndex) return undefined;\n\n          this._skipOptionalSpacesOrDelimiter();\n\n          return number;\n        };\n\n        Source.prototype._parseArcFlag = function () {\n          if (this._currentIndex >= this._endIndex) return undefined;\n          var flag = false;\n\n          var flagChar = this._string.charAt(this._currentIndex++);\n\n          if (flagChar == '0') flag = false;else if (flagChar == '1') flag = true;else return undefined;\n\n          this._skipOptionalSpacesOrDelimiter();\n\n          return flag;\n        };\n\n        Source.prototype.parseSegment = function () {\n          var lookahead = this._string[this._currentIndex];\n\n          var command = this._pathSegTypeFromChar(lookahead);\n\n          if (command == window.SVGPathSeg.PATHSEG_UNKNOWN) {\n            // Possibly an implicit command. Not allowed if this is the first command.\n            if (this._previousCommand == window.SVGPathSeg.PATHSEG_UNKNOWN) return null;\n            command = this._nextCommandHelper(lookahead, this._previousCommand);\n            if (command == window.SVGPathSeg.PATHSEG_UNKNOWN) return null;\n          } else {\n            this._currentIndex++;\n          }\n\n          this._previousCommand = command;\n\n          switch (command) {\n            case window.SVGPathSeg.PATHSEG_MOVETO_REL:\n              return new window.SVGPathSegMovetoRel(owningPathSegList, this._parseNumber(), this._parseNumber());\n\n            case window.SVGPathSeg.PATHSEG_MOVETO_ABS:\n              return new window.SVGPathSegMovetoAbs(owningPathSegList, this._parseNumber(), this._parseNumber());\n\n            case window.SVGPathSeg.PATHSEG_LINETO_REL:\n              return new window.SVGPathSegLinetoRel(owningPathSegList, this._parseNumber(), this._parseNumber());\n\n            case window.SVGPathSeg.PATHSEG_LINETO_ABS:\n              return new window.SVGPathSegLinetoAbs(owningPathSegList, this._parseNumber(), this._parseNumber());\n\n            case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:\n              return new window.SVGPathSegLinetoHorizontalRel(owningPathSegList, this._parseNumber());\n\n            case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:\n              return new window.SVGPathSegLinetoHorizontalAbs(owningPathSegList, this._parseNumber());\n\n            case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:\n              return new window.SVGPathSegLinetoVerticalRel(owningPathSegList, this._parseNumber());\n\n            case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:\n              return new window.SVGPathSegLinetoVerticalAbs(owningPathSegList, this._parseNumber());\n\n            case window.SVGPathSeg.PATHSEG_CLOSEPATH:\n              this._skipOptionalSpaces();\n\n              return new window.SVGPathSegClosePath(owningPathSegList);\n\n            case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:\n              var points = {\n                x1: this._parseNumber(),\n                y1: this._parseNumber(),\n                x2: this._parseNumber(),\n                y2: this._parseNumber(),\n                x: this._parseNumber(),\n                y: this._parseNumber()\n              };\n              return new window.SVGPathSegCurvetoCubicRel(owningPathSegList, points.x, points.y, points.x1, points.y1, points.x2, points.y2);\n\n            case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:\n              var points = {\n                x1: this._parseNumber(),\n                y1: this._parseNumber(),\n                x2: this._parseNumber(),\n                y2: this._parseNumber(),\n                x: this._parseNumber(),\n                y: this._parseNumber()\n              };\n              return new window.SVGPathSegCurvetoCubicAbs(owningPathSegList, points.x, points.y, points.x1, points.y1, points.x2, points.y2);\n\n            case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:\n              var points = {\n                x2: this._parseNumber(),\n                y2: this._parseNumber(),\n                x: this._parseNumber(),\n                y: this._parseNumber()\n              };\n              return new window.SVGPathSegCurvetoCubicSmoothRel(owningPathSegList, points.x, points.y, points.x2, points.y2);\n\n            case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:\n              var points = {\n                x2: this._parseNumber(),\n                y2: this._parseNumber(),\n                x: this._parseNumber(),\n                y: this._parseNumber()\n              };\n              return new window.SVGPathSegCurvetoCubicSmoothAbs(owningPathSegList, points.x, points.y, points.x2, points.y2);\n\n            case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:\n              var points = {\n                x1: this._parseNumber(),\n                y1: this._parseNumber(),\n                x: this._parseNumber(),\n                y: this._parseNumber()\n              };\n              return new window.SVGPathSegCurvetoQuadraticRel(owningPathSegList, points.x, points.y, points.x1, points.y1);\n\n            case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:\n              var points = {\n                x1: this._parseNumber(),\n                y1: this._parseNumber(),\n                x: this._parseNumber(),\n                y: this._parseNumber()\n              };\n              return new window.SVGPathSegCurvetoQuadraticAbs(owningPathSegList, points.x, points.y, points.x1, points.y1);\n\n            case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:\n              return new window.SVGPathSegCurvetoQuadraticSmoothRel(owningPathSegList, this._parseNumber(), this._parseNumber());\n\n            case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:\n              return new window.SVGPathSegCurvetoQuadraticSmoothAbs(owningPathSegList, this._parseNumber(), this._parseNumber());\n\n            case window.SVGPathSeg.PATHSEG_ARC_REL:\n              var points = {\n                x1: this._parseNumber(),\n                y1: this._parseNumber(),\n                arcAngle: this._parseNumber(),\n                arcLarge: this._parseArcFlag(),\n                arcSweep: this._parseArcFlag(),\n                x: this._parseNumber(),\n                y: this._parseNumber()\n              };\n              return new window.SVGPathSegArcRel(owningPathSegList, points.x, points.y, points.x1, points.y1, points.arcAngle, points.arcLarge, points.arcSweep);\n\n            case window.SVGPathSeg.PATHSEG_ARC_ABS:\n              var points = {\n                x1: this._parseNumber(),\n                y1: this._parseNumber(),\n                arcAngle: this._parseNumber(),\n                arcLarge: this._parseArcFlag(),\n                arcSweep: this._parseArcFlag(),\n                x: this._parseNumber(),\n                y: this._parseNumber()\n              };\n              return new window.SVGPathSegArcAbs(owningPathSegList, points.x, points.y, points.x1, points.y1, points.arcAngle, points.arcLarge, points.arcSweep);\n\n            default:\n              throw 'Unknown path seg type.';\n          }\n        };\n\n        var builder = new Builder();\n        var source = new Source(string);\n        if (!source.initialCommandIsMoveTo()) return [];\n\n        while (source.hasMoreData()) {\n          var pathSeg = source.parseSegment();\n          if (!pathSeg) return [];\n          builder.appendSegment(pathSeg);\n        }\n\n        return builder.pathSegList;\n      };\n    }\n  })(); // String.padEnd polyfill for IE11\n  //\n  // https://github.com/uxitten/polyfill/blob/master/string.polyfill.js\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/padEnd\n\n\n  if (!String.prototype.padEnd) {\n    String.prototype.padEnd = function padEnd(targetLength, padString) {\n      targetLength = targetLength >> 0; //floor if number or convert non-number to 0;\n\n      padString = String(typeof padString !== 'undefined' ? padString : ' ');\n\n      if (this.length > targetLength) {\n        return String(this);\n      } else {\n        targetLength = targetLength - this.length;\n\n        if (targetLength > padString.length) {\n          padString += padString.repeat(targetLength / padString.length); //append to original to ensure we are longer than needed\n        }\n\n        return String(this) + padString.slice(0, targetLength);\n      }\n    };\n  } // Object.assign polyfill for IE11\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#Polyfill\n\n\n  if (typeof Object.assign !== 'function') {\n    // Must be writable: true, enumerable: false, configurable: true\n    Object.defineProperty(Object, 'assign', {\n      value: function assign(target, varArgs) {\n\n        if (target === null || target === undefined) {\n          throw new TypeError('Cannot convert undefined or null to object');\n        }\n\n        var to = Object(target);\n\n        for (var index = 1; index < arguments.length; index++) {\n          var nextSource = arguments[index];\n\n          if (nextSource !== null && nextSource !== undefined) {\n            for (var nextKey in nextSource) {\n              // Avoid bugs when hasOwnProperty is shadowed\n              if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n                to[nextKey] = nextSource[nextKey];\n              }\n            }\n          }\n        }\n\n        return to;\n      },\n      writable: true,\n      configurable: true\n    });\n  }\n  /* jshint ignore:end */\n\n  Chart.prototype.axis = function () {};\n\n  Chart.prototype.axis.labels = function (labels) {\n    var $$ = this.internal;\n\n    if (arguments.length) {\n      Object.keys(labels).forEach(function (axisId) {\n        $$.axis.setLabelText(axisId, labels[axisId]);\n      });\n      $$.axis.updateLabels();\n    } // TODO: return some values?\n\n  };\n\n  Chart.prototype.axis.max = function (max) {\n    var $$ = this.internal,\n        config = $$.config;\n\n    if (arguments.length) {\n      if (_typeof(max) === 'object') {\n        if (isValue(max.x)) {\n          config.axis_x_max = max.x;\n        }\n\n        if (isValue(max.y)) {\n          config.axis_y_max = max.y;\n        }\n\n        if (isValue(max.y2)) {\n          config.axis_y2_max = max.y2;\n        }\n      } else {\n        config.axis_y_max = config.axis_y2_max = max;\n      }\n\n      $$.redraw({\n        withUpdateOrgXDomain: true,\n        withUpdateXDomain: true\n      });\n    } else {\n      return {\n        x: config.axis_x_max,\n        y: config.axis_y_max,\n        y2: config.axis_y2_max\n      };\n    }\n  };\n\n  Chart.prototype.axis.min = function (min) {\n    var $$ = this.internal,\n        config = $$.config;\n\n    if (arguments.length) {\n      if (_typeof(min) === 'object') {\n        if (isValue(min.x)) {\n          config.axis_x_min = min.x;\n        }\n\n        if (isValue(min.y)) {\n          config.axis_y_min = min.y;\n        }\n\n        if (isValue(min.y2)) {\n          config.axis_y2_min = min.y2;\n        }\n      } else {\n        config.axis_y_min = config.axis_y2_min = min;\n      }\n\n      $$.redraw({\n        withUpdateOrgXDomain: true,\n        withUpdateXDomain: true\n      });\n    } else {\n      return {\n        x: config.axis_x_min,\n        y: config.axis_y_min,\n        y2: config.axis_y2_min\n      };\n    }\n  };\n\n  Chart.prototype.axis.range = function (range) {\n    if (arguments.length) {\n      if (isDefined(range.max)) {\n        this.axis.max(range.max);\n      }\n\n      if (isDefined(range.min)) {\n        this.axis.min(range.min);\n      }\n    } else {\n      return {\n        max: this.axis.max(),\n        min: this.axis.min()\n      };\n    }\n  };\n\n  Chart.prototype.axis.types = function (types) {\n    var $$ = this.internal;\n\n    if (types === undefined) {\n      return {\n        y: $$.config.axis_y_type,\n        y2: $$.config.axis_y2_type\n      };\n    } else {\n      if (isDefined(types.y)) {\n        $$.config.axis_y_type = types.y;\n      }\n\n      if (isDefined(types.y2)) {\n        $$.config.axis_y2_type = types.y2;\n      }\n\n      $$.updateScales();\n      $$.redraw();\n    }\n  };\n\n  Chart.prototype.category = function (i, category) {\n    var $$ = this.internal,\n        config = $$.config;\n\n    if (arguments.length > 1) {\n      config.axis_x_categories[i] = category;\n      $$.redraw();\n    }\n\n    return config.axis_x_categories[i];\n  };\n\n  Chart.prototype.categories = function (categories) {\n    var $$ = this.internal,\n        config = $$.config;\n\n    if (!arguments.length) {\n      return config.axis_x_categories;\n    }\n\n    config.axis_x_categories = categories;\n    $$.redraw();\n    return config.axis_x_categories;\n  };\n\n  Chart.prototype.resize = function (size) {\n    var $$ = this.internal,\n        config = $$.config;\n    config.size_width = size ? size.width : null;\n    config.size_height = size ? size.height : null;\n    this.flush();\n  };\n\n  Chart.prototype.flush = function () {\n    var $$ = this.internal;\n    $$.updateAndRedraw({\n      withLegend: true,\n      withTransition: false,\n      withTransitionForTransform: false\n    });\n  };\n\n  Chart.prototype.destroy = function () {\n    var $$ = this.internal;\n    window.clearInterval($$.intervalForObserveInserted);\n\n    if ($$.resizeTimeout !== undefined) {\n      window.clearTimeout($$.resizeTimeout);\n    }\n\n    if (window.detachEvent) {\n      window.detachEvent('onresize', $$.resizeIfElementDisplayed);\n    } else if (window.removeEventListener) {\n      window.removeEventListener('resize', $$.resizeIfElementDisplayed);\n    } else {\n      var wrapper = window.onresize; // check if no one else removed our wrapper and remove our resizeFunction from it\n\n      if (wrapper && wrapper.add && wrapper.remove) {\n        wrapper.remove($$.resizeFunction);\n      }\n    } // Removes the inner resize functions\n\n\n    $$.resizeFunction.remove(); // Unbinds from the window focus event\n\n    $$.unbindWindowFocus();\n    $$.selectChart.classed('c3', false).html(''); // MEMO: this is needed because the reference of some elements will not be released, then memory leak will happen.\n\n    Object.keys($$).forEach(function (key) {\n      $$[key] = null;\n    });\n    return null;\n  };\n\n  Chart.prototype.color = function (id) {\n    var $$ = this.internal;\n    return $$.color(id); // more patterns\n  };\n\n  Chart.prototype.data = function (targetIds) {\n    var targets = this.internal.data.targets;\n    return typeof targetIds === 'undefined' ? targets : targets.filter(function (t) {\n      return [].concat(targetIds).indexOf(t.id) >= 0;\n    });\n  };\n\n  Chart.prototype.data.shown = function (targetIds) {\n    return this.internal.filterTargetsToShow(this.data(targetIds));\n  };\n  /**\n   * Get values of the data loaded in the chart.\n   *\n   * @param {String|Array} targetId This API returns the value of specified target.\n   * @param flat\n   * @return {Array} Data values\n   */\n\n\n  Chart.prototype.data.values = function (targetId) {\n    var flat = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    var values = null;\n\n    if (targetId) {\n      var targets = this.data(targetId);\n\n      if (targets && isArray(targets)) {\n        values = targets.reduce(function (ret, v) {\n          var dataValue = v.values.map(function (d) {\n            return d.value;\n          });\n\n          if (flat) {\n            ret = ret.concat(dataValue);\n          } else {\n            ret.push(dataValue);\n          }\n\n          return ret;\n        }, []);\n      }\n    }\n\n    return values;\n  };\n\n  Chart.prototype.data.names = function (names) {\n    this.internal.clearLegendItemTextBoxCache();\n    return this.internal.updateDataAttributes('names', names);\n  };\n\n  Chart.prototype.data.colors = function (colors) {\n    return this.internal.updateDataAttributes('colors', colors);\n  };\n\n  Chart.prototype.data.axes = function (axes) {\n    return this.internal.updateDataAttributes('axes', axes);\n  };\n\n  Chart.prototype.data.stackNormalized = function (normalized) {\n    if (normalized === undefined) {\n      return this.internal.isStackNormalized();\n    }\n\n    this.internal.config.data_stack_normalize = !!normalized;\n    this.internal.redraw();\n  };\n\n  Chart.prototype.donut = function () {};\n\n  Chart.prototype.donut.padAngle = function (padAngle) {\n    if (padAngle === undefined) {\n      return this.internal.config.donut_padAngle;\n    }\n\n    this.internal.config.donut_padAngle = padAngle;\n    this.flush();\n  };\n\n  Chart.prototype.flow = function (args) {\n    var $$ = this.internal,\n        targets,\n        data,\n        notfoundIds = [],\n        orgDataCount = $$.getMaxDataCount(),\n        dataCount,\n        domain,\n        baseTarget,\n        baseValue,\n        length = 0,\n        tail = 0,\n        diff,\n        to;\n\n    if (args.json) {\n      data = $$.convertJsonToData(args.json, args.keys);\n    } else if (args.rows) {\n      data = $$.convertRowsToData(args.rows);\n    } else if (args.columns) {\n      data = $$.convertColumnsToData(args.columns);\n    } else {\n      return;\n    }\n\n    targets = $$.convertDataToTargets(data, true); // Update/Add data\n\n    $$.data.targets.forEach(function (t) {\n      var found = false,\n          i,\n          j;\n\n      for (i = 0; i < targets.length; i++) {\n        if (t.id === targets[i].id) {\n          found = true;\n\n          if (t.values[t.values.length - 1]) {\n            tail = t.values[t.values.length - 1].index + 1;\n          }\n\n          length = targets[i].values.length;\n\n          for (j = 0; j < length; j++) {\n            targets[i].values[j].index = tail + j;\n\n            if (!$$.isTimeSeries()) {\n              targets[i].values[j].x = tail + j;\n            }\n          }\n\n          t.values = t.values.concat(targets[i].values);\n          targets.splice(i, 1);\n          break;\n        }\n      }\n\n      if (!found) {\n        notfoundIds.push(t.id);\n      }\n    }); // Append null for not found targets\n\n    $$.data.targets.forEach(function (t) {\n      var i, j;\n\n      for (i = 0; i < notfoundIds.length; i++) {\n        if (t.id === notfoundIds[i]) {\n          tail = t.values[t.values.length - 1].index + 1;\n\n          for (j = 0; j < length; j++) {\n            t.values.push({\n              id: t.id,\n              index: tail + j,\n              x: $$.isTimeSeries() ? $$.getOtherTargetX(tail + j) : tail + j,\n              value: null\n            });\n          }\n        }\n      }\n    }); // Generate null values for new target\n\n    if ($$.data.targets.length) {\n      targets.forEach(function (t) {\n        var i,\n            missing = [];\n\n        for (i = $$.data.targets[0].values[0].index; i < tail; i++) {\n          missing.push({\n            id: t.id,\n            index: i,\n            x: $$.isTimeSeries() ? $$.getOtherTargetX(i) : i,\n            value: null\n          });\n        }\n\n        t.values.forEach(function (v) {\n          v.index += tail;\n\n          if (!$$.isTimeSeries()) {\n            v.x += tail;\n          }\n        });\n        t.values = missing.concat(t.values);\n      });\n    }\n\n    $$.data.targets = $$.data.targets.concat(targets); // add remained\n    // check data count because behavior needs to change when it's only one\n\n    dataCount = $$.getMaxDataCount();\n    baseTarget = $$.data.targets[0];\n    baseValue = baseTarget.values[0]; // Update length to flow if needed\n\n    if (isDefined(args.to)) {\n      length = 0;\n      to = $$.isTimeSeries() ? $$.parseDate(args.to) : args.to;\n      baseTarget.values.forEach(function (v) {\n        if (v.x < to) {\n          length++;\n        }\n      });\n    } else if (isDefined(args.length)) {\n      length = args.length;\n    } // If only one data, update the domain to flow from left edge of the chart\n\n\n    if (!orgDataCount) {\n      if ($$.isTimeSeries()) {\n        if (baseTarget.values.length > 1) {\n          diff = baseTarget.values[baseTarget.values.length - 1].x - baseValue.x;\n        } else {\n          diff = baseValue.x - $$.getXDomain($$.data.targets)[0];\n        }\n      } else {\n        diff = 1;\n      }\n\n      domain = [baseValue.x - diff, baseValue.x];\n      $$.updateXDomain(null, true, true, false, domain);\n    } else if (orgDataCount === 1) {\n      if ($$.isTimeSeries()) {\n        diff = (baseTarget.values[baseTarget.values.length - 1].x - baseValue.x) / 2;\n        domain = [new Date(+baseValue.x - diff), new Date(+baseValue.x + diff)];\n        $$.updateXDomain(null, true, true, false, domain);\n      }\n    } // Set targets\n\n\n    $$.updateTargets($$.data.targets); // Redraw with new targets\n\n    $$.redraw({\n      flow: {\n        index: baseValue.index,\n        length: length,\n        duration: isValue(args.duration) ? args.duration : $$.config.transition_duration,\n        done: args.done,\n        orgDataCount: orgDataCount\n      },\n      withLegend: true,\n      withTransition: orgDataCount > 1,\n      withTrimXDomain: false,\n      withUpdateXAxis: true\n    });\n  };\n\n  ChartInternal.prototype.generateFlow = function (args) {\n    var $$ = this,\n        config = $$.config,\n        d3 = $$.d3;\n    return function () {\n      var targets = args.targets,\n          flow = args.flow,\n          drawBar = args.drawBar,\n          drawLine = args.drawLine,\n          drawArea = args.drawArea,\n          cx = args.cx,\n          cy = args.cy,\n          xv = args.xv,\n          xForText = args.xForText,\n          yForText = args.yForText,\n          duration = args.duration;\n\n      var translateX,\n          scaleX = 1,\n          transform,\n          flowIndex = flow.index,\n          flowLength = flow.length,\n          flowStart = $$.getValueOnIndex($$.data.targets[0].values, flowIndex),\n          flowEnd = $$.getValueOnIndex($$.data.targets[0].values, flowIndex + flowLength),\n          orgDomain = $$.x.domain(),\n          domain,\n          durationForFlow = flow.duration || duration,\n          done = flow.done || function () {},\n          wait = $$.generateWait();\n\n      var xgrid, xgridLines, mainRegion, mainText, mainBar, mainLine, mainArea, mainCircle; // set flag\n\n      $$.flowing = true; // remove head data after rendered\n\n      $$.data.targets.forEach(function (d) {\n        d.values.splice(0, flowLength);\n      }); // update x domain to generate axis elements for flow\n\n      domain = $$.updateXDomain(targets, true, true); // update elements related to x scale\n\n      if ($$.updateXGrid) {\n        $$.updateXGrid(true);\n      }\n\n      xgrid = $$.xgrid || d3.selectAll([]); // xgrid needs to be obtained after updateXGrid\n\n      xgridLines = $$.xgridLines || d3.selectAll([]);\n      mainRegion = $$.mainRegion || d3.selectAll([]);\n      mainText = $$.mainText || d3.selectAll([]);\n      mainBar = $$.mainBar || d3.selectAll([]);\n      mainLine = $$.mainLine || d3.selectAll([]);\n      mainArea = $$.mainArea || d3.selectAll([]);\n      mainCircle = $$.mainCircle || d3.selectAll([]); // generate transform to flow\n\n      if (!flow.orgDataCount) {\n        // if empty\n        if ($$.data.targets[0].values.length !== 1) {\n          translateX = $$.x(orgDomain[0]) - $$.x(domain[0]);\n        } else {\n          if ($$.isTimeSeries()) {\n            flowStart = $$.getValueOnIndex($$.data.targets[0].values, 0);\n            flowEnd = $$.getValueOnIndex($$.data.targets[0].values, $$.data.targets[0].values.length - 1);\n            translateX = $$.x(flowStart.x) - $$.x(flowEnd.x);\n          } else {\n            translateX = diffDomain(domain) / 2;\n          }\n        }\n      } else if (flow.orgDataCount === 1 || (flowStart && flowStart.x) === (flowEnd && flowEnd.x)) {\n        translateX = $$.x(orgDomain[0]) - $$.x(domain[0]);\n      } else {\n        if ($$.isTimeSeries()) {\n          translateX = $$.x(orgDomain[0]) - $$.x(domain[0]);\n        } else {\n          translateX = $$.x(flowStart.x) - $$.x(flowEnd.x);\n        }\n      }\n\n      scaleX = diffDomain(orgDomain) / diffDomain(domain);\n      transform = 'translate(' + translateX + ',0) scale(' + scaleX + ',1)';\n      $$.hideXGridFocus();\n      var flowTransition = d3.transition().ease(d3.easeLinear).duration(durationForFlow);\n      wait.add($$.xAxis($$.axes.x, flowTransition));\n      wait.add(mainBar.transition(flowTransition).attr('transform', transform));\n      wait.add(mainLine.transition(flowTransition).attr('transform', transform));\n      wait.add(mainArea.transition(flowTransition).attr('transform', transform));\n      wait.add(mainCircle.transition(flowTransition).attr('transform', transform));\n      wait.add(mainText.transition(flowTransition).attr('transform', transform));\n      wait.add(mainRegion.filter($$.isRegionOnX).transition(flowTransition).attr('transform', transform));\n      wait.add(xgrid.transition(flowTransition).attr('transform', transform));\n      wait.add(xgridLines.transition(flowTransition).attr('transform', transform));\n      wait(function () {\n        var i,\n            shapes = [],\n            texts = []; // remove flowed elements\n\n        if (flowLength) {\n          for (i = 0; i < flowLength; i++) {\n            shapes.push('.' + CLASS.shape + '-' + (flowIndex + i));\n            texts.push('.' + CLASS.text + '-' + (flowIndex + i));\n          }\n\n          $$.svg.selectAll('.' + CLASS.shapes).selectAll(shapes).remove();\n          $$.svg.selectAll('.' + CLASS.texts).selectAll(texts).remove();\n          $$.svg.select('.' + CLASS.xgrid).remove();\n        } // draw again for removing flowed elements and reverting attr\n\n\n        xgrid.attr('transform', null).attr('x1', $$.xgridAttr.x1).attr('x2', $$.xgridAttr.x2).attr('y1', $$.xgridAttr.y1).attr('y2', $$.xgridAttr.y2).style('opacity', $$.xgridAttr.opacity);\n        xgridLines.attr('transform', null);\n        xgridLines.select('line').attr('x1', config.axis_rotated ? 0 : xv).attr('x2', config.axis_rotated ? $$.width : xv);\n        xgridLines.select('text').attr('x', config.axis_rotated ? $$.width : 0).attr('y', xv);\n        mainBar.attr('transform', null).attr('d', drawBar);\n        mainLine.attr('transform', null).attr('d', drawLine);\n        mainArea.attr('transform', null).attr('d', drawArea);\n        mainCircle.attr('transform', null).attr('cx', cx).attr('cy', cy);\n        mainText.attr('transform', null).attr('x', xForText).attr('y', yForText).style('fill-opacity', $$.opacityForText.bind($$));\n        mainRegion.attr('transform', null);\n        mainRegion.filter($$.isRegionOnX).attr('x', $$.regionX.bind($$)).attr('width', $$.regionWidth.bind($$)); // callback for end of flow\n\n        done();\n        $$.flowing = false;\n      });\n    };\n  };\n\n  Chart.prototype.focus = function (targetIds) {\n    var $$ = this.internal,\n        candidates;\n    targetIds = $$.mapToTargetIds(targetIds);\n    candidates = $$.svg.selectAll($$.selectorTargets(targetIds.filter($$.isTargetToShow, $$))), this.revert();\n    this.defocus();\n    candidates.classed(CLASS.focused, true).classed(CLASS.defocused, false);\n\n    if ($$.hasArcType()) {\n      $$.expandArc(targetIds);\n    }\n\n    $$.toggleFocusLegend(targetIds, true);\n    $$.focusedTargetIds = targetIds;\n    $$.defocusedTargetIds = $$.defocusedTargetIds.filter(function (id) {\n      return targetIds.indexOf(id) < 0;\n    });\n  };\n\n  Chart.prototype.defocus = function (targetIds) {\n    var $$ = this.internal,\n        candidates;\n    targetIds = $$.mapToTargetIds(targetIds);\n    candidates = $$.svg.selectAll($$.selectorTargets(targetIds.filter($$.isTargetToShow, $$))), candidates.classed(CLASS.focused, false).classed(CLASS.defocused, true);\n\n    if ($$.hasArcType()) {\n      $$.unexpandArc(targetIds);\n    }\n\n    $$.toggleFocusLegend(targetIds, false);\n    $$.focusedTargetIds = $$.focusedTargetIds.filter(function (id) {\n      return targetIds.indexOf(id) < 0;\n    });\n    $$.defocusedTargetIds = targetIds;\n  };\n\n  Chart.prototype.revert = function (targetIds) {\n    var $$ = this.internal,\n        candidates;\n    targetIds = $$.mapToTargetIds(targetIds);\n    candidates = $$.svg.selectAll($$.selectorTargets(targetIds)); // should be for all targets\n\n    candidates.classed(CLASS.focused, false).classed(CLASS.defocused, false);\n\n    if ($$.hasArcType()) {\n      $$.unexpandArc(targetIds);\n    }\n\n    if ($$.config.legend_show) {\n      $$.showLegend(targetIds.filter($$.isLegendToShow.bind($$)));\n      $$.legend.selectAll($$.selectorLegends(targetIds)).filter(function () {\n        return $$.d3.select(this).classed(CLASS.legendItemFocused);\n      }).classed(CLASS.legendItemFocused, false);\n    }\n\n    $$.focusedTargetIds = [];\n    $$.defocusedTargetIds = [];\n  };\n\n  Chart.prototype.xgrids = function (grids) {\n    var $$ = this.internal,\n        config = $$.config;\n\n    if (!grids) {\n      return config.grid_x_lines;\n    }\n\n    config.grid_x_lines = grids;\n    $$.redrawWithoutRescale();\n    return config.grid_x_lines;\n  };\n\n  Chart.prototype.xgrids.add = function (grids) {\n    var $$ = this.internal;\n    return this.xgrids($$.config.grid_x_lines.concat(grids ? grids : []));\n  };\n\n  Chart.prototype.xgrids.remove = function (params) {\n    // TODO: multiple\n    var $$ = this.internal;\n    $$.removeGridLines(params, true);\n  };\n\n  Chart.prototype.ygrids = function (grids) {\n    var $$ = this.internal,\n        config = $$.config;\n\n    if (!grids) {\n      return config.grid_y_lines;\n    }\n\n    config.grid_y_lines = grids;\n    $$.redrawWithoutRescale();\n    return config.grid_y_lines;\n  };\n\n  Chart.prototype.ygrids.add = function (grids) {\n    var $$ = this.internal;\n    return this.ygrids($$.config.grid_y_lines.concat(grids ? grids : []));\n  };\n\n  Chart.prototype.ygrids.remove = function (params) {\n    // TODO: multiple\n    var $$ = this.internal;\n    $$.removeGridLines(params, false);\n  };\n\n  Chart.prototype.groups = function (groups) {\n    var $$ = this.internal,\n        config = $$.config;\n\n    if (isUndefined(groups)) {\n      return config.data_groups;\n    }\n\n    config.data_groups = groups;\n    $$.redraw();\n    return config.data_groups;\n  };\n\n  Chart.prototype.legend = function () {};\n\n  Chart.prototype.legend.show = function (targetIds) {\n    var $$ = this.internal;\n    $$.showLegend($$.mapToTargetIds(targetIds));\n    $$.updateAndRedraw({\n      withLegend: true\n    });\n  };\n\n  Chart.prototype.legend.hide = function (targetIds) {\n    var $$ = this.internal;\n    $$.hideLegend($$.mapToTargetIds(targetIds));\n    $$.updateAndRedraw({\n      withLegend: false\n    });\n  };\n\n  Chart.prototype.load = function (args) {\n    var $$ = this.internal,\n        config = $$.config; // update xs if specified\n\n    if (args.xs) {\n      $$.addXs(args.xs);\n    } // update names if exists\n\n\n    if ('names' in args) {\n      Chart.prototype.data.names.bind(this)(args.names);\n    } // update classes if exists\n\n\n    if ('classes' in args) {\n      Object.keys(args.classes).forEach(function (id) {\n        config.data_classes[id] = args.classes[id];\n      });\n    } // update categories if exists\n\n\n    if ('categories' in args && $$.isCategorized()) {\n      config.axis_x_categories = args.categories;\n    } // update axes if exists\n\n\n    if ('axes' in args) {\n      Object.keys(args.axes).forEach(function (id) {\n        config.data_axes[id] = args.axes[id];\n      });\n    } // update colors if exists\n\n\n    if ('colors' in args) {\n      Object.keys(args.colors).forEach(function (id) {\n        config.data_colors[id] = args.colors[id];\n      });\n    } // use cache if exists\n\n\n    if ('cacheIds' in args && $$.hasCaches(args.cacheIds)) {\n      $$.load($$.getCaches(args.cacheIds), args.done);\n      return;\n    } // unload if needed\n\n\n    if (args.unload) {\n      // TODO: do not unload if target will load (included in url/rows/columns)\n      $$.unload($$.mapToTargetIds(args.unload === true ? null : args.unload), function () {\n        $$.loadFromArgs(args);\n      });\n    } else {\n      $$.loadFromArgs(args);\n    }\n  };\n\n  Chart.prototype.unload = function (args) {\n    var $$ = this.internal;\n    args = args || {};\n\n    if (args instanceof Array) {\n      args = {\n        ids: args\n      };\n    } else if (typeof args === 'string') {\n      args = {\n        ids: [args]\n      };\n    }\n\n    $$.unload($$.mapToTargetIds(args.ids), function () {\n      $$.redraw({\n        withUpdateOrgXDomain: true,\n        withUpdateXDomain: true,\n        withLegend: true\n      });\n\n      if (args.done) {\n        args.done();\n      }\n    });\n  };\n\n  Chart.prototype.pie = function () {};\n\n  Chart.prototype.pie.padAngle = function (padAngle) {\n    if (padAngle === undefined) {\n      return this.internal.config.pie_padAngle;\n    }\n\n    this.internal.config.pie_padAngle = padAngle;\n    this.flush();\n  };\n\n  Chart.prototype.regions = function (regions) {\n    var $$ = this.internal,\n        config = $$.config;\n\n    if (!regions) {\n      return config.regions;\n    }\n\n    config.regions = regions;\n    $$.redrawWithoutRescale();\n    return config.regions;\n  };\n\n  Chart.prototype.regions.add = function (regions) {\n    var $$ = this.internal,\n        config = $$.config;\n\n    if (!regions) {\n      return config.regions;\n    }\n\n    config.regions = config.regions.concat(regions);\n    $$.redrawWithoutRescale();\n    return config.regions;\n  };\n\n  Chart.prototype.regions.remove = function (options) {\n    var $$ = this.internal,\n        config = $$.config,\n        duration,\n        classes,\n        regions;\n    options = options || {};\n    duration = getOption(options, 'duration', config.transition_duration);\n    classes = getOption(options, 'classes', [CLASS.region]);\n    regions = $$.main.select('.' + CLASS.regions).selectAll(classes.map(function (c) {\n      return '.' + c;\n    }));\n    (duration ? regions.transition().duration(duration) : regions).style('opacity', 0).remove();\n    config.regions = config.regions.filter(function (region) {\n      var found = false;\n\n      if (!region['class']) {\n        return true;\n      }\n\n      region['class'].split(' ').forEach(function (c) {\n        if (classes.indexOf(c) >= 0) {\n          found = true;\n        }\n      });\n      return !found;\n    });\n    return config.regions;\n  };\n\n  Chart.prototype.selected = function (targetId) {\n    var $$ = this.internal,\n        d3 = $$.d3;\n    return $$.main.selectAll('.' + CLASS.shapes + $$.getTargetSelectorSuffix(targetId)).selectAll('.' + CLASS.shape).filter(function () {\n      return d3.select(this).classed(CLASS.SELECTED);\n    }).nodes().map(function (d) {\n      var data = d.__data__;\n      return data.data ? data.data : data;\n    });\n  };\n\n  Chart.prototype.select = function (ids, indices, resetOther) {\n    var $$ = this.internal,\n        d3 = $$.d3,\n        config = $$.config;\n\n    if (!config.data_selection_enabled) {\n      return;\n    }\n\n    $$.main.selectAll('.' + CLASS.shapes).selectAll('.' + CLASS.shape).each(function (d, i) {\n      var shape = d3.select(this),\n          id = d.data ? d.data.id : d.id,\n          toggle = $$.getToggle(this, d).bind($$),\n          isTargetId = config.data_selection_grouped || !ids || ids.indexOf(id) >= 0,\n          isTargetIndex = !indices || indices.indexOf(i) >= 0,\n          isSelected = shape.classed(CLASS.SELECTED); // line/area selection not supported yet\n\n      if (shape.classed(CLASS.line) || shape.classed(CLASS.area)) {\n        return;\n      }\n\n      if (isTargetId && isTargetIndex) {\n        if (config.data_selection_isselectable(d) && !isSelected) {\n          toggle(true, shape.classed(CLASS.SELECTED, true), d, i);\n        }\n      } else if (isDefined(resetOther) && resetOther) {\n        if (isSelected) {\n          toggle(false, shape.classed(CLASS.SELECTED, false), d, i);\n        }\n      }\n    });\n  };\n\n  Chart.prototype.unselect = function (ids, indices) {\n    var $$ = this.internal,\n        d3 = $$.d3,\n        config = $$.config;\n\n    if (!config.data_selection_enabled) {\n      return;\n    }\n\n    $$.main.selectAll('.' + CLASS.shapes).selectAll('.' + CLASS.shape).each(function (d, i) {\n      var shape = d3.select(this),\n          id = d.data ? d.data.id : d.id,\n          toggle = $$.getToggle(this, d).bind($$),\n          isTargetId = config.data_selection_grouped || !ids || ids.indexOf(id) >= 0,\n          isTargetIndex = !indices || indices.indexOf(i) >= 0,\n          isSelected = shape.classed(CLASS.SELECTED); // line/area selection not supported yet\n\n      if (shape.classed(CLASS.line) || shape.classed(CLASS.area)) {\n        return;\n      }\n\n      if (isTargetId && isTargetIndex) {\n        if (config.data_selection_isselectable(d)) {\n          if (isSelected) {\n            toggle(false, shape.classed(CLASS.SELECTED, false), d, i);\n          }\n        }\n      }\n    });\n  };\n\n  Chart.prototype.show = function (targetIds, options) {\n    var $$ = this.internal,\n        targets;\n    targetIds = $$.mapToTargetIds(targetIds);\n    options = options || {};\n    $$.removeHiddenTargetIds(targetIds);\n    targets = $$.svg.selectAll($$.selectorTargets(targetIds));\n    targets.transition().style('display', isIE() ? 'block' : 'initial', 'important').style('opacity', 1, 'important').call($$.endall, function () {\n      targets.style('opacity', null).style('opacity', 1);\n    });\n\n    if (options.withLegend) {\n      $$.showLegend(targetIds);\n    }\n\n    $$.redraw({\n      withUpdateOrgXDomain: true,\n      withUpdateXDomain: true,\n      withLegend: true\n    });\n  };\n\n  Chart.prototype.hide = function (targetIds, options) {\n    var $$ = this.internal,\n        targets;\n    targetIds = $$.mapToTargetIds(targetIds);\n    options = options || {};\n    $$.addHiddenTargetIds(targetIds);\n    targets = $$.svg.selectAll($$.selectorTargets(targetIds));\n    targets.transition().style('opacity', 0, 'important').call($$.endall, function () {\n      targets.style('opacity', null).style('opacity', 0);\n      targets.style('display', 'none');\n    });\n\n    if (options.withLegend) {\n      $$.hideLegend(targetIds);\n    }\n\n    $$.redraw({\n      withUpdateOrgXDomain: true,\n      withUpdateXDomain: true,\n      withLegend: true\n    });\n  };\n\n  Chart.prototype.toggle = function (targetIds, options) {\n    var that = this,\n        $$ = this.internal;\n    $$.mapToTargetIds(targetIds).forEach(function (targetId) {\n      $$.isTargetToShow(targetId) ? that.hide(targetId, options) : that.show(targetId, options);\n    });\n  };\n\n  Chart.prototype.subchart = function () {};\n\n  Chart.prototype.subchart.isShown = function () {\n    var $$ = this.internal;\n    return $$.config.subchart_show;\n  };\n\n  Chart.prototype.subchart.show = function () {\n    var $$ = this.internal;\n\n    if ($$.config.subchart_show) {\n      return;\n    }\n\n    $$.config.subchart_show = true; // insert DOM\n\n    $$.initSubchart(); // update dimensions with sub chart now visible\n\n    $$.updateDimension(); // insert brush (depends on sizes previously updated)\n\n    $$.initSubchartBrush(); // attach data\n\n    $$.updateTargetsForSubchart($$.getTargets()); // reset fade-in state\n\n    $$.mapToIds($$.data.targets).forEach(function (id) {\n      $$.withoutFadeIn[id] = false;\n    }); // redraw chart !\n\n    $$.updateAndRedraw(); // update visible targets !\n\n    $$.showTargets();\n  };\n\n  Chart.prototype.subchart.hide = function () {\n    var $$ = this.internal;\n\n    if (!$$.config.subchart_show) {\n      return;\n    }\n\n    $$.config.subchart_show = false; // remove DOM\n\n    $$.removeSubchart(); // re-render chart\n\n    $$.redraw();\n  };\n\n  Chart.prototype.tooltip = function () {};\n\n  Chart.prototype.tooltip.show = function (args) {\n    var $$ = this.internal,\n        targets,\n        data,\n        mouse = {}; // determine mouse position on the chart\n\n    if (args.mouse) {\n      mouse = args.mouse;\n    } else {\n      // determine focus data\n      if (args.data) {\n        data = args.data;\n      } else if (typeof args.x !== 'undefined') {\n        if (args.id) {\n          targets = $$.data.targets.filter(function (t) {\n            return t.id === args.id;\n          });\n        } else {\n          targets = $$.data.targets;\n        }\n\n        data = $$.filterByX(targets, args.x).slice(0, 1)[0];\n      }\n\n      mouse = data ? $$.getMousePosition(data) : null;\n    } // emulate mouse events to show\n\n\n    $$.dispatchEvent('mousemove', mouse);\n    $$.config.tooltip_onshow.call($$, data);\n  };\n\n  Chart.prototype.tooltip.hide = function () {\n    // TODO: get target data by checking the state of focus\n    this.internal.dispatchEvent('mouseout', 0);\n    this.internal.config.tooltip_onhide.call(this);\n  };\n\n  Chart.prototype.transform = function (type, targetIds) {\n    var $$ = this.internal,\n        options = ['pie', 'donut'].indexOf(type) >= 0 ? {\n      withTransform: true\n    } : null;\n    $$.transformTo(targetIds, type, options);\n  };\n\n  ChartInternal.prototype.transformTo = function (targetIds, type, optionsForRedraw) {\n    var $$ = this,\n        withTransitionForAxis = !$$.hasArcType(),\n        options = optionsForRedraw || {\n      withTransitionForAxis: withTransitionForAxis\n    };\n    options.withTransitionForTransform = false;\n    $$.transiting = false;\n    $$.setTargetType(targetIds, type);\n    $$.updateTargets($$.data.targets); // this is needed when transforming to arc\n\n    $$.updateAndRedraw(options);\n  };\n\n  Chart.prototype.x = function (x) {\n    var $$ = this.internal;\n\n    if (arguments.length) {\n      $$.updateTargetX($$.data.targets, x);\n      $$.redraw({\n        withUpdateOrgXDomain: true,\n        withUpdateXDomain: true\n      });\n    }\n\n    return $$.data.xs;\n  };\n\n  Chart.prototype.xs = function (xs) {\n    var $$ = this.internal;\n\n    if (arguments.length) {\n      $$.updateTargetXs($$.data.targets, xs);\n      $$.redraw({\n        withUpdateOrgXDomain: true,\n        withUpdateXDomain: true\n      });\n    }\n\n    return $$.data.xs;\n  };\n\n  Chart.prototype.zoom = function (domain) {\n    var $$ = this.internal;\n\n    if (domain) {\n      if ($$.isTimeSeries()) {\n        domain = domain.map(function (x) {\n          return $$.parseDate(x);\n        });\n      }\n\n      if ($$.config.subchart_show) {\n        $$.brush.selectionAsValue(domain, true);\n      } else {\n        $$.updateXDomain(null, true, false, false, domain);\n        $$.redraw({\n          withY: $$.config.zoom_rescale,\n          withSubchart: false\n        });\n      }\n\n      $$.config.zoom_onzoom.call(this, $$.x.orgDomain());\n      return domain;\n    } else {\n      return $$.x.domain();\n    }\n  };\n\n  Chart.prototype.zoom.enable = function (enabled) {\n    var $$ = this.internal;\n    $$.config.zoom_enabled = enabled;\n    $$.updateAndRedraw();\n  };\n\n  Chart.prototype.unzoom = function () {\n    var $$ = this.internal;\n\n    if ($$.config.subchart_show) {\n      $$.brush.clear();\n    } else {\n      $$.updateXDomain(null, true, false, false, $$.subX.domain());\n      $$.redraw({\n        withY: $$.config.zoom_rescale,\n        withSubchart: false\n      });\n    }\n  };\n\n  Chart.prototype.zoom.max = function (max) {\n    var $$ = this.internal,\n        config = $$.config,\n        d3 = $$.d3;\n\n    if (max === 0 || max) {\n      config.zoom_x_max = d3.max([$$.orgXDomain[1], max]);\n    } else {\n      return config.zoom_x_max;\n    }\n  };\n\n  Chart.prototype.zoom.min = function (min) {\n    var $$ = this.internal,\n        config = $$.config,\n        d3 = $$.d3;\n\n    if (min === 0 || min) {\n      config.zoom_x_min = d3.min([$$.orgXDomain[0], min]);\n    } else {\n      return config.zoom_x_min;\n    }\n  };\n\n  Chart.prototype.zoom.range = function (range) {\n    if (arguments.length) {\n      if (isDefined(range.max)) {\n        this.domain.max(range.max);\n      }\n\n      if (isDefined(range.min)) {\n        this.domain.min(range.min);\n      }\n    } else {\n      return {\n        max: this.domain.max(),\n        min: this.domain.min()\n      };\n    }\n  };\n\n  ChartInternal.prototype.initPie = function () {\n    var $$ = this,\n        d3 = $$.d3;\n    $$.pie = d3.pie().padAngle(this.getPadAngle.bind(this)).value(function (d) {\n      return d.values.reduce(function (a, b) {\n        return a + b.value;\n      }, 0);\n    });\n    var orderFct = $$.getOrderFunction(); // we need to reverse the returned order if asc or desc to have the slice in expected order.\n\n    if (orderFct && ($$.isOrderAsc() || $$.isOrderDesc())) {\n      var defaultSort = orderFct;\n\n      orderFct = function orderFct(t1, t2) {\n        return defaultSort(t1, t2) * -1;\n      };\n    }\n\n    $$.pie.sort(orderFct || null);\n  };\n\n  ChartInternal.prototype.updateRadius = function () {\n    var $$ = this,\n        config = $$.config,\n        w = config.gauge_width || config.donut_width,\n        gaugeArcWidth = $$.filterTargetsToShow($$.data.targets).length * $$.config.gauge_arcs_minWidth;\n    $$.radiusExpanded = Math.min($$.arcWidth, $$.arcHeight) / 2 * ($$.hasType('gauge') ? 0.85 : 1);\n    $$.radius = $$.radiusExpanded * 0.95;\n    $$.innerRadiusRatio = w ? ($$.radius - w) / $$.radius : 0.6;\n    $$.innerRadius = $$.hasType('donut') || $$.hasType('gauge') ? $$.radius * $$.innerRadiusRatio : 0;\n    $$.gaugeArcWidth = w ? w : gaugeArcWidth <= $$.radius - $$.innerRadius ? $$.radius - $$.innerRadius : gaugeArcWidth <= $$.radius ? gaugeArcWidth : $$.radius;\n  };\n\n  ChartInternal.prototype.getPadAngle = function () {\n    if (this.hasType('pie')) {\n      return this.config.pie_padAngle || 0;\n    } else if (this.hasType('donut')) {\n      return this.config.donut_padAngle || 0;\n    } else {\n      return 0;\n    }\n  };\n\n  ChartInternal.prototype.updateArc = function () {\n    var $$ = this;\n    $$.svgArc = $$.getSvgArc();\n    $$.svgArcExpanded = $$.getSvgArcExpanded();\n    $$.svgArcExpandedSub = $$.getSvgArcExpanded(0.98);\n  };\n\n  ChartInternal.prototype.updateAngle = function (d) {\n    var $$ = this,\n        config = $$.config,\n        found = false,\n        index = 0,\n        gMin,\n        gMax,\n        gTic,\n        gValue;\n\n    if (!config) {\n      return null;\n    }\n\n    $$.pie($$.filterTargetsToShow($$.data.targets)).forEach(function (t) {\n      if (!found && t.data.id === d.data.id) {\n        found = true;\n        d = t;\n        d.index = index;\n      }\n\n      index++;\n    });\n\n    if (isNaN(d.startAngle)) {\n      d.startAngle = 0;\n    }\n\n    if (isNaN(d.endAngle)) {\n      d.endAngle = d.startAngle;\n    }\n\n    if ($$.isGaugeType(d.data)) {\n      gMin = config.gauge_min;\n      gMax = config.gauge_max;\n      gTic = Math.PI * (config.gauge_fullCircle ? 2 : 1) / (gMax - gMin);\n      gValue = d.value < gMin ? 0 : d.value < gMax ? d.value - gMin : gMax - gMin;\n      d.startAngle = config.gauge_startingAngle;\n      d.endAngle = d.startAngle + gTic * gValue;\n    }\n\n    return found ? d : null;\n  };\n\n  ChartInternal.prototype.getSvgArc = function () {\n    var $$ = this,\n        hasGaugeType = $$.hasType('gauge'),\n        singleArcWidth = $$.gaugeArcWidth / $$.filterTargetsToShow($$.data.targets).length,\n        arc = $$.d3.arc().outerRadius(function (d) {\n      return hasGaugeType ? $$.radius - singleArcWidth * d.index : $$.radius;\n    }).innerRadius(function (d) {\n      return hasGaugeType ? $$.radius - singleArcWidth * (d.index + 1) : $$.innerRadius;\n    }),\n        newArc = function newArc(d, withoutUpdate) {\n      var updated;\n\n      if (withoutUpdate) {\n        return arc(d);\n      } // for interpolate\n\n\n      updated = $$.updateAngle(d);\n      return updated ? arc(updated) : 'M 0 0';\n    }; // TODO: extends all function\n\n\n    newArc.centroid = arc.centroid;\n    return newArc;\n  };\n\n  ChartInternal.prototype.getSvgArcExpanded = function (rate) {\n    rate = rate || 1;\n    var $$ = this,\n        hasGaugeType = $$.hasType('gauge'),\n        singleArcWidth = $$.gaugeArcWidth / $$.filterTargetsToShow($$.data.targets).length,\n        expandWidth = Math.min($$.radiusExpanded * rate - $$.radius, singleArcWidth * 0.8 - (1 - rate) * 100),\n        arc = $$.d3.arc().outerRadius(function (d) {\n      return hasGaugeType ? $$.radius - singleArcWidth * d.index + expandWidth : $$.radiusExpanded * rate;\n    }).innerRadius(function (d) {\n      return hasGaugeType ? $$.radius - singleArcWidth * (d.index + 1) : $$.innerRadius;\n    });\n    return function (d) {\n      var updated = $$.updateAngle(d);\n      return updated ? arc(updated) : 'M 0 0';\n    };\n  };\n\n  ChartInternal.prototype.getArc = function (d, withoutUpdate, force) {\n    return force || this.isArcType(d.data) ? this.svgArc(d, withoutUpdate) : 'M 0 0';\n  };\n\n  ChartInternal.prototype.transformForArcLabel = function (d) {\n    var $$ = this,\n        config = $$.config,\n        updated = $$.updateAngle(d),\n        c,\n        x,\n        y,\n        h,\n        ratio,\n        translate = '',\n        hasGauge = $$.hasType('gauge');\n\n    if (updated && !hasGauge) {\n      c = this.svgArc.centroid(updated);\n      x = isNaN(c[0]) ? 0 : c[0];\n      y = isNaN(c[1]) ? 0 : c[1];\n      h = Math.sqrt(x * x + y * y);\n\n      if ($$.hasType('donut') && config.donut_label_ratio) {\n        ratio = isFunction(config.donut_label_ratio) ? config.donut_label_ratio(d, $$.radius, h) : config.donut_label_ratio;\n      } else if ($$.hasType('pie') && config.pie_label_ratio) {\n        ratio = isFunction(config.pie_label_ratio) ? config.pie_label_ratio(d, $$.radius, h) : config.pie_label_ratio;\n      } else {\n        ratio = $$.radius && h ? (36 / $$.radius > 0.375 ? 1.175 - 36 / $$.radius : 0.8) * $$.radius / h : 0;\n      }\n\n      translate = 'translate(' + x * ratio + ',' + y * ratio + ')';\n    } else if (updated && hasGauge && $$.filterTargetsToShow($$.data.targets).length > 1) {\n      var y1 = Math.sin(updated.endAngle - Math.PI / 2);\n      x = Math.cos(updated.endAngle - Math.PI / 2) * ($$.radiusExpanded + 25);\n      y = y1 * ($$.radiusExpanded + 15 - Math.abs(y1 * 10)) + 3;\n      translate = 'translate(' + x + ',' + y + ')';\n    }\n\n    return translate;\n  };\n  /**\n   * @deprecated Use `getRatio('arc', d)` instead.\n   */\n\n\n  ChartInternal.prototype.getArcRatio = function (d) {\n    return this.getRatio('arc', d);\n  };\n\n  ChartInternal.prototype.convertToArcData = function (d) {\n    return this.addName({\n      id: d.data.id,\n      value: d.value,\n      ratio: this.getRatio('arc', d),\n      index: d.index\n    });\n  };\n\n  ChartInternal.prototype.textForArcLabel = function (d) {\n    var $$ = this,\n        updated,\n        value,\n        ratio,\n        id,\n        format;\n\n    if (!$$.shouldShowArcLabel()) {\n      return '';\n    }\n\n    updated = $$.updateAngle(d);\n    value = updated ? updated.value : null;\n    ratio = $$.getRatio('arc', updated);\n    id = d.data.id;\n\n    if (!$$.hasType('gauge') && !$$.meetsArcLabelThreshold(ratio)) {\n      return '';\n    }\n\n    format = $$.getArcLabelFormat();\n    return format ? format(value, ratio, id) : $$.defaultArcValueFormat(value, ratio);\n  };\n\n  ChartInternal.prototype.textForGaugeMinMax = function (value, isMax) {\n    var $$ = this,\n        format = $$.getGaugeLabelExtents();\n    return format ? format(value, isMax) : value;\n  };\n\n  ChartInternal.prototype.expandArc = function (targetIds) {\n    var $$ = this,\n        interval; // MEMO: avoid to cancel transition\n\n    if ($$.transiting) {\n      interval = window.setInterval(function () {\n        if (!$$.transiting) {\n          window.clearInterval(interval);\n\n          if ($$.legend.selectAll('.c3-legend-item-focused').size() > 0) {\n            $$.expandArc(targetIds);\n          }\n        }\n      }, 10);\n      return;\n    }\n\n    targetIds = $$.mapToTargetIds(targetIds);\n    $$.svg.selectAll($$.selectorTargets(targetIds, '.' + CLASS.chartArc)).each(function (d) {\n      if (!$$.shouldExpand(d.data.id)) {\n        return;\n      }\n\n      $$.d3.select(this).selectAll('path').transition().duration($$.expandDuration(d.data.id)).attr('d', $$.svgArcExpanded).transition().duration($$.expandDuration(d.data.id) * 2).attr('d', $$.svgArcExpandedSub).each(function (d) {\n        if ($$.isDonutType(d.data)) ;\n      });\n    });\n  };\n\n  ChartInternal.prototype.unexpandArc = function (targetIds) {\n    var $$ = this;\n\n    if ($$.transiting) {\n      return;\n    }\n\n    targetIds = $$.mapToTargetIds(targetIds);\n    $$.svg.selectAll($$.selectorTargets(targetIds, '.' + CLASS.chartArc)).selectAll('path').transition().duration(function (d) {\n      return $$.expandDuration(d.data.id);\n    }).attr('d', $$.svgArc);\n    $$.svg.selectAll('.' + CLASS.arc);\n  };\n\n  ChartInternal.prototype.expandDuration = function (id) {\n    var $$ = this,\n        config = $$.config;\n\n    if ($$.isDonutType(id)) {\n      return config.donut_expand_duration;\n    } else if ($$.isGaugeType(id)) {\n      return config.gauge_expand_duration;\n    } else if ($$.isPieType(id)) {\n      return config.pie_expand_duration;\n    } else {\n      return 50;\n    }\n  };\n\n  ChartInternal.prototype.shouldExpand = function (id) {\n    var $$ = this,\n        config = $$.config;\n    return $$.isDonutType(id) && config.donut_expand || $$.isGaugeType(id) && config.gauge_expand || $$.isPieType(id) && config.pie_expand;\n  };\n\n  ChartInternal.prototype.shouldShowArcLabel = function () {\n    var $$ = this,\n        config = $$.config,\n        shouldShow = true;\n\n    if ($$.hasType('donut')) {\n      shouldShow = config.donut_label_show;\n    } else if ($$.hasType('pie')) {\n      shouldShow = config.pie_label_show;\n    } // when gauge, always true\n\n\n    return shouldShow;\n  };\n\n  ChartInternal.prototype.meetsArcLabelThreshold = function (ratio) {\n    var $$ = this,\n        config = $$.config,\n        threshold = $$.hasType('donut') ? config.donut_label_threshold : config.pie_label_threshold;\n    return ratio >= threshold;\n  };\n\n  ChartInternal.prototype.getArcLabelFormat = function () {\n    var $$ = this,\n        config = $$.config,\n        format = config.pie_label_format;\n\n    if ($$.hasType('gauge')) {\n      format = config.gauge_label_format;\n    } else if ($$.hasType('donut')) {\n      format = config.donut_label_format;\n    }\n\n    return format;\n  };\n\n  ChartInternal.prototype.getGaugeLabelExtents = function () {\n    var $$ = this,\n        config = $$.config;\n    return config.gauge_label_extents;\n  };\n\n  ChartInternal.prototype.getArcTitle = function () {\n    var $$ = this;\n    return $$.hasType('donut') ? $$.config.donut_title : '';\n  };\n\n  ChartInternal.prototype.updateTargetsForArc = function (targets) {\n    var $$ = this,\n        main = $$.main,\n        mainPies,\n        mainPieEnter,\n        classChartArc = $$.classChartArc.bind($$),\n        classArcs = $$.classArcs.bind($$),\n        classFocus = $$.classFocus.bind($$);\n    mainPies = main.select('.' + CLASS.chartArcs).selectAll('.' + CLASS.chartArc).data($$.pie(targets)).attr('class', function (d) {\n      return classChartArc(d) + classFocus(d.data);\n    });\n    mainPieEnter = mainPies.enter().append('g').attr('class', classChartArc);\n    mainPieEnter.append('g').attr('class', classArcs);\n    mainPieEnter.append('text').attr('dy', $$.hasType('gauge') ? '-.1em' : '.35em').style('opacity', 0).style('text-anchor', 'middle').style('pointer-events', 'none'); // MEMO: can not keep same color..., but not bad to update color in redraw\n    //mainPieUpdate.exit().remove();\n  };\n\n  ChartInternal.prototype.initArc = function () {\n    var $$ = this;\n    $$.arcs = $$.main.select('.' + CLASS.chart).append('g').attr('class', CLASS.chartArcs).attr('transform', $$.getTranslate('arc'));\n    $$.arcs.append('text').attr('class', CLASS.chartArcsTitle).style('text-anchor', 'middle').text($$.getArcTitle());\n  };\n\n  ChartInternal.prototype.redrawArc = function (duration, durationForExit, withTransform) {\n    var $$ = this,\n        d3 = $$.d3,\n        config = $$.config,\n        main = $$.main,\n        arcs,\n        mainArc,\n        arcLabelLines,\n        mainArcLabelLine,\n        hasGaugeType = $$.hasType('gauge');\n    arcs = main.selectAll('.' + CLASS.arcs).selectAll('.' + CLASS.arc).data($$.arcData.bind($$));\n    mainArc = arcs.enter().append('path').attr('class', $$.classArc.bind($$)).style('fill', function (d) {\n      return $$.color(d.data);\n    }).style('cursor', function (d) {\n      return config.interaction_enabled && config.data_selection_isselectable(d) ? 'pointer' : null;\n    }).each(function (d) {\n      if ($$.isGaugeType(d.data)) {\n        d.startAngle = d.endAngle = config.gauge_startingAngle;\n      }\n\n      this._current = d;\n    }).merge(arcs);\n\n    if (hasGaugeType) {\n      arcLabelLines = main.selectAll('.' + CLASS.arcs).selectAll('.' + CLASS.arcLabelLine).data($$.arcData.bind($$));\n      mainArcLabelLine = arcLabelLines.enter().append('rect').attr('class', function (d) {\n        return CLASS.arcLabelLine + ' ' + CLASS.target + ' ' + CLASS.target + '-' + d.data.id;\n      }).merge(arcLabelLines);\n\n      if ($$.filterTargetsToShow($$.data.targets).length === 1) {\n        mainArcLabelLine.style('display', 'none');\n      } else {\n        mainArcLabelLine.style('fill', function (d) {\n          return $$.levelColor ? $$.levelColor(d.data.values.reduce(function (total, item) {\n            return total + item.value;\n          }, 0)) : $$.color(d.data);\n        }).style('display', config.gauge_labelLine_show ? '' : 'none').each(function (d) {\n          var lineLength = 0,\n              lineThickness = 2,\n              x = 0,\n              y = 0,\n              transform = '';\n\n          if ($$.hiddenTargetIds.indexOf(d.data.id) < 0) {\n            var updated = $$.updateAngle(d),\n                innerLineLength = $$.gaugeArcWidth / $$.filterTargetsToShow($$.data.targets).length * (updated.index + 1),\n                lineAngle = updated.endAngle - Math.PI / 2,\n                arcInnerRadius = $$.radius - innerLineLength,\n                linePositioningAngle = lineAngle - (arcInnerRadius === 0 ? 0 : 1 / arcInnerRadius);\n            lineLength = $$.radiusExpanded - $$.radius + innerLineLength;\n            x = Math.cos(linePositioningAngle) * arcInnerRadius;\n            y = Math.sin(linePositioningAngle) * arcInnerRadius;\n            transform = 'rotate(' + lineAngle * 180 / Math.PI + ', ' + x + ', ' + y + ')';\n          }\n\n          d3.select(this).attr('x', x).attr('y', y).attr('width', lineLength).attr('height', lineThickness).attr('transform', transform).style('stroke-dasharray', '0, ' + (lineLength + lineThickness) + ', 0');\n        });\n      }\n    }\n\n    mainArc.attr('transform', function (d) {\n      return !$$.isGaugeType(d.data) && withTransform ? 'scale(0)' : '';\n    }).on('mouseover', config.interaction_enabled ? function (d) {\n      var updated, arcData;\n\n      if ($$.transiting) {\n        // skip while transiting\n        return;\n      }\n\n      updated = $$.updateAngle(d);\n\n      if (updated) {\n        arcData = $$.convertToArcData(updated); // transitions\n\n        $$.expandArc(updated.data.id);\n        $$.api.focus(updated.data.id);\n        $$.toggleFocusLegend(updated.data.id, true);\n        $$.config.data_onmouseover(arcData, this);\n      }\n    } : null).on('mousemove', config.interaction_enabled ? function (d) {\n      var updated = $$.updateAngle(d),\n          arcData,\n          selectedData;\n\n      if (updated) {\n        arcData = $$.convertToArcData(updated), selectedData = [arcData];\n        $$.showTooltip(selectedData, this);\n      }\n    } : null).on('mouseout', config.interaction_enabled ? function (d) {\n      var updated, arcData;\n\n      if ($$.transiting) {\n        // skip while transiting\n        return;\n      }\n\n      updated = $$.updateAngle(d);\n\n      if (updated) {\n        arcData = $$.convertToArcData(updated); // transitions\n\n        $$.unexpandArc(updated.data.id);\n        $$.api.revert();\n        $$.revertLegend();\n        $$.hideTooltip();\n        $$.config.data_onmouseout(arcData, this);\n      }\n    } : null).on('click', config.interaction_enabled ? function (d, i) {\n      var updated = $$.updateAngle(d),\n          arcData;\n\n      if (updated) {\n        arcData = $$.convertToArcData(updated);\n\n        if ($$.toggleShape) {\n          $$.toggleShape(this, arcData, i);\n        }\n\n        $$.config.data_onclick.call($$.api, arcData, this);\n      }\n    } : null).each(function () {\n      $$.transiting = true;\n    }).transition().duration(duration).attrTween('d', function (d) {\n      var updated = $$.updateAngle(d),\n          interpolate;\n\n      if (!updated) {\n        return function () {\n          return 'M 0 0';\n        };\n      } //                if (this._current === d) {\n      //                    this._current = {\n      //                        startAngle: Math.PI*2,\n      //                        endAngle: Math.PI*2,\n      //                    };\n      //                }\n\n\n      if (isNaN(this._current.startAngle)) {\n        this._current.startAngle = 0;\n      }\n\n      if (isNaN(this._current.endAngle)) {\n        this._current.endAngle = this._current.startAngle;\n      }\n\n      interpolate = d3.interpolate(this._current, updated);\n      this._current = interpolate(0);\n      return function (t) {\n        // prevents crashing the charts once in transition and chart.destroy() has been called\n        if ($$.config === null) {\n          return 'M 0 0';\n        }\n\n        var interpolated = interpolate(t);\n        interpolated.data = d.data; // data.id will be updated by interporator\n\n        return $$.getArc(interpolated, true);\n      };\n    }).attr('transform', withTransform ? 'scale(1)' : '').style('fill', function (d) {\n      return $$.levelColor ? $$.levelColor(d.data.values.reduce(function (total, item) {\n        return total + item.value;\n      }, 0)) : $$.color(d.data.id);\n    }) // Where gauge reading color would receive customization.\n    .call($$.endall, function () {\n      $$.transiting = false;\n    });\n    arcs.exit().transition().duration(durationForExit).style('opacity', 0).remove();\n    main.selectAll('.' + CLASS.chartArc).select('text').style('opacity', 0).attr('class', function (d) {\n      return $$.isGaugeType(d.data) ? CLASS.gaugeValue : '';\n    }).text($$.textForArcLabel.bind($$)).attr('transform', $$.transformForArcLabel.bind($$)).style('font-size', function (d) {\n      return $$.isGaugeType(d.data) && $$.filterTargetsToShow($$.data.targets).length === 1 ? Math.round($$.radius / 5) + 'px' : '';\n    }).transition().duration(duration).style('opacity', function (d) {\n      return $$.isTargetToShow(d.data.id) && $$.isArcType(d.data) ? 1 : 0;\n    });\n    main.select('.' + CLASS.chartArcsTitle).style('opacity', $$.hasType('donut') || hasGaugeType ? 1 : 0);\n\n    if (hasGaugeType) {\n      var index = 0;\n      var backgroundArc = $$.arcs.select('g.' + CLASS.chartArcsBackground).selectAll('path.' + CLASS.chartArcsBackground).data($$.data.targets);\n      backgroundArc.enter().append('path').attr('class', function (d, i) {\n        return CLASS.chartArcsBackground + ' ' + CLASS.chartArcsBackground + '-' + i;\n      }).merge(backgroundArc).attr('d', function (d1) {\n        if ($$.hiddenTargetIds.indexOf(d1.id) >= 0) {\n          return 'M 0 0';\n        }\n\n        var d = {\n          data: [{\n            value: config.gauge_max\n          }],\n          startAngle: config.gauge_startingAngle,\n          endAngle: -1 * config.gauge_startingAngle * (config.gauge_fullCircle ? Math.PI : 1),\n          index: index++\n        };\n        return $$.getArc(d, true, true);\n      });\n      backgroundArc.exit().remove();\n      $$.arcs.select('.' + CLASS.chartArcsGaugeUnit).attr('dy', '.75em').text(config.gauge_label_show ? config.gauge_units : '');\n      $$.arcs.select('.' + CLASS.chartArcsGaugeMin).attr('dx', -1 * ($$.innerRadius + ($$.radius - $$.innerRadius) / (config.gauge_fullCircle ? 1 : 2)) + 'px').attr('dy', '1.2em').text(config.gauge_label_show ? $$.textForGaugeMinMax(config.gauge_min, false) : '');\n      $$.arcs.select('.' + CLASS.chartArcsGaugeMax).attr('dx', $$.innerRadius + ($$.radius - $$.innerRadius) / (config.gauge_fullCircle ? 1 : 2) + 'px').attr('dy', '1.2em').text(config.gauge_label_show ? $$.textForGaugeMinMax(config.gauge_max, true) : '');\n    }\n  };\n\n  ChartInternal.prototype.initGauge = function () {\n    var arcs = this.arcs;\n\n    if (this.hasType('gauge')) {\n      arcs.append('g').attr('class', CLASS.chartArcsBackground);\n      arcs.append('text').attr('class', CLASS.chartArcsGaugeUnit).style('text-anchor', 'middle').style('pointer-events', 'none');\n      arcs.append('text').attr('class', CLASS.chartArcsGaugeMin).style('text-anchor', 'middle').style('pointer-events', 'none');\n      arcs.append('text').attr('class', CLASS.chartArcsGaugeMax).style('text-anchor', 'middle').style('pointer-events', 'none');\n    }\n  };\n\n  ChartInternal.prototype.getGaugeLabelHeight = function () {\n    return this.config.gauge_label_show ? 20 : 0;\n  };\n\n  /**\n   * Store value into cache\n   *\n   * @param key\n   * @param value\n   */\n\n  ChartInternal.prototype.addToCache = function (key, value) {\n    this.cache[\"$\".concat(key)] = value;\n  };\n  /**\n   * Returns a cached value or undefined\n   *\n   * @param key\n   * @return {*}\n   */\n\n\n  ChartInternal.prototype.getFromCache = function (key) {\n    return this.cache[\"$\".concat(key)];\n  };\n  /**\n   * Reset cached data\n   */\n\n\n  ChartInternal.prototype.resetCache = function () {\n    var _this = this;\n\n    Object.keys(this.cache).filter(function (key) {\n      return /^\\$/.test(key);\n    }).forEach(function (key) {\n      delete _this.cache[key];\n    });\n  }; // Old API that stores Targets\n\n\n  ChartInternal.prototype.hasCaches = function (ids) {\n    for (var i = 0; i < ids.length; i++) {\n      if (!(ids[i] in this.cache)) {\n        return false;\n      }\n    }\n\n    return true;\n  };\n\n  ChartInternal.prototype.addCache = function (id, target) {\n    this.cache[id] = this.cloneTarget(target);\n  };\n\n  ChartInternal.prototype.getCaches = function (ids) {\n    var targets = [],\n        i;\n\n    for (i = 0; i < ids.length; i++) {\n      if (ids[i] in this.cache) {\n        targets.push(this.cloneTarget(this.cache[ids[i]]));\n      }\n    }\n\n    return targets;\n  };\n\n  ChartInternal.prototype.categoryName = function (i) {\n    var config = this.config;\n    return i < config.axis_x_categories.length ? config.axis_x_categories[i] : i;\n  };\n\n  ChartInternal.prototype.generateTargetClass = function (targetId) {\n    return targetId || targetId === 0 ? ('-' + targetId).replace(/\\s/g, '-') : '';\n  };\n\n  ChartInternal.prototype.generateClass = function (prefix, targetId) {\n    return ' ' + prefix + ' ' + prefix + this.generateTargetClass(targetId);\n  };\n\n  ChartInternal.prototype.classText = function (d) {\n    return this.generateClass(CLASS.text, d.index);\n  };\n\n  ChartInternal.prototype.classTexts = function (d) {\n    return this.generateClass(CLASS.texts, d.id);\n  };\n\n  ChartInternal.prototype.classShape = function (d) {\n    return this.generateClass(CLASS.shape, d.index);\n  };\n\n  ChartInternal.prototype.classShapes = function (d) {\n    return this.generateClass(CLASS.shapes, d.id);\n  };\n\n  ChartInternal.prototype.classLine = function (d) {\n    return this.classShape(d) + this.generateClass(CLASS.line, d.id);\n  };\n\n  ChartInternal.prototype.classLines = function (d) {\n    return this.classShapes(d) + this.generateClass(CLASS.lines, d.id);\n  };\n\n  ChartInternal.prototype.classCircle = function (d) {\n    return this.classShape(d) + this.generateClass(CLASS.circle, d.index);\n  };\n\n  ChartInternal.prototype.classCircles = function (d) {\n    return this.classShapes(d) + this.generateClass(CLASS.circles, d.id);\n  };\n\n  ChartInternal.prototype.classBar = function (d) {\n    return this.classShape(d) + this.generateClass(CLASS.bar, d.index);\n  };\n\n  ChartInternal.prototype.classBars = function (d) {\n    return this.classShapes(d) + this.generateClass(CLASS.bars, d.id);\n  };\n\n  ChartInternal.prototype.classArc = function (d) {\n    return this.classShape(d.data) + this.generateClass(CLASS.arc, d.data.id);\n  };\n\n  ChartInternal.prototype.classArcs = function (d) {\n    return this.classShapes(d.data) + this.generateClass(CLASS.arcs, d.data.id);\n  };\n\n  ChartInternal.prototype.classArea = function (d) {\n    return this.classShape(d) + this.generateClass(CLASS.area, d.id);\n  };\n\n  ChartInternal.prototype.classAreas = function (d) {\n    return this.classShapes(d) + this.generateClass(CLASS.areas, d.id);\n  };\n\n  ChartInternal.prototype.classRegion = function (d, i) {\n    return this.generateClass(CLASS.region, i) + ' ' + ('class' in d ? d['class'] : '');\n  };\n\n  ChartInternal.prototype.classEvent = function (d) {\n    return this.generateClass(CLASS.eventRect, d.index);\n  };\n\n  ChartInternal.prototype.classTarget = function (id) {\n    var $$ = this;\n    var additionalClassSuffix = $$.config.data_classes[id],\n        additionalClass = '';\n\n    if (additionalClassSuffix) {\n      additionalClass = ' ' + CLASS.target + '-' + additionalClassSuffix;\n    }\n\n    return $$.generateClass(CLASS.target, id) + additionalClass;\n  };\n\n  ChartInternal.prototype.classFocus = function (d) {\n    return this.classFocused(d) + this.classDefocused(d);\n  };\n\n  ChartInternal.prototype.classFocused = function (d) {\n    return ' ' + (this.focusedTargetIds.indexOf(d.id) >= 0 ? CLASS.focused : '');\n  };\n\n  ChartInternal.prototype.classDefocused = function (d) {\n    return ' ' + (this.defocusedTargetIds.indexOf(d.id) >= 0 ? CLASS.defocused : '');\n  };\n\n  ChartInternal.prototype.classChartText = function (d) {\n    return CLASS.chartText + this.classTarget(d.id);\n  };\n\n  ChartInternal.prototype.classChartLine = function (d) {\n    return CLASS.chartLine + this.classTarget(d.id);\n  };\n\n  ChartInternal.prototype.classChartBar = function (d) {\n    return CLASS.chartBar + this.classTarget(d.id);\n  };\n\n  ChartInternal.prototype.classChartArc = function (d) {\n    return CLASS.chartArc + this.classTarget(d.data.id);\n  };\n\n  ChartInternal.prototype.getTargetSelectorSuffix = function (targetId) {\n    var targetClass = this.generateTargetClass(targetId);\n\n    if (window.CSS && window.CSS.escape) {\n      return window.CSS.escape(targetClass);\n    } // fallback on imperfect method for old browsers (does not handles unicode)\n\n\n    return targetClass.replace(/([?!@#$%^&*()=+,.<>'\":;\\[\\]\\/|~`{}\\\\])/g, '\\\\$1');\n  };\n\n  ChartInternal.prototype.selectorTarget = function (id, prefix) {\n    return (prefix || '') + '.' + CLASS.target + this.getTargetSelectorSuffix(id);\n  };\n\n  ChartInternal.prototype.selectorTargets = function (ids, prefix) {\n    var $$ = this;\n    ids = ids || [];\n    return ids.length ? ids.map(function (id) {\n      return $$.selectorTarget(id, prefix);\n    }) : null;\n  };\n\n  ChartInternal.prototype.selectorLegend = function (id) {\n    return '.' + CLASS.legendItem + this.getTargetSelectorSuffix(id);\n  };\n\n  ChartInternal.prototype.selectorLegends = function (ids) {\n    var $$ = this;\n    return ids && ids.length ? ids.map(function (id) {\n      return $$.selectorLegend(id);\n    }) : null;\n  };\n\n  ChartInternal.prototype.getClipPath = function (id) {\n    return 'url(' + (isIE(9) ? '' : document.URL.split('#')[0]) + '#' + id + ')';\n  };\n\n  ChartInternal.prototype.appendClip = function (parent, id) {\n    return parent.append('clipPath').attr('id', id).append('rect');\n  };\n\n  ChartInternal.prototype.getAxisClipX = function (forHorizontal) {\n    // axis line width + padding for left\n    var left = Math.max(30, this.margin.left);\n    return forHorizontal ? -(1 + left) : -(left - 1);\n  };\n\n  ChartInternal.prototype.getAxisClipY = function (forHorizontal) {\n    return forHorizontal ? -20 : -this.margin.top;\n  };\n\n  ChartInternal.prototype.getXAxisClipX = function () {\n    var $$ = this;\n    return $$.getAxisClipX(!$$.config.axis_rotated);\n  };\n\n  ChartInternal.prototype.getXAxisClipY = function () {\n    var $$ = this;\n    return $$.getAxisClipY(!$$.config.axis_rotated);\n  };\n\n  ChartInternal.prototype.getYAxisClipX = function () {\n    var $$ = this;\n    return $$.config.axis_y_inner ? -1 : $$.getAxisClipX($$.config.axis_rotated);\n  };\n\n  ChartInternal.prototype.getYAxisClipY = function () {\n    var $$ = this;\n    return $$.getAxisClipY($$.config.axis_rotated);\n  };\n\n  ChartInternal.prototype.getAxisClipWidth = function (forHorizontal) {\n    var $$ = this,\n        left = Math.max(30, $$.margin.left),\n        right = Math.max(30, $$.margin.right); // width + axis line width + padding for left/right\n\n    return forHorizontal ? $$.width + 2 + left + right : $$.margin.left + 20;\n  };\n\n  ChartInternal.prototype.getAxisClipHeight = function (forHorizontal) {\n    // less than 20 is not enough to show the axis label 'outer' without legend\n    return (forHorizontal ? this.margin.bottom : this.margin.top + this.height) + 20;\n  };\n\n  ChartInternal.prototype.getXAxisClipWidth = function () {\n    var $$ = this;\n    return $$.getAxisClipWidth(!$$.config.axis_rotated);\n  };\n\n  ChartInternal.prototype.getXAxisClipHeight = function () {\n    var $$ = this;\n    return $$.getAxisClipHeight(!$$.config.axis_rotated);\n  };\n\n  ChartInternal.prototype.getYAxisClipWidth = function () {\n    var $$ = this;\n    return $$.getAxisClipWidth($$.config.axis_rotated) + ($$.config.axis_y_inner ? 20 : 0);\n  };\n\n  ChartInternal.prototype.getYAxisClipHeight = function () {\n    var $$ = this;\n    return $$.getAxisClipHeight($$.config.axis_rotated);\n  };\n\n  ChartInternal.prototype.generateColor = function () {\n    var $$ = this,\n        config = $$.config,\n        d3 = $$.d3,\n        colors = config.data_colors,\n        pattern = notEmpty(config.color_pattern) ? config.color_pattern : d3.schemeCategory10,\n        callback = config.data_color,\n        ids = [];\n    return function (d) {\n      var id = d.id || d.data && d.data.id || d,\n          color; // if callback function is provided\n\n      if (colors[id] instanceof Function) {\n        color = colors[id](d);\n      } // if specified, choose that color\n      else if (colors[id]) {\n          color = colors[id];\n        } // if not specified, choose from pattern\n        else {\n            if (ids.indexOf(id) < 0) {\n              ids.push(id);\n            }\n\n            color = pattern[ids.indexOf(id) % pattern.length];\n            colors[id] = color;\n          }\n\n      return callback instanceof Function ? callback(color, d) : color;\n    };\n  };\n\n  ChartInternal.prototype.generateLevelColor = function () {\n    var $$ = this,\n        config = $$.config,\n        colors = config.color_pattern,\n        threshold = config.color_threshold,\n        asValue = threshold.unit === 'value',\n        values = threshold.values && threshold.values.length ? threshold.values : [],\n        max = threshold.max || 100;\n    return notEmpty(threshold) && notEmpty(colors) ? function (value) {\n      var i,\n          v,\n          color = colors[colors.length - 1];\n\n      for (i = 0; i < values.length; i++) {\n        v = asValue ? value : value * 100 / max;\n\n        if (v < values[i]) {\n          color = colors[i];\n          break;\n        }\n      }\n\n      return color;\n    } : null;\n  };\n\n  ChartInternal.prototype.getDefaultConfig = function () {\n    var config = {\n      bindto: '#chart',\n      svg_classname: undefined,\n      size_width: undefined,\n      size_height: undefined,\n      padding_left: undefined,\n      padding_right: undefined,\n      padding_top: undefined,\n      padding_bottom: undefined,\n      resize_auto: true,\n      zoom_enabled: false,\n      zoom_initialRange: undefined,\n      zoom_type: 'scroll',\n      zoom_disableDefaultBehavior: false,\n      zoom_privileged: false,\n      zoom_rescale: false,\n      zoom_onzoom: function zoom_onzoom() {},\n      zoom_onzoomstart: function zoom_onzoomstart() {},\n      zoom_onzoomend: function zoom_onzoomend() {},\n      zoom_x_min: undefined,\n      zoom_x_max: undefined,\n      interaction_brighten: true,\n      interaction_enabled: true,\n      onmouseover: function onmouseover() {},\n      onmouseout: function onmouseout() {},\n      onresize: function onresize() {},\n      onresized: function onresized() {},\n      oninit: function oninit() {},\n      onrendered: function onrendered() {},\n      transition_duration: 350,\n      data_epochs: 'epochs',\n      data_x: undefined,\n      data_xs: {},\n      data_xFormat: '%Y-%m-%d',\n      data_xLocaltime: true,\n      data_xSort: true,\n      data_idConverter: function data_idConverter(id) {\n        return id;\n      },\n      data_names: {},\n      data_classes: {},\n      data_groups: [],\n      data_axes: {},\n      data_type: undefined,\n      data_types: {},\n      data_labels: {},\n      data_order: 'desc',\n      data_regions: {},\n      data_color: undefined,\n      data_colors: {},\n      data_hide: false,\n      data_filter: undefined,\n      data_selection_enabled: false,\n      data_selection_grouped: false,\n      data_selection_isselectable: function data_selection_isselectable() {\n        return true;\n      },\n      data_selection_multiple: true,\n      data_selection_draggable: false,\n      data_stack_normalize: false,\n      data_onclick: function data_onclick() {},\n      data_onmouseover: function data_onmouseover() {},\n      data_onmouseout: function data_onmouseout() {},\n      data_onselected: function data_onselected() {},\n      data_onunselected: function data_onunselected() {},\n      data_url: undefined,\n      data_headers: undefined,\n      data_json: undefined,\n      data_rows: undefined,\n      data_columns: undefined,\n      data_mimeType: undefined,\n      data_keys: undefined,\n      // configuration for no plot-able data supplied.\n      data_empty_label_text: '',\n      // subchart\n      subchart_show: false,\n      subchart_size_height: 60,\n      subchart_axis_x_show: true,\n      subchart_onbrush: function subchart_onbrush() {},\n      // color\n      color_pattern: [],\n      color_threshold: {},\n      // legend\n      legend_show: true,\n      legend_hide: false,\n      legend_position: 'bottom',\n      legend_inset_anchor: 'top-left',\n      legend_inset_x: 10,\n      legend_inset_y: 0,\n      legend_inset_step: undefined,\n      legend_item_onclick: undefined,\n      legend_item_onmouseover: undefined,\n      legend_item_onmouseout: undefined,\n      legend_equally: false,\n      legend_padding: 0,\n      legend_item_tile_width: 10,\n      legend_item_tile_height: 10,\n      // axis\n      axis_rotated: false,\n      axis_x_show: true,\n      axis_x_type: 'indexed',\n      axis_x_localtime: true,\n      axis_x_categories: [],\n      axis_x_tick_centered: false,\n      axis_x_tick_format: undefined,\n      axis_x_tick_culling: {},\n      axis_x_tick_culling_max: 10,\n      axis_x_tick_count: undefined,\n      axis_x_tick_fit: true,\n      axis_x_tick_values: null,\n      axis_x_tick_rotate: 0,\n      axis_x_tick_outer: true,\n      axis_x_tick_multiline: true,\n      axis_x_tick_multilineMax: 0,\n      axis_x_tick_width: null,\n      axis_x_max: undefined,\n      axis_x_min: undefined,\n      axis_x_padding: {},\n      axis_x_height: undefined,\n      axis_x_selection: undefined,\n      axis_x_label: {},\n      axis_x_inner: undefined,\n      axis_y_show: true,\n      axis_y_type: 'linear',\n      axis_y_max: undefined,\n      axis_y_min: undefined,\n      axis_y_inverted: false,\n      axis_y_center: undefined,\n      axis_y_inner: undefined,\n      axis_y_label: {},\n      axis_y_tick_format: undefined,\n      axis_y_tick_outer: true,\n      axis_y_tick_values: null,\n      axis_y_tick_rotate: 0,\n      axis_y_tick_count: undefined,\n      axis_y_tick_time_type: undefined,\n      axis_y_tick_time_interval: undefined,\n      axis_y_padding: {},\n      axis_y_default: undefined,\n      axis_y2_show: false,\n      axis_y2_type: 'linear',\n      axis_y2_max: undefined,\n      axis_y2_min: undefined,\n      axis_y2_inverted: false,\n      axis_y2_center: undefined,\n      axis_y2_inner: undefined,\n      axis_y2_label: {},\n      axis_y2_tick_format: undefined,\n      axis_y2_tick_outer: true,\n      axis_y2_tick_values: null,\n      axis_y2_tick_count: undefined,\n      axis_y2_padding: {},\n      axis_y2_default: undefined,\n      // grid\n      grid_x_show: false,\n      grid_x_type: 'tick',\n      grid_x_lines: [],\n      grid_y_show: false,\n      // not used\n      // grid_y_type: 'tick',\n      grid_y_lines: [],\n      grid_y_ticks: 10,\n      grid_focus_show: true,\n      grid_lines_front: true,\n      // point - point of each data\n      point_show: true,\n      point_r: 2.5,\n      point_sensitivity: 10,\n      point_focus_expand_enabled: true,\n      point_focus_expand_r: undefined,\n      point_select_r: undefined,\n      // line\n      line_connectNull: false,\n      line_step_type: 'step',\n      // bar\n      bar_width: undefined,\n      bar_width_ratio: 0.6,\n      bar_width_max: undefined,\n      bar_zerobased: true,\n      bar_space: 0,\n      // area\n      area_zerobased: true,\n      area_above: false,\n      // pie\n      pie_label_show: true,\n      pie_label_format: undefined,\n      pie_label_threshold: 0.05,\n      pie_label_ratio: undefined,\n      pie_expand: {},\n      pie_expand_duration: 50,\n      pie_padAngle: 0,\n      // gauge\n      gauge_fullCircle: false,\n      gauge_label_show: true,\n      gauge_labelLine_show: true,\n      gauge_label_format: undefined,\n      gauge_min: 0,\n      gauge_max: 100,\n      gauge_startingAngle: -1 * Math.PI / 2,\n      gauge_label_extents: undefined,\n      gauge_units: undefined,\n      gauge_width: undefined,\n      gauge_arcs_minWidth: 5,\n      gauge_expand: {},\n      gauge_expand_duration: 50,\n      // donut\n      donut_label_show: true,\n      donut_label_format: undefined,\n      donut_label_threshold: 0.05,\n      donut_label_ratio: undefined,\n      donut_width: undefined,\n      donut_title: '',\n      donut_expand: {},\n      donut_expand_duration: 50,\n      donut_padAngle: 0,\n      // spline\n      spline_interpolation_type: 'cardinal',\n      // stanford\n      stanford_lines: [],\n      stanford_regions: [],\n      stanford_texts: [],\n      stanford_scaleMin: undefined,\n      stanford_scaleMax: undefined,\n      stanford_scaleWidth: undefined,\n      stanford_scaleFormat: undefined,\n      stanford_scaleValues: undefined,\n      stanford_colors: undefined,\n      stanford_padding: {\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0\n      },\n      // region - region to change style\n      regions: [],\n      // tooltip - show when mouseover on each data\n      tooltip_show: true,\n      tooltip_grouped: true,\n      tooltip_order: undefined,\n      tooltip_format_title: undefined,\n      tooltip_format_name: undefined,\n      tooltip_format_value: undefined,\n      tooltip_horizontal: undefined,\n      tooltip_position: undefined,\n      tooltip_contents: function tooltip_contents(d, defaultTitleFormat, defaultValueFormat, color) {\n        return this.getTooltipContent ? this.getTooltipContent(d, defaultTitleFormat, defaultValueFormat, color) : '';\n      },\n      tooltip_init_show: false,\n      tooltip_init_x: 0,\n      tooltip_init_position: {\n        top: '0px',\n        left: '50px'\n      },\n      tooltip_onshow: function tooltip_onshow() {},\n      tooltip_onhide: function tooltip_onhide() {},\n      // title\n      title_text: undefined,\n      title_padding: {\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0\n      },\n      title_position: 'top-center'\n    };\n    Object.keys(this.additionalConfig).forEach(function (key) {\n      config[key] = this.additionalConfig[key];\n    }, this);\n    return config;\n  };\n\n  ChartInternal.prototype.additionalConfig = {};\n\n  ChartInternal.prototype.loadConfig = function (config) {\n    var this_config = this.config,\n        target,\n        keys,\n        read;\n\n    function find() {\n      var key = keys.shift(); //        console.log(\"key =>\", key, \", target =>\", target);\n\n      if (key && target && _typeof(target) === 'object' && key in target) {\n        target = target[key];\n        return find();\n      } else if (!key) {\n        return target;\n      } else {\n        return undefined;\n      }\n    }\n\n    Object.keys(this_config).forEach(function (key) {\n      target = config;\n      keys = key.split('_');\n      read = find(); //        console.log(\"CONFIG : \", key, read);\n\n      if (isDefined(read)) {\n        this_config[key] = read;\n      }\n    });\n  };\n\n  ChartInternal.prototype.convertUrlToData = function (url, mimeType, headers, keys, done) {\n    var $$ = this,\n        type = mimeType ? mimeType : 'csv',\n        f,\n        converter;\n\n    if (type === 'json') {\n      f = $$.d3.json;\n      converter = $$.convertJsonToData;\n    } else if (type === 'tsv') {\n      f = $$.d3.tsv;\n      converter = $$.convertXsvToData;\n    } else {\n      f = $$.d3.csv;\n      converter = $$.convertXsvToData;\n    }\n\n    f(url, headers).then(function (data) {\n      done.call($$, converter.call($$, data, keys));\n    })[\"catch\"](function (error) {\n      throw error;\n    });\n  };\n\n  ChartInternal.prototype.convertXsvToData = function (xsv) {\n    var keys = xsv.columns,\n        rows = xsv;\n\n    if (rows.length === 0) {\n      return {\n        keys: keys,\n        rows: [keys.reduce(function (row, key) {\n          return Object.assign(row, _defineProperty({}, key, null));\n        }, {})]\n      };\n    } else {\n      // [].concat() is to convert result into a plain array otherwise\n      // test is not happy because rows have properties.\n      return {\n        keys: keys,\n        rows: [].concat(xsv)\n      };\n    }\n  };\n\n  ChartInternal.prototype.convertJsonToData = function (json, keys) {\n    var $$ = this,\n        new_rows = [],\n        targetKeys,\n        data;\n\n    if (keys) {\n      // when keys specified, json would be an array that includes objects\n      if (keys.x) {\n        targetKeys = keys.value.concat(keys.x);\n        $$.config.data_x = keys.x;\n      } else {\n        targetKeys = keys.value;\n      }\n\n      new_rows.push(targetKeys);\n      json.forEach(function (o) {\n        var new_row = [];\n        targetKeys.forEach(function (key) {\n          // convert undefined to null because undefined data will be removed in convertDataToTargets()\n          var v = $$.findValueInJson(o, key);\n\n          if (isUndefined(v)) {\n            v = null;\n          }\n\n          new_row.push(v);\n        });\n        new_rows.push(new_row);\n      });\n      data = $$.convertRowsToData(new_rows);\n    } else {\n      Object.keys(json).forEach(function (key) {\n        new_rows.push([key].concat(json[key]));\n      });\n      data = $$.convertColumnsToData(new_rows);\n    }\n\n    return data;\n  };\n  /**\n   * Finds value from the given nested object by the given path.\n   * If it's not found, then this returns undefined.\n   * @param {Object} object the object\n   * @param {string} path the path\n   */\n\n\n  ChartInternal.prototype.findValueInJson = function (object, path) {\n    if (path in object) {\n      // If object has a key that contains . or [], return the key's value\n      // instead of searching for an inner object.\n      // See https://github.com/c3js/c3/issues/1691 for details.\n      return object[path];\n    }\n\n    path = path.replace(/\\[(\\w+)\\]/g, '.$1'); // convert indexes to properties (replace [] with .)\n\n    path = path.replace(/^\\./, ''); // strip a leading dot\n\n    var pathArray = path.split('.');\n\n    for (var i = 0; i < pathArray.length; ++i) {\n      var k = pathArray[i];\n\n      if (k in object) {\n        object = object[k];\n      } else {\n        return;\n      }\n    }\n\n    return object;\n  };\n  /**\n   * Converts the rows to normalized data.\n   * @param {any[][]} rows The row data\n   * @return {Object}\n   */\n\n\n  ChartInternal.prototype.convertRowsToData = function (rows) {\n    var newRows = [];\n    var keys = rows[0];\n\n    for (var i = 1; i < rows.length; i++) {\n      var newRow = {};\n\n      for (var j = 0; j < rows[i].length; j++) {\n        if (isUndefined(rows[i][j])) {\n          throw new Error('Source data is missing a component at (' + i + ',' + j + ')!');\n        }\n\n        newRow[keys[j]] = rows[i][j];\n      }\n\n      newRows.push(newRow);\n    }\n\n    return {\n      keys: keys,\n      rows: newRows\n    };\n  };\n  /**\n   * Converts the columns to normalized data.\n   * @param {any[][]} columns The column data\n   * @return {Object}\n   */\n\n\n  ChartInternal.prototype.convertColumnsToData = function (columns) {\n    var newRows = [];\n    var keys = [];\n\n    for (var i = 0; i < columns.length; i++) {\n      var key = columns[i][0];\n\n      for (var j = 1; j < columns[i].length; j++) {\n        if (isUndefined(newRows[j - 1])) {\n          newRows[j - 1] = {};\n        }\n\n        if (isUndefined(columns[i][j])) {\n          throw new Error('Source data is missing a component at (' + i + ',' + j + ')!');\n        }\n\n        newRows[j - 1][key] = columns[i][j];\n      }\n\n      keys.push(key);\n    }\n\n    return {\n      keys: keys,\n      rows: newRows\n    };\n  };\n  /**\n   * Converts the data format into the target format.\n   * @param {!Object} data\n   * @param {!Array} data.keys Ordered list of target IDs.\n   * @param {!Array} data.rows Rows of data to convert.\n   * @param {boolean} appendXs True to append to $$.data.xs, False to replace.\n   * @return {!Array}\n   */\n\n\n  ChartInternal.prototype.convertDataToTargets = function (data, appendXs) {\n    var $$ = this,\n        config = $$.config,\n        targets,\n        ids,\n        xs,\n        keys,\n        epochs; // handles format where keys are not orderly provided\n\n    if (isArray(data)) {\n      keys = Object.keys(data[0]);\n    } else {\n      keys = data.keys;\n      data = data.rows;\n    }\n\n    xs = keys.filter($$.isX, $$);\n\n    if (!$$.isStanfordGraphType()) {\n      ids = keys.filter($$.isNotX, $$);\n    } else {\n      epochs = keys.filter($$.isEpochs, $$);\n      ids = keys.filter($$.isNotXAndNotEpochs, $$);\n\n      if (xs.length !== 1 || epochs.length !== 1 || ids.length !== 1) {\n        throw new Error(\"You must define the 'x' key name and the 'epochs' for Stanford Diagrams\");\n      }\n    } // save x for update data by load when custom x and c3.x API\n\n\n    ids.forEach(function (id) {\n      var xKey = $$.getXKey(id);\n\n      if ($$.isCustomX() || $$.isTimeSeries()) {\n        // if included in input data\n        if (xs.indexOf(xKey) >= 0) {\n          $$.data.xs[id] = (appendXs && $$.data.xs[id] ? $$.data.xs[id] : []).concat(data.map(function (d) {\n            return d[xKey];\n          }).filter(isValue).map(function (rawX, i) {\n            return $$.generateTargetX(rawX, id, i);\n          }));\n        } // if not included in input data, find from preloaded data of other id's x\n        else if (config.data_x) {\n            $$.data.xs[id] = $$.getOtherTargetXs();\n          } // if not included in input data, find from preloaded data\n          else if (notEmpty(config.data_xs)) {\n              $$.data.xs[id] = $$.getXValuesOfXKey(xKey, $$.data.targets);\n            } // MEMO: if no x included, use same x of current will be used\n\n      } else {\n        $$.data.xs[id] = data.map(function (d, i) {\n          return i;\n        });\n      }\n    }); // check x is defined\n\n    ids.forEach(function (id) {\n      if (!$$.data.xs[id]) {\n        throw new Error('x is not defined for id = \"' + id + '\".');\n      }\n    }); // convert to target\n\n    targets = ids.map(function (id, index) {\n      var convertedId = config.data_idConverter(id);\n      return {\n        id: convertedId,\n        id_org: id,\n        values: data.map(function (d, i) {\n          var xKey = $$.getXKey(id),\n              rawX = d[xKey],\n              value = d[id] !== null && !isNaN(d[id]) ? +d[id] : null,\n              x,\n              returnData; // use x as categories if custom x and categorized\n\n          if ($$.isCustomX() && $$.isCategorized() && !isUndefined(rawX)) {\n            if (index === 0 && i === 0) {\n              config.axis_x_categories = [];\n            }\n\n            x = config.axis_x_categories.indexOf(rawX);\n\n            if (x === -1) {\n              x = config.axis_x_categories.length;\n              config.axis_x_categories.push(rawX);\n            }\n          } else {\n            x = $$.generateTargetX(rawX, id, i);\n          } // mark as x = undefined if value is undefined and filter to remove after mapped\n\n\n          if (isUndefined(d[id]) || $$.data.xs[id].length <= i) {\n            x = undefined;\n          }\n\n          returnData = {\n            x: x,\n            value: value,\n            id: convertedId\n          };\n\n          if ($$.isStanfordGraphType()) {\n            returnData.epochs = d[epochs];\n          }\n\n          return returnData;\n        }).filter(function (v) {\n          return isDefined(v.x);\n        })\n      };\n    }); // finish targets\n\n    targets.forEach(function (t) {\n      var i; // sort values by its x\n\n      if (config.data_xSort) {\n        t.values = t.values.sort(function (v1, v2) {\n          var x1 = v1.x || v1.x === 0 ? v1.x : Infinity,\n              x2 = v2.x || v2.x === 0 ? v2.x : Infinity;\n          return x1 - x2;\n        });\n      } // indexing each value\n\n\n      i = 0;\n      t.values.forEach(function (v) {\n        v.index = i++;\n      }); // this needs to be sorted because its index and value.index is identical\n\n      $$.data.xs[t.id].sort(function (v1, v2) {\n        return v1 - v2;\n      });\n    }); // cache information about values\n\n    $$.hasNegativeValue = $$.hasNegativeValueInTargets(targets);\n    $$.hasPositiveValue = $$.hasPositiveValueInTargets(targets); // set target types\n\n    if (config.data_type) {\n      $$.setTargetType($$.mapToIds(targets).filter(function (id) {\n        return !(id in config.data_types);\n      }), config.data_type);\n    } // cache as original id keyed\n\n\n    targets.forEach(function (d) {\n      $$.addCache(d.id_org, d);\n    });\n    return targets;\n  };\n\n  ChartInternal.prototype.isEpochs = function (key) {\n    var $$ = this,\n        config = $$.config;\n    return config.data_epochs && key === config.data_epochs;\n  };\n\n  ChartInternal.prototype.isX = function (key) {\n    var $$ = this,\n        config = $$.config;\n    return config.data_x && key === config.data_x || notEmpty(config.data_xs) && hasValue(config.data_xs, key);\n  };\n\n  ChartInternal.prototype.isNotX = function (key) {\n    return !this.isX(key);\n  };\n\n  ChartInternal.prototype.isNotXAndNotEpochs = function (key) {\n    return !this.isX(key) && !this.isEpochs(key);\n  };\n  /**\n   * Returns whether the normalized stack option is enabled or not.\n   *\n   * To be enabled it must also have data.groups defined.\n   *\n   * @return {boolean}\n   */\n\n\n  ChartInternal.prototype.isStackNormalized = function () {\n    return this.config.data_stack_normalize && this.config.data_groups.length > 0;\n  };\n  /**\n   * Returns whether the axis is normalized or not.\n   *\n   * An axis is normalized as long as one of its associated target\n   * is normalized.\n   *\n   * @param axisId Axis ID (y or y2)\n   * @return {Boolean}\n   */\n\n\n  ChartInternal.prototype.isAxisNormalized = function (axisId) {\n    var $$ = this;\n\n    if (!$$.isStackNormalized()) {\n      // shortcut\n      return false;\n    }\n\n    return $$.data.targets.filter(function (target) {\n      return $$.axis.getId(target.id) === axisId;\n    }).some(function (target) {\n      return $$.isTargetNormalized(target.id);\n    });\n  };\n  /**\n   * Returns whether the values for this target ID is normalized or not.\n   *\n   * To be normalized the option needs to be enabled and target needs\n   * to be defined in `data.groups`.\n   *\n   * @param targetId ID of the target\n   * @return {Boolean} True if the target is normalized, false otherwise.\n   */\n\n\n  ChartInternal.prototype.isTargetNormalized = function (targetId) {\n    var $$ = this;\n    return $$.isStackNormalized() && $$.config.data_groups.some(function (group) {\n      return group.includes(targetId);\n    });\n  };\n\n  ChartInternal.prototype.getXKey = function (id) {\n    var $$ = this,\n        config = $$.config;\n    return config.data_x ? config.data_x : notEmpty(config.data_xs) ? config.data_xs[id] : null;\n  };\n  /**\n   * Get sum of visible data per index for given axis.\n   *\n   * Expect axisId to be either 'y' or 'y2'.\n   *\n   * @private\n   * @param axisId Compute sum for data associated to given axis.\n   * @return {Array}\n   */\n\n\n  ChartInternal.prototype.getTotalPerIndex = function (axisId) {\n    var $$ = this;\n\n    if (!$$.isStackNormalized()) {\n      return null;\n    }\n\n    var cached = $$.getFromCache('getTotalPerIndex');\n\n    if (cached !== undefined) {\n      return cached[axisId];\n    }\n\n    var sum = {\n      y: [],\n      y2: []\n    };\n    $$.data.targets // keep only target that are normalized\n    .filter(function (target) {\n      return $$.isTargetNormalized(target.id);\n    }) // keep only target that are visible\n    .filter(function (target) {\n      return $$.isTargetToShow(target.id);\n    }) // compute sum per axis\n    .forEach(function (target) {\n      var sumByAxis = sum[$$.axis.getId(target.id)];\n      target.values.forEach(function (v, i) {\n        if (!sumByAxis[i]) {\n          sumByAxis[i] = 0;\n        }\n\n        sumByAxis[i] += isNumber(v.value) ? v.value : 0;\n      });\n    });\n    $$.addToCache('getTotalPerIndex', sum);\n    return sum[axisId];\n  };\n  /**\n   * Get sum of visible data.\n   *\n   * Should be used for normalised data only since all values\n   * are expected to be positive.\n   *\n   * @private\n   * @return {Number}\n   */\n\n\n  ChartInternal.prototype.getTotalDataSum = function () {\n    var $$ = this;\n    var cached = $$.getFromCache('getTotalDataSum');\n\n    if (cached !== undefined) {\n      return cached;\n    }\n\n    var totalDataSum = flattenArray($$.data.targets.filter(function (target) {\n      return $$.isTargetToShow(target.id);\n    }).map(function (target) {\n      return target.values;\n    })).map(function (d) {\n      return d.value;\n    }).reduce(function (p, c) {\n      return p + c;\n    }, 0);\n    $$.addToCache('getTotalDataSum', totalDataSum);\n    return totalDataSum;\n  };\n\n  ChartInternal.prototype.getXValuesOfXKey = function (key, targets) {\n    var $$ = this,\n        xValues,\n        ids = targets && notEmpty(targets) ? $$.mapToIds(targets) : [];\n    ids.forEach(function (id) {\n      if ($$.getXKey(id) === key) {\n        xValues = $$.data.xs[id];\n      }\n    });\n    return xValues;\n  };\n\n  ChartInternal.prototype.getXValue = function (id, i) {\n    var $$ = this;\n    return id in $$.data.xs && $$.data.xs[id] && isValue($$.data.xs[id][i]) ? $$.data.xs[id][i] : i;\n  };\n\n  ChartInternal.prototype.getOtherTargetXs = function () {\n    var $$ = this,\n        idsForX = Object.keys($$.data.xs);\n    return idsForX.length ? $$.data.xs[idsForX[0]] : null;\n  };\n\n  ChartInternal.prototype.getOtherTargetX = function (index) {\n    var xs = this.getOtherTargetXs();\n    return xs && index < xs.length ? xs[index] : null;\n  };\n\n  ChartInternal.prototype.addXs = function (xs) {\n    var $$ = this;\n    Object.keys(xs).forEach(function (id) {\n      $$.config.data_xs[id] = xs[id];\n    });\n  };\n\n  ChartInternal.prototype.addName = function (data) {\n    var $$ = this,\n        name;\n\n    if (data) {\n      name = $$.config.data_names[data.id];\n      data.name = name !== undefined ? name : data.id;\n    }\n\n    return data;\n  };\n\n  ChartInternal.prototype.getValueOnIndex = function (values, index) {\n    var valueOnIndex = values.filter(function (v) {\n      return v.index === index;\n    });\n    return valueOnIndex.length ? valueOnIndex[0] : null;\n  };\n\n  ChartInternal.prototype.updateTargetX = function (targets, x) {\n    var $$ = this;\n    targets.forEach(function (t) {\n      t.values.forEach(function (v, i) {\n        v.x = $$.generateTargetX(x[i], t.id, i);\n      });\n      $$.data.xs[t.id] = x;\n    });\n  };\n\n  ChartInternal.prototype.updateTargetXs = function (targets, xs) {\n    var $$ = this;\n    targets.forEach(function (t) {\n      if (xs[t.id]) {\n        $$.updateTargetX([t], xs[t.id]);\n      }\n    });\n  };\n\n  ChartInternal.prototype.generateTargetX = function (rawX, id, index) {\n    var $$ = this,\n        x;\n\n    if ($$.isTimeSeries()) {\n      x = rawX ? $$.parseDate(rawX) : $$.parseDate($$.getXValue(id, index));\n    } else if ($$.isCustomX() && !$$.isCategorized()) {\n      x = isValue(rawX) ? +rawX : $$.getXValue(id, index);\n    } else {\n      x = index;\n    }\n\n    return x;\n  };\n\n  ChartInternal.prototype.cloneTarget = function (target) {\n    return {\n      id: target.id,\n      id_org: target.id_org,\n      values: target.values.map(function (d) {\n        return {\n          x: d.x,\n          value: d.value,\n          id: d.id\n        };\n      })\n    };\n  };\n\n  ChartInternal.prototype.getMaxDataCount = function () {\n    var $$ = this;\n    return $$.d3.max($$.data.targets, function (t) {\n      return t.values.length;\n    });\n  };\n\n  ChartInternal.prototype.mapToIds = function (targets) {\n    return targets.map(function (d) {\n      return d.id;\n    });\n  };\n\n  ChartInternal.prototype.mapToTargetIds = function (ids) {\n    var $$ = this;\n    return ids ? [].concat(ids) : $$.mapToIds($$.data.targets);\n  };\n\n  ChartInternal.prototype.hasTarget = function (targets, id) {\n    var ids = this.mapToIds(targets),\n        i;\n\n    for (i = 0; i < ids.length; i++) {\n      if (ids[i] === id) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  ChartInternal.prototype.isTargetToShow = function (targetId) {\n    return this.hiddenTargetIds.indexOf(targetId) < 0;\n  };\n\n  ChartInternal.prototype.isLegendToShow = function (targetId) {\n    return this.hiddenLegendIds.indexOf(targetId) < 0;\n  };\n  /**\n   * Returns only visible targets.\n   *\n   * This is the same as calling {@link filterTargetsToShow} on $$.data.targets.\n   *\n   * @return {Array}\n   */\n\n\n  ChartInternal.prototype.getTargetsToShow = function () {\n    var $$ = this;\n    return $$.filterTargetsToShow($$.data.targets);\n  };\n\n  ChartInternal.prototype.filterTargetsToShow = function (targets) {\n    var $$ = this;\n    return targets.filter(function (t) {\n      return $$.isTargetToShow(t.id);\n    });\n  };\n  /**\n   * @return {Array} Returns all the targets attached to the chart, visible or not\n   */\n\n\n  ChartInternal.prototype.getTargets = function () {\n    var $$ = this;\n    return $$.data.targets;\n  };\n\n  ChartInternal.prototype.mapTargetsToUniqueXs = function (targets) {\n    var $$ = this;\n    var xs = $$.d3.set($$.d3.merge(targets.map(function (t) {\n      return t.values.map(function (v) {\n        return +v.x;\n      });\n    }))).values();\n    xs = $$.isTimeSeries() ? xs.map(function (x) {\n      return new Date(+x);\n    }) : xs.map(function (x) {\n      return +x;\n    });\n    return xs.sort(function (a, b) {\n      return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n    });\n  };\n\n  ChartInternal.prototype.addHiddenTargetIds = function (targetIds) {\n    targetIds = targetIds instanceof Array ? targetIds : new Array(targetIds);\n\n    for (var i = 0; i < targetIds.length; i++) {\n      if (this.hiddenTargetIds.indexOf(targetIds[i]) < 0) {\n        this.hiddenTargetIds = this.hiddenTargetIds.concat(targetIds[i]);\n      }\n    }\n\n    this.resetCache();\n  };\n\n  ChartInternal.prototype.removeHiddenTargetIds = function (targetIds) {\n    this.hiddenTargetIds = this.hiddenTargetIds.filter(function (id) {\n      return targetIds.indexOf(id) < 0;\n    });\n    this.resetCache();\n  };\n\n  ChartInternal.prototype.addHiddenLegendIds = function (targetIds) {\n    targetIds = targetIds instanceof Array ? targetIds : new Array(targetIds);\n\n    for (var i = 0; i < targetIds.length; i++) {\n      if (this.hiddenLegendIds.indexOf(targetIds[i]) < 0) {\n        this.hiddenLegendIds = this.hiddenLegendIds.concat(targetIds[i]);\n      }\n    }\n  };\n\n  ChartInternal.prototype.removeHiddenLegendIds = function (targetIds) {\n    this.hiddenLegendIds = this.hiddenLegendIds.filter(function (id) {\n      return targetIds.indexOf(id) < 0;\n    });\n  };\n\n  ChartInternal.prototype.getValuesAsIdKeyed = function (targets) {\n    var ys = {};\n    targets.forEach(function (t) {\n      ys[t.id] = [];\n      t.values.forEach(function (v) {\n        ys[t.id].push(v.value);\n      });\n    });\n    return ys;\n  };\n\n  ChartInternal.prototype.checkValueInTargets = function (targets, checker) {\n    var ids = Object.keys(targets),\n        i,\n        j,\n        values;\n\n    for (i = 0; i < ids.length; i++) {\n      values = targets[ids[i]].values;\n\n      for (j = 0; j < values.length; j++) {\n        if (checker(values[j].value)) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  };\n\n  ChartInternal.prototype.hasNegativeValueInTargets = function (targets) {\n    return this.checkValueInTargets(targets, function (v) {\n      return v < 0;\n    });\n  };\n\n  ChartInternal.prototype.hasPositiveValueInTargets = function (targets) {\n    return this.checkValueInTargets(targets, function (v) {\n      return v > 0;\n    });\n  };\n\n  ChartInternal.prototype.isOrderDesc = function () {\n    var config = this.config;\n    return typeof config.data_order === 'string' && config.data_order.toLowerCase() === 'desc';\n  };\n\n  ChartInternal.prototype.isOrderAsc = function () {\n    var config = this.config;\n    return typeof config.data_order === 'string' && config.data_order.toLowerCase() === 'asc';\n  };\n\n  ChartInternal.prototype.getOrderFunction = function () {\n    var $$ = this,\n        config = $$.config,\n        orderAsc = $$.isOrderAsc(),\n        orderDesc = $$.isOrderDesc();\n\n    if (orderAsc || orderDesc) {\n      var reducer = function reducer(p, c) {\n        return p + Math.abs(c.value);\n      };\n\n      return function (t1, t2) {\n        var t1Sum = t1.values.reduce(reducer, 0),\n            t2Sum = t2.values.reduce(reducer, 0);\n        return orderAsc ? t2Sum - t1Sum : t1Sum - t2Sum;\n      };\n    } else if (isFunction(config.data_order)) {\n      return config.data_order;\n    } else if (isArray(config.data_order)) {\n      var order = config.data_order;\n      return function (t1, t2) {\n        return order.indexOf(t1.id) - order.indexOf(t2.id);\n      };\n    }\n  };\n\n  ChartInternal.prototype.orderTargets = function (targets) {\n    var fct = this.getOrderFunction();\n\n    if (fct) {\n      targets.sort(fct);\n    }\n\n    return targets;\n  };\n  /**\n   * Returns all the values from the given targets at the given index.\n   *\n   * @param {Array} targets\n   * @param {Number} index\n   * @return {Array}\n   */\n\n\n  ChartInternal.prototype.filterByIndex = function (targets, index) {\n    return this.d3.merge(targets.map(function (t) {\n      return t.values.filter(function (v) {\n        return v.index === index;\n      });\n    }));\n  };\n\n  ChartInternal.prototype.filterByX = function (targets, x) {\n    return this.d3.merge(targets.map(function (t) {\n      return t.values;\n    })).filter(function (v) {\n      return v.x - x === 0;\n    });\n  };\n\n  ChartInternal.prototype.filterRemoveNull = function (data) {\n    return data.filter(function (d) {\n      return isValue(d.value);\n    });\n  };\n\n  ChartInternal.prototype.filterByXDomain = function (targets, xDomain) {\n    return targets.map(function (t) {\n      return {\n        id: t.id,\n        id_org: t.id_org,\n        values: t.values.filter(function (v) {\n          return xDomain[0] <= v.x && v.x <= xDomain[1];\n        })\n      };\n    });\n  };\n\n  ChartInternal.prototype.hasDataLabel = function () {\n    var config = this.config;\n\n    if (typeof config.data_labels === 'boolean' && config.data_labels) {\n      return true;\n    } else if (_typeof(config.data_labels) === 'object' && notEmpty(config.data_labels)) {\n      return true;\n    }\n\n    return false;\n  };\n\n  ChartInternal.prototype.getDataLabelLength = function (min, max, key) {\n    var $$ = this,\n        lengths = [0, 0],\n        paddingCoef = 1.3;\n    $$.selectChart.select('svg').selectAll('.dummy').data([min, max]).enter().append('text').text(function (d) {\n      return $$.dataLabelFormat(d.id)(d);\n    }).each(function (d, i) {\n      lengths[i] = getBBox(this)[key] * paddingCoef;\n    }).remove();\n    return lengths;\n  };\n  /**\n   * Returns true if the given data point is not arc type, otherwise false.\n   * @param {Object} d The data point\n   * @return {boolean}\n   */\n\n\n  ChartInternal.prototype.isNoneArc = function (d) {\n    return this.hasTarget(this.data.targets, d.id);\n  };\n  /**\n   * Returns true if the given data point is arc type, otherwise false.\n   * @param {Object} d The data point\n   * @return {boolean}\n   */\n\n\n  ChartInternal.prototype.isArc = function (d) {\n    return 'data' in d && this.hasTarget(this.data.targets, d.data.id);\n  };\n  /**\n   * Find the closest point from the given pos among the given targets or\n   * undefined if none satisfies conditions.\n   *\n   * @param {Array} targets\n   * @param {Array} pos An [x,y] coordinate\n   * @return {Object|undefined}\n   */\n\n\n  ChartInternal.prototype.findClosestFromTargets = function (targets, pos) {\n    var $$ = this; // for each target, find the closest point\n\n    var candidates = targets.map(function (t) {\n      return $$.findClosest(t.values, pos, $$.config.tooltip_horizontal ? $$.horizontalDistance.bind($$) : $$.dist.bind($$), $$.config.point_sensitivity);\n    }).filter(function (v) {\n      return v;\n    }); // returns the closest of candidates\n\n    if (candidates.length === 0) {\n      return undefined;\n    } else if (candidates.length === 1) {\n      return candidates[0];\n    } else {\n      return $$.findClosest(candidates, pos, $$.dist.bind($$));\n    }\n  };\n  /**\n   * Find the closest point from the x value or undefined if none satisfies conditions.\n   *\n   * @param {Array} targets\n   * @param {Array} x A value on X axis\n   * @return {Object|undefined}\n   */\n\n\n  ChartInternal.prototype.findClosestFromTargetsByX = function (targets, x) {\n    var closest;\n    var diff;\n    targets.forEach(function (t) {\n      t.values.forEach(function (d) {\n        var newDiff = Math.abs(x - d.x);\n\n        if (diff === undefined || newDiff < diff) {\n          closest = d;\n          diff = newDiff;\n        }\n      });\n    });\n    return closest;\n  };\n  /**\n   * Using given compute distance method, returns the closest data point from the\n   * given position.\n   *\n   * Giving optionally a minimum distance to satisfy.\n   *\n   * @param {Array} dataPoints List of DataPoints\n   * @param {Array} pos An [x,y] coordinate\n   * @param {Function} computeDist Function to compute distance between 2 points\n   * @param {Number} minDist Minimal distance to satisfy\n   * @return {Object|undefined} Closest data point\n   */\n\n\n  ChartInternal.prototype.findClosest = function (dataPoints, pos, computeDist) {\n    var minDist = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : Infinity;\n    var $$ = this;\n    var closest; // find closest bar\n\n    dataPoints.filter(function (v) {\n      return v && $$.isBarType(v.id);\n    }).forEach(function (v) {\n      if (!closest) {\n        var shape = $$.main.select('.' + CLASS.bars + $$.getTargetSelectorSuffix(v.id) + ' .' + CLASS.bar + '-' + v.index).node();\n\n        if ($$.isWithinBar(pos, shape)) {\n          closest = v;\n        }\n      }\n    }); // find closest point from non-bar\n\n    dataPoints.filter(function (v) {\n      return v && !$$.isBarType(v.id);\n    }).forEach(function (v) {\n      var d = computeDist(v, pos);\n\n      if (d < minDist) {\n        minDist = d;\n        closest = v;\n      }\n    });\n    return closest;\n  };\n\n  ChartInternal.prototype.dist = function (data, pos) {\n    var $$ = this,\n        config = $$.config,\n        xIndex = config.axis_rotated ? 1 : 0,\n        yIndex = config.axis_rotated ? 0 : 1,\n        y = $$.circleY(data, data.index),\n        x = $$.x(data.x);\n    return Math.sqrt(Math.pow(x - pos[xIndex], 2) + Math.pow(y - pos[yIndex], 2));\n  };\n\n  ChartInternal.prototype.horizontalDistance = function (data, pos) {\n    var $$ = this,\n        config = $$.config,\n        xIndex = config.axis_rotated ? 1 : 0,\n        x = $$.x(data.x);\n    return Math.abs(x - pos[xIndex]);\n  };\n\n  ChartInternal.prototype.convertValuesToStep = function (values) {\n    var converted = [].concat(values),\n        i;\n\n    if (!this.isCategorized()) {\n      return values;\n    }\n\n    for (i = values.length + 1; 0 < i; i--) {\n      converted[i] = converted[i - 1];\n    }\n\n    converted[0] = {\n      x: converted[0].x - 1,\n      value: converted[0].value,\n      id: converted[0].id\n    };\n    converted[values.length + 1] = {\n      x: converted[values.length].x + 1,\n      value: converted[values.length].value,\n      id: converted[values.length].id\n    };\n    return converted;\n  };\n  /**\n   * Get ratio value\n   *\n   * @param {String} type Ratio for given type\n   * @param {Object} d Data value object\n   * @param {Boolean} asPercent Convert the return as percent or not\n   * @return {Number} Ratio value\n   * @private\n   */\n\n\n  ChartInternal.prototype.getRatio = function (type, d) {\n    var asPercent = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    var $$ = this;\n    var api = $$.api;\n    var ratio = 0;\n\n    if (d && api.data.shown.call(api).length) {\n      ratio = d.ratio || d.value;\n\n      if (type === 'arc') {\n        if ($$.hasType('gauge')) {\n          ratio = (d.endAngle - d.startAngle) / (Math.PI * ($$.config.gauge_fullCircle ? 2 : 1));\n        } else {\n          var total = $$.getTotalDataSum();\n          ratio = d.value / total;\n        }\n      } else if (type === 'index') {\n        var _total = $$.getTotalPerIndex($$.axis.getId(d.id));\n\n        d.ratio = isNumber(d.value) && _total && _total[d.index] > 0 ? d.value / _total[d.index] : 0;\n        ratio = d.ratio;\n      }\n    }\n\n    return asPercent && ratio ? ratio * 100 : ratio;\n  };\n\n  ChartInternal.prototype.updateDataAttributes = function (name, attrs) {\n    var $$ = this,\n        config = $$.config,\n        current = config['data_' + name];\n\n    if (typeof attrs === 'undefined') {\n      return current;\n    }\n\n    Object.keys(attrs).forEach(function (id) {\n      current[id] = attrs[id];\n    });\n    $$.redraw({\n      withLegend: true\n    });\n    return current;\n  };\n\n  ChartInternal.prototype.load = function (targets, args) {\n    var $$ = this;\n\n    if (targets) {\n      // filter loading targets if needed\n      if (args.filter) {\n        targets = targets.filter(args.filter);\n      } // set type if args.types || args.type specified\n\n\n      if (args.type || args.types) {\n        targets.forEach(function (t) {\n          var type = args.types && args.types[t.id] ? args.types[t.id] : args.type;\n          $$.setTargetType(t.id, type);\n        });\n      } // Update/Add data\n\n\n      $$.data.targets.forEach(function (d) {\n        for (var i = 0; i < targets.length; i++) {\n          if (d.id === targets[i].id) {\n            d.values = targets[i].values;\n            targets.splice(i, 1);\n            break;\n          }\n        }\n      });\n      $$.data.targets = $$.data.targets.concat(targets); // add remained\n    } // Set targets\n\n\n    $$.updateTargets($$.data.targets); // Redraw with new targets\n\n    $$.redraw({\n      withUpdateOrgXDomain: true,\n      withUpdateXDomain: true,\n      withLegend: true\n    });\n\n    if (args.done) {\n      args.done();\n    }\n  };\n\n  ChartInternal.prototype.loadFromArgs = function (args) {\n    var $$ = this;\n    $$.resetCache();\n\n    if (args.data) {\n      $$.load($$.convertDataToTargets(args.data), args);\n    } else if (args.url) {\n      $$.convertUrlToData(args.url, args.mimeType, args.headers, args.keys, function (data) {\n        $$.load($$.convertDataToTargets(data), args);\n      });\n    } else if (args.json) {\n      $$.load($$.convertDataToTargets($$.convertJsonToData(args.json, args.keys)), args);\n    } else if (args.rows) {\n      $$.load($$.convertDataToTargets($$.convertRowsToData(args.rows)), args);\n    } else if (args.columns) {\n      $$.load($$.convertDataToTargets($$.convertColumnsToData(args.columns)), args);\n    } else {\n      $$.load(null, args);\n    }\n  };\n\n  ChartInternal.prototype.unload = function (targetIds, done) {\n    var $$ = this;\n    $$.resetCache();\n\n    if (!done) {\n      done = function done() {};\n    } // filter existing target\n\n\n    targetIds = targetIds.filter(function (id) {\n      return $$.hasTarget($$.data.targets, id);\n    }); // If no target, call done and return\n\n    if (!targetIds || targetIds.length === 0) {\n      done();\n      return;\n    }\n\n    $$.svg.selectAll(targetIds.map(function (id) {\n      return $$.selectorTarget(id);\n    })).transition().style('opacity', 0).remove().call($$.endall, done);\n    targetIds.forEach(function (id) {\n      // Reset fadein for future load\n      $$.withoutFadeIn[id] = false; // Remove target's elements\n\n      if ($$.legend) {\n        $$.legend.selectAll('.' + CLASS.legendItem + $$.getTargetSelectorSuffix(id)).remove();\n      } // Remove target\n\n\n      $$.data.targets = $$.data.targets.filter(function (t) {\n        return t.id !== id;\n      });\n    });\n  };\n\n  ChartInternal.prototype.getYDomainMin = function (targets) {\n    var $$ = this,\n        config = $$.config,\n        ids = $$.mapToIds(targets),\n        ys = $$.getValuesAsIdKeyed(targets),\n        j,\n        k,\n        baseId,\n        idsInGroup,\n        id,\n        hasNegativeValue;\n\n    if (config.data_groups.length > 0) {\n      hasNegativeValue = $$.hasNegativeValueInTargets(targets);\n\n      for (j = 0; j < config.data_groups.length; j++) {\n        // Determine baseId\n        idsInGroup = config.data_groups[j].filter(function (id) {\n          return ids.indexOf(id) >= 0;\n        });\n\n        if (idsInGroup.length === 0) {\n          continue;\n        }\n\n        baseId = idsInGroup[0]; // Consider negative values\n\n        if (hasNegativeValue && ys[baseId]) {\n          ys[baseId].forEach(function (v, i) {\n            ys[baseId][i] = v < 0 ? v : 0;\n          });\n        } // Compute min\n\n\n        for (k = 1; k < idsInGroup.length; k++) {\n          id = idsInGroup[k];\n\n          if (!ys[id]) {\n            continue;\n          }\n\n          ys[id].forEach(function (v, i) {\n            if ($$.axis.getId(id) === $$.axis.getId(baseId) && ys[baseId] && !(hasNegativeValue && +v > 0)) {\n              ys[baseId][i] += +v;\n            }\n          });\n        }\n      }\n    }\n\n    return $$.d3.min(Object.keys(ys).map(function (key) {\n      return $$.d3.min(ys[key]);\n    }));\n  };\n\n  ChartInternal.prototype.getYDomainMax = function (targets) {\n    var $$ = this,\n        config = $$.config,\n        ids = $$.mapToIds(targets),\n        ys = $$.getValuesAsIdKeyed(targets),\n        j,\n        k,\n        baseId,\n        idsInGroup,\n        id,\n        hasPositiveValue;\n\n    if (config.data_groups.length > 0) {\n      hasPositiveValue = $$.hasPositiveValueInTargets(targets);\n\n      for (j = 0; j < config.data_groups.length; j++) {\n        // Determine baseId\n        idsInGroup = config.data_groups[j].filter(function (id) {\n          return ids.indexOf(id) >= 0;\n        });\n\n        if (idsInGroup.length === 0) {\n          continue;\n        }\n\n        baseId = idsInGroup[0]; // Consider positive values\n\n        if (hasPositiveValue && ys[baseId]) {\n          ys[baseId].forEach(function (v, i) {\n            ys[baseId][i] = v > 0 ? v : 0;\n          });\n        } // Compute max\n\n\n        for (k = 1; k < idsInGroup.length; k++) {\n          id = idsInGroup[k];\n\n          if (!ys[id]) {\n            continue;\n          }\n\n          ys[id].forEach(function (v, i) {\n            if ($$.axis.getId(id) === $$.axis.getId(baseId) && ys[baseId] && !(hasPositiveValue && +v < 0)) {\n              ys[baseId][i] += +v;\n            }\n          });\n        }\n      }\n    }\n\n    return $$.d3.max(Object.keys(ys).map(function (key) {\n      return $$.d3.max(ys[key]);\n    }));\n  };\n\n  ChartInternal.prototype.getYDomain = function (targets, axisId, xDomain) {\n    var $$ = this,\n        config = $$.config;\n\n    if ($$.isAxisNormalized(axisId)) {\n      return [0, 100];\n    }\n\n    var targetsByAxisId = targets.filter(function (t) {\n      return $$.axis.getId(t.id) === axisId;\n    }),\n        yTargets = xDomain ? $$.filterByXDomain(targetsByAxisId, xDomain) : targetsByAxisId,\n        yMin = axisId === 'y2' ? config.axis_y2_min : config.axis_y_min,\n        yMax = axisId === 'y2' ? config.axis_y2_max : config.axis_y_max,\n        yDomainMin = $$.getYDomainMin(yTargets),\n        yDomainMax = $$.getYDomainMax(yTargets),\n        domain,\n        domainLength,\n        padding_top,\n        padding_bottom,\n        center = axisId === 'y2' ? config.axis_y2_center : config.axis_y_center,\n        yDomainAbs,\n        lengths,\n        diff,\n        ratio,\n        isAllPositive,\n        isAllNegative,\n        isZeroBased = $$.hasType('bar', yTargets) && config.bar_zerobased || $$.hasType('area', yTargets) && config.area_zerobased,\n        isInverted = axisId === 'y2' ? config.axis_y2_inverted : config.axis_y_inverted,\n        showHorizontalDataLabel = $$.hasDataLabel() && config.axis_rotated,\n        showVerticalDataLabel = $$.hasDataLabel() && !config.axis_rotated; // MEMO: avoid inverting domain unexpectedly\n\n    yDomainMin = isValue(yMin) ? yMin : isValue(yMax) ? yDomainMin < yMax ? yDomainMin : yMax - 10 : yDomainMin;\n    yDomainMax = isValue(yMax) ? yMax : isValue(yMin) ? yMin < yDomainMax ? yDomainMax : yMin + 10 : yDomainMax;\n\n    if (yTargets.length === 0) {\n      // use current domain if target of axisId is none\n      return axisId === 'y2' ? $$.y2.domain() : $$.y.domain();\n    }\n\n    if (isNaN(yDomainMin)) {\n      // set minimum to zero when not number\n      yDomainMin = 0;\n    }\n\n    if (isNaN(yDomainMax)) {\n      // set maximum to have same value as yDomainMin\n      yDomainMax = yDomainMin;\n    }\n\n    if (yDomainMin === yDomainMax) {\n      yDomainMin < 0 ? yDomainMax = 0 : yDomainMin = 0;\n    }\n\n    isAllPositive = yDomainMin >= 0 && yDomainMax >= 0;\n    isAllNegative = yDomainMin <= 0 && yDomainMax <= 0; // Cancel zerobased if axis_*_min / axis_*_max specified\n\n    if (isValue(yMin) && isAllPositive || isValue(yMax) && isAllNegative) {\n      isZeroBased = false;\n    } // Bar/Area chart should be 0-based if all positive|negative\n\n\n    if (isZeroBased) {\n      if (isAllPositive) {\n        yDomainMin = 0;\n      }\n\n      if (isAllNegative) {\n        yDomainMax = 0;\n      }\n    }\n\n    domainLength = Math.abs(yDomainMax - yDomainMin);\n    padding_top = padding_bottom = domainLength * 0.1;\n\n    if (typeof center !== 'undefined') {\n      yDomainAbs = Math.max(Math.abs(yDomainMin), Math.abs(yDomainMax));\n      yDomainMax = center + yDomainAbs;\n      yDomainMin = center - yDomainAbs;\n    } // add padding for data label\n\n\n    if (showHorizontalDataLabel) {\n      lengths = $$.getDataLabelLength(yDomainMin, yDomainMax, 'width');\n      diff = diffDomain($$.y.range());\n      ratio = [lengths[0] / diff, lengths[1] / diff];\n      padding_top += domainLength * (ratio[1] / (1 - ratio[0] - ratio[1]));\n      padding_bottom += domainLength * (ratio[0] / (1 - ratio[0] - ratio[1]));\n    } else if (showVerticalDataLabel) {\n      lengths = $$.getDataLabelLength(yDomainMin, yDomainMax, 'height');\n      var pixelsToAxisPadding = $$.getY(config[\"axis_\".concat(axisId, \"_type\")], // input domain as pixels\n      [0, config.axis_rotated ? $$.width : $$.height], // output range as axis padding\n      [0, domainLength]);\n      padding_top += pixelsToAxisPadding(lengths[1]);\n      padding_bottom += pixelsToAxisPadding(lengths[0]);\n    }\n\n    if (axisId === 'y' && notEmpty(config.axis_y_padding)) {\n      padding_top = $$.axis.getPadding(config.axis_y_padding, 'top', padding_top, domainLength);\n      padding_bottom = $$.axis.getPadding(config.axis_y_padding, 'bottom', padding_bottom, domainLength);\n    }\n\n    if (axisId === 'y2' && notEmpty(config.axis_y2_padding)) {\n      padding_top = $$.axis.getPadding(config.axis_y2_padding, 'top', padding_top, domainLength);\n      padding_bottom = $$.axis.getPadding(config.axis_y2_padding, 'bottom', padding_bottom, domainLength);\n    } // Bar/Area chart should be 0-based if all positive|negative\n\n\n    if (isZeroBased) {\n      if (isAllPositive) {\n        padding_bottom = yDomainMin;\n      }\n\n      if (isAllNegative) {\n        padding_top = -yDomainMax;\n      }\n    }\n\n    domain = [yDomainMin - padding_bottom, yDomainMax + padding_top];\n    return isInverted ? domain.reverse() : domain;\n  };\n\n  ChartInternal.prototype.getXDomainMin = function (targets) {\n    var $$ = this,\n        config = $$.config;\n    return isDefined(config.axis_x_min) ? $$.isTimeSeries() ? this.parseDate(config.axis_x_min) : config.axis_x_min : $$.d3.min(targets, function (t) {\n      return $$.d3.min(t.values, function (v) {\n        return v.x;\n      });\n    });\n  };\n\n  ChartInternal.prototype.getXDomainMax = function (targets) {\n    var $$ = this,\n        config = $$.config;\n    return isDefined(config.axis_x_max) ? $$.isTimeSeries() ? this.parseDate(config.axis_x_max) : config.axis_x_max : $$.d3.max(targets, function (t) {\n      return $$.d3.max(t.values, function (v) {\n        return v.x;\n      });\n    });\n  };\n\n  ChartInternal.prototype.getXDomainPadding = function (domain) {\n    var $$ = this,\n        config = $$.config,\n        diff = domain[1] - domain[0],\n        maxDataCount,\n        padding,\n        paddingLeft,\n        paddingRight;\n\n    if ($$.isCategorized()) {\n      padding = 0;\n    } else if ($$.hasType('bar')) {\n      maxDataCount = $$.getMaxDataCount();\n      padding = maxDataCount > 1 ? diff / (maxDataCount - 1) / 2 : 0.5;\n    } else {\n      padding = diff * 0.01;\n    }\n\n    if (_typeof(config.axis_x_padding) === 'object' && notEmpty(config.axis_x_padding)) {\n      paddingLeft = isValue(config.axis_x_padding.left) ? config.axis_x_padding.left : padding;\n      paddingRight = isValue(config.axis_x_padding.right) ? config.axis_x_padding.right : padding;\n    } else if (typeof config.axis_x_padding === 'number') {\n      paddingLeft = paddingRight = config.axis_x_padding;\n    } else {\n      paddingLeft = paddingRight = padding;\n    }\n\n    return {\n      left: paddingLeft,\n      right: paddingRight\n    };\n  };\n\n  ChartInternal.prototype.getXDomain = function (targets) {\n    var $$ = this,\n        xDomain = [$$.getXDomainMin(targets), $$.getXDomainMax(targets)],\n        firstX = xDomain[0],\n        lastX = xDomain[1],\n        padding = $$.getXDomainPadding(xDomain),\n        min = 0,\n        max = 0; // show center of x domain if min and max are the same\n\n    if (firstX - lastX === 0 && !$$.isCategorized()) {\n      if ($$.isTimeSeries()) {\n        firstX = new Date(firstX.getTime() * 0.5);\n        lastX = new Date(lastX.getTime() * 1.5);\n      } else {\n        firstX = firstX === 0 ? 1 : firstX * 0.5;\n        lastX = lastX === 0 ? -1 : lastX * 1.5;\n      }\n    }\n\n    if (firstX || firstX === 0) {\n      min = $$.isTimeSeries() ? new Date(firstX.getTime() - padding.left) : firstX - padding.left;\n    }\n\n    if (lastX || lastX === 0) {\n      max = $$.isTimeSeries() ? new Date(lastX.getTime() + padding.right) : lastX + padding.right;\n    }\n\n    return [min, max];\n  };\n\n  ChartInternal.prototype.updateXDomain = function (targets, withUpdateXDomain, withUpdateOrgXDomain, withTrim, domain) {\n    var $$ = this,\n        config = $$.config;\n\n    if (withUpdateOrgXDomain) {\n      $$.x.domain(domain ? domain : $$.d3.extent($$.getXDomain(targets)));\n      $$.orgXDomain = $$.x.domain();\n\n      if (config.zoom_enabled) {\n        $$.zoom.update();\n      }\n\n      $$.subX.domain($$.x.domain());\n\n      if ($$.brush) {\n        $$.brush.updateScale($$.subX);\n      }\n    }\n\n    if (withUpdateXDomain) {\n      $$.x.domain(domain ? domain : !$$.brush || $$.brush.empty() ? $$.orgXDomain : $$.brush.selectionAsValue());\n    } // Trim domain when too big by zoom mousemove event\n\n\n    if (withTrim) {\n      $$.x.domain($$.trimXDomain($$.x.orgDomain()));\n    }\n\n    return $$.x.domain();\n  };\n\n  ChartInternal.prototype.trimXDomain = function (domain) {\n    var zoomDomain = this.getZoomDomain(),\n        min = zoomDomain[0],\n        max = zoomDomain[1];\n\n    if (domain[0] <= min) {\n      domain[1] = +domain[1] + (min - domain[0]);\n      domain[0] = min;\n    }\n\n    if (max <= domain[1]) {\n      domain[0] = +domain[0] - (domain[1] - max);\n      domain[1] = max;\n    }\n\n    return domain;\n  };\n\n  ChartInternal.prototype.drag = function (mouse) {\n    var $$ = this,\n        config = $$.config,\n        main = $$.main,\n        d3 = $$.d3;\n    var sx, sy, mx, my, minX, maxX, minY, maxY;\n\n    if ($$.hasArcType()) {\n      return;\n    }\n\n    if (!config.data_selection_enabled) {\n      return;\n    } // do nothing if not selectable\n\n\n    if (!config.data_selection_multiple) {\n      return;\n    } // skip when single selection because drag is used for multiple selection\n\n\n    sx = $$.dragStart[0];\n    sy = $$.dragStart[1];\n    mx = mouse[0];\n    my = mouse[1];\n    minX = Math.min(sx, mx);\n    maxX = Math.max(sx, mx);\n    minY = config.data_selection_grouped ? $$.margin.top : Math.min(sy, my);\n    maxY = config.data_selection_grouped ? $$.height : Math.max(sy, my);\n    main.select('.' + CLASS.dragarea).attr('x', minX).attr('y', minY).attr('width', maxX - minX).attr('height', maxY - minY); // TODO: binary search when multiple xs\n\n    main.selectAll('.' + CLASS.shapes).selectAll('.' + CLASS.shape).each(function (d, i) {\n      if (!config.data_selection_isselectable(d)) {\n        return;\n      }\n\n      var shape = d3.select(this),\n          isSelected = shape.classed(CLASS.SELECTED),\n          isIncluded = shape.classed(CLASS.INCLUDED),\n          _x,\n          _y,\n          _w,\n          _h,\n          toggle,\n          isWithin = false,\n          box;\n\n      if (shape.classed(CLASS.circle)) {\n        _x = shape.attr('cx') * 1;\n        _y = shape.attr('cy') * 1;\n        toggle = $$.togglePoint;\n        isWithin = minX < _x && _x < maxX && minY < _y && _y < maxY;\n      } else if (shape.classed(CLASS.bar)) {\n        box = getPathBox(this);\n        _x = box.x;\n        _y = box.y;\n        _w = box.width;\n        _h = box.height;\n        toggle = $$.togglePath;\n        isWithin = !(maxX < _x || _x + _w < minX) && !(maxY < _y || _y + _h < minY);\n      } else {\n        // line/area selection not supported yet\n        return;\n      }\n\n      if (isWithin ^ isIncluded) {\n        shape.classed(CLASS.INCLUDED, !isIncluded); // TODO: included/unincluded callback here\n\n        shape.classed(CLASS.SELECTED, !isSelected);\n        toggle.call($$, !isSelected, shape, d, i);\n      }\n    });\n  };\n\n  ChartInternal.prototype.dragstart = function (mouse) {\n    var $$ = this,\n        config = $$.config;\n\n    if ($$.hasArcType()) {\n      return;\n    }\n\n    if (!config.data_selection_enabled) {\n      return;\n    } // do nothing if not selectable\n\n\n    $$.dragStart = mouse;\n    $$.main.select('.' + CLASS.chart).append('rect').attr('class', CLASS.dragarea).style('opacity', 0.1);\n    $$.dragging = true;\n  };\n\n  ChartInternal.prototype.dragend = function () {\n    var $$ = this,\n        config = $$.config;\n\n    if ($$.hasArcType()) {\n      return;\n    }\n\n    if (!config.data_selection_enabled) {\n      return;\n    } // do nothing if not selectable\n\n\n    $$.main.select('.' + CLASS.dragarea).transition().duration(100).style('opacity', 0).remove();\n    $$.main.selectAll('.' + CLASS.shape).classed(CLASS.INCLUDED, false);\n    $$.dragging = false;\n  };\n\n  ChartInternal.prototype.getYFormat = function (forArc) {\n    var $$ = this,\n        formatForY = forArc && !$$.hasType('gauge') ? $$.defaultArcValueFormat : $$.yFormat,\n        formatForY2 = forArc && !$$.hasType('gauge') ? $$.defaultArcValueFormat : $$.y2Format;\n    return function (v, ratio, id) {\n      var format = $$.axis.getId(id) === 'y2' ? formatForY2 : formatForY;\n      return format.call($$, v, ratio);\n    };\n  };\n\n  ChartInternal.prototype.yFormat = function (v) {\n    var $$ = this,\n        config = $$.config,\n        format = config.axis_y_tick_format ? config.axis_y_tick_format : $$.defaultValueFormat;\n    return format(v);\n  };\n\n  ChartInternal.prototype.y2Format = function (v) {\n    var $$ = this,\n        config = $$.config,\n        format = config.axis_y2_tick_format ? config.axis_y2_tick_format : $$.defaultValueFormat;\n    return format(v);\n  };\n\n  ChartInternal.prototype.defaultValueFormat = function (v) {\n    return isValue(v) ? +v : '';\n  };\n\n  ChartInternal.prototype.defaultArcValueFormat = function (v, ratio) {\n    return (ratio * 100).toFixed(1) + '%';\n  };\n\n  ChartInternal.prototype.dataLabelFormat = function (targetId) {\n    var $$ = this,\n        data_labels = $$.config.data_labels,\n        format,\n        defaultFormat = function defaultFormat(v) {\n      return isValue(v) ? +v : '';\n    }; // find format according to axis id\n\n\n    if (typeof data_labels.format === 'function') {\n      format = data_labels.format;\n    } else if (_typeof(data_labels.format) === 'object') {\n      if (data_labels.format[targetId]) {\n        format = data_labels.format[targetId] === true ? defaultFormat : data_labels.format[targetId];\n      } else {\n        format = function format() {\n          return '';\n        };\n      }\n    } else {\n      format = defaultFormat;\n    }\n\n    return format;\n  };\n\n  ChartInternal.prototype.initGrid = function () {\n    var $$ = this,\n        config = $$.config,\n        d3 = $$.d3;\n    $$.grid = $$.main.append('g').attr('clip-path', $$.clipPathForGrid).attr('class', CLASS.grid);\n\n    if (config.grid_x_show) {\n      $$.grid.append('g').attr('class', CLASS.xgrids);\n    }\n\n    if (config.grid_y_show) {\n      $$.grid.append('g').attr('class', CLASS.ygrids);\n    }\n\n    if (config.grid_focus_show) {\n      $$.grid.append('g').attr('class', CLASS.xgridFocus).append('line').attr('class', CLASS.xgridFocus);\n    }\n\n    $$.xgrid = d3.selectAll([]);\n\n    if (!config.grid_lines_front) {\n      $$.initGridLines();\n    }\n  };\n\n  ChartInternal.prototype.initGridLines = function () {\n    var $$ = this,\n        d3 = $$.d3;\n    $$.gridLines = $$.main.append('g').attr('clip-path', $$.clipPathForGrid).attr('class', CLASS.grid + ' ' + CLASS.gridLines);\n    $$.gridLines.append('g').attr('class', CLASS.xgridLines);\n    $$.gridLines.append('g').attr('class', CLASS.ygridLines);\n    $$.xgridLines = d3.selectAll([]);\n  };\n\n  ChartInternal.prototype.updateXGrid = function (withoutUpdate) {\n    var $$ = this,\n        config = $$.config,\n        d3 = $$.d3,\n        xgridData = $$.generateGridData(config.grid_x_type, $$.x),\n        tickOffset = $$.isCategorized() ? $$.xAxis.tickOffset() : 0;\n    $$.xgridAttr = config.axis_rotated ? {\n      x1: 0,\n      x2: $$.width,\n      y1: function y1(d) {\n        return $$.x(d) - tickOffset;\n      },\n      y2: function y2(d) {\n        return $$.x(d) - tickOffset;\n      }\n    } : {\n      x1: function x1(d) {\n        return $$.x(d) + tickOffset;\n      },\n      x2: function x2(d) {\n        return $$.x(d) + tickOffset;\n      },\n      y1: 0,\n      y2: $$.height\n    };\n\n    $$.xgridAttr.opacity = function () {\n      var pos = +d3.select(this).attr(config.axis_rotated ? 'y1' : 'x1');\n      return pos === (config.axis_rotated ? $$.height : 0) ? 0 : 1;\n    };\n\n    var xgrid = $$.main.select('.' + CLASS.xgrids).selectAll('.' + CLASS.xgrid).data(xgridData);\n    var xgridEnter = xgrid.enter().append('line').attr('class', CLASS.xgrid).attr('x1', $$.xgridAttr.x1).attr('x2', $$.xgridAttr.x2).attr('y1', $$.xgridAttr.y1).attr('y2', $$.xgridAttr.y2).style('opacity', 0);\n    $$.xgrid = xgridEnter.merge(xgrid);\n\n    if (!withoutUpdate) {\n      $$.xgrid.attr('x1', $$.xgridAttr.x1).attr('x2', $$.xgridAttr.x2).attr('y1', $$.xgridAttr.y1).attr('y2', $$.xgridAttr.y2).style('opacity', $$.xgridAttr.opacity);\n    }\n\n    xgrid.exit().remove();\n  };\n\n  ChartInternal.prototype.updateYGrid = function () {\n    var $$ = this,\n        config = $$.config,\n        gridValues = $$.yAxis.tickValues() || $$.y.ticks(config.grid_y_ticks);\n    var ygrid = $$.main.select('.' + CLASS.ygrids).selectAll('.' + CLASS.ygrid).data(gridValues);\n    var ygridEnter = ygrid.enter().append('line') // TODO: x1, x2, y1, y2, opacity need to be set here maybe\n    .attr('class', CLASS.ygrid);\n    $$.ygrid = ygridEnter.merge(ygrid);\n    $$.ygrid.attr('x1', config.axis_rotated ? $$.y : 0).attr('x2', config.axis_rotated ? $$.y : $$.width).attr('y1', config.axis_rotated ? 0 : $$.y).attr('y2', config.axis_rotated ? $$.height : $$.y);\n    ygrid.exit().remove();\n    $$.smoothLines($$.ygrid, 'grid');\n  };\n\n  ChartInternal.prototype.gridTextAnchor = function (d) {\n    return d.position ? d.position : 'end';\n  };\n\n  ChartInternal.prototype.gridTextDx = function (d) {\n    return d.position === 'start' ? 4 : d.position === 'middle' ? 0 : -4;\n  };\n\n  ChartInternal.prototype.xGridTextX = function (d) {\n    return d.position === 'start' ? -this.height : d.position === 'middle' ? -this.height / 2 : 0;\n  };\n\n  ChartInternal.prototype.yGridTextX = function (d) {\n    return d.position === 'start' ? 0 : d.position === 'middle' ? this.width / 2 : this.width;\n  };\n\n  ChartInternal.prototype.updateGrid = function (duration) {\n    var $$ = this,\n        main = $$.main,\n        config = $$.config,\n        xgridLine,\n        xgridLineEnter,\n        ygridLine,\n        ygridLineEnter,\n        xv = $$.xv.bind($$),\n        yv = $$.yv.bind($$),\n        xGridTextX = $$.xGridTextX.bind($$),\n        yGridTextX = $$.yGridTextX.bind($$); // hide if arc type\n\n    $$.grid.style('visibility', $$.hasArcType() ? 'hidden' : 'visible');\n    main.select('line.' + CLASS.xgridFocus).style('visibility', 'hidden');\n\n    if (config.grid_x_show) {\n      $$.updateXGrid();\n    }\n\n    xgridLine = main.select('.' + CLASS.xgridLines).selectAll('.' + CLASS.xgridLine).data(config.grid_x_lines); // enter\n\n    xgridLineEnter = xgridLine.enter().append('g').attr('class', function (d) {\n      return CLASS.xgridLine + (d['class'] ? ' ' + d['class'] : '');\n    });\n    xgridLineEnter.append('line').attr('x1', config.axis_rotated ? 0 : xv).attr('x2', config.axis_rotated ? $$.width : xv).attr('y1', config.axis_rotated ? xv : 0).attr('y2', config.axis_rotated ? xv : $$.height).style('opacity', 0);\n    xgridLineEnter.append('text').attr('text-anchor', $$.gridTextAnchor).attr('transform', config.axis_rotated ? '' : 'rotate(-90)').attr('x', config.axis_rotated ? yGridTextX : xGridTextX).attr('y', xv).attr('dx', $$.gridTextDx).attr('dy', -5).style('opacity', 0); // udpate\n\n    $$.xgridLines = xgridLineEnter.merge(xgridLine); // done in d3.transition() of the end of this function\n    // exit\n\n    xgridLine.exit().transition().duration(duration).style('opacity', 0).remove(); // Y-Grid\n\n    if (config.grid_y_show) {\n      $$.updateYGrid();\n    }\n\n    ygridLine = main.select('.' + CLASS.ygridLines).selectAll('.' + CLASS.ygridLine).data(config.grid_y_lines); // enter\n\n    ygridLineEnter = ygridLine.enter().append('g').attr('class', function (d) {\n      return CLASS.ygridLine + (d['class'] ? ' ' + d['class'] : '');\n    });\n    ygridLineEnter.append('line').attr('x1', config.axis_rotated ? yv : 0).attr('x2', config.axis_rotated ? yv : $$.width).attr('y1', config.axis_rotated ? 0 : yv).attr('y2', config.axis_rotated ? $$.height : yv).style('opacity', 0);\n    ygridLineEnter.append('text').attr('text-anchor', $$.gridTextAnchor).attr('transform', config.axis_rotated ? 'rotate(-90)' : '').attr('x', config.axis_rotated ? xGridTextX : yGridTextX).attr('y', yv).attr('dx', $$.gridTextDx).attr('dy', -5).style('opacity', 0); // update\n\n    $$.ygridLines = ygridLineEnter.merge(ygridLine);\n    $$.ygridLines.select('line').transition().duration(duration).attr('x1', config.axis_rotated ? yv : 0).attr('x2', config.axis_rotated ? yv : $$.width).attr('y1', config.axis_rotated ? 0 : yv).attr('y2', config.axis_rotated ? $$.height : yv).style('opacity', 1);\n    $$.ygridLines.select('text').transition().duration(duration).attr('x', config.axis_rotated ? $$.xGridTextX.bind($$) : $$.yGridTextX.bind($$)).attr('y', yv).text(function (d) {\n      return d.text;\n    }).style('opacity', 1); // exit\n\n    ygridLine.exit().transition().duration(duration).style('opacity', 0).remove();\n  };\n\n  ChartInternal.prototype.redrawGrid = function (withTransition, transition) {\n    var $$ = this,\n        config = $$.config,\n        xv = $$.xv.bind($$),\n        lines = $$.xgridLines.select('line'),\n        texts = $$.xgridLines.select('text');\n    return [(withTransition ? lines.transition(transition) : lines).attr('x1', config.axis_rotated ? 0 : xv).attr('x2', config.axis_rotated ? $$.width : xv).attr('y1', config.axis_rotated ? xv : 0).attr('y2', config.axis_rotated ? xv : $$.height).style('opacity', 1), (withTransition ? texts.transition(transition) : texts).attr('x', config.axis_rotated ? $$.yGridTextX.bind($$) : $$.xGridTextX.bind($$)).attr('y', xv).text(function (d) {\n      return d.text;\n    }).style('opacity', 1)];\n  };\n\n  ChartInternal.prototype.showXGridFocus = function (selectedData) {\n    var $$ = this,\n        config = $$.config,\n        dataToShow = selectedData.filter(function (d) {\n      return d && isValue(d.value);\n    }),\n        focusEl = $$.main.selectAll('line.' + CLASS.xgridFocus),\n        xx = $$.xx.bind($$);\n\n    if (!config.tooltip_show) {\n      return;\n    } // Hide when stanford plot exists\n\n\n    if ($$.hasType('stanford') || $$.hasArcType()) {\n      return;\n    }\n\n    focusEl.style('visibility', 'visible').data([dataToShow[0]]).attr(config.axis_rotated ? 'y1' : 'x1', xx).attr(config.axis_rotated ? 'y2' : 'x2', xx);\n    $$.smoothLines(focusEl, 'grid');\n  };\n\n  ChartInternal.prototype.hideXGridFocus = function () {\n    this.main.select('line.' + CLASS.xgridFocus).style('visibility', 'hidden');\n  };\n\n  ChartInternal.prototype.updateXgridFocus = function () {\n    var $$ = this,\n        config = $$.config;\n    $$.main.select('line.' + CLASS.xgridFocus).attr('x1', config.axis_rotated ? 0 : -10).attr('x2', config.axis_rotated ? $$.width : -10).attr('y1', config.axis_rotated ? -10 : 0).attr('y2', config.axis_rotated ? -10 : $$.height);\n  };\n\n  ChartInternal.prototype.generateGridData = function (type, scale) {\n    var $$ = this,\n        gridData = [],\n        xDomain,\n        firstYear,\n        lastYear,\n        i,\n        tickNum = $$.main.select('.' + CLASS.axisX).selectAll('.tick').size();\n\n    if (type === 'year') {\n      xDomain = $$.getXDomain();\n      firstYear = xDomain[0].getFullYear();\n      lastYear = xDomain[1].getFullYear();\n\n      for (i = firstYear; i <= lastYear; i++) {\n        gridData.push(new Date(i + '-01-01 00:00:00'));\n      }\n    } else {\n      gridData = scale.ticks(10);\n\n      if (gridData.length > tickNum) {\n        // use only int\n        gridData = gridData.filter(function (d) {\n          return ('' + d).indexOf('.') < 0;\n        });\n      }\n    }\n\n    return gridData;\n  };\n\n  ChartInternal.prototype.getGridFilterToRemove = function (params) {\n    return params ? function (line) {\n      var found = false;\n      [].concat(params).forEach(function (param) {\n        if ('value' in param && line.value === param.value || 'class' in param && line['class'] === param['class']) {\n          found = true;\n        }\n      });\n      return found;\n    } : function () {\n      return true;\n    };\n  };\n\n  ChartInternal.prototype.removeGridLines = function (params, forX) {\n    var $$ = this,\n        config = $$.config,\n        toRemove = $$.getGridFilterToRemove(params),\n        toShow = function toShow(line) {\n      return !toRemove(line);\n    },\n        classLines = forX ? CLASS.xgridLines : CLASS.ygridLines,\n        classLine = forX ? CLASS.xgridLine : CLASS.ygridLine;\n\n    $$.main.select('.' + classLines).selectAll('.' + classLine).filter(toRemove).transition().duration(config.transition_duration).style('opacity', 0).remove();\n\n    if (forX) {\n      config.grid_x_lines = config.grid_x_lines.filter(toShow);\n    } else {\n      config.grid_y_lines = config.grid_y_lines.filter(toShow);\n    }\n  };\n\n  ChartInternal.prototype.initEventRect = function () {\n    var $$ = this,\n        config = $$.config;\n    $$.main.select('.' + CLASS.chart).append('g').attr('class', CLASS.eventRects).style('fill-opacity', 0);\n    $$.eventRect = $$.main.select('.' + CLASS.eventRects).append('rect').attr('class', CLASS.eventRect); // event rect handle zoom event as well\n\n    if (config.zoom_enabled && $$.zoom) {\n      $$.eventRect.call($$.zoom).on('dblclick.zoom', null);\n\n      if (config.zoom_initialRange) {\n        // WORKAROUND: Add transition to apply transform immediately when no subchart\n        $$.eventRect.transition().duration(0).call($$.zoom.transform, $$.zoomTransform(config.zoom_initialRange));\n      }\n    }\n  };\n\n  ChartInternal.prototype.redrawEventRect = function () {\n    var $$ = this,\n        d3 = $$.d3,\n        config = $$.config;\n\n    function mouseout() {\n      $$.svg.select('.' + CLASS.eventRect).style('cursor', null);\n      $$.hideXGridFocus();\n      $$.hideTooltip();\n      $$.unexpandCircles();\n      $$.unexpandBars();\n    }\n\n    var isHoveringDataPoint = function isHoveringDataPoint(mouse, closest) {\n      return closest && ($$.isBarType(closest.id) || $$.dist(closest, mouse) < config.point_sensitivity);\n    };\n\n    var withName = function withName(d) {\n      return d ? $$.addName(Object.assign({}, d)) : null;\n    }; // rects for mouseover\n\n\n    $$.main.select('.' + CLASS.eventRects).style('cursor', config.zoom_enabled ? config.axis_rotated ? 'ns-resize' : 'ew-resize' : null);\n    $$.eventRect.attr('x', 0).attr('y', 0).attr('width', $$.width).attr('height', $$.height).on('mouseout', config.interaction_enabled ? function () {\n      if (!config) {\n        return;\n      } // chart is destroyed\n\n\n      if ($$.hasArcType()) {\n        return;\n      }\n\n      if ($$.mouseover) {\n        config.data_onmouseout.call($$.api, $$.mouseover);\n        $$.mouseover = undefined;\n      }\n\n      mouseout();\n    } : null).on('mousemove', config.interaction_enabled ? function () {\n      // do nothing when dragging\n      if ($$.dragging) {\n        return;\n      }\n\n      var targetsToShow = $$.getTargetsToShow(); // do nothing if arc type\n\n      if ($$.hasArcType(targetsToShow)) {\n        return;\n      }\n\n      var mouse = d3.mouse(this);\n      var closest = withName($$.findClosestFromTargets(targetsToShow, mouse));\n      var isMouseCloseToDataPoint = isHoveringDataPoint(mouse, closest); // ensure onmouseout is always called if mousemove switch between 2 targets\n\n      if ($$.mouseover && (!closest || closest.id !== $$.mouseover.id || closest.index !== $$.mouseover.index)) {\n        config.data_onmouseout.call($$.api, $$.mouseover);\n        $$.mouseover = undefined;\n      }\n\n      if (closest && !$$.mouseover) {\n        config.data_onmouseover.call($$.api, closest);\n        $$.mouseover = closest;\n      } // show cursor as pointer if we're hovering a data point close enough\n\n\n      $$.svg.select('.' + CLASS.eventRect).style('cursor', isMouseCloseToDataPoint ? 'pointer' : null); // if tooltip not grouped, we want to display only data from closest data point\n\n      var showSingleDataPoint = !config.tooltip_grouped || $$.hasType('stanford', targetsToShow); // find data to highlight\n\n      var selectedData;\n\n      if (showSingleDataPoint) {\n        if (closest) {\n          selectedData = [closest];\n        }\n      } else {\n        var closestByX;\n\n        if (closest) {\n          // reuse closest value\n          closestByX = closest;\n        } else {\n          // try to find the closest value by X values from the mouse position\n          var mouseX = config.axis_rotated ? mouse[1] : mouse[0];\n          closestByX = $$.findClosestFromTargetsByX(targetsToShow, $$.x.invert(mouseX));\n        } // highlight all data for this 'x' value\n\n\n        if (closestByX) {\n          selectedData = $$.filterByX(targetsToShow, closestByX.x);\n        }\n      } // ensure we have data to show\n\n\n      if (!selectedData || selectedData.length === 0) {\n        return mouseout();\n      } // inject names for each point\n\n\n      selectedData = selectedData.map(withName); // show tooltip\n\n      $$.showTooltip(selectedData, this); // expand points\n\n      if (config.point_focus_expand_enabled) {\n        $$.unexpandCircles();\n        selectedData.forEach(function (d) {\n          $$.expandCircles(d.index, d.id, false);\n        });\n      } // expand bars\n\n\n      $$.unexpandBars();\n      selectedData.forEach(function (d) {\n        $$.expandBars(d.index, d.id, false);\n      }); // Show xgrid focus line\n\n      $$.showXGridFocus(selectedData);\n    } : null).on('click', config.interaction_enabled ? function () {\n      var targetsToShow = $$.getTargetsToShow();\n\n      if ($$.hasArcType(targetsToShow)) {\n        return;\n      }\n\n      var mouse = d3.mouse(this);\n      var closest = withName($$.findClosestFromTargets(targetsToShow, mouse));\n\n      if (!isHoveringDataPoint(mouse, closest)) {\n        return;\n      } // select if selection enabled\n\n\n      var sameXData;\n\n      if (!config.data_selection_grouped || $$.isStanfordType(closest)) {\n        sameXData = [closest];\n      } else {\n        sameXData = $$.filterByX(targetsToShow, closest.x);\n      } // toggle selected state\n\n\n      sameXData.forEach(function (d) {\n        $$.main.selectAll('.' + CLASS.shapes + $$.getTargetSelectorSuffix(d.id)).selectAll('.' + CLASS.shape + '-' + d.index).each(function () {\n          if (config.data_selection_grouped || $$.isWithinShape(this, d)) {\n            $$.toggleShape(this, d, d.index);\n          }\n        });\n      }); // call data_onclick on the closest data point\n\n      if (closest) {\n        var shape = $$.main.selectAll('.' + CLASS.shapes + $$.getTargetSelectorSuffix(closest.id)).select('.' + CLASS.shape + '-' + closest.index);\n        config.data_onclick.call($$.api, closest, shape.node());\n      }\n    } : null).call(config.interaction_enabled && config.data_selection_draggable && $$.drag ? d3.drag().on('drag', function () {\n      $$.drag(d3.mouse(this));\n    }).on('start', function () {\n      $$.dragstart(d3.mouse(this));\n    }).on('end', function () {\n      $$.dragend();\n    }) : function () {});\n  };\n\n  ChartInternal.prototype.getMousePosition = function (data) {\n    var $$ = this;\n    return [$$.x(data.x), $$.getYScale(data.id)(data.value)];\n  };\n\n  ChartInternal.prototype.dispatchEvent = function (type, mouse) {\n    var $$ = this,\n        selector = '.' + CLASS.eventRect,\n        eventRect = $$.main.select(selector).node(),\n        box = eventRect.getBoundingClientRect(),\n        x = box.left + (mouse ? mouse[0] : 0),\n        y = box.top + (mouse ? mouse[1] : 0),\n        event = document.createEvent('MouseEvents');\n    event.initMouseEvent(type, true, true, window, 0, x, y, x, y, false, false, false, false, 0, null);\n    eventRect.dispatchEvent(event);\n  };\n\n  ChartInternal.prototype.initLegend = function () {\n    var $$ = this;\n    $$.legendItemTextBox = {};\n    $$.legendHasRendered = false;\n    $$.legend = $$.svg.append('g').attr('transform', $$.getTranslate('legend'));\n\n    if (!$$.config.legend_show) {\n      $$.legend.style('visibility', 'hidden');\n      $$.hiddenLegendIds = $$.mapToIds($$.data.targets);\n      return;\n    } // MEMO: call here to update legend box and tranlate for all\n    // MEMO: translate will be updated by this, so transform not needed in updateLegend()\n\n\n    $$.updateLegendWithDefaults();\n  };\n\n  ChartInternal.prototype.updateLegendWithDefaults = function () {\n    var $$ = this;\n    $$.updateLegend($$.mapToIds($$.data.targets), {\n      withTransform: false,\n      withTransitionForTransform: false,\n      withTransition: false\n    });\n  };\n\n  ChartInternal.prototype.updateSizeForLegend = function (legendHeight, legendWidth) {\n    var $$ = this,\n        config = $$.config,\n        insetLegendPosition = {\n      top: $$.isLegendTop ? $$.getCurrentPaddingTop() + config.legend_inset_y + 5.5 : $$.currentHeight - legendHeight - $$.getCurrentPaddingBottom() - config.legend_inset_y,\n      left: $$.isLegendLeft ? $$.getCurrentPaddingLeft() + config.legend_inset_x + 0.5 : $$.currentWidth - legendWidth - $$.getCurrentPaddingRight() - config.legend_inset_x + 0.5\n    };\n    $$.margin3 = {\n      top: $$.isLegendRight ? 0 : $$.isLegendInset ? insetLegendPosition.top : $$.currentHeight - legendHeight,\n      right: NaN,\n      bottom: 0,\n      left: $$.isLegendRight ? $$.currentWidth - legendWidth : $$.isLegendInset ? insetLegendPosition.left : 0\n    };\n  };\n\n  ChartInternal.prototype.transformLegend = function (withTransition) {\n    var $$ = this;\n    (withTransition ? $$.legend.transition() : $$.legend).attr('transform', $$.getTranslate('legend'));\n  };\n\n  ChartInternal.prototype.updateLegendStep = function (step) {\n    this.legendStep = step;\n  };\n\n  ChartInternal.prototype.updateLegendItemWidth = function (w) {\n    this.legendItemWidth = w;\n  };\n\n  ChartInternal.prototype.updateLegendItemHeight = function (h) {\n    this.legendItemHeight = h;\n  };\n\n  ChartInternal.prototype.getLegendWidth = function () {\n    var $$ = this;\n    return $$.config.legend_show ? $$.isLegendRight || $$.isLegendInset ? $$.legendItemWidth * ($$.legendStep + 1) : $$.currentWidth : 0;\n  };\n\n  ChartInternal.prototype.getLegendHeight = function () {\n    var $$ = this,\n        h = 0;\n\n    if ($$.config.legend_show) {\n      if ($$.isLegendRight) {\n        h = $$.currentHeight;\n      } else {\n        h = Math.max(20, $$.legendItemHeight) * ($$.legendStep + 1);\n      }\n    }\n\n    return h;\n  };\n\n  ChartInternal.prototype.opacityForLegend = function (legendItem) {\n    return legendItem.classed(CLASS.legendItemHidden) ? null : 1;\n  };\n\n  ChartInternal.prototype.opacityForUnfocusedLegend = function (legendItem) {\n    return legendItem.classed(CLASS.legendItemHidden) ? null : 0.3;\n  };\n\n  ChartInternal.prototype.toggleFocusLegend = function (targetIds, focus) {\n    var $$ = this;\n    targetIds = $$.mapToTargetIds(targetIds);\n    $$.legend.selectAll('.' + CLASS.legendItem).filter(function (id) {\n      return targetIds.indexOf(id) >= 0;\n    }).classed(CLASS.legendItemFocused, focus).transition().duration(100).style('opacity', function () {\n      var opacity = focus ? $$.opacityForLegend : $$.opacityForUnfocusedLegend;\n      return opacity.call($$, $$.d3.select(this));\n    });\n  };\n\n  ChartInternal.prototype.revertLegend = function () {\n    var $$ = this,\n        d3 = $$.d3;\n    $$.legend.selectAll('.' + CLASS.legendItem).classed(CLASS.legendItemFocused, false).transition().duration(100).style('opacity', function () {\n      return $$.opacityForLegend(d3.select(this));\n    });\n  };\n\n  ChartInternal.prototype.showLegend = function (targetIds) {\n    var $$ = this,\n        config = $$.config;\n\n    if (!config.legend_show) {\n      config.legend_show = true;\n      $$.legend.style('visibility', 'visible');\n\n      if (!$$.legendHasRendered) {\n        $$.updateLegendWithDefaults();\n      }\n    }\n\n    $$.removeHiddenLegendIds(targetIds);\n    $$.legend.selectAll($$.selectorLegends(targetIds)).style('visibility', 'visible').transition().style('opacity', function () {\n      return $$.opacityForLegend($$.d3.select(this));\n    });\n  };\n\n  ChartInternal.prototype.hideLegend = function (targetIds) {\n    var $$ = this,\n        config = $$.config;\n\n    if (config.legend_show && isEmpty(targetIds)) {\n      config.legend_show = false;\n      $$.legend.style('visibility', 'hidden');\n    }\n\n    $$.addHiddenLegendIds(targetIds);\n    $$.legend.selectAll($$.selectorLegends(targetIds)).style('opacity', 0).style('visibility', 'hidden');\n  };\n\n  ChartInternal.prototype.clearLegendItemTextBoxCache = function () {\n    this.legendItemTextBox = {};\n  };\n\n  ChartInternal.prototype.updateLegend = function (targetIds, options, transitions) {\n    var $$ = this,\n        config = $$.config;\n    var xForLegend, xForLegendText, xForLegendRect, yForLegend, yForLegendText, yForLegendRect, x1ForLegendTile, x2ForLegendTile, yForLegendTile;\n    var paddingTop = 4,\n        paddingRight = 10,\n        maxWidth = 0,\n        maxHeight = 0,\n        posMin = 10,\n        tileWidth = config.legend_item_tile_width + 5;\n    var l,\n        totalLength = 0,\n        offsets = {},\n        widths = {},\n        heights = {},\n        margins = [0],\n        steps = {},\n        step = 0;\n    var withTransition, withTransitionForTransform;\n    var texts, rects, tiles, background; // Skip elements when their name is set to null\n\n    targetIds = targetIds.filter(function (id) {\n      return !isDefined(config.data_names[id]) || config.data_names[id] !== null;\n    });\n    options = options || {};\n    withTransition = getOption(options, 'withTransition', true);\n    withTransitionForTransform = getOption(options, 'withTransitionForTransform', true);\n\n    function getTextBox(textElement, id) {\n      if (!$$.legendItemTextBox[id]) {\n        $$.legendItemTextBox[id] = $$.getTextRect(textElement.textContent, CLASS.legendItem, textElement);\n      }\n\n      return $$.legendItemTextBox[id];\n    }\n\n    function updatePositions(textElement, id, index) {\n      var reset = index === 0,\n          isLast = index === targetIds.length - 1,\n          box = getTextBox(textElement, id),\n          itemWidth = box.width + tileWidth + (isLast && !($$.isLegendRight || $$.isLegendInset) ? 0 : paddingRight) + config.legend_padding,\n          itemHeight = box.height + paddingTop,\n          itemLength = $$.isLegendRight || $$.isLegendInset ? itemHeight : itemWidth,\n          areaLength = $$.isLegendRight || $$.isLegendInset ? $$.getLegendHeight() : $$.getLegendWidth(),\n          margin,\n          maxLength; // MEMO: care about condifion of step, totalLength\n\n      function updateValues(id, withoutStep) {\n        if (!withoutStep) {\n          margin = (areaLength - totalLength - itemLength) / 2;\n\n          if (margin < posMin) {\n            margin = (areaLength - itemLength) / 2;\n            totalLength = 0;\n            step++;\n          }\n        }\n\n        steps[id] = step;\n        margins[step] = $$.isLegendInset ? 10 : margin;\n        offsets[id] = totalLength;\n        totalLength += itemLength;\n      }\n\n      if (reset) {\n        totalLength = 0;\n        step = 0;\n        maxWidth = 0;\n        maxHeight = 0;\n      }\n\n      if (config.legend_show && !$$.isLegendToShow(id)) {\n        widths[id] = heights[id] = steps[id] = offsets[id] = 0;\n        return;\n      }\n\n      widths[id] = itemWidth;\n      heights[id] = itemHeight;\n\n      if (!maxWidth || itemWidth >= maxWidth) {\n        maxWidth = itemWidth;\n      }\n\n      if (!maxHeight || itemHeight >= maxHeight) {\n        maxHeight = itemHeight;\n      }\n\n      maxLength = $$.isLegendRight || $$.isLegendInset ? maxHeight : maxWidth;\n\n      if (config.legend_equally) {\n        Object.keys(widths).forEach(function (id) {\n          widths[id] = maxWidth;\n        });\n        Object.keys(heights).forEach(function (id) {\n          heights[id] = maxHeight;\n        });\n        margin = (areaLength - maxLength * targetIds.length) / 2;\n\n        if (margin < posMin) {\n          totalLength = 0;\n          step = 0;\n          targetIds.forEach(function (id) {\n            updateValues(id);\n          });\n        } else {\n          updateValues(id, true);\n        }\n      } else {\n        updateValues(id);\n      }\n    }\n\n    if ($$.isLegendInset) {\n      step = config.legend_inset_step ? config.legend_inset_step : targetIds.length;\n      $$.updateLegendStep(step);\n    }\n\n    if ($$.isLegendRight) {\n      xForLegend = function xForLegend(id) {\n        return maxWidth * steps[id];\n      };\n\n      yForLegend = function yForLegend(id) {\n        return margins[steps[id]] + offsets[id];\n      };\n    } else if ($$.isLegendInset) {\n      xForLegend = function xForLegend(id) {\n        return maxWidth * steps[id] + 10;\n      };\n\n      yForLegend = function yForLegend(id) {\n        return margins[steps[id]] + offsets[id];\n      };\n    } else {\n      xForLegend = function xForLegend(id) {\n        return margins[steps[id]] + offsets[id];\n      };\n\n      yForLegend = function yForLegend(id) {\n        return maxHeight * steps[id];\n      };\n    }\n\n    xForLegendText = function xForLegendText(id, i) {\n      return xForLegend(id, i) + 4 + config.legend_item_tile_width;\n    };\n\n    yForLegendText = function yForLegendText(id, i) {\n      return yForLegend(id, i) + 9;\n    };\n\n    xForLegendRect = function xForLegendRect(id, i) {\n      return xForLegend(id, i);\n    };\n\n    yForLegendRect = function yForLegendRect(id, i) {\n      return yForLegend(id, i) - 5;\n    };\n\n    x1ForLegendTile = function x1ForLegendTile(id, i) {\n      return xForLegend(id, i) - 2;\n    };\n\n    x2ForLegendTile = function x2ForLegendTile(id, i) {\n      return xForLegend(id, i) - 2 + config.legend_item_tile_width;\n    };\n\n    yForLegendTile = function yForLegendTile(id, i) {\n      return yForLegend(id, i) + 4;\n    }; // Define g for legend area\n\n\n    l = $$.legend.selectAll('.' + CLASS.legendItem).data(targetIds).enter().append('g').attr('class', function (id) {\n      return $$.generateClass(CLASS.legendItem, id);\n    }).style('visibility', function (id) {\n      return $$.isLegendToShow(id) ? 'visible' : 'hidden';\n    }).style('cursor', function () {\n      return config.interaction_enabled ? 'pointer' : 'auto';\n    }).on('click', config.interaction_enabled ? function (id) {\n      if (config.legend_item_onclick) {\n        config.legend_item_onclick.call($$, id);\n      } else {\n        if ($$.d3.event.altKey) {\n          $$.api.hide();\n          $$.api.show(id);\n        } else {\n          $$.api.toggle(id);\n          $$.isTargetToShow(id) ? $$.api.focus(id) : $$.api.revert();\n        }\n      }\n    } : null).on('mouseover', config.interaction_enabled ? function (id) {\n      if (config.legend_item_onmouseover) {\n        config.legend_item_onmouseover.call($$, id);\n      } else {\n        $$.d3.select(this).classed(CLASS.legendItemFocused, true);\n\n        if (!$$.transiting && $$.isTargetToShow(id)) {\n          $$.api.focus(id);\n        }\n      }\n    } : null).on('mouseout', config.interaction_enabled ? function (id) {\n      if (config.legend_item_onmouseout) {\n        config.legend_item_onmouseout.call($$, id);\n      } else {\n        $$.d3.select(this).classed(CLASS.legendItemFocused, false);\n        $$.api.revert();\n      }\n    } : null);\n    l.append('text').text(function (id) {\n      return isDefined(config.data_names[id]) ? config.data_names[id] : id;\n    }).each(function (id, i) {\n      updatePositions(this, id, i);\n    }).style('pointer-events', 'none').attr('x', $$.isLegendRight || $$.isLegendInset ? xForLegendText : -200).attr('y', $$.isLegendRight || $$.isLegendInset ? -200 : yForLegendText);\n    l.append('rect').attr('class', CLASS.legendItemEvent).style('fill-opacity', 0).attr('x', $$.isLegendRight || $$.isLegendInset ? xForLegendRect : -200).attr('y', $$.isLegendRight || $$.isLegendInset ? -200 : yForLegendRect);\n    l.append('line').attr('class', CLASS.legendItemTile).style('stroke', $$.color).style('pointer-events', 'none').attr('x1', $$.isLegendRight || $$.isLegendInset ? x1ForLegendTile : -200).attr('y1', $$.isLegendRight || $$.isLegendInset ? -200 : yForLegendTile).attr('x2', $$.isLegendRight || $$.isLegendInset ? x2ForLegendTile : -200).attr('y2', $$.isLegendRight || $$.isLegendInset ? -200 : yForLegendTile).attr('stroke-width', config.legend_item_tile_height); // Set background for inset legend\n\n    background = $$.legend.select('.' + CLASS.legendBackground + ' rect');\n\n    if ($$.isLegendInset && maxWidth > 0 && background.size() === 0) {\n      background = $$.legend.insert('g', '.' + CLASS.legendItem).attr('class', CLASS.legendBackground).append('rect');\n    }\n\n    texts = $$.legend.selectAll('text').data(targetIds).text(function (id) {\n      return isDefined(config.data_names[id]) ? config.data_names[id] : id;\n    }) // MEMO: needed for update\n    .each(function (id, i) {\n      updatePositions(this, id, i);\n    });\n    (withTransition ? texts.transition() : texts).attr('x', xForLegendText).attr('y', yForLegendText);\n    rects = $$.legend.selectAll('rect.' + CLASS.legendItemEvent).data(targetIds);\n    (withTransition ? rects.transition() : rects).attr('width', function (id) {\n      return widths[id];\n    }).attr('height', function (id) {\n      return heights[id];\n    }).attr('x', xForLegendRect).attr('y', yForLegendRect);\n    tiles = $$.legend.selectAll('line.' + CLASS.legendItemTile).data(targetIds);\n    (withTransition ? tiles.transition() : tiles).style('stroke', $$.levelColor ? function (id) {\n      return $$.levelColor($$.cache[id].values.reduce(function (total, item) {\n        return total + item.value;\n      }, 0));\n    } : $$.color).attr('x1', x1ForLegendTile).attr('y1', yForLegendTile).attr('x2', x2ForLegendTile).attr('y2', yForLegendTile);\n\n    if (background) {\n      (withTransition ? background.transition() : background).attr('height', $$.getLegendHeight() - 12).attr('width', maxWidth * (step + 1) + 10);\n    } // toggle legend state\n\n\n    $$.legend.selectAll('.' + CLASS.legendItem).classed(CLASS.legendItemHidden, function (id) {\n      return !$$.isTargetToShow(id);\n    }); // Update all to reflect change of legend\n\n    $$.updateLegendItemWidth(maxWidth);\n    $$.updateLegendItemHeight(maxHeight);\n    $$.updateLegendStep(step); // Update size and scale\n\n    $$.updateSizes();\n    $$.updateScales();\n    $$.updateSvgSize(); // Update g positions\n\n    $$.transformAll(withTransitionForTransform, transitions);\n    $$.legendHasRendered = true;\n  };\n\n  ChartInternal.prototype.initRegion = function () {\n    var $$ = this;\n    $$.region = $$.main.append('g').attr('clip-path', $$.clipPath).attr('class', CLASS.regions);\n  };\n\n  ChartInternal.prototype.updateRegion = function (duration) {\n    var $$ = this,\n        config = $$.config; // hide if arc type\n\n    $$.region.style('visibility', $$.hasArcType() ? 'hidden' : 'visible');\n    var mainRegion = $$.main.select('.' + CLASS.regions).selectAll('.' + CLASS.region).data(config.regions);\n    var g = mainRegion.enter().append('g');\n    g.append('rect').attr('x', $$.regionX.bind($$)).attr('y', $$.regionY.bind($$)).attr('width', $$.regionWidth.bind($$)).attr('height', $$.regionHeight.bind($$)).style('fill-opacity', function (d) {\n      return isValue(d.opacity) ? d.opacity : 0.1;\n    });\n    g.append('text').text($$.labelRegion.bind($$));\n    $$.mainRegion = g.merge(mainRegion).attr('class', $$.classRegion.bind($$));\n    mainRegion.exit().transition().duration(duration).style('opacity', 0).remove();\n  };\n\n  ChartInternal.prototype.redrawRegion = function (withTransition, transition) {\n    var $$ = this,\n        regions = $$.mainRegion,\n        regionLabels = $$.mainRegion.selectAll('text');\n    return [(withTransition ? regions.transition(transition) : regions).attr('x', $$.regionX.bind($$)).attr('y', $$.regionY.bind($$)).attr('width', $$.regionWidth.bind($$)).attr('height', $$.regionHeight.bind($$)).style('fill-opacity', function (d) {\n      return isValue(d.opacity) ? d.opacity : 0.1;\n    }), (withTransition ? regionLabels.transition(transition) : regionLabels).attr('x', $$.labelOffsetX.bind($$)).attr('y', $$.labelOffsetY.bind($$)).attr('transform', $$.labelTransform.bind($$)).attr('style', 'text-anchor: left;')];\n  };\n\n  ChartInternal.prototype.regionX = function (d) {\n    var $$ = this,\n        config = $$.config,\n        xPos,\n        yScale = d.axis === 'y' ? $$.y : $$.y2;\n\n    if (d.axis === 'y' || d.axis === 'y2') {\n      xPos = config.axis_rotated ? 'start' in d ? yScale(d.start) : 0 : 0;\n    } else {\n      xPos = config.axis_rotated ? 0 : 'start' in d ? $$.x($$.isTimeSeries() ? $$.parseDate(d.start) : d.start) : 0;\n    }\n\n    return xPos;\n  };\n\n  ChartInternal.prototype.regionY = function (d) {\n    var $$ = this,\n        config = $$.config,\n        yPos,\n        yScale = d.axis === 'y' ? $$.y : $$.y2;\n\n    if (d.axis === 'y' || d.axis === 'y2') {\n      yPos = config.axis_rotated ? 0 : 'end' in d ? yScale(d.end) : 0;\n    } else {\n      yPos = config.axis_rotated ? 'start' in d ? $$.x($$.isTimeSeries() ? $$.parseDate(d.start) : d.start) : 0 : 0;\n    }\n\n    return yPos;\n  };\n\n  ChartInternal.prototype.regionWidth = function (d) {\n    var $$ = this,\n        config = $$.config,\n        start = $$.regionX(d),\n        end,\n        yScale = d.axis === 'y' ? $$.y : $$.y2;\n\n    if (d.axis === 'y' || d.axis === 'y2') {\n      end = config.axis_rotated ? 'end' in d ? yScale(d.end) : $$.width : $$.width;\n    } else {\n      end = config.axis_rotated ? $$.width : 'end' in d ? $$.x($$.isTimeSeries() ? $$.parseDate(d.end) : d.end) : $$.width;\n    }\n\n    return end < start ? 0 : end - start;\n  };\n\n  ChartInternal.prototype.regionHeight = function (d) {\n    var $$ = this,\n        config = $$.config,\n        start = this.regionY(d),\n        end,\n        yScale = d.axis === 'y' ? $$.y : $$.y2;\n\n    if (d.axis === 'y' || d.axis === 'y2') {\n      end = config.axis_rotated ? $$.height : 'start' in d ? yScale(d.start) : $$.height;\n    } else {\n      end = config.axis_rotated ? 'end' in d ? $$.x($$.isTimeSeries() ? $$.parseDate(d.end) : d.end) : $$.height : $$.height;\n    }\n\n    return end < start ? 0 : end - start;\n  };\n\n  ChartInternal.prototype.isRegionOnX = function (d) {\n    return !d.axis || d.axis === 'x';\n  };\n\n  ChartInternal.prototype.labelRegion = function (d) {\n    return 'label' in d ? d.label : '';\n  };\n\n  ChartInternal.prototype.labelTransform = function (d) {\n    return 'vertical' in d && d.vertical ? 'rotate(90)' : '';\n  };\n\n  ChartInternal.prototype.labelOffsetX = function (d) {\n    var paddingX = 'paddingX' in d ? d.paddingX : 3;\n    var paddingY = 'paddingY' in d ? d.paddingY : 3;\n    return 'vertical' in d && d.vertical ? this.regionY(d) + paddingY : this.regionX(d) + paddingX;\n  };\n\n  ChartInternal.prototype.labelOffsetY = function (d) {\n    var paddingX = 'paddingX' in d ? d.paddingX : 3;\n    var paddingY = 'paddingY' in d ? d.paddingY : 3;\n    return 'vertical' in d && d.vertical ? -(this.regionX(d) + paddingX) : this.regionY(d) + 10 + paddingY;\n  };\n\n  function c3LogScale(d3, linearScale, logScale) {\n    var PROJECTION = [0.01, 10];\n\n    if (!linearScale) {\n      linearScale = d3.scaleLinear();\n      linearScale.range(PROJECTION);\n    }\n\n    if (!logScale) {\n      logScale = d3.scaleLog();\n      logScale.domain(PROJECTION);\n      logScale.nice();\n    } // copied from https://github.com/compute-io/logspace\n\n\n    function logspace(a, b, len) {\n      var arr, end, tmp, d;\n\n      if (arguments.length < 3) {\n        len = 10;\n      } else {\n        if (len === 0) {\n          return [];\n        }\n      } // Calculate the increment:\n\n\n      end = len - 1;\n      d = (b - a) / end; // Build the output array...\n\n      arr = new Array(len);\n      tmp = a;\n      arr[0] = Math.pow(10, tmp);\n\n      for (var i = 1; i < end; i++) {\n        tmp += d;\n        arr[i] = Math.pow(10, tmp);\n      }\n\n      arr[end] = Math.pow(10, b);\n      return arr;\n    }\n\n    function scale(x) {\n      return logScale(linearScale(x));\n    }\n\n    scale.domain = function (x) {\n      if (!arguments.length) {\n        return linearScale.domain();\n      }\n\n      linearScale.domain(x);\n      return scale;\n    };\n\n    scale.range = function (x) {\n      if (!arguments.length) {\n        return logScale.range();\n      }\n\n      logScale.range(x);\n      return scale;\n    };\n\n    scale.ticks = function (m) {\n      return logspace(-2, 1, m || 10).map(function (v) {\n        return linearScale.invert(v);\n      });\n    };\n\n    scale.copy = function () {\n      return c3LogScale(d3, linearScale.copy(), logScale.copy());\n    };\n\n    return scale;\n  }\n\n  ChartInternal.prototype.getScale = function (min, max, forTimeseries) {\n    return (forTimeseries ? this.d3.scaleTime() : this.d3.scaleLinear()).range([min, max]);\n  };\n\n  ChartInternal.prototype.getX = function (min, max, domain, offset) {\n    var $$ = this,\n        scale = $$.getScale(min, max, $$.isTimeSeries()),\n        _scale = domain ? scale.domain(domain) : scale,\n        key; // Define customized scale if categorized axis\n\n\n    if ($$.isCategorized()) {\n      offset = offset || function () {\n        return 0;\n      };\n\n      scale = function scale(d, raw) {\n        var v = _scale(d) + offset(d);\n        return raw ? v : Math.ceil(v);\n      };\n    } else {\n      scale = function scale(d, raw) {\n        var v = _scale(d);\n\n        return raw ? v : Math.ceil(v);\n      };\n    } // define functions\n\n\n    for (key in _scale) {\n      scale[key] = _scale[key];\n    }\n\n    scale.orgDomain = function () {\n      return _scale.domain();\n    }; // define custom domain() for categorized axis\n\n\n    if ($$.isCategorized()) {\n      scale.domain = function (domain) {\n        if (!arguments.length) {\n          domain = this.orgDomain();\n          return [domain[0], domain[1] + 1];\n        }\n\n        _scale.domain(domain);\n\n        return scale;\n      };\n    }\n\n    return scale;\n  };\n  /**\n   * Creates and configures a D3 scale instance for the given type.\n   *\n   * By defaults it returns a Linear scale.\n   *\n   * @param {String} type Type of d3-scale to create. Type can be 'linear', 'time', 'timeseries' or 'log'.\n   * @param {Array} domain The scale domain such as [from, to]\n   * @param {Array} range The scale's range such as [from, to]\n   *\n   * @return A d3-scale instance\n   */\n\n\n  ChartInternal.prototype.getY = function (type, domain, range) {\n    var scale;\n\n    if (type === 'timeseries' || type === 'time') {\n      scale = this.d3.scaleTime();\n    } else if (type === 'log') {\n      scale = c3LogScale(this.d3);\n    } else if (type === 'linear' || type === undefined) {\n      scale = this.d3.scaleLinear();\n    } else {\n      throw new Error(\"Invalid Y axis type: \\\"\".concat(type, \"\\\"\"));\n    }\n\n    if (domain) {\n      scale.domain(domain);\n    }\n\n    if (range) {\n      scale.range(range);\n    }\n\n    return scale;\n  };\n\n  ChartInternal.prototype.getYScale = function (id) {\n    return this.axis.getId(id) === 'y2' ? this.y2 : this.y;\n  };\n\n  ChartInternal.prototype.getSubYScale = function (id) {\n    return this.axis.getId(id) === 'y2' ? this.subY2 : this.subY;\n  };\n\n  ChartInternal.prototype.updateScales = function () {\n    var $$ = this,\n        config = $$.config,\n        forInit = !$$.x; // update edges\n\n    $$.xMin = config.axis_rotated ? 1 : 0;\n    $$.xMax = config.axis_rotated ? $$.height : $$.width;\n    $$.yMin = config.axis_rotated ? 0 : $$.height;\n    $$.yMax = config.axis_rotated ? $$.width : 1;\n    $$.subXMin = $$.xMin;\n    $$.subXMax = $$.xMax;\n    $$.subYMin = config.axis_rotated ? 0 : $$.height2;\n    $$.subYMax = config.axis_rotated ? $$.width2 : 1; // update scales\n\n    $$.x = $$.getX($$.xMin, $$.xMax, forInit ? undefined : $$.x.orgDomain(), function () {\n      return $$.xAxis.tickOffset();\n    });\n    $$.y = $$.getY(config.axis_y_type, forInit ? config.axis_y_default : $$.y.domain(), [$$.yMin, $$.yMax]);\n    $$.y2 = $$.getY(config.axis_y2_type, forInit ? config.axis_y2_default : $$.y2.domain(), [$$.yMin, $$.yMax]);\n    $$.subX = $$.getX($$.xMin, $$.xMax, $$.orgXDomain, function (d) {\n      return d % 1 ? 0 : $$.subXAxis.tickOffset();\n    });\n    $$.subY = $$.getY(config.axis_y_type, forInit ? config.axis_y_default : $$.subY.domain(), [$$.subYMin, $$.subYMax]);\n    $$.subY2 = $$.getY(config.axis_y2_type, forInit ? config.axis_y2_default : $$.subY2.domain(), [$$.subYMin, $$.subYMax]); // update axes\n\n    $$.xAxisTickFormat = $$.axis.getXAxisTickFormat();\n    $$.xAxisTickValues = $$.axis.getXAxisTickValues();\n    $$.yAxisTickValues = $$.axis.getYAxisTickValues();\n    $$.y2AxisTickValues = $$.axis.getY2AxisTickValues();\n    $$.xAxis = $$.axis.getXAxis($$.x, $$.xOrient, $$.xAxisTickFormat, $$.xAxisTickValues, config.axis_x_tick_outer);\n    $$.subXAxis = $$.axis.getXAxis($$.subX, $$.subXOrient, $$.xAxisTickFormat, $$.xAxisTickValues, config.axis_x_tick_outer);\n    $$.yAxis = $$.axis.getYAxis('y', $$.y, $$.yOrient, $$.yAxisTickValues, config.axis_y_tick_outer);\n    $$.y2Axis = $$.axis.getYAxis('y2', $$.y2, $$.y2Orient, $$.y2AxisTickValues, config.axis_y2_tick_outer); // Set initialized scales to brush and zoom\n\n    if (!forInit) {\n      if ($$.brush) {\n        $$.brush.updateScale($$.subX);\n      }\n    } // update for arc\n\n\n    if ($$.updateArc) {\n      $$.updateArc();\n    }\n  };\n\n  ChartInternal.prototype.selectPoint = function (target, d, i) {\n    var $$ = this,\n        config = $$.config,\n        cx = (config.axis_rotated ? $$.circleY : $$.circleX).bind($$),\n        cy = (config.axis_rotated ? $$.circleX : $$.circleY).bind($$),\n        r = $$.pointSelectR.bind($$);\n    config.data_onselected.call($$.api, d, target.node()); // add selected-circle on low layer g\n\n    $$.main.select('.' + CLASS.selectedCircles + $$.getTargetSelectorSuffix(d.id)).selectAll('.' + CLASS.selectedCircle + '-' + i).data([d]).enter().append('circle').attr('class', function () {\n      return $$.generateClass(CLASS.selectedCircle, i);\n    }).attr('cx', cx).attr('cy', cy).attr('stroke', function () {\n      return $$.color(d);\n    }).attr('r', function (d) {\n      return $$.pointSelectR(d) * 1.4;\n    }).transition().duration(100).attr('r', r);\n  };\n\n  ChartInternal.prototype.unselectPoint = function (target, d, i) {\n    var $$ = this;\n    $$.config.data_onunselected.call($$.api, d, target.node()); // remove selected-circle from low layer g\n\n    $$.main.select('.' + CLASS.selectedCircles + $$.getTargetSelectorSuffix(d.id)).selectAll('.' + CLASS.selectedCircle + '-' + i).transition().duration(100).attr('r', 0).remove();\n  };\n\n  ChartInternal.prototype.togglePoint = function (selected, target, d, i) {\n    selected ? this.selectPoint(target, d, i) : this.unselectPoint(target, d, i);\n  };\n\n  ChartInternal.prototype.selectPath = function (target, d) {\n    var $$ = this;\n    $$.config.data_onselected.call($$, d, target.node());\n\n    if ($$.config.interaction_brighten) {\n      target.transition().duration(100).style('fill', function () {\n        return $$.d3.rgb($$.color(d)).brighter(0.75);\n      });\n    }\n  };\n\n  ChartInternal.prototype.unselectPath = function (target, d) {\n    var $$ = this;\n    $$.config.data_onunselected.call($$, d, target.node());\n\n    if ($$.config.interaction_brighten) {\n      target.transition().duration(100).style('fill', function () {\n        return $$.color(d);\n      });\n    }\n  };\n\n  ChartInternal.prototype.togglePath = function (selected, target, d, i) {\n    selected ? this.selectPath(target, d, i) : this.unselectPath(target, d, i);\n  };\n\n  ChartInternal.prototype.getToggle = function (that, d) {\n    var $$ = this,\n        toggle;\n\n    if (that.nodeName === 'circle') {\n      if ($$.isStepType(d)) {\n        // circle is hidden in step chart, so treat as within the click area\n        toggle = function toggle() {}; // TODO: how to select step chart?\n\n      } else {\n        toggle = $$.togglePoint;\n      }\n    } else if (that.nodeName === 'path') {\n      toggle = $$.togglePath;\n    }\n\n    return toggle;\n  };\n\n  ChartInternal.prototype.toggleShape = function (that, d, i) {\n    var $$ = this,\n        d3 = $$.d3,\n        config = $$.config,\n        shape = d3.select(that),\n        isSelected = shape.classed(CLASS.SELECTED),\n        toggle = $$.getToggle(that, d).bind($$);\n\n    if (config.data_selection_enabled && config.data_selection_isselectable(d)) {\n      if (!config.data_selection_multiple) {\n        $$.main.selectAll('.' + CLASS.shapes + (config.data_selection_grouped ? $$.getTargetSelectorSuffix(d.id) : '')).selectAll('.' + CLASS.shape).each(function (d, i) {\n          var shape = d3.select(this);\n\n          if (shape.classed(CLASS.SELECTED)) {\n            toggle(false, shape.classed(CLASS.SELECTED, false), d, i);\n          }\n        });\n      }\n\n      shape.classed(CLASS.SELECTED, !isSelected);\n      toggle(!isSelected, shape, d, i);\n    }\n  };\n\n  ChartInternal.prototype.initBar = function () {\n    var $$ = this;\n    $$.main.select('.' + CLASS.chart).append('g').attr('class', CLASS.chartBars);\n  };\n\n  ChartInternal.prototype.updateTargetsForBar = function (targets) {\n    var $$ = this,\n        config = $$.config,\n        mainBars,\n        mainBarEnter,\n        classChartBar = $$.classChartBar.bind($$),\n        classBars = $$.classBars.bind($$),\n        classFocus = $$.classFocus.bind($$);\n    mainBars = $$.main.select('.' + CLASS.chartBars).selectAll('.' + CLASS.chartBar).data(targets).attr('class', function (d) {\n      return classChartBar(d) + classFocus(d);\n    });\n    mainBarEnter = mainBars.enter().append('g').attr('class', classChartBar).style('pointer-events', 'none'); // Bars for each data\n\n    mainBarEnter.append('g').attr('class', classBars).style('cursor', function (d) {\n      return config.data_selection_isselectable(d) ? 'pointer' : null;\n    });\n  };\n\n  ChartInternal.prototype.updateBar = function (durationForExit) {\n    var $$ = this,\n        barData = $$.barData.bind($$),\n        classBar = $$.classBar.bind($$),\n        initialOpacity = $$.initialOpacity.bind($$),\n        color = function color(d) {\n      return $$.color(d.id);\n    };\n\n    var mainBar = $$.main.selectAll('.' + CLASS.bars).selectAll('.' + CLASS.bar).data(barData);\n    var mainBarEnter = mainBar.enter().append('path').attr('class', classBar).style('stroke', color).style('fill', color);\n    $$.mainBar = mainBarEnter.merge(mainBar).style('opacity', initialOpacity);\n    mainBar.exit().transition().duration(durationForExit).style('opacity', 0);\n  };\n\n  ChartInternal.prototype.redrawBar = function (drawBar, withTransition, transition) {\n    var $$ = this;\n    return [(withTransition ? this.mainBar.transition(transition) : this.mainBar).attr('d', drawBar).style('stroke', this.color).style('fill', this.color).style('opacity', function (d) {\n      return $$.isTargetToShow(d.id) ? 1 : 0;\n    })];\n  };\n\n  ChartInternal.prototype.getBarW = function (axis, barTargetsNum) {\n    var $$ = this,\n        config = $$.config,\n        w = typeof config.bar_width === 'number' ? config.bar_width : barTargetsNum ? axis.tickInterval() * config.bar_width_ratio / barTargetsNum : 0;\n    return config.bar_width_max && w > config.bar_width_max ? config.bar_width_max : w;\n  };\n\n  ChartInternal.prototype.getBars = function (i, id) {\n    var $$ = this;\n    return (id ? $$.main.selectAll('.' + CLASS.bars + $$.getTargetSelectorSuffix(id)) : $$.main).selectAll('.' + CLASS.bar + (isValue(i) ? '-' + i : ''));\n  };\n\n  ChartInternal.prototype.expandBars = function (i, id, reset) {\n    var $$ = this;\n\n    if (reset) {\n      $$.unexpandBars();\n    }\n\n    $$.getBars(i, id).classed(CLASS.EXPANDED, true);\n  };\n\n  ChartInternal.prototype.unexpandBars = function (i) {\n    var $$ = this;\n    $$.getBars(i).classed(CLASS.EXPANDED, false);\n  };\n\n  ChartInternal.prototype.generateDrawBar = function (barIndices, isSub) {\n    var $$ = this,\n        config = $$.config,\n        getPoints = $$.generateGetBarPoints(barIndices, isSub);\n    return function (d, i) {\n      // 4 points that make a bar\n      var points = getPoints(d, i); // switch points if axis is rotated, not applicable for sub chart\n\n      var indexX = config.axis_rotated ? 1 : 0;\n      var indexY = config.axis_rotated ? 0 : 1;\n      var path = 'M ' + points[0][indexX] + ',' + points[0][indexY] + ' ' + 'L' + points[1][indexX] + ',' + points[1][indexY] + ' ' + 'L' + points[2][indexX] + ',' + points[2][indexY] + ' ' + 'L' + points[3][indexX] + ',' + points[3][indexY] + ' ' + 'z';\n      return path;\n    };\n  };\n\n  ChartInternal.prototype.generateGetBarPoints = function (barIndices, isSub) {\n    var $$ = this,\n        axis = isSub ? $$.subXAxis : $$.xAxis,\n        barTargetsNum = barIndices.__max__ + 1,\n        barW = $$.getBarW(axis, barTargetsNum),\n        barX = $$.getShapeX(barW, barTargetsNum, barIndices, !!isSub),\n        barY = $$.getShapeY(!!isSub),\n        barOffset = $$.getShapeOffset($$.isBarType, barIndices, !!isSub),\n        barSpaceOffset = barW * ($$.config.bar_space / 2),\n        yScale = isSub ? $$.getSubYScale : $$.getYScale;\n    return function (d, i) {\n      var y0 = yScale.call($$, d.id)(0),\n          offset = barOffset(d, i) || y0,\n          // offset is for stacked bar chart\n      posX = barX(d),\n          posY = barY(d); // fix posY not to overflow opposite quadrant\n\n      if ($$.config.axis_rotated) {\n        if (0 < d.value && posY < y0 || d.value < 0 && y0 < posY) {\n          posY = y0;\n        }\n      }\n\n      posY -= y0 - offset; // 4 points that make a bar\n\n      return [[posX + barSpaceOffset, offset], [posX + barSpaceOffset, posY], [posX + barW - barSpaceOffset, posY], [posX + barW - barSpaceOffset, offset]];\n    };\n  };\n  /**\n   * Returns whether the data point is within the given bar shape.\n   *\n   * @param mouse\n   * @param barShape\n   * @return {boolean}\n   */\n\n\n  ChartInternal.prototype.isWithinBar = function (mouse, barShape) {\n    return isWithinBox(mouse, getBBox(barShape), 2);\n  };\n\n  ChartInternal.prototype.getShapeIndices = function (typeFilter) {\n    var $$ = this,\n        config = $$.config,\n        indices = {},\n        i = 0,\n        j,\n        k;\n    $$.filterTargetsToShow($$.data.targets.filter(typeFilter, $$)).forEach(function (d) {\n      for (j = 0; j < config.data_groups.length; j++) {\n        if (config.data_groups[j].indexOf(d.id) < 0) {\n          continue;\n        }\n\n        for (k = 0; k < config.data_groups[j].length; k++) {\n          if (config.data_groups[j][k] in indices) {\n            indices[d.id] = indices[config.data_groups[j][k]];\n            break;\n          }\n        }\n      }\n\n      if (isUndefined(indices[d.id])) {\n        indices[d.id] = i++;\n      }\n    });\n    indices.__max__ = i - 1;\n    return indices;\n  };\n\n  ChartInternal.prototype.getShapeX = function (offset, targetsNum, indices, isSub) {\n    var $$ = this,\n        scale = isSub ? $$.subX : $$.x;\n    return function (d) {\n      var index = d.id in indices ? indices[d.id] : 0;\n      return d.x || d.x === 0 ? scale(d.x) - offset * (targetsNum / 2 - index) : 0;\n    };\n  };\n\n  ChartInternal.prototype.getShapeY = function (isSub) {\n    var $$ = this;\n    return function (d) {\n      var scale = isSub ? $$.getSubYScale(d.id) : $$.getYScale(d.id);\n      return scale($$.isTargetNormalized(d.id) ? $$.getRatio('index', d, true) : d.value);\n    };\n  };\n\n  ChartInternal.prototype.getShapeOffset = function (typeFilter, indices, isSub) {\n    var $$ = this,\n        targets = $$.orderTargets($$.filterTargetsToShow($$.data.targets.filter(typeFilter, $$))),\n        targetIds = targets.map(function (t) {\n      return t.id;\n    });\n    return function (d, i) {\n      var scale = isSub ? $$.getSubYScale(d.id) : $$.getYScale(d.id),\n          y0 = scale(0),\n          offset = y0;\n      targets.forEach(function (t) {\n        var rowValues = $$.isStepType(d) ? $$.convertValuesToStep(t.values) : t.values;\n        var isTargetNormalized = $$.isTargetNormalized(d.id);\n        var values = rowValues.map(function (v) {\n          return isTargetNormalized ? $$.getRatio('index', v, true) : v.value;\n        });\n\n        if (t.id === d.id || indices[t.id] !== indices[d.id]) {\n          return;\n        }\n\n        if (targetIds.indexOf(t.id) < targetIds.indexOf(d.id)) {\n          // check if the x values line up\n          if (isUndefined(rowValues[i]) || +rowValues[i].x !== +d.x) {\n            // \"+\" for timeseries\n            // if not, try to find the value that does line up\n            i = -1;\n            rowValues.forEach(function (v, j) {\n              var x1 = v.x.constructor === Date ? +v.x : v.x;\n              var x2 = d.x.constructor === Date ? +d.x : d.x;\n\n              if (x1 === x2) {\n                i = j;\n              }\n            });\n          }\n\n          if (i in rowValues && rowValues[i].value * d.value >= 0) {\n            offset += scale(values[i]) - y0;\n          }\n        }\n      });\n      return offset;\n    };\n  };\n\n  ChartInternal.prototype.isWithinShape = function (that, d) {\n    var $$ = this,\n        shape = $$.d3.select(that),\n        isWithin;\n\n    if (!$$.isTargetToShow(d.id)) {\n      isWithin = false;\n    } else if (that.nodeName === 'circle') {\n      isWithin = $$.isStepType(d) ? $$.isWithinStep(that, $$.getYScale(d.id)(d.value)) : $$.isWithinCircle(that, $$.pointSelectR(d) * 1.5);\n    } else if (that.nodeName === 'path') {\n      isWithin = shape.classed(CLASS.bar) ? $$.isWithinBar($$.d3.mouse(that), that) : true;\n    }\n\n    return isWithin;\n  };\n\n  ChartInternal.prototype.getInterpolate = function (d) {\n    var $$ = this,\n        d3 = $$.d3,\n        types = {\n      linear: d3.curveLinear,\n      'linear-closed': d3.curveLinearClosed,\n      basis: d3.curveBasis,\n      'basis-open': d3.curveBasisOpen,\n      'basis-closed': d3.curveBasisClosed,\n      bundle: d3.curveBundle,\n      cardinal: d3.curveCardinal,\n      'cardinal-open': d3.curveCardinalOpen,\n      'cardinal-closed': d3.curveCardinalClosed,\n      monotone: d3.curveMonotoneX,\n      step: d3.curveStep,\n      'step-before': d3.curveStepBefore,\n      'step-after': d3.curveStepAfter\n    },\n        type;\n\n    if ($$.isSplineType(d)) {\n      type = types[$$.config.spline_interpolation_type] || types.cardinal;\n    } else if ($$.isStepType(d)) {\n      type = types[$$.config.line_step_type];\n    } else {\n      type = types.linear;\n    }\n\n    return type;\n  };\n\n  ChartInternal.prototype.initLine = function () {\n    var $$ = this;\n    $$.main.select('.' + CLASS.chart).append('g').attr('class', CLASS.chartLines);\n  };\n\n  ChartInternal.prototype.updateTargetsForLine = function (targets) {\n    var $$ = this,\n        config = $$.config,\n        mainLines,\n        mainLineEnter,\n        classChartLine = $$.classChartLine.bind($$),\n        classLines = $$.classLines.bind($$),\n        classAreas = $$.classAreas.bind($$),\n        classCircles = $$.classCircles.bind($$),\n        classFocus = $$.classFocus.bind($$);\n    mainLines = $$.main.select('.' + CLASS.chartLines).selectAll('.' + CLASS.chartLine).data(targets).attr('class', function (d) {\n      return classChartLine(d) + classFocus(d);\n    });\n    mainLineEnter = mainLines.enter().append('g').attr('class', classChartLine).style('opacity', 0).style('pointer-events', 'none'); // Lines for each data\n\n    mainLineEnter.append('g').attr('class', classLines); // Areas\n\n    mainLineEnter.append('g').attr('class', classAreas); // Circles for each data point on lines\n\n    mainLineEnter.append('g').attr('class', function (d) {\n      return $$.generateClass(CLASS.selectedCircles, d.id);\n    });\n    mainLineEnter.append('g').attr('class', classCircles).style('cursor', function (d) {\n      return config.data_selection_isselectable(d) ? 'pointer' : null;\n    }); // Update date for selected circles\n\n    targets.forEach(function (t) {\n      $$.main.selectAll('.' + CLASS.selectedCircles + $$.getTargetSelectorSuffix(t.id)).selectAll('.' + CLASS.selectedCircle).each(function (d) {\n        d.value = t.values[d.index].value;\n      });\n    }); // MEMO: can not keep same color...\n    //mainLineUpdate.exit().remove();\n  };\n\n  ChartInternal.prototype.updateLine = function (durationForExit) {\n    var $$ = this;\n    var mainLine = $$.main.selectAll('.' + CLASS.lines).selectAll('.' + CLASS.line).data($$.lineData.bind($$));\n    var mainLineEnter = mainLine.enter().append('path').attr('class', $$.classLine.bind($$)).style('stroke', $$.color);\n    $$.mainLine = mainLineEnter.merge(mainLine).style('opacity', $$.initialOpacity.bind($$)).style('shape-rendering', function (d) {\n      return $$.isStepType(d) ? 'crispEdges' : '';\n    }).attr('transform', null);\n    mainLine.exit().transition().duration(durationForExit).style('opacity', 0);\n  };\n\n  ChartInternal.prototype.redrawLine = function (drawLine, withTransition, transition) {\n    return [(withTransition ? this.mainLine.transition(transition) : this.mainLine).attr('d', drawLine).style('stroke', this.color).style('opacity', 1)];\n  };\n\n  ChartInternal.prototype.generateDrawLine = function (lineIndices, isSub) {\n    var $$ = this,\n        config = $$.config,\n        line = $$.d3.line(),\n        getPoints = $$.generateGetLinePoints(lineIndices, isSub),\n        yScaleGetter = isSub ? $$.getSubYScale : $$.getYScale,\n        xValue = function xValue(d) {\n      return (isSub ? $$.subxx : $$.xx).call($$, d);\n    },\n        yValue = function yValue(d, i) {\n      return config.data_groups.length > 0 ? getPoints(d, i)[0][1] : yScaleGetter.call($$, d.id)(d.value);\n    };\n\n    line = config.axis_rotated ? line.x(yValue).y(xValue) : line.x(xValue).y(yValue);\n\n    if (!config.line_connectNull) {\n      line = line.defined(function (d) {\n        return d.value != null;\n      });\n    }\n\n    return function (d) {\n      var values = config.line_connectNull ? $$.filterRemoveNull(d.values) : d.values,\n          x = isSub ? $$.subX : $$.x,\n          y = yScaleGetter.call($$, d.id),\n          x0 = 0,\n          y0 = 0,\n          path;\n\n      if ($$.isLineType(d)) {\n        if (config.data_regions[d.id]) {\n          path = $$.lineWithRegions(values, x, y, config.data_regions[d.id]);\n        } else {\n          if ($$.isStepType(d)) {\n            values = $$.convertValuesToStep(values);\n          }\n\n          path = line.curve($$.getInterpolate(d))(values);\n        }\n      } else {\n        if (values[0]) {\n          x0 = x(values[0].x);\n          y0 = y(values[0].value);\n        }\n\n        path = config.axis_rotated ? 'M ' + y0 + ' ' + x0 : 'M ' + x0 + ' ' + y0;\n      }\n\n      return path ? path : 'M 0 0';\n    };\n  };\n\n  ChartInternal.prototype.generateGetLinePoints = function (lineIndices, isSub) {\n    // partial duplication of generateGetBarPoints\n    var $$ = this,\n        config = $$.config,\n        lineTargetsNum = lineIndices.__max__ + 1,\n        x = $$.getShapeX(0, lineTargetsNum, lineIndices, !!isSub),\n        y = $$.getShapeY(!!isSub),\n        lineOffset = $$.getShapeOffset($$.isLineType, lineIndices, !!isSub),\n        yScale = isSub ? $$.getSubYScale : $$.getYScale;\n    return function (d, i) {\n      var y0 = yScale.call($$, d.id)(0),\n          offset = lineOffset(d, i) || y0,\n          // offset is for stacked area chart\n      posX = x(d),\n          posY = y(d); // fix posY not to overflow opposite quadrant\n\n      if (config.axis_rotated) {\n        if (0 < d.value && posY < y0 || d.value < 0 && y0 < posY) {\n          posY = y0;\n        }\n      } // 1 point that marks the line position\n\n\n      return [[posX, posY - (y0 - offset)], [posX, posY - (y0 - offset)], // needed for compatibility\n      [posX, posY - (y0 - offset)], // needed for compatibility\n      [posX, posY - (y0 - offset)] // needed for compatibility\n      ];\n    };\n  };\n\n  ChartInternal.prototype.lineWithRegions = function (d, x, y, _regions) {\n    var $$ = this,\n        config = $$.config,\n        prev = -1,\n        i,\n        j,\n        s = 'M',\n        sWithRegion,\n        xp,\n        yp,\n        dx,\n        dy,\n        dd,\n        diff,\n        diffx2,\n        xOffset = $$.isCategorized() ? 0.5 : 0,\n        xValue,\n        yValue,\n        regions = [];\n\n    function isWithinRegions(x, regions) {\n      var i;\n\n      for (i = 0; i < regions.length; i++) {\n        if (regions[i].start < x && x <= regions[i].end) {\n          return true;\n        }\n      }\n\n      return false;\n    } // Check start/end of regions\n\n\n    if (isDefined(_regions)) {\n      for (i = 0; i < _regions.length; i++) {\n        regions[i] = {};\n\n        if (isUndefined(_regions[i].start)) {\n          regions[i].start = d[0].x;\n        } else {\n          regions[i].start = $$.isTimeSeries() ? $$.parseDate(_regions[i].start) : _regions[i].start;\n        }\n\n        if (isUndefined(_regions[i].end)) {\n          regions[i].end = d[d.length - 1].x;\n        } else {\n          regions[i].end = $$.isTimeSeries() ? $$.parseDate(_regions[i].end) : _regions[i].end;\n        }\n      }\n    } // Set scales\n\n\n    xValue = config.axis_rotated ? function (d) {\n      return y(d.value);\n    } : function (d) {\n      return x(d.x);\n    };\n    yValue = config.axis_rotated ? function (d) {\n      return x(d.x);\n    } : function (d) {\n      return y(d.value);\n    }; // Define svg generator function for region\n\n    function generateM(points) {\n      return 'M' + points[0][0] + ' ' + points[0][1] + ' ' + points[1][0] + ' ' + points[1][1];\n    }\n\n    if ($$.isTimeSeries()) {\n      sWithRegion = function sWithRegion(d0, d1, j, diff) {\n        var x0 = d0.x.getTime(),\n            x_diff = d1.x - d0.x,\n            xv0 = new Date(x0 + x_diff * j),\n            xv1 = new Date(x0 + x_diff * (j + diff)),\n            points;\n\n        if (config.axis_rotated) {\n          points = [[y(yp(j)), x(xv0)], [y(yp(j + diff)), x(xv1)]];\n        } else {\n          points = [[x(xv0), y(yp(j))], [x(xv1), y(yp(j + diff))]];\n        }\n\n        return generateM(points);\n      };\n    } else {\n      sWithRegion = function sWithRegion(d0, d1, j, diff) {\n        var points;\n\n        if (config.axis_rotated) {\n          points = [[y(yp(j), true), x(xp(j))], [y(yp(j + diff), true), x(xp(j + diff))]];\n        } else {\n          points = [[x(xp(j), true), y(yp(j))], [x(xp(j + diff), true), y(yp(j + diff))]];\n        }\n\n        return generateM(points);\n      };\n    } // Generate\n\n\n    for (i = 0; i < d.length; i++) {\n      // Draw as normal\n      if (isUndefined(regions) || !isWithinRegions(d[i].x, regions)) {\n        s += ' ' + xValue(d[i]) + ' ' + yValue(d[i]);\n      } // Draw with region // TODO: Fix for horizotal charts\n      else {\n          xp = $$.getScale(d[i - 1].x + xOffset, d[i].x + xOffset, $$.isTimeSeries());\n          yp = $$.getScale(d[i - 1].value, d[i].value);\n          dx = x(d[i].x) - x(d[i - 1].x);\n          dy = y(d[i].value) - y(d[i - 1].value);\n          dd = Math.sqrt(Math.pow(dx, 2) + Math.pow(dy, 2));\n          diff = 2 / dd;\n          diffx2 = diff * 2;\n\n          for (j = diff; j <= 1; j += diffx2) {\n            s += sWithRegion(d[i - 1], d[i], j, diff);\n          }\n        }\n\n      prev = d[i].x;\n    }\n\n    return s;\n  };\n\n  ChartInternal.prototype.updateArea = function (durationForExit) {\n    var $$ = this,\n        d3 = $$.d3;\n    var mainArea = $$.main.selectAll('.' + CLASS.areas).selectAll('.' + CLASS.area).data($$.lineData.bind($$));\n    var mainAreaEnter = mainArea.enter().append('path').attr('class', $$.classArea.bind($$)).style('fill', $$.color).style('opacity', function () {\n      $$.orgAreaOpacity = +d3.select(this).style('opacity');\n      return 0;\n    });\n    $$.mainArea = mainAreaEnter.merge(mainArea).style('opacity', $$.orgAreaOpacity);\n    mainArea.exit().transition().duration(durationForExit).style('opacity', 0);\n  };\n\n  ChartInternal.prototype.redrawArea = function (drawArea, withTransition, transition) {\n    return [(withTransition ? this.mainArea.transition(transition) : this.mainArea).attr('d', drawArea).style('fill', this.color).style('opacity', this.orgAreaOpacity)];\n  };\n\n  ChartInternal.prototype.generateDrawArea = function (areaIndices, isSub) {\n    var $$ = this,\n        config = $$.config,\n        area = $$.d3.area(),\n        getPoints = $$.generateGetAreaPoints(areaIndices, isSub),\n        yScaleGetter = isSub ? $$.getSubYScale : $$.getYScale,\n        xValue = function xValue(d) {\n      return (isSub ? $$.subxx : $$.xx).call($$, d);\n    },\n        value0 = function value0(d, i) {\n      return config.data_groups.length > 0 ? getPoints(d, i)[0][1] : yScaleGetter.call($$, d.id)($$.getAreaBaseValue(d.id));\n    },\n        value1 = function value1(d, i) {\n      return config.data_groups.length > 0 ? getPoints(d, i)[1][1] : yScaleGetter.call($$, d.id)(d.value);\n    };\n\n    area = config.axis_rotated ? area.x0(value0).x1(value1).y(xValue) : area.x(xValue).y0(config.area_above ? 0 : value0).y1(value1);\n\n    if (!config.line_connectNull) {\n      area = area.defined(function (d) {\n        return d.value !== null;\n      });\n    }\n\n    return function (d) {\n      var values = config.line_connectNull ? $$.filterRemoveNull(d.values) : d.values,\n          x0 = 0,\n          y0 = 0,\n          path;\n\n      if ($$.isAreaType(d)) {\n        if ($$.isStepType(d)) {\n          values = $$.convertValuesToStep(values);\n        }\n\n        path = area.curve($$.getInterpolate(d))(values);\n      } else {\n        if (values[0]) {\n          x0 = $$.x(values[0].x);\n          y0 = $$.getYScale(d.id)(values[0].value);\n        }\n\n        path = config.axis_rotated ? 'M ' + y0 + ' ' + x0 : 'M ' + x0 + ' ' + y0;\n      }\n\n      return path ? path : 'M 0 0';\n    };\n  };\n\n  ChartInternal.prototype.getAreaBaseValue = function () {\n    return 0;\n  };\n\n  ChartInternal.prototype.generateGetAreaPoints = function (areaIndices, isSub) {\n    // partial duplication of generateGetBarPoints\n    var $$ = this,\n        config = $$.config,\n        areaTargetsNum = areaIndices.__max__ + 1,\n        x = $$.getShapeX(0, areaTargetsNum, areaIndices, !!isSub),\n        y = $$.getShapeY(!!isSub),\n        areaOffset = $$.getShapeOffset($$.isAreaType, areaIndices, !!isSub),\n        yScale = isSub ? $$.getSubYScale : $$.getYScale;\n    return function (d, i) {\n      var y0 = yScale.call($$, d.id)(0),\n          offset = areaOffset(d, i) || y0,\n          // offset is for stacked area chart\n      posX = x(d),\n          posY = y(d); // fix posY not to overflow opposite quadrant\n\n      if (config.axis_rotated) {\n        if (0 < d.value && posY < y0 || d.value < 0 && y0 < posY) {\n          posY = y0;\n        }\n      } // 1 point that marks the area position\n\n\n      return [[posX, offset], [posX, posY - (y0 - offset)], [posX, posY - (y0 - offset)], // needed for compatibility\n      [posX, offset] // needed for compatibility\n      ];\n    };\n  };\n\n  ChartInternal.prototype.updateCircle = function (cx, cy) {\n    var $$ = this;\n    var mainCircle = $$.main.selectAll('.' + CLASS.circles).selectAll('.' + CLASS.circle).data($$.lineOrScatterOrStanfordData.bind($$));\n    var mainCircleEnter = mainCircle.enter().append('circle').attr('shape-rendering', $$.isStanfordGraphType() ? 'crispEdges' : '').attr('class', $$.classCircle.bind($$)).attr('cx', cx).attr('cy', cy).attr('r', $$.pointR.bind($$)).style('color', $$.isStanfordGraphType() ? $$.getStanfordPointColor.bind($$) : $$.color);\n    $$.mainCircle = mainCircleEnter.merge(mainCircle).style('opacity', $$.isStanfordGraphType() ? 1 : $$.initialOpacityForCircle.bind($$));\n    mainCircle.exit().style('opacity', 0);\n  };\n\n  ChartInternal.prototype.redrawCircle = function (cx, cy, withTransition, transition) {\n    var $$ = this,\n        selectedCircles = $$.main.selectAll('.' + CLASS.selectedCircle);\n    return [(withTransition ? $$.mainCircle.transition(transition) : $$.mainCircle).style('opacity', this.opacityForCircle.bind($$)).style('color', $$.isStanfordGraphType() ? $$.getStanfordPointColor.bind($$) : $$.color).attr('cx', cx).attr('cy', cy), (withTransition ? selectedCircles.transition(transition) : selectedCircles).attr('cx', cx).attr('cy', cy)];\n  };\n\n  ChartInternal.prototype.circleX = function (d) {\n    return d.x || d.x === 0 ? this.x(d.x) : null;\n  };\n\n  ChartInternal.prototype.updateCircleY = function () {\n    var $$ = this,\n        lineIndices,\n        getPoints;\n\n    if ($$.config.data_groups.length > 0) {\n      lineIndices = $$.getShapeIndices($$.isLineType), getPoints = $$.generateGetLinePoints(lineIndices);\n\n      $$.circleY = function (d, i) {\n        return getPoints(d, i)[0][1];\n      };\n    } else {\n      $$.circleY = function (d) {\n        return $$.getYScale(d.id)(d.value);\n      };\n    }\n  };\n\n  ChartInternal.prototype.getCircles = function (i, id) {\n    var $$ = this;\n    return (id ? $$.main.selectAll('.' + CLASS.circles + $$.getTargetSelectorSuffix(id)) : $$.main).selectAll('.' + CLASS.circle + (isValue(i) ? '-' + i : ''));\n  };\n\n  ChartInternal.prototype.expandCircles = function (i, id, reset) {\n    var $$ = this,\n        r = $$.pointExpandedR.bind($$);\n\n    if (reset) {\n      $$.unexpandCircles();\n    }\n\n    $$.getCircles(i, id).classed(CLASS.EXPANDED, true).attr('r', r);\n  };\n\n  ChartInternal.prototype.unexpandCircles = function (i) {\n    var $$ = this,\n        r = $$.pointR.bind($$);\n    $$.getCircles(i).filter(function () {\n      return $$.d3.select(this).classed(CLASS.EXPANDED);\n    }).classed(CLASS.EXPANDED, false).attr('r', r);\n  };\n\n  ChartInternal.prototype.pointR = function (d) {\n    var $$ = this,\n        config = $$.config;\n    return $$.isStepType(d) ? 0 : isFunction(config.point_r) ? config.point_r(d) : config.point_r;\n  };\n\n  ChartInternal.prototype.pointExpandedR = function (d) {\n    var $$ = this,\n        config = $$.config;\n\n    if (config.point_focus_expand_enabled) {\n      return isFunction(config.point_focus_expand_r) ? config.point_focus_expand_r(d) : config.point_focus_expand_r ? config.point_focus_expand_r : $$.pointR(d) * 1.75;\n    } else {\n      return $$.pointR(d);\n    }\n  };\n\n  ChartInternal.prototype.pointSelectR = function (d) {\n    var $$ = this,\n        config = $$.config;\n    return isFunction(config.point_select_r) ? config.point_select_r(d) : config.point_select_r ? config.point_select_r : $$.pointR(d) * 4;\n  };\n\n  ChartInternal.prototype.isWithinCircle = function (that, r) {\n    var d3 = this.d3,\n        mouse = d3.mouse(that),\n        d3_this = d3.select(that),\n        cx = +d3_this.attr('cx'),\n        cy = +d3_this.attr('cy');\n    return Math.sqrt(Math.pow(cx - mouse[0], 2) + Math.pow(cy - mouse[1], 2)) < r;\n  };\n\n  ChartInternal.prototype.isWithinStep = function (that, y) {\n    return Math.abs(y - this.d3.mouse(that)[1]) < 30;\n  };\n\n  ChartInternal.prototype.getCurrentWidth = function () {\n    var $$ = this,\n        config = $$.config;\n    return config.size_width ? config.size_width : $$.getParentWidth();\n  };\n\n  ChartInternal.prototype.getCurrentHeight = function () {\n    var $$ = this,\n        config = $$.config,\n        h = config.size_height ? config.size_height : $$.getParentHeight();\n    return h > 0 ? h : 320 / ($$.hasType('gauge') && !config.gauge_fullCircle ? 2 : 1);\n  };\n\n  ChartInternal.prototype.getCurrentPaddingTop = function () {\n    var $$ = this,\n        config = $$.config,\n        padding = isValue(config.padding_top) ? config.padding_top : 0;\n\n    if ($$.title && $$.title.node()) {\n      padding += $$.getTitlePadding();\n    }\n\n    return padding;\n  };\n\n  ChartInternal.prototype.getCurrentPaddingBottom = function () {\n    var config = this.config;\n    return isValue(config.padding_bottom) ? config.padding_bottom : 0;\n  };\n\n  ChartInternal.prototype.getCurrentPaddingLeft = function (withoutRecompute) {\n    var $$ = this,\n        config = $$.config;\n\n    if (isValue(config.padding_left)) {\n      return config.padding_left;\n    } else if (config.axis_rotated) {\n      return !config.axis_x_show || config.axis_x_inner ? 1 : Math.max(ceil10($$.getAxisWidthByAxisId('x', withoutRecompute)), 40);\n    } else if (!config.axis_y_show || config.axis_y_inner) {\n      // && !config.axis_rotated\n      return $$.axis.getYAxisLabelPosition().isOuter ? 30 : 1;\n    } else {\n      return ceil10($$.getAxisWidthByAxisId('y', withoutRecompute));\n    }\n  };\n\n  ChartInternal.prototype.getCurrentPaddingRight = function () {\n    var $$ = this,\n        config = $$.config,\n        padding = 0,\n        defaultPadding = 10,\n        legendWidthOnRight = $$.isLegendRight ? $$.getLegendWidth() + 20 : 0;\n\n    if (isValue(config.padding_right)) {\n      padding = config.padding_right + 1; // 1 is needed not to hide tick line\n    } else if (config.axis_rotated) {\n      padding = defaultPadding + legendWidthOnRight;\n    } else if (!config.axis_y2_show || config.axis_y2_inner) {\n      // && !config.axis_rotated\n      padding = 2 + legendWidthOnRight + ($$.axis.getY2AxisLabelPosition().isOuter ? 20 : 0);\n    } else {\n      padding = ceil10($$.getAxisWidthByAxisId('y2')) + legendWidthOnRight;\n    }\n\n    if ($$.colorScale && $$.colorScale.node()) {\n      padding += $$.getColorScalePadding();\n    }\n\n    return padding;\n  };\n\n  ChartInternal.prototype.getParentRectValue = function (key) {\n    var parent = this.selectChart.node(),\n        v;\n\n    while (parent && parent.tagName !== 'BODY') {\n      try {\n        v = parent.getBoundingClientRect()[key];\n      } catch (e) {\n        if (key === 'width') {\n          // In IE in certain cases getBoundingClientRect\n          // will cause an \"unspecified error\"\n          v = parent.offsetWidth;\n        }\n      }\n\n      if (v) {\n        break;\n      }\n\n      parent = parent.parentNode;\n    }\n\n    return v;\n  };\n\n  ChartInternal.prototype.getParentWidth = function () {\n    return this.getParentRectValue('width');\n  };\n\n  ChartInternal.prototype.getParentHeight = function () {\n    var h = this.selectChart.style('height');\n    return h.indexOf('px') > 0 ? +h.replace('px', '') : 0;\n  };\n\n  ChartInternal.prototype.getSvgLeft = function (withoutRecompute) {\n    var $$ = this,\n        config = $$.config,\n        hasLeftAxisRect = config.axis_rotated || !config.axis_rotated && !config.axis_y_inner,\n        leftAxisClass = config.axis_rotated ? CLASS.axisX : CLASS.axisY,\n        leftAxis = $$.main.select('.' + leftAxisClass).node(),\n        svgRect = leftAxis && hasLeftAxisRect ? leftAxis.getBoundingClientRect() : {\n      right: 0\n    },\n        chartRect = $$.selectChart.node().getBoundingClientRect(),\n        hasArc = $$.hasArcType(),\n        svgLeft = svgRect.right - chartRect.left - (hasArc ? 0 : $$.getCurrentPaddingLeft(withoutRecompute));\n    return svgLeft > 0 ? svgLeft : 0;\n  };\n\n  ChartInternal.prototype.getAxisWidthByAxisId = function (id, withoutRecompute) {\n    var $$ = this,\n        position = $$.axis.getLabelPositionById(id);\n    return $$.axis.getMaxTickWidth(id, withoutRecompute) + (position.isInner ? 20 : 40);\n  };\n\n  ChartInternal.prototype.getHorizontalAxisHeight = function (axisId) {\n    var $$ = this,\n        config = $$.config,\n        h = 30;\n\n    if (axisId === 'x' && !config.axis_x_show) {\n      return 8;\n    }\n\n    if (axisId === 'x' && config.axis_x_height) {\n      return config.axis_x_height;\n    }\n\n    if (axisId === 'y' && !config.axis_y_show) {\n      return config.legend_show && !$$.isLegendRight && !$$.isLegendInset ? 10 : 1;\n    }\n\n    if (axisId === 'y2' && !config.axis_y2_show) {\n      return $$.rotated_padding_top;\n    } // Calculate x axis height when tick rotated\n\n\n    if (axisId === 'x' && !config.axis_rotated && config.axis_x_tick_rotate) {\n      h = 30 + $$.axis.getMaxTickWidth(axisId) * Math.cos(Math.PI * (90 - Math.abs(config.axis_x_tick_rotate)) / 180);\n    } // Calculate y axis height when tick rotated\n\n\n    if (axisId === 'y' && config.axis_rotated && config.axis_y_tick_rotate) {\n      h = 30 + $$.axis.getMaxTickWidth(axisId) * Math.cos(Math.PI * (90 - Math.abs(config.axis_y_tick_rotate)) / 180);\n    }\n\n    return h + ($$.axis.getLabelPositionById(axisId).isInner ? 0 : 10) + (axisId === 'y2' ? -10 : 0);\n  };\n\n  ChartInternal.prototype.initBrush = function (scale) {\n    var $$ = this,\n        d3 = $$.d3; // TODO: dynamically change brushY/brushX according to axis_rotated.\n\n    $$.brush = ($$.config.axis_rotated ? d3.brushY() : d3.brushX()).on('brush', function () {\n      var event = d3.event.sourceEvent;\n\n      if (event && event.type === 'zoom') {\n        return;\n      }\n\n      $$.redrawForBrush();\n    }).on('end', function () {\n      var event = d3.event.sourceEvent;\n\n      if (event && event.type === 'zoom') {\n        return;\n      }\n\n      if ($$.brush.empty() && event && event.type !== 'end') {\n        $$.brush.clear();\n      }\n    });\n\n    $$.brush.updateExtent = function () {\n      var range = this.scale.range(),\n          extent;\n\n      if ($$.config.axis_rotated) {\n        extent = [[0, range[0]], [$$.width2, range[1]]];\n      } else {\n        extent = [[range[0], 0], [range[1], $$.height2]];\n      }\n\n      this.extent(extent);\n      return this;\n    };\n\n    $$.brush.updateScale = function (scale) {\n      this.scale = scale;\n      return this;\n    };\n\n    $$.brush.update = function (scale) {\n      this.updateScale(scale || $$.subX).updateExtent();\n      $$.context.select('.' + CLASS.brush).call(this);\n    };\n\n    $$.brush.clear = function () {\n      $$.context.select('.' + CLASS.brush).call($$.brush.move, null);\n    };\n\n    $$.brush.selection = function () {\n      return d3.brushSelection($$.context.select('.' + CLASS.brush).node());\n    };\n\n    $$.brush.selectionAsValue = function (selectionAsValue, withTransition) {\n      var selection, brush;\n\n      if (selectionAsValue) {\n        if ($$.context) {\n          selection = [this.scale(selectionAsValue[0]), this.scale(selectionAsValue[1])];\n          brush = $$.context.select('.' + CLASS.brush);\n\n          if (withTransition) {\n            brush = brush.transition();\n          }\n\n          $$.brush.move(brush, selection);\n        }\n\n        return [];\n      }\n\n      selection = $$.brush.selection() || [0, 0];\n      return [this.scale.invert(selection[0]), this.scale.invert(selection[1])];\n    };\n\n    $$.brush.empty = function () {\n      var selection = $$.brush.selection();\n      return !selection || selection[0] === selection[1];\n    };\n\n    return $$.brush.updateScale(scale);\n  };\n\n  ChartInternal.prototype.initSubchart = function () {\n    var $$ = this,\n        config = $$.config,\n        context = $$.context = $$.svg.append('g').attr('transform', $$.getTranslate('context')); // set style\n\n    context.style('visibility', 'visible'); // Define g for chart area\n\n    context.append('g').attr('clip-path', $$.clipPathForSubchart).attr('class', CLASS.chart); // Define g for bar chart area\n\n    context.select('.' + CLASS.chart).append('g').attr('class', CLASS.chartBars); // Define g for line chart area\n\n    context.select('.' + CLASS.chart).append('g').attr('class', CLASS.chartLines); // Add extent rect for Brush\n\n    context.append('g').attr('clip-path', $$.clipPath).attr('class', CLASS.brush); // ATTENTION: This must be called AFTER chart added\n    // Add Axis\n\n    $$.axes.subx = context.append('g').attr('class', CLASS.axisX).attr('transform', $$.getTranslate('subx')).attr('clip-path', config.axis_rotated ? '' : $$.clipPathForXAxis);\n  };\n\n  ChartInternal.prototype.initSubchartBrush = function () {\n    var $$ = this; // Add extent rect for Brush\n\n    $$.initBrush($$.subX).updateExtent();\n    $$.context.select('.' + CLASS.brush).call($$.brush);\n  };\n\n  ChartInternal.prototype.updateTargetsForSubchart = function (targets) {\n    var $$ = this,\n        context = $$.context,\n        config = $$.config,\n        contextLineEnter,\n        contextLine,\n        contextBarEnter,\n        contextBar,\n        classChartBar = $$.classChartBar.bind($$),\n        classBars = $$.classBars.bind($$),\n        classChartLine = $$.classChartLine.bind($$),\n        classLines = $$.classLines.bind($$),\n        classAreas = $$.classAreas.bind($$); //-- Bar --//\n\n    contextBar = context.select('.' + CLASS.chartBars).selectAll('.' + CLASS.chartBar).data(targets);\n    contextBarEnter = contextBar.enter().append('g').style('opacity', 0);\n    contextBarEnter.merge(contextBar).attr('class', classChartBar); // Bars for each data\n\n    contextBarEnter.append('g').attr('class', classBars); //-- Line --//\n\n    contextLine = context.select('.' + CLASS.chartLines).selectAll('.' + CLASS.chartLine).data(targets);\n    contextLineEnter = contextLine.enter().append('g').style('opacity', 0);\n    contextLineEnter.merge(contextLine).attr('class', classChartLine); // Lines for each data\n\n    contextLineEnter.append('g').attr('class', classLines); // Area\n\n    contextLineEnter.append('g').attr('class', classAreas); //-- Brush --//\n\n    context.selectAll('.' + CLASS.brush + ' rect').attr(config.axis_rotated ? 'width' : 'height', config.axis_rotated ? $$.width2 : $$.height2);\n  };\n\n  ChartInternal.prototype.updateBarForSubchart = function (durationForExit) {\n    var $$ = this;\n    var contextBar = $$.context.selectAll('.' + CLASS.bars).selectAll('.' + CLASS.bar).data($$.barData.bind($$));\n    var contextBarEnter = contextBar.enter().append('path').attr('class', $$.classBar.bind($$)).style('stroke', 'none').style('fill', $$.color);\n    contextBar.exit().transition().duration(durationForExit).style('opacity', 0).remove();\n    $$.contextBar = contextBarEnter.merge(contextBar).style('opacity', $$.initialOpacity.bind($$));\n  };\n\n  ChartInternal.prototype.redrawBarForSubchart = function (drawBarOnSub, withTransition, duration) {\n    (withTransition ? this.contextBar.transition(Math.random().toString()).duration(duration) : this.contextBar).attr('d', drawBarOnSub).style('opacity', 1);\n  };\n\n  ChartInternal.prototype.updateLineForSubchart = function (durationForExit) {\n    var $$ = this;\n    var contextLine = $$.context.selectAll('.' + CLASS.lines).selectAll('.' + CLASS.line).data($$.lineData.bind($$));\n    var contextLineEnter = contextLine.enter().append('path').attr('class', $$.classLine.bind($$)).style('stroke', $$.color);\n    contextLine.exit().transition().duration(durationForExit).style('opacity', 0).remove();\n    $$.contextLine = contextLineEnter.merge(contextLine).style('opacity', $$.initialOpacity.bind($$));\n  };\n\n  ChartInternal.prototype.redrawLineForSubchart = function (drawLineOnSub, withTransition, duration) {\n    (withTransition ? this.contextLine.transition(Math.random().toString()).duration(duration) : this.contextLine).attr('d', drawLineOnSub).style('opacity', 1);\n  };\n\n  ChartInternal.prototype.updateAreaForSubchart = function (durationForExit) {\n    var $$ = this,\n        d3 = $$.d3;\n    var contextArea = $$.context.selectAll('.' + CLASS.areas).selectAll('.' + CLASS.area).data($$.lineData.bind($$));\n    var contextAreaEnter = contextArea.enter().append('path').attr('class', $$.classArea.bind($$)).style('fill', $$.color).style('opacity', function () {\n      $$.orgAreaOpacity = +d3.select(this).style('opacity');\n      return 0;\n    });\n    contextArea.exit().transition().duration(durationForExit).style('opacity', 0).remove();\n    $$.contextArea = contextAreaEnter.merge(contextArea).style('opacity', 0);\n  };\n\n  ChartInternal.prototype.redrawAreaForSubchart = function (drawAreaOnSub, withTransition, duration) {\n    (withTransition ? this.contextArea.transition(Math.random().toString()).duration(duration) : this.contextArea).attr('d', drawAreaOnSub).style('fill', this.color).style('opacity', this.orgAreaOpacity);\n  };\n\n  ChartInternal.prototype.redrawSubchart = function (withSubchart, transitions, duration, durationForExit, areaIndices, barIndices, lineIndices) {\n    var $$ = this,\n        d3 = $$.d3,\n        drawAreaOnSub,\n        drawBarOnSub,\n        drawLineOnSub; // reflect main chart to extent on subchart if zoomed\n\n    if (d3.event && d3.event.type === 'zoom') {\n      $$.brush.selectionAsValue($$.x.orgDomain());\n    } // update subchart elements if needed\n\n\n    if (withSubchart) {\n      // extent rect\n      if (!$$.brush.empty()) {\n        $$.brush.selectionAsValue($$.x.orgDomain());\n      } // setup drawer - MEMO: this must be called after axis updated\n\n\n      drawAreaOnSub = $$.generateDrawArea(areaIndices, true);\n      drawBarOnSub = $$.generateDrawBar(barIndices, true);\n      drawLineOnSub = $$.generateDrawLine(lineIndices, true);\n      $$.updateBarForSubchart(duration);\n      $$.updateLineForSubchart(duration);\n      $$.updateAreaForSubchart(duration);\n      $$.redrawBarForSubchart(drawBarOnSub, duration, duration);\n      $$.redrawLineForSubchart(drawLineOnSub, duration, duration);\n      $$.redrawAreaForSubchart(drawAreaOnSub, duration, duration);\n    }\n  };\n\n  ChartInternal.prototype.redrawForBrush = function () {\n    var $$ = this,\n        x = $$.x,\n        d3 = $$.d3,\n        s;\n    $$.redraw({\n      withTransition: false,\n      withY: $$.config.zoom_rescale,\n      withSubchart: false,\n      withUpdateXDomain: true,\n      withEventRect: false,\n      withDimension: false\n    }); // update zoom transation binded to event rect\n\n    s = d3.event.selection || $$.brush.scale.range();\n    $$.main.select('.' + CLASS.eventRect).call($$.zoom.transform, d3.zoomIdentity.scale($$.width / (s[1] - s[0])).translate(-s[0], 0));\n    $$.config.subchart_onbrush.call($$.api, x.orgDomain());\n  };\n\n  ChartInternal.prototype.transformContext = function (withTransition, transitions) {\n    var $$ = this,\n        subXAxis;\n\n    if (transitions && transitions.axisSubX) {\n      subXAxis = transitions.axisSubX;\n    } else {\n      subXAxis = $$.context.select('.' + CLASS.axisX);\n\n      if (withTransition) {\n        subXAxis = subXAxis.transition();\n      }\n    }\n\n    $$.context.attr('transform', $$.getTranslate('context'));\n    subXAxis.attr('transform', $$.getTranslate('subx'));\n  };\n\n  ChartInternal.prototype.getDefaultSelection = function () {\n    var $$ = this,\n        config = $$.config,\n        selection = isFunction(config.axis_x_selection) ? config.axis_x_selection($$.getXDomain($$.data.targets)) : config.axis_x_selection;\n\n    if ($$.isTimeSeries()) {\n      selection = [$$.parseDate(selection[0]), $$.parseDate(selection[1])];\n    }\n\n    return selection;\n  };\n\n  ChartInternal.prototype.removeSubchart = function () {\n    var $$ = this;\n    $$.brush = null;\n    $$.context.remove();\n    $$.context = null;\n  };\n\n  ChartInternal.prototype.initText = function () {\n    var $$ = this;\n    $$.main.select('.' + CLASS.chart).append('g').attr('class', CLASS.chartTexts);\n    $$.mainText = $$.d3.selectAll([]);\n  };\n\n  ChartInternal.prototype.updateTargetsForText = function (targets) {\n    var $$ = this,\n        classChartText = $$.classChartText.bind($$),\n        classTexts = $$.classTexts.bind($$),\n        classFocus = $$.classFocus.bind($$);\n    var mainText = $$.main.select('.' + CLASS.chartTexts).selectAll('.' + CLASS.chartText).data(targets);\n    var mainTextEnter = mainText.enter().append('g').attr('class', classChartText).style('opacity', 0).style('pointer-events', 'none');\n    mainTextEnter.append('g').attr('class', classTexts);\n    mainTextEnter.merge(mainText).attr('class', function (d) {\n      return classChartText(d) + classFocus(d);\n    });\n  };\n\n  ChartInternal.prototype.updateText = function (xForText, yForText, durationForExit) {\n    var $$ = this,\n        config = $$.config,\n        barOrLineData = $$.barOrLineData.bind($$),\n        classText = $$.classText.bind($$);\n    var mainText = $$.main.selectAll('.' + CLASS.texts).selectAll('.' + CLASS.text).data(barOrLineData);\n    var mainTextEnter = mainText.enter().append('text').attr('class', classText).attr('text-anchor', function (d) {\n      return config.axis_rotated ? d.value < 0 ? 'end' : 'start' : 'middle';\n    }).style('stroke', 'none').attr('x', xForText).attr('y', yForText).style('fill', function (d) {\n      return $$.color(d);\n    }).style('fill-opacity', 0);\n    $$.mainText = mainTextEnter.merge(mainText).text(function (d, i, j) {\n      return $$.dataLabelFormat(d.id)(d.value, d.id, i, j);\n    });\n    mainText.exit().transition().duration(durationForExit).style('fill-opacity', 0).remove();\n  };\n\n  ChartInternal.prototype.redrawText = function (xForText, yForText, forFlow, withTransition, transition) {\n    return [(withTransition ? this.mainText.transition(transition) : this.mainText).attr('x', xForText).attr('y', yForText).style('fill', this.color).style('fill-opacity', forFlow ? 0 : this.opacityForText.bind(this))];\n  };\n\n  ChartInternal.prototype.getTextRect = function (text, cls, element) {\n    var dummy = this.d3.select('body').append('div').classed('c3', true),\n        svg = dummy.append('svg').style('visibility', 'hidden').style('position', 'fixed').style('top', 0).style('left', 0),\n        font = this.d3.select(element).style('font'),\n        rect;\n    svg.selectAll('.dummy').data([text]).enter().append('text').classed(cls ? cls : '', true).style('font', font).text(text).each(function () {\n      rect = getBBox(this);\n    });\n    dummy.remove();\n    return rect;\n  };\n\n  ChartInternal.prototype.generateXYForText = function (areaIndices, barIndices, lineIndices, forX) {\n    var $$ = this,\n        getAreaPoints = $$.generateGetAreaPoints(areaIndices, false),\n        getBarPoints = $$.generateGetBarPoints(barIndices, false),\n        getLinePoints = $$.generateGetLinePoints(lineIndices, false),\n        getter = forX ? $$.getXForText : $$.getYForText;\n    return function (d, i) {\n      var getPoints = $$.isAreaType(d) ? getAreaPoints : $$.isBarType(d) ? getBarPoints : getLinePoints;\n      return getter.call($$, getPoints(d, i), d, this);\n    };\n  };\n\n  ChartInternal.prototype.getXForText = function (points, d, textElement) {\n    var $$ = this,\n        box = getBBox(textElement),\n        xPos,\n        padding;\n\n    if ($$.config.axis_rotated) {\n      padding = $$.isBarType(d) ? 4 : 6;\n      xPos = points[2][1] + padding * (d.value < 0 ? -1 : 1);\n    } else {\n      xPos = $$.hasType('bar') ? (points[2][0] + points[0][0]) / 2 : points[0][0];\n    } // show labels regardless of the domain if value is null\n\n\n    if (d.value === null) {\n      if (xPos > $$.width) {\n        xPos = $$.width - box.width;\n      } else if (xPos < 0) {\n        xPos = 4;\n      }\n    }\n\n    return xPos;\n  };\n\n  ChartInternal.prototype.getYForText = function (points, d, textElement) {\n    var $$ = this,\n        box = getBBox(textElement),\n        yPos;\n\n    if ($$.config.axis_rotated) {\n      yPos = (points[0][0] + points[2][0] + box.height * 0.6) / 2;\n    } else {\n      yPos = points[2][1];\n\n      if (d.value < 0 || d.value === 0 && !$$.hasPositiveValue) {\n        yPos += box.height;\n\n        if ($$.isBarType(d) && $$.isSafari()) {\n          yPos -= 3;\n        } else if (!$$.isBarType(d) && $$.isChrome()) {\n          yPos += 3;\n        }\n      } else {\n        yPos += $$.isBarType(d) ? -3 : -6;\n      }\n    } // show labels regardless of the domain if value is null\n\n\n    if (d.value === null && !$$.config.axis_rotated) {\n      if (yPos < box.height) {\n        yPos = box.height;\n      } else if (yPos > this.height) {\n        yPos = this.height - 4;\n      }\n    }\n\n    return yPos;\n  };\n\n  ChartInternal.prototype.initTitle = function () {\n    var $$ = this;\n    $$.title = $$.svg.append('text').text($$.config.title_text).attr('class', $$.CLASS.title);\n  };\n\n  ChartInternal.prototype.redrawTitle = function () {\n    var $$ = this;\n    $$.title.attr('x', $$.xForTitle.bind($$)).attr('y', $$.yForTitle.bind($$));\n  };\n\n  ChartInternal.prototype.xForTitle = function () {\n    var $$ = this,\n        config = $$.config,\n        position = config.title_position || 'left',\n        x;\n\n    if (position.indexOf('right') >= 0) {\n      x = $$.currentWidth - $$.getTextRect($$.title.node().textContent, $$.CLASS.title, $$.title.node()).width - config.title_padding.right;\n    } else if (position.indexOf('center') >= 0) {\n      x = Math.max(($$.currentWidth - $$.getTextRect($$.title.node().textContent, $$.CLASS.title, $$.title.node()).width) / 2, 0);\n    } else {\n      // left\n      x = config.title_padding.left;\n    }\n\n    return x;\n  };\n\n  ChartInternal.prototype.yForTitle = function () {\n    var $$ = this;\n    return $$.config.title_padding.top + $$.getTextRect($$.title.node().textContent, $$.CLASS.title, $$.title.node()).height;\n  };\n\n  ChartInternal.prototype.getTitlePadding = function () {\n    var $$ = this;\n    return $$.yForTitle() + $$.config.title_padding.bottom;\n  };\n\n  function powerOfTen(d) {\n    return d / Math.pow(10, Math.ceil(Math.log(d) / Math.LN10 - 1e-12)) === 1;\n  }\n\n  ChartInternal.prototype.drawColorScale = function () {\n    var $$ = this,\n        d3 = $$.d3,\n        config = $$.config,\n        target = $$.data.targets[0],\n        barWidth,\n        barHeight,\n        axis,\n        points,\n        legendAxis,\n        axisScale,\n        inverseScale,\n        height;\n    barWidth = !isNaN(config.stanford_scaleWidth) ? config.stanford_scaleWidth : 20;\n    barHeight = 5;\n\n    if (barHeight < 0 || barWidth < 0) {\n      throw Error(\"Colorscale's barheight and barwidth must be greater than 0.\");\n    }\n\n    height = $$.height - config.stanford_padding.bottom - config.stanford_padding.top;\n    points = d3.range(config.stanford_padding.bottom, height, barHeight);\n    inverseScale = d3.scaleSequential(target.colors).domain([points[points.length - 1], points[0]]);\n\n    if ($$.colorScale) {\n      $$.colorScale.remove();\n    }\n\n    $$.colorScale = $$.svg.append('g').attr('width', 50).attr('height', height).attr('class', CLASS.colorScale);\n    $$.colorScale.append('g').attr('transform', \"translate(0, \".concat(config.stanford_padding.top, \")\")).selectAll('bars').data(points).enter().append('rect').attr('y', function (d, i) {\n      return i * barHeight;\n    }).attr('x', 0).attr('width', barWidth).attr('height', barHeight).attr('fill', function (d) {\n      return inverseScale(d);\n    }); // Legend Axis\n\n    axisScale = d3.scaleLog().domain([target.minEpochs, target.maxEpochs]).range([points[0] + config.stanford_padding.top + points[points.length - 1] + barHeight - 1, points[0] + config.stanford_padding.top]);\n    legendAxis = d3.axisRight(axisScale);\n\n    if (config.stanford_scaleFormat === 'pow10') {\n      legendAxis.tickValues([1, 10, 100, 1000, 10000, 100000, 1000000, 10000000]);\n    } else if (isFunction(config.stanford_scaleFormat)) {\n      legendAxis.tickFormat(config.stanford_scaleFormat);\n    } else {\n      legendAxis.tickFormat(d3.format('d'));\n    }\n\n    if (isFunction(config.stanford_scaleValues)) {\n      legendAxis.tickValues(config.stanford_scaleValues(target.minEpochs, target.maxEpochs));\n    } // Draw Axis\n\n\n    axis = $$.colorScale.append('g').attr('class', 'legend axis').attr('transform', \"translate(\".concat(barWidth, \",0)\")).call(legendAxis);\n\n    if (config.stanford_scaleFormat === 'pow10') {\n      axis.selectAll('.tick text').text(null).filter(powerOfTen).text(10).append('tspan').attr('dy', '-.7em') // https://bl.ocks.org/mbostock/6738229\n      .text(function (d) {\n        return Math.round(Math.log(d) / Math.LN10);\n      });\n    }\n\n    $$.colorScale.attr('transform', \"translate(\".concat($$.currentWidth - $$.xForColorScale(), \", 0)\"));\n  };\n\n  ChartInternal.prototype.xForColorScale = function () {\n    var $$ = this;\n    return $$.config.stanford_padding.right + getBBox($$.colorScale.node()).width;\n  };\n\n  ChartInternal.prototype.getColorScalePadding = function () {\n    var $$ = this;\n    return $$.xForColorScale() + $$.config.stanford_padding.left + 20;\n  };\n\n  ChartInternal.prototype.isStanfordGraphType = function () {\n    var $$ = this;\n    return $$.config.data_type === 'stanford';\n  };\n\n  ChartInternal.prototype.initStanfordData = function () {\n    var $$ = this,\n        d3 = $$.d3,\n        config = $$.config,\n        target = $$.data.targets[0],\n        epochs,\n        maxEpochs,\n        minEpochs; // Make larger values appear on top\n\n    target.values.sort(compareEpochs); // Get array of epochs\n\n    epochs = target.values.map(function (a) {\n      return a.epochs;\n    });\n    minEpochs = !isNaN(config.stanford_scaleMin) ? config.stanford_scaleMin : d3.min(epochs);\n    maxEpochs = !isNaN(config.stanford_scaleMax) ? config.stanford_scaleMax : d3.max(epochs);\n\n    if (minEpochs > maxEpochs) {\n      throw Error('Number of minEpochs has to be smaller than maxEpochs');\n    }\n\n    target.colors = isFunction(config.stanford_colors) ? config.stanford_colors : d3.interpolateHslLong(d3.hsl(250, 1, 0.5), d3.hsl(0, 1, 0.5));\n    target.colorscale = d3.scaleSequentialLog(target.colors).domain([minEpochs, maxEpochs]);\n    target.minEpochs = minEpochs;\n    target.maxEpochs = maxEpochs;\n  };\n\n  ChartInternal.prototype.getStanfordPointColor = function (d) {\n    var $$ = this,\n        target = $$.data.targets[0];\n    return target.colorscale(d.epochs);\n  }; // http://jsfiddle.net/Xotic750/KtzLq/\n\n\n  ChartInternal.prototype.getCentroid = function (points) {\n    var area = getRegionArea(points);\n    var x = 0,\n        y = 0,\n        i,\n        j,\n        f,\n        point1,\n        point2;\n\n    for (i = 0, j = points.length - 1; i < points.length; j = i, i += 1) {\n      point1 = points[i];\n      point2 = points[j];\n      f = point1.x * point2.y - point2.x * point1.y;\n      x += (point1.x + point2.x) * f;\n      y += (point1.y + point2.y) * f;\n    }\n\n    f = area * 6;\n    return {\n      x: x / f,\n      y: y / f\n    };\n  };\n\n  ChartInternal.prototype.getStanfordTooltipTitle = function (d) {\n    var $$ = this,\n        labelX = $$.axis.getLabelText('x'),\n        labelY = $$.axis.getLabelText('y');\n    return \"\\n      <tr><th>\".concat(labelX ? sanitise(labelX) : 'x', \"</th><th class='value'>\").concat(d.x, \"</th></tr>\\n      <tr><th>\").concat(labelY ? sanitise(labelY) : 'y', \"</th><th class='value'>\").concat(d.value, \"</th></tr>\\n    \");\n  };\n\n  ChartInternal.prototype.countEpochsInRegion = function (region) {\n    var $$ = this,\n        target = $$.data.targets[0],\n        total,\n        count;\n    total = target.values.reduce(function (accumulator, currentValue) {\n      return accumulator + Number(currentValue.epochs);\n    }, 0);\n    count = target.values.reduce(function (accumulator, currentValue) {\n      if (pointInRegion(currentValue, region)) {\n        return accumulator + Number(currentValue.epochs);\n      }\n\n      return accumulator;\n    }, 0);\n    return {\n      value: count,\n      percentage: count !== 0 ? (count / total * 100).toFixed(1) : 0\n    };\n  };\n\n  var getRegionArea = function getRegionArea(points) {\n    // thanks to: https://stackoverflow.com/questions/16282330/find-centerpoint-of-polygon-in-javascript\n    var area = 0,\n        i,\n        j,\n        point1,\n        point2;\n\n    for (i = 0, j = points.length - 1; i < points.length; j = i, i += 1) {\n      point1 = points[i];\n      point2 = points[j];\n      area += point1.x * point2.y;\n      area -= point1.y * point2.x;\n    }\n\n    area /= 2;\n    return area;\n  };\n  var pointInRegion = function pointInRegion(point, region) {\n    // thanks to: http://bl.ocks.org/bycoffe/5575904\n    // ray-casting algorithm based on\n    // http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html\n    var xi,\n        yi,\n        yj,\n        xj,\n        intersect,\n        x = point.x,\n        y = point.value,\n        inside = false;\n\n    for (var i = 0, j = region.length - 1; i < region.length; j = i++) {\n      xi = region[i].x;\n      yi = region[i].y;\n      xj = region[j].x;\n      yj = region[j].y;\n      intersect = yi > y !== yj > y && x < (xj - xi) * (y - yi) / (yj - yi) + xi;\n\n      if (intersect) {\n        inside = !inside;\n      }\n    }\n\n    return inside;\n  };\n  var compareEpochs = function compareEpochs(a, b) {\n    if (a.epochs < b.epochs) {\n      return -1;\n    }\n\n    if (a.epochs > b.epochs) {\n      return 1;\n    }\n\n    return 0;\n  };\n\n  ChartInternal.prototype.initStanfordElements = function () {\n    var $$ = this; // Avoid blocking eventRect\n\n    $$.stanfordElements = $$.main.select('.' + CLASS.chart).append('g').attr('class', CLASS.stanfordElements);\n    $$.stanfordElements.append('g').attr('class', CLASS.stanfordLines);\n    $$.stanfordElements.append('g').attr('class', CLASS.stanfordTexts);\n    $$.stanfordElements.append('g').attr('class', CLASS.stanfordRegions);\n  };\n\n  ChartInternal.prototype.updateStanfordElements = function (duration) {\n    var $$ = this,\n        main = $$.main,\n        config = $$.config,\n        stanfordLine,\n        stanfordLineEnter,\n        stanfordRegion,\n        stanfordRegionEnter,\n        stanfordText,\n        stanfordTextEnter,\n        xvCustom = $$.xvCustom.bind($$),\n        yvCustom = $$.yvCustom.bind($$),\n        countPointsInRegion = $$.countEpochsInRegion.bind($$); // Stanford-Lines\n\n    stanfordLine = main.select('.' + CLASS.stanfordLines).style('shape-rendering', 'geometricprecision').selectAll('.' + CLASS.stanfordLine).data(config.stanford_lines); // enter\n\n    stanfordLineEnter = stanfordLine.enter().append('g').attr('class', function (d) {\n      return CLASS.stanfordLine + (d['class'] ? ' ' + d['class'] : '');\n    });\n    stanfordLineEnter.append('line').attr('x1', function (d) {\n      return config.axis_rotated ? yvCustom(d, 'value_y1') : xvCustom(d, 'value_x1');\n    }).attr('x2', function (d) {\n      return config.axis_rotated ? yvCustom(d, 'value_y2') : xvCustom(d, 'value_x2');\n    }).attr('y1', function (d) {\n      return config.axis_rotated ? xvCustom(d, 'value_x1') : yvCustom(d, 'value_y1');\n    }).attr('y2', function (d) {\n      return config.axis_rotated ? xvCustom(d, 'value_x2') : yvCustom(d, 'value_y2');\n    }).style('opacity', 0); // update\n\n    $$.stanfordLines = stanfordLineEnter.merge(stanfordLine);\n    $$.stanfordLines.select('line').transition().duration(duration).attr('x1', function (d) {\n      return config.axis_rotated ? yvCustom(d, 'value_y1') : xvCustom(d, 'value_x1');\n    }).attr('x2', function (d) {\n      return config.axis_rotated ? yvCustom(d, 'value_y2') : xvCustom(d, 'value_x2');\n    }).attr('y1', function (d) {\n      return config.axis_rotated ? xvCustom(d, 'value_x1') : yvCustom(d, 'value_y1');\n    }).attr('y2', function (d) {\n      return config.axis_rotated ? xvCustom(d, 'value_x2') : yvCustom(d, 'value_y2');\n    }).style('opacity', 1); // exit\n\n    stanfordLine.exit().transition().duration(duration).style('opacity', 0).remove(); // Stanford-Text\n\n    stanfordText = main.select('.' + CLASS.stanfordTexts).selectAll('.' + CLASS.stanfordText).data(config.stanford_texts); // enter\n\n    stanfordTextEnter = stanfordText.enter().append('g').attr('class', function (d) {\n      return CLASS.stanfordText + (d['class'] ? ' ' + d['class'] : '');\n    });\n    stanfordTextEnter.append('text').attr('x', function (d) {\n      return config.axis_rotated ? yvCustom(d, 'y') : xvCustom(d, 'x');\n    }).attr('y', function (d) {\n      return config.axis_rotated ? xvCustom(d, 'x') : yvCustom(d, 'y');\n    }).style('opacity', 0); // update\n\n    $$.stanfordTexts = stanfordTextEnter.merge(stanfordText);\n    $$.stanfordTexts.select('text').transition().duration(duration).attr('x', function (d) {\n      return config.axis_rotated ? yvCustom(d, 'y') : xvCustom(d, 'x');\n    }).attr('y', function (d) {\n      return config.axis_rotated ? xvCustom(d, 'x') : yvCustom(d, 'y');\n    }).text(function (d) {\n      return d.content;\n    }).style('opacity', 1); // exit\n\n    stanfordText.exit().transition().duration(duration).style('opacity', 0).remove(); // Stanford-Regions\n\n    stanfordRegion = main.select('.' + CLASS.stanfordRegions).selectAll('.' + CLASS.stanfordRegion).data(config.stanford_regions); // enter\n\n    stanfordRegionEnter = stanfordRegion.enter().append('g').attr('class', function (d) {\n      return CLASS.stanfordRegion + (d['class'] ? ' ' + d['class'] : '');\n    });\n    stanfordRegionEnter.append('polygon').attr('points', function (d) {\n      return d.points.map(function (value) {\n        return [config.axis_rotated ? yvCustom(value, 'y') : xvCustom(value, 'x'), config.axis_rotated ? xvCustom(value, 'x') : yvCustom(value, 'y')].join(',');\n      }).join(' ');\n    }).style('opacity', 0);\n    stanfordRegionEnter.append('text').attr('x', function (d) {\n      return $$.getCentroid(d.points).x;\n    }).attr('y', function (d) {\n      return $$.getCentroid(d.points).y;\n    }).style('opacity', 0); // update\n\n    $$.stanfordRegions = stanfordRegionEnter.merge(stanfordRegion);\n    $$.stanfordRegions.select('polygon').transition().duration(duration).attr('points', function (d) {\n      return d.points.map(function (value) {\n        return [config.axis_rotated ? yvCustom(value, 'y') : xvCustom(value, 'x'), config.axis_rotated ? xvCustom(value, 'x') : yvCustom(value, 'y')].join(',');\n      }).join(' ');\n    }).style('opacity', function (d) {\n      return d.opacity ? d.opacity : 0.2;\n    });\n    $$.stanfordRegions.select('text').transition().duration(duration).attr('x', function (d) {\n      return config.axis_rotated ? yvCustom($$.getCentroid(d.points), 'y') : xvCustom($$.getCentroid(d.points), 'x');\n    }).attr('y', function (d) {\n      return config.axis_rotated ? xvCustom($$.getCentroid(d.points), 'x') : yvCustom($$.getCentroid(d.points), 'y');\n    }).text(function (d) {\n      if (d.text) {\n        var value, percentage, temp;\n\n        if ($$.isStanfordGraphType()) {\n          temp = countPointsInRegion(d.points);\n          value = temp.value;\n          percentage = temp.percentage;\n        }\n\n        return d.text(value, percentage);\n      }\n\n      return '';\n    }).attr('text-anchor', 'middle').attr('dominant-baseline', 'middle').style('opacity', 1); // exit\n\n    stanfordRegion.exit().transition().duration(duration).style('opacity', 0).remove();\n  };\n\n  ChartInternal.prototype.initTooltip = function () {\n    var $$ = this,\n        config = $$.config,\n        i;\n    $$.tooltip = $$.selectChart.style('position', 'relative').append('div').attr('class', CLASS.tooltipContainer).style('position', 'absolute').style('pointer-events', 'none').style('display', 'none'); // Show tooltip if needed\n\n    if (config.tooltip_init_show) {\n      if ($$.isTimeSeries() && isString(config.tooltip_init_x)) {\n        config.tooltip_init_x = $$.parseDate(config.tooltip_init_x);\n\n        for (i = 0; i < $$.data.targets[0].values.length; i++) {\n          if ($$.data.targets[0].values[i].x - config.tooltip_init_x === 0) {\n            break;\n          }\n        }\n\n        config.tooltip_init_x = i;\n      }\n\n      $$.tooltip.html(config.tooltip_contents.call($$, $$.data.targets.map(function (d) {\n        return $$.addName(d.values[config.tooltip_init_x]);\n      }), $$.axis.getXAxisTickFormat(), $$.getYFormat($$.hasArcType()), $$.color));\n      $$.tooltip.style('top', config.tooltip_init_position.top).style('left', config.tooltip_init_position.left).style('display', 'block');\n    }\n  };\n\n  ChartInternal.prototype.getTooltipSortFunction = function () {\n    var $$ = this,\n        config = $$.config;\n\n    if (config.data_groups.length === 0 || config.tooltip_order !== undefined) {\n      // if data are not grouped or if an order is specified\n      // for the tooltip values we sort them by their values\n      var order = config.tooltip_order;\n\n      if (order === undefined) {\n        order = config.data_order;\n      }\n\n      var valueOf = function valueOf(obj) {\n        return obj ? obj.value : null;\n      }; // if data are not grouped, we sort them by their value\n\n\n      if (isString(order) && order.toLowerCase() === 'asc') {\n        return function (a, b) {\n          return valueOf(a) - valueOf(b);\n        };\n      } else if (isString(order) && order.toLowerCase() === 'desc') {\n        return function (a, b) {\n          return valueOf(b) - valueOf(a);\n        };\n      } else if (isFunction(order)) {\n        // if the function is from data_order we need\n        // to wrap the returned function in order to format\n        // the sorted value to the expected format\n        var sortFunction = order;\n\n        if (config.tooltip_order === undefined) {\n          sortFunction = function sortFunction(a, b) {\n            return order(a ? {\n              id: a.id,\n              values: [a]\n            } : null, b ? {\n              id: b.id,\n              values: [b]\n            } : null);\n          };\n        }\n\n        return sortFunction;\n      } else if (isArray(order)) {\n        return function (a, b) {\n          return order.indexOf(a.id) - order.indexOf(b.id);\n        };\n      }\n    } else {\n      // if data are grouped, we follow the order of grouped targets\n      var ids = $$.orderTargets($$.data.targets).map(function (i) {\n        return i.id;\n      }); // if it was either asc or desc we need to invert the order\n      // returned by orderTargets\n\n      if ($$.isOrderAsc() || $$.isOrderDesc()) {\n        ids = ids.reverse();\n      }\n\n      return function (a, b) {\n        return ids.indexOf(a.id) - ids.indexOf(b.id);\n      };\n    }\n  };\n\n  ChartInternal.prototype.getTooltipContent = function (d, defaultTitleFormat, defaultValueFormat, color) {\n    var $$ = this,\n        config = $$.config,\n        titleFormat = config.tooltip_format_title || defaultTitleFormat,\n        nameFormat = config.tooltip_format_name || function (name) {\n      return name;\n    },\n        text,\n        i,\n        title,\n        value,\n        name,\n        bgcolor;\n\n    var valueFormat = config.tooltip_format_value;\n\n    if (!valueFormat) {\n      valueFormat = $$.isTargetNormalized(d.id) ? function (v, ratio) {\n        return \"\".concat((ratio * 100).toFixed(2), \"%\");\n      } : defaultValueFormat;\n    }\n\n    var tooltipSortFunction = this.getTooltipSortFunction();\n\n    if (tooltipSortFunction) {\n      d.sort(tooltipSortFunction);\n    }\n\n    for (i = 0; i < d.length; i++) {\n      if (!(d[i] && (d[i].value || d[i].value === 0))) {\n        continue;\n      }\n\n      if ($$.isStanfordGraphType()) {\n        // Custom tooltip for stanford plots\n        if (!text) {\n          title = $$.getStanfordTooltipTitle(d[i]);\n          text = \"<table class='\" + $$.CLASS.tooltip + \"'>\" + title;\n        }\n\n        bgcolor = $$.getStanfordPointColor(d[i]);\n        name = sanitise(config.data_epochs); // Epochs key name\n\n        value = d[i].epochs;\n      } else {\n        // Regular tooltip\n        if (!text) {\n          title = sanitise(titleFormat ? titleFormat(d[i].x, d[i].index) : d[i].x);\n          text = \"<table class='\" + $$.CLASS.tooltip + \"'>\" + (title || title === 0 ? \"<tr><th colspan='2'>\" + title + '</th></tr>' : '');\n        }\n\n        value = sanitise(valueFormat(d[i].value, d[i].ratio, d[i].id, d[i].index, d));\n\n        if (value !== undefined) {\n          // Skip elements when their name is set to null\n          if (d[i].name === null) {\n            continue;\n          }\n\n          name = sanitise(nameFormat(d[i].name, d[i].ratio, d[i].id, d[i].index));\n          bgcolor = $$.levelColor ? $$.levelColor(d[i].value) : color(d[i].id);\n        }\n      }\n\n      if (value !== undefined) {\n        text += \"<tr class='\" + $$.CLASS.tooltipName + '-' + $$.getTargetSelectorSuffix(d[i].id) + \"'>\";\n        text += \"<td class='name'><span style='background-color:\" + bgcolor + \"'></span>\" + name + '</td>';\n        text += \"<td class='value'>\" + value + '</td>';\n        text += '</tr>';\n      }\n    }\n\n    return text + '</table>';\n  };\n\n  ChartInternal.prototype.tooltipPosition = function (dataToShow, tWidth, tHeight, element) {\n    var $$ = this,\n        config = $$.config,\n        d3 = $$.d3;\n    var svgLeft, tooltipLeft, tooltipRight, tooltipTop, chartRight;\n    var forArc = $$.hasArcType(),\n        mouse = d3.mouse(element); // Determin tooltip position\n\n    if (forArc) {\n      tooltipLeft = ($$.width - ($$.isLegendRight ? $$.getLegendWidth() : 0)) / 2 + mouse[0];\n      tooltipTop = ($$.hasType('gauge') ? $$.height : $$.height / 2) + mouse[1] + 20;\n    } else {\n      svgLeft = $$.getSvgLeft(true);\n\n      if (config.axis_rotated) {\n        tooltipLeft = svgLeft + mouse[0] + 100;\n        tooltipRight = tooltipLeft + tWidth;\n        chartRight = $$.currentWidth - $$.getCurrentPaddingRight();\n        tooltipTop = $$.x(dataToShow[0].x) + 20;\n      } else {\n        tooltipLeft = svgLeft + $$.getCurrentPaddingLeft(true) + $$.x(dataToShow[0].x) + 20;\n        tooltipRight = tooltipLeft + tWidth;\n        chartRight = svgLeft + $$.currentWidth - $$.getCurrentPaddingRight();\n        tooltipTop = mouse[1] + 15;\n      }\n\n      if (tooltipRight > chartRight) {\n        // 20 is needed for Firefox to keep tooltip width\n        tooltipLeft -= tooltipRight - chartRight + 20;\n      }\n\n      if (tooltipTop + tHeight > $$.currentHeight) {\n        tooltipTop -= tHeight + 30;\n      }\n    }\n\n    if (tooltipTop < 0) {\n      tooltipTop = 0;\n    }\n\n    return {\n      top: tooltipTop,\n      left: tooltipLeft\n    };\n  };\n\n  ChartInternal.prototype.showTooltip = function (selectedData, element) {\n    var $$ = this,\n        config = $$.config;\n    var tWidth, tHeight, position;\n    var forArc = $$.hasArcType(),\n        dataToShow = selectedData.filter(function (d) {\n      return d && isValue(d.value);\n    }),\n        positionFunction = config.tooltip_position || ChartInternal.prototype.tooltipPosition;\n\n    if (dataToShow.length === 0 || !config.tooltip_show) {\n      $$.hideTooltip();\n      return;\n    }\n\n    $$.tooltip.html(config.tooltip_contents.call($$, selectedData, $$.axis.getXAxisTickFormat(), $$.getYFormat(forArc), $$.color)).style('display', 'block'); // Get tooltip dimensions\n\n    tWidth = $$.tooltip.property('offsetWidth');\n    tHeight = $$.tooltip.property('offsetHeight');\n    position = positionFunction.call(this, dataToShow, tWidth, tHeight, element); // Set tooltip\n\n    $$.tooltip.style('top', position.top + 'px').style('left', position.left + 'px');\n  };\n\n  ChartInternal.prototype.hideTooltip = function () {\n    this.tooltip.style('display', 'none');\n  };\n\n  ChartInternal.prototype.setTargetType = function (targetIds, type) {\n    var $$ = this,\n        config = $$.config;\n    $$.mapToTargetIds(targetIds).forEach(function (id) {\n      $$.withoutFadeIn[id] = type === config.data_types[id];\n      config.data_types[id] = type;\n    });\n\n    if (!targetIds) {\n      config.data_type = type;\n    }\n  };\n\n  ChartInternal.prototype.hasType = function (type, targets) {\n    var $$ = this,\n        types = $$.config.data_types,\n        has = false;\n    targets = targets || $$.data.targets;\n\n    if (targets && targets.length) {\n      targets.forEach(function (target) {\n        var t = types[target.id];\n\n        if (t && t.indexOf(type) >= 0 || !t && type === 'line') {\n          has = true;\n        }\n      });\n    } else if (Object.keys(types).length) {\n      Object.keys(types).forEach(function (id) {\n        if (types[id] === type) {\n          has = true;\n        }\n      });\n    } else {\n      has = $$.config.data_type === type;\n    }\n\n    return has;\n  };\n\n  ChartInternal.prototype.hasArcType = function (targets) {\n    return this.hasType('pie', targets) || this.hasType('donut', targets) || this.hasType('gauge', targets);\n  };\n\n  ChartInternal.prototype.isLineType = function (d) {\n    var config = this.config,\n        id = isString(d) ? d : d.id;\n    return !config.data_types[id] || ['line', 'spline', 'area', 'area-spline', 'step', 'area-step'].indexOf(config.data_types[id]) >= 0;\n  };\n\n  ChartInternal.prototype.isStepType = function (d) {\n    var id = isString(d) ? d : d.id;\n    return ['step', 'area-step'].indexOf(this.config.data_types[id]) >= 0;\n  };\n\n  ChartInternal.prototype.isSplineType = function (d) {\n    var id = isString(d) ? d : d.id;\n    return ['spline', 'area-spline'].indexOf(this.config.data_types[id]) >= 0;\n  };\n\n  ChartInternal.prototype.isAreaType = function (d) {\n    var id = isString(d) ? d : d.id;\n    return ['area', 'area-spline', 'area-step'].indexOf(this.config.data_types[id]) >= 0;\n  };\n\n  ChartInternal.prototype.isBarType = function (d) {\n    var id = isString(d) ? d : d.id;\n    return this.config.data_types[id] === 'bar';\n  };\n\n  ChartInternal.prototype.isScatterType = function (d) {\n    var id = isString(d) ? d : d.id;\n    return this.config.data_types[id] === 'scatter';\n  };\n\n  ChartInternal.prototype.isStanfordType = function (d) {\n    var id = isString(d) ? d : d.id;\n    return this.config.data_types[id] === 'stanford';\n  };\n\n  ChartInternal.prototype.isPieType = function (d) {\n    var id = isString(d) ? d : d.id;\n    return this.config.data_types[id] === 'pie';\n  };\n\n  ChartInternal.prototype.isGaugeType = function (d) {\n    var id = isString(d) ? d : d.id;\n    return this.config.data_types[id] === 'gauge';\n  };\n\n  ChartInternal.prototype.isDonutType = function (d) {\n    var id = isString(d) ? d : d.id;\n    return this.config.data_types[id] === 'donut';\n  };\n\n  ChartInternal.prototype.isArcType = function (d) {\n    return this.isPieType(d) || this.isDonutType(d) || this.isGaugeType(d);\n  };\n\n  ChartInternal.prototype.lineData = function (d) {\n    return this.isLineType(d) ? [d] : [];\n  };\n\n  ChartInternal.prototype.arcData = function (d) {\n    return this.isArcType(d.data) ? [d] : [];\n  };\n  /* not used\n   function scatterData(d) {\n   return isScatterType(d) ? d.values : [];\n   }\n   */\n\n\n  ChartInternal.prototype.barData = function (d) {\n    return this.isBarType(d) ? d.values : [];\n  };\n\n  ChartInternal.prototype.lineOrScatterOrStanfordData = function (d) {\n    return this.isLineType(d) || this.isScatterType(d) || this.isStanfordType(d) ? d.values : [];\n  };\n\n  ChartInternal.prototype.barOrLineData = function (d) {\n    return this.isBarType(d) || this.isLineType(d) ? d.values : [];\n  };\n\n  ChartInternal.prototype.isSafari = function () {\n    var ua = window.navigator.userAgent;\n    return ua.indexOf('Safari') >= 0 && ua.indexOf('Chrome') < 0;\n  };\n\n  ChartInternal.prototype.isChrome = function () {\n    var ua = window.navigator.userAgent;\n    return ua.indexOf('Chrome') >= 0;\n  };\n\n  ChartInternal.prototype.initZoom = function () {\n    var $$ = this,\n        d3 = $$.d3,\n        config = $$.config,\n        startEvent;\n    $$.zoom = d3.zoom().on('start', function () {\n      if (config.zoom_type !== 'scroll') {\n        return;\n      }\n\n      var e = d3.event.sourceEvent;\n\n      if (e && e.type === 'brush') {\n        return;\n      }\n\n      startEvent = e;\n      config.zoom_onzoomstart.call($$.api, e);\n    }).on('zoom', function () {\n      if (config.zoom_type !== 'scroll') {\n        return;\n      }\n\n      var e = d3.event.sourceEvent;\n\n      if (e && e.type === 'brush') {\n        return;\n      }\n\n      $$.redrawForZoom();\n      config.zoom_onzoom.call($$.api, $$.x.orgDomain());\n    }).on('end', function () {\n      if (config.zoom_type !== 'scroll') {\n        return;\n      }\n\n      var e = d3.event.sourceEvent;\n\n      if (e && e.type === 'brush') {\n        return;\n      } // if click, do nothing. otherwise, click interaction will be canceled.\n\n\n      if (e && startEvent.clientX === e.clientX && startEvent.clientY === e.clientY) {\n        return;\n      }\n\n      config.zoom_onzoomend.call($$.api, $$.x.orgDomain());\n    });\n\n    $$.zoom.updateDomain = function () {\n      if (d3.event && d3.event.transform) {\n        $$.x.domain(d3.event.transform.rescaleX($$.subX).domain());\n      }\n\n      return this;\n    };\n\n    $$.zoom.updateExtent = function () {\n      this.scaleExtent([1, Infinity]).translateExtent([[0, 0], [$$.width, $$.height]]).extent([[0, 0], [$$.width, $$.height]]);\n      return this;\n    };\n\n    $$.zoom.update = function () {\n      return this.updateExtent().updateDomain();\n    };\n\n    return $$.zoom.updateExtent();\n  };\n\n  ChartInternal.prototype.zoomTransform = function (range) {\n    var $$ = this,\n        s = [$$.x(range[0]), $$.x(range[1])];\n    return $$.d3.zoomIdentity.scale($$.width / (s[1] - s[0])).translate(-s[0], 0);\n  };\n\n  ChartInternal.prototype.initDragZoom = function () {\n    var $$ = this;\n    var d3 = $$.d3;\n    var config = $$.config;\n    var context = $$.context = $$.svg;\n    var brushXPos = $$.margin.left + 20.5;\n    var brushYPos = $$.margin.top + 0.5;\n\n    if (!(config.zoom_type === 'drag' && config.zoom_enabled)) {\n      return;\n    }\n\n    var getZoomedDomain = function getZoomedDomain(selection) {\n      return selection && selection.map(function (x) {\n        return $$.x.invert(x);\n      });\n    };\n\n    var brush = $$.dragZoomBrush = d3.brushX().on('start', function () {\n      $$.api.unzoom();\n      $$.svg.select('.' + CLASS.dragZoom).classed('disabled', false);\n      config.zoom_onzoomstart.call($$.api, d3.event.sourceEvent);\n    }).on('brush', function () {\n      config.zoom_onzoom.call($$.api, getZoomedDomain(d3.event.selection));\n    }).on('end', function () {\n      if (d3.event.selection == null) {\n        return;\n      }\n\n      var zoomedDomain = getZoomedDomain(d3.event.selection);\n\n      if (!config.zoom_disableDefaultBehavior) {\n        $$.api.zoom(zoomedDomain);\n      }\n\n      $$.svg.select('.' + CLASS.dragZoom).classed('disabled', true);\n      config.zoom_onzoomend.call($$.api, zoomedDomain);\n    });\n    context.append('g').classed(CLASS.dragZoom, true).attr('clip-path', $$.clipPath).attr('transform', 'translate(' + brushXPos + ',' + brushYPos + ')').call(brush);\n  };\n\n  ChartInternal.prototype.getZoomDomain = function () {\n    var $$ = this,\n        config = $$.config,\n        d3 = $$.d3,\n        min = d3.min([$$.orgXDomain[0], config.zoom_x_min]),\n        max = d3.max([$$.orgXDomain[1], config.zoom_x_max]);\n    return [min, max];\n  };\n\n  ChartInternal.prototype.redrawForZoom = function () {\n    var $$ = this,\n        d3 = $$.d3,\n        config = $$.config,\n        zoom = $$.zoom,\n        x = $$.x;\n\n    if (!config.zoom_enabled) {\n      return;\n    }\n\n    if ($$.filterTargetsToShow($$.data.targets).length === 0) {\n      return;\n    }\n\n    zoom.update();\n\n    if (config.zoom_disableDefaultBehavior) {\n      return;\n    }\n\n    if ($$.isCategorized() && x.orgDomain()[0] === $$.orgXDomain[0]) {\n      x.domain([$$.orgXDomain[0] - 1e-10, x.orgDomain()[1]]);\n    }\n\n    $$.redraw({\n      withTransition: false,\n      withY: config.zoom_rescale,\n      withSubchart: false,\n      withEventRect: false,\n      withDimension: false\n    });\n\n    if (d3.event.sourceEvent && d3.event.sourceEvent.type === 'mousemove') {\n      $$.cancelClick = true;\n    }\n  };\n\n  return c3;\n\n})));\n"]},"metadata":{},"sourceType":"script"}